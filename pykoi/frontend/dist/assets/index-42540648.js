(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function x(){}const Hs=e=>e;function Jn(e,t){for(const n in t)e[n]=t[n];return e}function qs(e){return e()}function Yl(){return Object.create(null)}function ge(e){e.forEach(qs)}function Qe(e){return typeof e=="function"}function re(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function _u(e){return Object.keys(e).length===0}function yl(e,...t){if(e==null)return x;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function vu(e){let t;return yl(e,n=>t=n)(),t}function le(e,t,n){e.$$.on_destroy.push(yl(t,n))}function qr(e){return e??""}function Ne(e,t,n){return e.set(n),t}function wn(e){return e&&Qe(e.destroy)?e.destroy:x}const Ls=typeof window<"u";let js=Ls?()=>window.performance.now():()=>Date.now(),Sr=Ls?e=>requestAnimationFrame(e):x;const Ut=new Set;function xs(e){Ut.forEach(t=>{t.c(e)||(Ut.delete(t),t.f())}),Ut.size!==0&&Sr(xs)}function Gs(e){let t;return Ut.size===0&&Sr(xs),{promise:new Promise(n=>{Ut.add(t={c:e,f:n})}),abort(){Ut.delete(t)}}}let kl=!1;function bu(){kl=!0}function wu(){kl=!1}function yu(e,t,n,l){for(;e<t;){const r=e+(t-e>>1);n(r)<=l?e=r+1:t=r}return e}function ku(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const a=[];for(let f=0;f<t.length;f++){const c=t[f];c.claim_order!==void 0&&a.push(c)}t=a}const n=new Int32Array(t.length+1),l=new Int32Array(t.length);n[0]=-1;let r=0;for(let a=0;a<t.length;a++){const f=t[a].claim_order,c=(r>0&&t[n[r]].claim_order<=f?r+1:yu(1,r,g=>t[n[g]].claim_order,f))-1;l[a]=n[c]+1;const d=c+1;n[d]=a,r=Math.max(d,r)}const o=[],s=[];let u=t.length-1;for(let a=n[r]+1;a!=0;a=l[a-1]){for(o.push(t[a-1]);u>=a;u--)s.push(t[u]);u--}for(;u>=0;u--)s.push(t[u]);o.reverse(),s.sort((a,f)=>a.claim_order-f.claim_order);for(let a=0,f=0;a<s.length;a++){for(;f<o.length&&s[a].claim_order>=o[f].claim_order;)f++;const c=f<o.length?o[f]:null;e.insertBefore(s[a],c)}}function b(e,t){e.appendChild(t)}function Bs(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Su(e){const t=A("style");return Cu(Bs(e),t),t.sheet}function Cu(e,t){return b(e.head||e,t),t.sheet}function $u(e,t){if(kl){for(ku(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function Ru(e,t,n){kl&&!n?$u(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function ue(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function A(e){return document.createElement(e)}function j(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function L(e){return document.createTextNode(e)}function P(){return L(" ")}function _e(){return L("")}function B(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Au(e){return Array.from(e.childNodes)}function Mu(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function Eu(e,t,n,l,r=!1){Mu(e);const o=(()=>{for(let s=e.claim_info.last_index;s<e.length;s++){const u=e[s];if(t(u)){const a=n(u);return a===void 0?e.splice(s,1):e[s]=a,r||(e.claim_info.last_index=s),u}}for(let s=e.claim_info.last_index-1;s>=0;s--){const u=e[s];if(t(u)){const a=n(u);return a===void 0?e.splice(s,1):e[s]=a,r?a===void 0&&e.claim_info.last_index--:e.claim_info.last_index=s,u}}return l()})();return o.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,o}function Fu(e,t){return Eu(e,n=>n.nodeType===3,n=>{const l=""+t;if(n.data.startsWith(l)){if(n.data.length!==l.length)return n.splitText(l.length)}else n.data=l},()=>L(t),!0)}function W(e,t){t=""+t,e.data!==t&&(e.data=t)}function lt(e,t){e.value=t??""}function ye(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function Zn(e,t,n){for(let l=0;l<e.options.length;l+=1){const r=e.options[l];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Us(e){const t=e.querySelector(":checked");return t&&t.__value}let Nn;function Du(){if(Nn===void 0){Nn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Nn=!0}}return Nn}function ot(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const l=A("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const r=Du();let o;return r?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=B(window,"message",s=>{s.source===l.contentWindow&&t()})):(l.src="about:blank",l.onload=()=>{o=B(l.contentWindow,"resize",t),t()}),b(e,l),()=>{(r||o&&l.contentWindow)&&o(),N(l)}}function It(e,t,n){e.classList[n?"add":"remove"](t)}function Iu(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,l,t),r}function St(e,t){return new e(t)}const el=new Map;let tl=0;function Nu(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Pu(e,t){const n={stylesheet:Su(t),rules:{}};return el.set(e,n),n}function Lr(e,t,n,l,r,o,s,u=0){const a=16.666/l;let f=`{
`;for(let _=0;_<=1;_+=a){const w=t+(n-t)*o(_);f+=_*100+`%{${s(w,1-w)}}
`}const c=f+`100% {${s(n,1-n)}}
}`,d=`__svelte_${Nu(c)}_${u}`,g=Bs(e),{stylesheet:p,rules:m}=el.get(g)||Pu(g,e);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${c}`,p.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${d} ${l}ms linear ${r}ms 1 both`,tl+=1,d}function Tu(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),r=n.length-l.length;r&&(e.style.animation=l.join(", "),tl-=r,tl||Ou())}function Ou(){Sr(()=>{tl||(el.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&N(t)}),el.clear())})}let Kt;function Pt(e){Kt=e}function Vu(){if(!Kt)throw new Error("Function called outside component initialization");return Kt}function st(e){Vu().$$.on_mount.push(e)}const xt=[],yn=[];let Wt=[];const jr=[],zu=Promise.resolve();let Ql=!1;function Hu(){Ql||(Ql=!0,zu.then(Ws))}function ke(e){Wt.push(e)}const $l=new Set;let Ht=0;function Ws(){if(Ht!==0)return;const e=Kt;do{try{for(;Ht<xt.length;){const t=xt[Ht];Ht++,Pt(t),qu(t.$$)}}catch(t){throw xt.length=0,Ht=0,t}for(Pt(null),xt.length=0,Ht=0;yn.length;)yn.pop()();for(let t=0;t<Wt.length;t+=1){const n=Wt[t];$l.has(n)||($l.add(n),n())}Wt.length=0}while(xt.length);for(;jr.length;)jr.pop()();Ql=!1,$l.clear(),Pt(e)}function qu(e){if(e.fragment!==null){e.update(),ge(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ke)}}function Lu(e){const t=[],n=[];Wt.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),Wt=t}let rn;function ju(){return rn||(rn=Promise.resolve(),rn.then(()=>{rn=null})),rn}function Rl(e,t,n){e.dispatchEvent(Iu(`${t?"intro":"outro"}${n}`))}const Bn=new Set;let ut;function ce(){ut={r:0,c:[],p:ut}}function de(){ut.r||ge(ut.c),ut=ut.p}function V(e,t){e&&e.i&&(Bn.delete(e),e.i(t))}function H(e,t,n,l){if(e&&e.o){if(Bn.has(e))return;Bn.add(e),ut.c.push(()=>{Bn.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const xu={duration:0};function Ze(e,t,n,l){const r={direction:"both"};let o=t(e,n,r),s=l?0:1,u=null,a=null,f=null;function c(){f&&Tu(e,f)}function d(p,m){const v=p.b-s;return m*=Math.abs(v),{a:s,b:p.b,d:v,duration:m,start:p.start,end:p.start+m,group:p.group}}function g(p){const{delay:m=0,duration:v=300,easing:_=Hs,tick:w=x,css:y}=o||xu,$={start:js()+m,b:p};p||($.group=ut,ut.r+=1),u||a?a=$:(y&&(c(),f=Lr(e,s,p,v,m,_,y)),p&&w(0,1),u=d($,v),ke(()=>Rl(e,p,"start")),Gs(M=>{if(a&&M>a.start&&(u=d(a,v),a=null,Rl(e,u.b,"start"),y&&(c(),f=Lr(e,s,u.b,u.duration,0,_,o.css))),u){if(M>=u.end)w(s=u.b,1-s),Rl(e,u.b,"end"),a||(u.b?c():--u.group.r||ge(u.group.c)),u=null;else if(M>=u.start){const k=M-u.start;s=u.a+u.d*_(k/u.duration),w(s,1-s)}}return!!(u||a)}))}return{run(p){Qe(o)?ju().then(()=>{o=o(r),g(p)}):g(p)},end(){c(),u=a=null}}}function Ot(e,t){e.d(1),t.delete(e.key)}function Xs(e,t){H(e,1,1,()=>{t.delete(e.key)})}function ct(e,t,n,l,r,o,s,u,a,f,c,d){let g=e.length,p=o.length,m=g;const v={};for(;m--;)v[e[m].key]=m;const _=[],w=new Map,y=new Map,$=[];for(m=p;m--;){const S=d(r,o,m),R=n(S);let C=s.get(R);C?l&&$.push(()=>C.p(S,t)):(C=f(R,S),C.c()),w.set(R,_[m]=C),R in v&&y.set(R,Math.abs(m-v[R]))}const M=new Set,k=new Set;function E(S){V(S,1),S.m(u,c),s.set(S.key,S),c=S.first,p--}for(;g&&p;){const S=_[p-1],R=e[g-1],C=S.key,F=R.key;S===R?(c=S.first,g--,p--):w.has(F)?!s.has(C)||M.has(C)?E(S):k.has(F)?g--:y.get(C)>y.get(F)?(k.add(C),E(S)):(M.add(F),g--):(a(R,s),g--)}for(;g--;){const S=e[g];w.has(S.key)||a(S,s)}for(;p;)E(_[p-1]);return ge($),_}function Ys(e,t){const n={},l={},r={$$scope:1};let o=e.length;for(;o--;){const s=e[o],u=t[o];if(u){for(const a in s)a in u||(l[a]=1);for(const a in u)r[a]||(n[a]=u[a],r[a]=1);e[o]=u}else for(const a in s)r[a]=1}for(const s in l)s in n||(n[s]=void 0);return n}function Qs(e){return typeof e=="object"&&e!==null?e:{}}const Gu=/[&"]/g,Bu=/[&<]/g;function Uu(e,t=!1){const n=String(e),l=t?Gu:Bu;l.lastIndex=0;let r="",o=0;for(;l.test(n);){const s=l.lastIndex-1,u=n[s];r+=n.substring(o,s)+(u==="&"?"&amp;":u==='"'?"&quot;":"&lt;"),o=s+1}return r+n.substring(o)}function Wu(e,t){if(!e||!e.$$render)throw t==="svelte:component"&&(t+=" this={...}"),new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${t}>.`);return e}let Al;function Ks(e){function t(n,l,r,o,s){const u=Kt,a={on_destroy:Al,context:new Map(s||(u?u.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:Yl()};Pt({$$:a});const f=e(n,l,r,o);return Pt(u),f}return{render:(n={},{$$slots:l={},context:r=new Map}={})=>{Al=[];const o={title:"",head:"",css:new Set},s=t(o,n,{},l,r);return ge(Al),{html:s,css:{code:Array.from(o.css).map(u=>u.code).join(`
`),map:null},head:o.title+o.head}},$$render:t}}function te(e){e&&e.c()}function Xu(e,t){e&&e.l(t)}function J(e,t,n,l){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),l||ke(()=>{const s=e.$$.on_mount.map(qs).filter(Qe);e.$$.on_destroy?e.$$.on_destroy.push(...s):ge(s),e.$$.on_mount=[]}),o.forEach(ke)}function Z(e,t){const n=e.$$;n.fragment!==null&&(Lu(n.after_update),ge(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Yu(e,t){e.$$.dirty[0]===-1&&(xt.push(e),Hu(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(e,t,n,l,r,o,s,u=[-1]){const a=Kt;Pt(e);const f=e.$$={fragment:null,ctx:[],props:o,update:x,not_equal:r,bound:Yl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Yl(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};s&&s(f.root);let c=!1;if(f.ctx=n?n(e,t.props||{},(d,g,...p)=>{const m=p.length?p[0]:g;return f.ctx&&r(f.ctx[d],f.ctx[d]=m)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](m),c&&Yu(e,d)),g}):[],f.update(),c=!0,ge(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){bu();const d=Au(t.target);f.fragment&&f.fragment.l(d),d.forEach(N)}else f.fragment&&f.fragment.c();t.intro&&V(e.$$.fragment),J(e,t.target,t.anchor,t.customElement),wu(),Ws()}Pt(a)}class ie{$destroy(){Z(this,1),this.$destroy=x}$on(t,n){if(!Qe(n))return x;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!_u(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const qt=[];function Kl(e,t){return{subscribe:Ae(e,t).subscribe}}function Ae(e,t=x){let n;const l=new Set;function r(u){if(re(e,u)&&(e=u,n)){const a=!qt.length;for(const f of l)f[1](),qt.push(f,e);if(a){for(let f=0;f<qt.length;f+=2)qt[f][0](qt[f+1]);qt.length=0}}}function o(u){r(u(e))}function s(u,a=x){const f=[u,a];return l.add(f),l.size===1&&(n=t(r)||x),u(e),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:s}}function Qu(e,t,n){const l=!Array.isArray(e),r=l?[e]:e,o=t.length<2;return Kl(n,s=>{let u=!1;const a=[];let f=0,c=x;const d=()=>{if(f)return;c();const p=t(l?a[0]:a,s);o?s(p):c=Qe(p)?p:x},g=r.map((p,m)=>yl(p,v=>{a[m]=v,f&=~(1<<m),u&&d()},()=>{f|=1<<m}));return u=!0,d(),function(){ge(g),c(),u=!1}})}function Cr(e){const t=e-1;return t*t*t+1}function xr(e){return Object.prototype.toString.call(e)==="[object Date]"}function Jl(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const l=t.map((r,o)=>Jl(e[o],r));return r=>l.map(o=>o(r))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(xr(e)&&xr(t)){e=e.getTime(),t=t.getTime();const o=t-e;return s=>new Date(e+s*o)}const l=Object.keys(t),r={};return l.forEach(o=>{r[o]=Jl(e[o],t[o])}),o=>{const s={};return l.forEach(u=>{s[u]=r[u](o)}),s}}if(n==="number"){const l=t-e;return r=>e+r*l}throw new Error(`Cannot interpolate ${n} values`)}function $r(e,t={}){const n=Ae(e);let l,r=e;function o(s,u){if(e==null)return n.set(e=s),Promise.resolve();r=s;let a=l,f=!1,{delay:c=0,duration:d=400,easing:g=Hs,interpolate:p=Jl}=Jn(Jn({},t),u);if(d===0)return a&&(a.abort(),a=null),n.set(e=r),Promise.resolve();const m=js()+c;let v;return l=Gs(_=>{if(_<m)return!0;f||(v=p(e,s),typeof d=="function"&&(d=d(e,s)),f=!0),a&&(a.abort(),a=null);const w=_-m;return w>d?(n.set(e=s),!1):(n.set(e=v(g(w/d))),!0)}),l.promise}return{set:o,update:(s,u)=>o(s(r,e),u),subscribe:n.subscribe}}const Ve=Ae([]),Ml=Ae([]),El=Ae([]),kn=Ae([]),rt=Ae("all"),Gr=Ae({"n/a":1,up:1,down:1}),Ku=["who","what","how","why","where","does","can","n/a"],Zl=$r(Ku.map(e=>({question:e,count:0}))),er=Ae(new Set);var tr="http://www.w3.org/1999/xhtml";const Br={svg:"http://www.w3.org/2000/svg",xhtml:tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Js(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Br.hasOwnProperty(t)?{space:Br[t],local:e}:e}function Ju(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===tr&&t.documentElement.namespaceURI===tr?t.createElement(e):t.createElementNS(n,e)}}function Zu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Zs(e){var t=Js(e);return(t.local?Zu:Ju)(t)}function ef(){}function ea(e){return e==null?ef:function(){return this.querySelector(e)}}function tf(e){typeof e!="function"&&(e=ea(e));for(var t=this._groups,n=t.length,l=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,u=l[r]=new Array(s),a,f,c=0;c<s;++c)(a=o[c])&&(f=e.call(a,a.__data__,c,o))&&("__data__"in a&&(f.__data__=a.__data__),u[c]=f);return new He(l,this._parents)}function ta(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function nf(){return[]}function lf(e){return e==null?nf:function(){return this.querySelectorAll(e)}}function rf(e){return function(){return ta(e.apply(this,arguments))}}function of(e){typeof e=="function"?e=rf(e):e=lf(e);for(var t=this._groups,n=t.length,l=[],r=[],o=0;o<n;++o)for(var s=t[o],u=s.length,a,f=0;f<u;++f)(a=s[f])&&(l.push(e.call(a,a.__data__,f,s)),r.push(a));return new He(l,r)}function sf(e){return function(){return this.matches(e)}}function na(e){return function(t){return t.matches(e)}}var af=Array.prototype.find;function uf(e){return function(){return af.call(this.children,e)}}function ff(){return this.firstElementChild}function cf(e){return this.select(e==null?ff:uf(typeof e=="function"?e:na(e)))}var df=Array.prototype.filter;function hf(){return Array.from(this.children)}function gf(e){return function(){return df.call(this.children,e)}}function pf(e){return this.selectAll(e==null?hf:gf(typeof e=="function"?e:na(e)))}function mf(e){typeof e!="function"&&(e=sf(e));for(var t=this._groups,n=t.length,l=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,u=l[r]=[],a,f=0;f<s;++f)(a=o[f])&&e.call(a,a.__data__,f,o)&&u.push(a);return new He(l,this._parents)}function la(e){return new Array(e.length)}function _f(){return new He(this._enter||this._groups.map(la),this._parents)}function nl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}nl.prototype={constructor:nl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function vf(e){return function(){return e}}function bf(e,t,n,l,r,o){for(var s=0,u,a=t.length,f=o.length;s<f;++s)(u=t[s])?(u.__data__=o[s],l[s]=u):n[s]=new nl(e,o[s]);for(;s<a;++s)(u=t[s])&&(r[s]=u)}function wf(e,t,n,l,r,o,s){var u,a,f=new Map,c=t.length,d=o.length,g=new Array(c),p;for(u=0;u<c;++u)(a=t[u])&&(g[u]=p=s.call(a,a.__data__,u,t)+"",f.has(p)?r[u]=a:f.set(p,a));for(u=0;u<d;++u)p=s.call(e,o[u],u,o)+"",(a=f.get(p))?(l[u]=a,a.__data__=o[u],f.delete(p)):n[u]=new nl(e,o[u]);for(u=0;u<c;++u)(a=t[u])&&f.get(g[u])===a&&(r[u]=a)}function yf(e){return e.__data__}function kf(e,t){if(!arguments.length)return Array.from(this,yf);var n=t?wf:bf,l=this._parents,r=this._groups;typeof e!="function"&&(e=vf(e));for(var o=r.length,s=new Array(o),u=new Array(o),a=new Array(o),f=0;f<o;++f){var c=l[f],d=r[f],g=d.length,p=Sf(e.call(c,c&&c.__data__,f,l)),m=p.length,v=u[f]=new Array(m),_=s[f]=new Array(m),w=a[f]=new Array(g);n(c,d,v,_,w,p,t);for(var y=0,$=0,M,k;y<m;++y)if(M=v[y]){for(y>=$&&($=y+1);!(k=_[$])&&++$<m;);M._next=k||null}}return s=new He(s,l),s._enter=u,s._exit=a,s}function Sf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cf(){return new He(this._exit||this._groups.map(la),this._parents)}function $f(e,t,n){var l=this.enter(),r=this,o=this.exit();return typeof e=="function"?(l=e(l),l&&(l=l.selection())):l=l.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),l&&r?l.merge(r).order():r}function Rf(e){for(var t=e.selection?e.selection():e,n=this._groups,l=t._groups,r=n.length,o=l.length,s=Math.min(r,o),u=new Array(r),a=0;a<s;++a)for(var f=n[a],c=l[a],d=f.length,g=u[a]=new Array(d),p,m=0;m<d;++m)(p=f[m]||c[m])&&(g[m]=p);for(;a<r;++a)u[a]=n[a];return new He(u,this._parents)}function Af(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var l=e[t],r=l.length-1,o=l[r],s;--r>=0;)(s=l[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Mf(e){e||(e=Ef);function t(d,g){return d&&g?e(d.__data__,g.__data__):!d-!g}for(var n=this._groups,l=n.length,r=new Array(l),o=0;o<l;++o){for(var s=n[o],u=s.length,a=r[o]=new Array(u),f,c=0;c<u;++c)(f=s[c])&&(a[c]=f);a.sort(t)}return new He(r,this._parents).order()}function Ef(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ff(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Df(){return Array.from(this)}function If(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],r=0,o=l.length;r<o;++r){var s=l[r];if(s)return s}return null}function Nf(){let e=0;for(const t of this)++e;return e}function Pf(){return!this.node()}function Tf(e){for(var t=this._groups,n=0,l=t.length;n<l;++n)for(var r=t[n],o=0,s=r.length,u;o<s;++o)(u=r[o])&&e.call(u,u.__data__,o,r);return this}function Of(e){return function(){this.removeAttribute(e)}}function Vf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zf(e,t){return function(){this.setAttribute(e,t)}}function Hf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Lf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function jf(e,t){var n=Js(e);if(arguments.length<2){var l=this.node();return n.local?l.getAttributeNS(n.space,n.local):l.getAttribute(n)}return this.each((t==null?n.local?Vf:Of:typeof t=="function"?n.local?Lf:qf:n.local?Hf:zf)(n,t))}function ra(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function xf(e){return function(){this.style.removeProperty(e)}}function Gf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Bf(e,t,n){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,n)}}function Uf(e,t,n){return arguments.length>1?this.each((t==null?xf:typeof t=="function"?Bf:Gf)(e,t,n??"")):Wf(this.node(),e)}function Wf(e,t){return e.style.getPropertyValue(t)||ra(e).getComputedStyle(e,null).getPropertyValue(t)}function Xf(e){return function(){delete this[e]}}function Yf(e,t){return function(){this[e]=t}}function Qf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Kf(e,t){return arguments.length>1?this.each((t==null?Xf:typeof t=="function"?Qf:Yf)(e,t)):this.node()[e]}function ia(e){return e.trim().split(/^|\s+/)}function Rr(e){return e.classList||new oa(e)}function oa(e){this._node=e,this._names=ia(e.getAttribute("class")||"")}oa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function sa(e,t){for(var n=Rr(e),l=-1,r=t.length;++l<r;)n.add(t[l])}function aa(e,t){for(var n=Rr(e),l=-1,r=t.length;++l<r;)n.remove(t[l])}function Jf(e){return function(){sa(this,e)}}function Zf(e){return function(){aa(this,e)}}function ec(e,t){return function(){(t.apply(this,arguments)?sa:aa)(this,e)}}function tc(e,t){var n=ia(e+"");if(arguments.length<2){for(var l=Rr(this.node()),r=-1,o=n.length;++r<o;)if(!l.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?ec:t?Jf:Zf)(n,t))}function nc(){this.textContent=""}function lc(e){return function(){this.textContent=e}}function rc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ic(e){return arguments.length?this.each(e==null?nc:(typeof e=="function"?rc:lc)(e)):this.node().textContent}function oc(){this.innerHTML=""}function sc(e){return function(){this.innerHTML=e}}function ac(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function uc(e){return arguments.length?this.each(e==null?oc:(typeof e=="function"?ac:sc)(e)):this.node().innerHTML}function fc(){this.nextSibling&&this.parentNode.appendChild(this)}function cc(){return this.each(fc)}function dc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hc(){return this.each(dc)}function gc(e){var t=typeof e=="function"?e:Zs(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function pc(){return null}function mc(e,t){var n=typeof e=="function"?e:Zs(e),l=t==null?pc:typeof t=="function"?t:ea(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),l.apply(this,arguments)||null)})}function _c(){var e=this.parentNode;e&&e.removeChild(this)}function vc(){return this.each(_c)}function bc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yc(e){return this.select(e?wc:bc)}function kc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Sc(e){return function(t){e.call(this,t,this.__data__)}}function Cc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",l=t.indexOf(".");return l>=0&&(n=t.slice(l+1),t=t.slice(0,l)),{type:t,name:n}})}function $c(e){return function(){var t=this.__on;if(t){for(var n=0,l=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++l]=o;++l?t.length=l:delete this.__on}}}function Rc(e,t,n){return function(){var l=this.__on,r,o=Sc(t);if(l){for(var s=0,u=l.length;s<u;++s)if((r=l[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},l?l.push(r):this.__on=[r]}}function Ac(e,t,n){var l=Cc(e+""),r,o=l.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var a=0,f=u.length,c;a<f;++a)for(r=0,c=u[a];r<o;++r)if((s=l[r]).type===c.type&&s.name===c.name)return c.value}return}for(u=t?Rc:$c,r=0;r<o;++r)this.each(u(l[r],t,n));return this}function ua(e,t,n){var l=ra(e),r=l.CustomEvent;typeof r=="function"?r=new r(t,n):(r=l.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Mc(e,t){return function(){return ua(this,e,t)}}function Ec(e,t){return function(){return ua(this,e,t.apply(this,arguments))}}function Fc(e,t){return this.each((typeof t=="function"?Ec:Mc)(e,t))}function*Dc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],r=0,o=l.length,s;r<o;++r)(s=l[r])&&(yield s)}var fa=[null];function He(e,t){this._groups=e,this._parents=t}function Ic(){return this}He.prototype={constructor:He,select:tf,selectAll:of,selectChild:cf,selectChildren:pf,filter:mf,data:kf,enter:_f,exit:Cf,join:$f,merge:Rf,selection:Ic,order:Af,sort:Mf,call:Ff,nodes:Df,node:If,size:Nf,empty:Pf,each:Tf,attr:jf,style:Uf,property:Kf,classed:tc,text:ic,html:uc,raise:cc,lower:hc,append:gc,insert:mc,remove:vc,clone:yc,datum:kc,on:Ac,dispatch:Fc,[Symbol.iterator]:Dc};function dt(e){return typeof e=="string"?new He([[document.querySelector(e)]],[document.documentElement]):new He([[e]],fa)}function Fl(e){return typeof e=="string"?new He([document.querySelectorAll(e)],[document.documentElement]):new He([ta(e)],fa)}function Sn(e,{delay:t=0,duration:n=400,easing:l=Cr,axis:r="y"}={}){const o=getComputedStyle(e),s=+o.opacity,u=r==="y"?"height":"width",a=parseFloat(o[u]),f=r==="y"?["top","bottom"]:["left","right"],c=f.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),d=parseFloat(o[`padding${c[0]}`]),g=parseFloat(o[`padding${c[1]}`]),p=parseFloat(o[`margin${c[0]}`]),m=parseFloat(o[`margin${c[1]}`]),v=parseFloat(o[`border${c[0]}Width`]),_=parseFloat(o[`border${c[1]}Width`]);return{delay:t,duration:n,easing:l,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*s};${u}: ${w*a}px;padding-${f[0]}: ${w*d}px;padding-${f[1]}: ${w*g}px;margin-${f[0]}: ${w*p}px;margin-${f[1]}: ${w*m}px;border-${f[0]}-width: ${w*v}px;border-${f[1]}-width: ${w*_}px;`}}function Pn(e,{delay:t=0,duration:n=400,easing:l=Cr,start:r=0,opacity:o=0}={}){const s=getComputedStyle(e),u=+s.opacity,a=s.transform==="none"?"":s.transform,f=1-r,c=u*(1-o);return{delay:t,duration:n,easing:l,css:(d,g)=>`
			transform: ${a} scale(${1-f*g});
			opacity: ${u-c*g}
		`}}function nr(e,t=2){if(e===0)return"0 Bytes";const n=1024,l=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(l))+" "+r[o]}function Nc(e){let t={who:0,what:0,how:0,why:0,where:0,does:0,can:0,"n/a":0};for(let l=0;l<e.length;l++){let r=e[l].question.split(" ")[0].toLowerCase();r in t?t[r]++:t["n/a"]++}return Object.keys(t).map(l=>({question:l,count:t[l]}))}function ca(e){return e.map(t=>{const n=t.question.split(" ").length,l=t.answer.split(" ").length;return{index:t.index,question:+n,answer:+l,vote:t.vote}})}function Pc(e,t){e.classList.add("tooltip"),e.setAttribute("tabindex",0);function n(){const r=document.createElement("span");r.textContent=t,r.setAttribute("id","tooltip"),e.appendChild(r),e.addEventListener("mouseleave",l),e.addEventListener("blur",l),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}function l(){e.removeChild(e.querySelector("#tooltip")),e.removeEventListener("mouseleave",l),e.removeEventListener("blur",l),e.addEventListener("mouseenter",n),e.addEventListener("focus",n)}return e.addEventListener("mouseenter",n),e.addEventListener("focus",n),{onDestroy(){e.classList.remove("tooltip"),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}}}function Ur(e,t,n){const l=e.slice();return l[16]=t[n],l[18]=n,l}function Wr(e){let t,n,l,r,o,s;function u(...f){return e[9](e[18],...f)}function a(...f){return e[10](e[18],...f)}return{c(){t=A("div"),n=A("button"),n.textContent="👍",l=P(),r=A("button"),r.textContent="👎",h(n,"class","small-button thumbs-up svelte-19cad35"),h(r,"class","small-button thumbs-down svelte-19cad35"),h(t,"class","feedback-buttons svelte-19cad35")},m(f,c){T(f,t,c),b(t,n),b(t,l),b(t,r),o||(s=[B(n,"click",u),B(r,"click",a)],o=!0)},p(f,c){e=f},d(f){f&&N(t),o=!1,ge(s)}}}function Xr(e,t){let n,l,r,o,s,u,a,f,c,d=t[16].question+"",g,p,m,v,_,w,y,$=t[16].answer+"",M,k,E,S,R,C,F=t[0]&&Wr(t);return{key:e,first:null,c(){n=A("div"),l=A("div"),r=A("div"),o=P(),s=A("div"),u=A("div"),a=A("h5"),a.textContent="Question:",f=P(),c=A("p"),g=L(d),p=P(),m=A("div"),v=A("div"),_=A("h5"),_.textContent="Response:",w=P(),y=A("p"),M=L($),k=P(),F&&F.c(),E=P(),h(r,"class","avatar"),h(a,"class","bold svelte-19cad35"),h(u,"class","question svelte-19cad35"),h(_,"class","bold svelte-19cad35"),h(v,"class","answer svelte-19cad35"),h(m,"class","answers svelte-19cad35"),h(s,"class","message-content svelte-19cad35"),h(l,"class","chat-message-center svelte-19cad35"),h(n,"class","chat-message svelte-19cad35"),this.first=n},m(I,D){T(I,n,D),b(n,l),b(l,r),b(l,o),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,g),b(s,p),b(s,m),b(m,v),b(v,_),b(v,w),b(v,y),b(y,M),b(v,k),F&&F.m(v,null),b(n,E),R||(C=wn(S=Oc.call(null,n,t[18]===t[4].length-1)),R=!0)},p(I,D){t=I,D&16&&d!==(d=t[16].question+"")&&W(g,d),D&16&&$!==($=t[16].answer+"")&&W(M,$),t[0]?F?F.p(t,D):(F=Wr(t),F.c(),F.m(v,null)):F&&(F.d(1),F=null),S&&Qe(S.update)&&D&16&&S.update.call(null,t[18]===t[4].length-1)},d(I){I&&N(n),F&&F.d(),R=!1,C()}}}function Tc(e){let t,n,l,r,o,s,u=[],a=new Map,f,c,d,g,p,m,v=(e[2]?e[3]:"Send")+"",_,w,y,$,M,k,E=e[4];const S=R=>R[18];for(let R=0;R<E.length;R+=1){let C=Ur(e,E,R),F=S(C);a.set(F,u[R]=Xr(F,C))}return{c(){t=A("div"),n=A("div"),n.innerHTML=`<h5 class="underline bold svelte-19cad35">Vote Feedback Instructions</h5> 
    <p class="svelte-19cad35">Ask a question to receive an answer from the chatbot. If the response is
      satisfactory, click on the <span class="inline-button green svelte-19cad35">👍</span>
      button. If the repsonse is not satisfactory, click on the
      <span class="inline-button red svelte-19cad35">👎</span> button.</p>`,l=P(),r=A("div"),o=A("section"),s=A("div");for(let R=0;R<u.length;R+=1)u[R].c();f=P(),c=A("div"),d=A("form"),g=A("input"),p=P(),m=A("button"),_=L(v),y=P(),$=A("p"),$.textContent="Note - may produce inaccurate information.",h(n,"class","instructions svelte-19cad35"),h(s,"class","chat-log svelte-19cad35"),h(o,"class","chatbox svelte-19cad35"),h(g,"class","chat-input-textarea svelte-19cad35"),h(g,"placeholder","Type Question Here"),h(m,"class",w="btnyousend "+(e[1]===""?"":"active")+" svelte-19cad35"),h(m,"type","submit"),h(d,"class","chat-input-form svelte-19cad35"),h($,"class","message svelte-19cad35"),h(c,"class","chat-input-holder svelte-19cad35"),h(r,"class","ranked-chat svelte-19cad35"),h(t,"class","ranked-feedback-container svelte-19cad35")},m(R,C){T(R,t,C),b(t,n),b(t,l),b(t,r),b(r,o),b(o,s);for(let F=0;F<u.length;F+=1)u[F]&&u[F].m(s,null);b(r,f),b(r,c),b(c,d),b(d,g),lt(g,e[1]),b(d,p),b(d,m),b(m,_),b(c,y),b(c,$),M||(k=[B(g,"input",e[11]),B(d,"submit",e[5])],M=!0)},p(R,[C]){C&81&&(E=R[4],u=ct(u,C,S,1,R,E,a,s,Ot,Xr,null,Ur)),C&2&&g.value!==R[1]&&lt(g,R[1]),C&12&&v!==(v=(R[2]?R[3]:"Send")+"")&&W(_,v),C&2&&w!==(w="btnyousend "+(R[1]===""?"":"active")+" svelte-19cad35")&&h(m,"class",w)},i:x,o:x,d(R){R&&N(t);for(let C=0;C<u.length;C+=1)u[C].d();M=!1,ge(k)}}}function Oc(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function Vc(e){const t=await fetch("/chat/qa_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function zc(e,t,n){let l,r;le(e,Ve,w=>n(4,r=w));let{feedback:o=!1}=t,{is_retrieval:s=!1}=t,u="",a="",f=!1;st(()=>{c()});async function c(){const M=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map(k=>({id:k[0],question:k[1],answer:k[2],vote_status:k[3]}));Ne(Ve,r=[...M],r)}const d=async w=>{w.preventDefault(),u=a,n(1,a=""),n(2,f=!0);let y={id:r.length+1,question:u,answer:"Loading...",vote_status:"na"};Ne(Ve,r=[...r,y],r);const $=s?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:u})}):await fetch(`/chat/${u}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:u})});if($.ok){const M=await $.json();console.log("response data",M),y.answer=M.answer,Ve.update(k=>(k[k.length-1]=y,k))}else{const M=await $.text();alert(M)}n(2,f=!1)};let g=0;setInterval(()=>{n(8,g=(g+1)%4)},200);function p(w,y,$){const M=r[$];M.vote=y;const k={id:$+1,vote_status:y};Vc(k),dt(w.currentTarget.parentNode).selectAll("button").style("border","3px solid transparent").style("opacity",.65),dt(w.currentTarget).style("border","3px solid var(--black)").style("opacity",1)}[...Array(10).keys()].map(w=>String.fromCharCode(65+w));const m=(w,y)=>p(y,"up",w),v=(w,y)=>p(y,"down",w);function _(){a=this.value,n(1,a)}return e.$$set=w=>{"feedback"in w&&n(0,o=w.feedback),"is_retrieval"in w&&n(7,s=w.is_retrieval)},e.$$.update=()=>{e.$$.dirty&256&&n(3,l=".".repeat(g).padEnd(3))},[o,a,f,l,r,d,p,s,g,m,v,_]}class Ar extends ie{constructor(t){super(),oe(this,t,zc,Tc,re,{feedback:0,is_retrieval:7})}}function Yr(e,t,n){const l=e.slice();return l[14]=t[n],l[16]=n,l}function Qr(e,t){let n,l,r,o,s,u,a,f,c,d=t[14].question+"",g,p,m,v,_,w,y,$=t[14].up_ranking_answer+"",M,k,E,S,R,C,F=t[14].low_ranking_answer+"",I,D,z,O,U;function G(...he){return t[7](t[14],t[16],...he)}function $e(...he){return t[8](t[14],t[16],...he)}function Fe(...he){return t[9](t[14],t[16],...he)}function Re(...he){return t[10](t[14],t[16],...he)}return{key:e,first:null,c(){n=A("div"),l=A("div"),r=A("div"),o=P(),s=A("div"),u=A("div"),a=A("h5"),a.textContent="Question:",f=P(),c=A("p"),g=L(d),p=P(),m=A("div"),v=A("div"),_=A("h5"),_.textContent="Response 1:",w=P(),y=A("p"),M=L($),k=P(),E=A("div"),S=A("h5"),S.textContent="Response 2:",R=P(),C=A("p"),I=L(F),D=P(),h(r,"class","avatar"),h(a,"class","bold svelte-au920n"),h(u,"class","question svelte-au920n"),h(_,"class","bold underline svelte-au920n"),h(v,"class","answer svelte-au920n"),h(S,"class","bold underline svelte-au920n"),h(E,"class","answer svelte-au920n"),h(m,"class","answers svelte-au920n"),h(s,"class","message-content svelte-au920n"),h(l,"class","chat-message-center svelte-au920n"),h(n,"class","chat-message svelte-au920n"),this.first=n},m(he,qe){T(he,n,qe),b(n,l),b(l,r),b(l,o),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,g),b(s,p),b(s,m),b(m,v),b(v,_),b(v,w),b(v,y),b(y,M),b(m,k),b(m,E),b(E,S),b(E,R),b(E,C),b(C,I),b(n,D),O||(U=[B(v,"click",G),B(v,"keydown",$e),B(E,"click",Fe),B(E,"keydown",Re),wn(z=qc.call(null,n,t[16]===t[3].length-1))],O=!0)},p(he,qe){t=he,qe&8&&d!==(d=t[14].question+"")&&W(g,d),qe&8&&$!==($=t[14].up_ranking_answer+"")&&W(M,$),qe&8&&F!==(F=t[14].low_ranking_answer+"")&&W(I,F),z&&Qe(z.update)&&qe&8&&z.update.call(null,t[16]===t[3].length-1)},d(he){he&&N(n),O=!1,ge(U)}}}function Hc(e){let t,n,l,r,o,s,u=[],a=new Map,f,c,d,g,p,m,v=(e[1]?e[2]:"Send")+"",_,w,y,$,M,k,E=e[3];const S=R=>R[16];for(let R=0;R<E.length;R+=1){let C=Yr(e,E,R),F=S(C);a.set(F,u[R]=Qr(F,C))}return{c(){t=A("div"),n=A("div"),n.innerHTML=`<h5 class="underline bold svelte-au920n">Ranked Feedback Instructions</h5> 
    <p class="svelte-au920n">Ask a question and click on the better of the two responses. The better
      response will be outlined in <span class="green svelte-au920n">green</span>, the worse
      response outlined in <span class="red svelte-au920n">red</span>. This data will be
      automatically fed to RLHF.</p> 
    <button class="svelte-au920n">Download Data</button>`,l=P(),r=A("div"),o=A("section"),s=A("div");for(let R=0;R<u.length;R+=1)u[R].c();f=P(),c=A("div"),d=A("form"),g=A("input"),p=P(),m=A("button"),_=L(v),y=P(),$=A("p"),$.textContent="Note - may produce inaccurate information.",h(n,"class","instructions svelte-au920n"),h(s,"class","chat-log svelte-au920n"),h(o,"class","chatbox svelte-au920n"),h(g,"class","chat-input-textarea svelte-au920n"),h(g,"placeholder","Type Message Here"),h(m,"class",w="btnyousend "+(e[0]===""?"":"active")+" svelte-au920n"),h(m,"type","submit"),h(d,"class","chat-input-form svelte-au920n"),h($,"class","message svelte-au920n"),h(c,"class","chat-input-holder svelte-au920n"),h(r,"class","ranked-chat svelte-au920n"),h(t,"class","ranked-feedback-container svelte-au920n")},m(R,C){T(R,t,C),b(t,n),b(t,l),b(t,r),b(r,o),b(o,s);for(let F=0;F<u.length;F+=1)u[F]&&u[F].m(s,null);b(r,f),b(r,c),b(c,d),b(d,g),lt(g,e[0]),b(d,p),b(d,m),b(m,_),b(c,y),b(c,$),M||(k=[B(g,"input",e[11]),B(d,"submit",e[4])],M=!0)},p(R,[C]){C&40&&(E=R[3],u=ct(u,C,S,1,R,E,a,s,Ot,Qr,null,Yr)),C&1&&g.value!==R[0]&&lt(g,R[0]),C&6&&v!==(v=(R[1]?R[2]:"Send")+"")&&W(_,v),C&1&&w!==(w="btnyousend "+(R[0]===""?"":"active")+" svelte-au920n")&&h(m,"class",w)},i:x,o:x,d(R){R&&N(t);for(let C=0;C<u.length;C+=1)u[C].d();M=!1,ge(k)}}}function qc(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function Lc(e){const t=await fetch("/chat/ranking_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function jc(e,t,n){let l,r;le(e,Ml,_=>n(3,r=_));let o="",s="",u=!1;st(()=>{});const a=async _=>{_.preventDefault(),o=s,n(0,s=""),n(1,u=!0);let w={question:o,up_ranking_answer:"Loading...",low_ranking_answer:"Loading..."};Ne(Ml,r=[...r,w],r);const y=await fetch(`/chat/multi_responses/${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:o})});if(y.ok){const $=await y.json();w.up_ranking_answer=$.answer[0],w.low_ranking_answer=$.answer[1],Ml.update(M=>(M[M.length-1]=w,M))}else{const $=await y.text();alert($)}n(1,u=!1)};let f=0;setInterval(()=>{n(6,f=(f+1)%4)},200);function c(_,w,y,$){const M=r[y],k={1:"up_ranking_answer",2:"low_ranking_answer"},E={question:M.question,up_ranking_answer:M[k[$]],low_ranking_answer:M[k[$%2+1]]};Lc(E),dt(_.currentTarget.parentNode).selectAll("div").style("outline","2px solid var(--red)").style("border","1px solid var(--red)"),dt(_.currentTarget).style("outline","2px solid var(--green)").style("border","1px solid var(--green)")}const d=(_,w,y)=>c(y,_,w,1),g=(_,w,y)=>c(y,_,w,1),p=(_,w,y)=>c(y,_,w,2),m=(_,w,y)=>c(y,_,w,2);function v(){s=this.value,n(0,s)}return e.$$.update=()=>{e.$$.dirty&64&&n(2,l=".".repeat(f).padEnd(3))},[s,u,l,r,a,c,f,d,g,p,m,v]}class xc extends ie{constructor(t){super(),oe(this,t,jc,Hc,re,{})}}function Kr(e,t,n){const l=e.slice();return l[8]=t[n],l[10]=n,l}function Jr(e){let t,n,l,r,o=e[8].name+"",s,u,a,f,c;function d(...g){return e[6](e[8],...g)}return{c(){t=A("label"),n=A("input"),s=L(o),u=P(),h(n,"type","checkbox"),h(n,"id",l=e[8].id),n.checked=r=e[1].has(e[8].name),h(t,"for",a=e[8].id)},m(g,p){T(g,t,p),b(t,n),b(t,s),b(t,u),f||(c=B(n,"change",d),f=!0)},p(g,p){e=g,p&1&&l!==(l=e[8].id)&&h(n,"id",l),p&3&&r!==(r=e[1].has(e[8].name))&&(n.checked=r),p&1&&o!==(o=e[8].name+"")&&W(s,o),p&1&&a!==(a=e[8].id)&&h(t,"for",a)},d(g){g&&N(t),f=!1,c()}}}function Gc(e){let t,n,l,r,o,s,u,a,f,c,d,g=e[0],p=[];for(let m=0;m<g.length;m+=1)p[m]=Jr(Kr(e,g,m));return{c(){t=A("form"),n=A("div"),l=A("div"),r=A("select"),o=A("option"),o.textContent="Documents",s=P(),u=A("div"),a=P(),f=A("div");for(let m=0;m<p.length;m+=1)p[m].c();o.__value="Documents",o.value=o.__value,h(r,"class","svelte-8o2wf2"),h(u,"class","overSelect svelte-8o2wf2"),h(l,"class","selectBox svelte-8o2wf2"),h(f,"class","dropdown-content svelte-8o2wf2"),ye(f,"display",e[2]?"block":"none"),h(n,"class","multiselect svelte-8o2wf2")},m(m,v){T(m,t,v),b(t,n),b(n,l),b(l,r),b(r,o),b(l,s),b(l,u),b(n,a),b(n,f);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(f,null);e[7](f),c||(d=B(l,"click",e[4]),c=!0)},p(m,[v]){if(v&35){g=m[0];let _;for(_=0;_<g.length;_+=1){const w=Kr(m,g,_);p[_]?p[_].p(w,v):(p[_]=Jr(w),p[_].c(),p[_].m(f,null))}for(;_<p.length;_+=1)p[_].d(1);p.length=g.length}v&4&&ye(f,"display",m[2]?"block":"none")},i:x,o:x,d(m){m&&N(t),ue(p,m),e[7](null),c=!1,d()}}}function Bc(e,t,n){let l;le(e,er,d=>n(1,l=d));let{documents:r=[]}=t,o=!1,s;function u(){n(2,o=!o)}function a(d,g){g.target.checked?l.add(d):l.delete(d),er.set(new Set(l))}const f=(d,g)=>a(d.name,g);function c(d){yn[d?"unshift":"push"](()=>{s=d,n(3,s)})}return e.$$set=d=>{"documents"in d&&n(0,r=d.documents)},e.$$.update=()=>{e.$$.dirty&2&&console.log(l)},[r,l,o,s,u,a,f,c]}let Uc=class extends ie{constructor(t){super(),oe(this,t,Bc,Gc,re,{documents:0})}};function Wc(e){let t;return{c(){t=A("p"),t.textContent="⌄",h(t,"class","svelte-1pk2e1k")},m(n,l){T(n,t,l)},d(n){n&&N(t)}}}function Xc(e){let t;return{c(){t=A("p"),t.textContent="⌃",h(t,"class","svelte-1pk2e1k")},m(n,l){T(n,t,l)},d(n){n&&N(t)}}}function Zr(e){let t,n,l,r,o;return{c(){t=A("div"),n=A("p"),l=L(e[1]),h(n,"class","bold svelte-1pk2e1k"),h(t,"class","source_content svelte-1pk2e1k")},m(s,u){T(s,t,u),b(t,n),b(n,l),o=!0},p(s,u){(!o||u&2)&&W(l,s[1])},i(s){o||(ke(()=>{o&&(r||(r=Ze(t,Sn,{},!0)),r.run(1))}),o=!0)},o(s){r||(r=Ze(t,Sn,{},!1)),r.run(0),o=!1},d(s){s&&N(t),s&&r&&r.end()}}}function Yc(e){let t,n,l,r=e[2]+1+"",o,s,u,a,f,c,d,g,p;function m(y,$){return y[3]?Xc:Wc}let v=m(e),_=v(e),w=e[3]&&Zr(e);return{c(){t=A("div"),n=A("div"),l=A("p"),o=L(r),s=L(": "),u=L(e[0]),a=P(),_.c(),c=P(),w&&w.c(),h(l,"class","bold svelte-1pk2e1k"),h(n,"class","source_tab svelte-1pk2e1k"),h(t,"class","source svelte-1pk2e1k")},m(y,$){T(y,t,$),b(t,n),b(n,l),b(l,o),b(l,s),b(l,u),b(n,a),_.m(n,null),b(t,c),w&&w.m(t,null),d=!0,g||(p=B(n,"click",e[4]),g=!0)},p(y,[$]){(!d||$&4)&&r!==(r=y[2]+1+"")&&W(o,r),(!d||$&1)&&W(u,y[0]),v!==(v=m(y))&&(_.d(1),_=v(y),_&&(_.c(),_.m(n,null))),y[3]?w?(w.p(y,$),$&8&&V(w,1)):(w=Zr(y),w.c(),V(w,1),w.m(t,null)):w&&(ce(),H(w,1,1,()=>{w=null}),de())},i(y){d||(ke(()=>{d&&(f||(f=Ze(n,Sn,{},!0)),f.run(1))}),V(w),d=!0)},o(y){f||(f=Ze(n,Sn,{},!1)),f.run(0),H(w),d=!1},d(y){y&&N(t),_.d(),y&&f&&f.end(),w&&w.d(),g=!1,p()}}}function Qc(e,t,n){let{source:l=""}=t,{source_content:r=""}=t,{i:o=0}=t,s=o===0;const u=()=>n(3,s=!s);return e.$$set=a=>{"source"in a&&n(0,l=a.source),"source_content"in a&&n(1,r=a.source_content),"i"in a&&n(2,o=a.i)},[l,r,o,s,u]}class Kc extends ie{constructor(t){super(),oe(this,t,Qc,Yc,re,{source:0,source_content:1,i:2})}}function ei(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function ti(e){let t,n,l,r;const o=[td,ed,Zc,Jc],s=[];function u(a,f){return a[0][0]==="N/A"?0:a[0][0]==="Loading..."?1:a[0][0]==="Not loaded"?2:3}return t=u(e),n=s[t]=o[t](e),{c(){n.c(),l=_e()},m(a,f){s[t].m(a,f),T(a,l,f),r=!0},p(a,f){let c=t;t=u(a),t===c?s[t].p(a,f):(ce(),H(s[c],1,1,()=>{s[c]=null}),de(),n=s[t],n?n.p(a,f):(n=s[t]=o[t](a),n.c()),V(n,1),n.m(l.parentNode,l))},i(a){r||(V(n),r=!0)},o(a){H(n),r=!1},d(a){s[t].d(a),a&&N(l)}}}function Jc(e){let t,n,l,r=e[0].length+"",o,s,u,a,f,c,d,g;function p(w,y){return w[2]?ld:nd}let m=p(e),v=m(e),_=e[2]&&ni(e);return{c(){t=A("div"),n=A("h5"),l=L("📖 Response Sources ("),o=L(r),s=L(")"),u=P(),v.c(),a=P(),_&&_.c(),f=_e(),h(n,"class","bold"),h(t,"class","sources-header svelte-1r759df")},m(w,y){T(w,t,y),b(t,n),b(n,l),b(n,o),b(n,s),b(t,u),v.m(t,null),T(w,a,y),_&&_.m(w,y),T(w,f,y),c=!0,d||(g=B(t,"click",e[3]),d=!0)},p(w,y){(!c||y&1)&&r!==(r=w[0].length+"")&&W(o,r),m!==(m=p(w))&&(v.d(1),v=m(w),v&&(v.c(),v.m(t,null))),w[2]?_?(_.p(w,y),y&4&&V(_,1)):(_=ni(w),_.c(),V(_,1),_.m(f.parentNode,f)):_&&(ce(),H(_,1,1,()=>{_=null}),de())},i(w){c||(V(_),c=!0)},o(w){H(_),c=!1},d(w){w&&N(t),v.d(),w&&N(a),_&&_.d(w),w&&N(f),d=!1,g()}}}function Zc(e){let t;return{c(){t=A("h5"),t.textContent="⚠️ No sources loaded",h(t,"class","bold")},m(n,l){T(n,t,l)},p:x,i:x,o:x,d(n){n&&N(t)}}}function ed(e){let t;return{c(){t=A("h5"),t.textContent="📖 Loading...",h(t,"class","bold")},m(n,l){T(n,t,l)},p:x,i:x,o:x,d(n){n&&N(t)}}}function td(e){let t;return{c(){t=A("h5"),t.textContent="⚠️ No Retrieval Sources selected",h(t,"class","bold")},m(n,l){T(n,t,l)},p:x,i:x,o:x,d(n){n&&N(t)}}}function nd(e){let t;return{c(){t=A("span"),t.textContent="⌄"},m(n,l){T(n,t,l)},d(n){n&&N(t)}}}function ld(e){let t;return{c(){t=A("span"),t.textContent="⌃"},m(n,l){T(n,t,l)},d(n){n&&N(t)}}}function ni(e){let t,n,l=e[0],r=[];for(let s=0;s<l.length;s+=1)r[s]=li(ei(e,l,s));const o=s=>H(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();t=_e()},m(s,u){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,u);T(s,t,u),n=!0},p(s,u){if(u&3){l=s[0];let a;for(a=0;a<l.length;a+=1){const f=ei(s,l,a);r[a]?(r[a].p(f,u),V(r[a],1)):(r[a]=li(f),r[a].c(),V(r[a],1),r[a].m(t.parentNode,t))}for(ce(),a=l.length;a<r.length;a+=1)o(a);de()}},i(s){if(!n){for(let u=0;u<l.length;u+=1)V(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)H(r[u]);n=!1},d(s){ue(r,s),s&&N(t)}}}function li(e){let t,n;return t=new Kc({props:{source:e[4],source_content:e[1][e[6]],i:e[6]}}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},p(l,r){const o={};r&1&&(o.source=l[4]),r&2&&(o.source_content=l[1][l[6]]),t.$set(o)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function rd(e){let t,n,l=e[0]!==void 0&&ti(e);return{c(){t=A("div"),l&&l.c(),h(t,"class","sources svelte-1r759df")},m(r,o){T(r,t,o),l&&l.m(t,null),n=!0},p(r,[o]){r[0]!==void 0?l?(l.p(r,o),o&1&&V(l,1)):(l=ti(r),l.c(),V(l,1),l.m(t,null)):l&&(ce(),H(l,1,1,()=>{l=null}),de())},i(r){n||(V(l),n=!0)},o(r){H(l),n=!1},d(r){r&&N(t),l&&l.d()}}}function id(e,t,n){let{sources:l=[]}=t,{source_content:r=[]}=t,o=!1;const s=()=>n(2,o=!o);return e.$$set=u=>{"sources"in u&&n(0,l=u.sources),"source_content"in u&&n(1,r=u.source_content)},[l,r,o,s]}class od extends ie{constructor(t){super(),oe(this,t,id,rd,re,{sources:0,source_content:1})}}function ri(e,t,n){const l=e.slice();return l[4]=t[n],l}function ii(e,t,n){const l=e.slice();return l[4]=t[n],l}function oi(e){let t,n,l,r=e[4].label+"",o,s,u,a,f;return{c(){t=A("li"),n=A("span"),l=A("h5"),o=L(r),s=P(),h(l,"class","bold"),h(n,"class","svelte-iwm583"),h(t,"class",u=qr(e[0]===e[4].value?"active":"")+" svelte-iwm583")},m(c,d){T(c,t,d),b(t,n),b(n,l),b(l,o),b(t,s),a||(f=B(n,"click",function(){Qe(e[3](e[4].value))&&e[3](e[4].value).apply(this,arguments)}),a=!0)},p(c,d){e=c,d&2&&r!==(r=e[4].label+"")&&W(o,r),d&3&&u!==(u=qr(e[0]===e[4].value?"active":"")+" svelte-iwm583")&&h(t,"class",u)},d(c){c&&N(t),a=!1,f()}}}function si(e){let t,n,l,r;const o=[e[2]];var s=e[4].component;function u(a){let f={};for(let c=0;c<o.length;c+=1)f=Jn(f,o[c]);return{props:f}}return s&&(n=St(s,u())),{c(){t=A("div"),n&&te(n.$$.fragment),l=P(),h(t,"class","box svelte-iwm583")},m(a,f){T(a,t,f),n&&J(n,t,null),b(t,l),r=!0},p(a,f){const c=f&4?Ys(o,[Qs(a[2])]):{};if(f&2&&s!==(s=a[4].component)){if(n){ce();const d=n;H(d.$$.fragment,1,0,()=>{Z(d,1)}),de()}s?(n=St(s,u()),te(n.$$.fragment),V(n.$$.fragment,1),J(n,t,l)):n=null}else s&&n.$set(c)},i(a){r||(n&&V(n.$$.fragment,a),r=!0)},o(a){n&&H(n.$$.fragment,a),r=!1},d(a){a&&N(t),n&&Z(n)}}}function ai(e){let t,n,l=e[0]==e[4].value&&si(e);return{c(){l&&l.c(),t=_e()},m(r,o){l&&l.m(r,o),T(r,t,o),n=!0},p(r,o){r[0]==r[4].value?l?(l.p(r,o),o&3&&V(l,1)):(l=si(r),l.c(),V(l,1),l.m(t.parentNode,t)):l&&(ce(),H(l,1,1,()=>{l=null}),de())},i(r){n||(V(l),n=!0)},o(r){H(l),n=!1},d(r){l&&l.d(r),r&&N(t)}}}function sd(e){let t,n,l,r,o=e[1],s=[];for(let c=0;c<o.length;c+=1)s[c]=oi(ii(e,o,c));let u=e[1],a=[];for(let c=0;c<u.length;c+=1)a[c]=ai(ri(e,u,c));const f=c=>H(a[c],1,1,()=>{a[c]=null});return{c(){t=A("ul");for(let c=0;c<s.length;c+=1)s[c].c();n=P();for(let c=0;c<a.length;c+=1)a[c].c();l=_e(),h(t,"class","svelte-iwm583")},m(c,d){T(c,t,d);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(t,null);T(c,n,d);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(c,d);T(c,l,d),r=!0},p(c,[d]){if(d&11){o=c[1];let g;for(g=0;g<o.length;g+=1){const p=ii(c,o,g);s[g]?s[g].p(p,d):(s[g]=oi(p),s[g].c(),s[g].m(t,null))}for(;g<s.length;g+=1)s[g].d(1);s.length=o.length}if(d&7){u=c[1];let g;for(g=0;g<u.length;g+=1){const p=ri(c,u,g);a[g]?(a[g].p(p,d),V(a[g],1)):(a[g]=ai(p),a[g].c(),V(a[g],1),a[g].m(l.parentNode,l))}for(ce(),g=u.length;g<a.length;g+=1)f(g);de()}},i(c){if(!r){for(let d=0;d<u.length;d+=1)V(a[d]);r=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)H(a[d]);r=!1},d(c){c&&N(t),ue(s,c),c&&N(n),ue(a,c),c&&N(l)}}}function ad(e,t,n){let{items:l=[]}=t,{activeTabValue:r=1}=t,{tabProps:o={}}=t;const s=u=>()=>n(0,r=u);return e.$$set=u=>{"items"in u&&n(1,l=u.items),"activeTabValue"in u&&n(0,r=u.activeTabValue),"tabProps"in u&&n(2,o=u.tabProps)},[r,l,o,s]}class ud extends ie{constructor(t){super(),oe(this,t,ad,sd,re,{items:1,activeTabValue:0,tabProps:2})}}function ui(e){let t;return{c(){t=L("Press ENTER to autofill with the RAG answer.")},m(n,l){T(n,t,l)},d(n){n&&N(t)}}}function fd(e){let t,n,l,r,o,s,u,a,f,c,d,g,p,m=e[0].edited_answer===ll&&ui();return{c(){t=A("form"),n=A("textarea"),r=P(),o=A("div"),s=A("div"),m&&m.c(),u=P(),a=A("div"),f=A("button"),f.textContent="Update",c=P(),d=A("button"),d.textContent="Reset",h(n,"placeholder",l=e[0].answer),h(s,"class","note svelte-i9wciy"),h(o,"class","button-container svelte-i9wciy")},m(v,_){T(v,t,_),b(t,n),lt(n,e[0].edited_answer),e[6](n),b(t,r),b(t,o),b(o,s),m&&m.m(s,null),b(o,u),b(o,a),b(a,f),b(a,c),b(a,d),g||(p=[B(n,"input",e[5]),B(n,"keydown",e[4]),B(f,"click",e[2]),B(d,"click",e[3])],g=!0)},p(v,[_]){_&1&&l!==(l=v[0].answer)&&h(n,"placeholder",l),_&1&&lt(n,v[0].edited_answer),v[0].edited_answer===ll?m||(m=ui(),m.c(),m.m(s,null)):m&&(m.d(1),m=null)},i:x,o:x,d(v){v&&N(t),e[6](null),m&&m.d(),g=!1,ge(p)}}}const ll="";function cd(e,t,n){let{message:l={}}=t,r;const o=async d=>{const g={id:l.id,new_answer:d},p=await fetch("/chat/rag_table/update_answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(p.ok)console.log("Answer updated successfully",p),n(0,l.edited_answer=d,l);else{const m=await p.text();alert(m)}},s=d=>{d.preventDefault(),o(l.edited_answer)},u=d=>{d.preventDefault(),o(ll)},a=d=>{d.key=="Enter"&&l.edited_answer===ll&&(d.preventDefault(),console.log("ENTER"),n(0,l.edited_answer=l.answer,l))};st(function(){r.focus()});function f(){l.edited_answer=this.value,n(0,l)}function c(d){yn[d?"unshift":"push"](()=>{r=d,n(1,r)})}return e.$$set=d=>{"message"in d&&n(0,l=d.message)},[l,r,s,u,a,f,c]}class dd extends ie{constructor(t){super(),oe(this,t,cd,fd,re,{message:0})}}function fi(e){let t,n,l,r,o,s;return{c(){t=A("div"),n=A("button"),n.textContent="👍",l=P(),r=A("button"),r.textContent="👎",h(n,"class","small-button thumbs-up svelte-1u8cd0w"),h(r,"class","small-button thumbs-down svelte-1u8cd0w"),h(t,"class","feedback-buttons svelte-1u8cd0w")},m(u,a){T(u,t,a),b(t,n),b(t,l),b(t,r),o||(s=[B(n,"click",e[4]),B(r,"click",e[5])],o=!0)},p:x,d(u){u&&N(t),o=!1,ge(s)}}}function hd(e){let t,n=e[0].answer+"",l,r,o,s=e[1]&&fi(e);return{c(){t=A("div"),l=L(n),r=P(),s&&s.c(),o=_e()},m(u,a){T(u,t,a),b(t,l),T(u,r,a),s&&s.m(u,a),T(u,o,a)},p(u,[a]){a&1&&n!==(n=u[0].answer+"")&&W(l,n),u[1]?s?s.p(u,a):(s=fi(u),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:x,o:x,d(u){u&&N(t),u&&N(r),s&&s.d(u),u&&N(o)}}}async function gd(e){const t=await fetch("/chat/rag_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function pd(e,t,n){let l;le(e,Ve,c=>n(6,l=c));let{message:r={}}=t,{feedback:o=!1}=t,{index:s=0}=t;function u(c,d,g){const p=l[g];p.vote=d;const m={id:g+1,vote_status:d};gd(m),dt(c.currentTarget.parentNode).selectAll("button").style("border","3px solid transparent").style("opacity",.65),dt(c.currentTarget).style("border","3px solid var(--black)").style("opacity",1)}const a=c=>u(c,"up",s),f=c=>u(c,"down",s);return e.$$set=c=>{"message"in c&&n(0,r=c.message),"feedback"in c&&n(1,o=c.feedback),"index"in c&&n(2,s=c.index)},[r,o,s,u,a,f]}class md extends ie{constructor(t){super(),oe(this,t,pd,hd,re,{message:0,feedback:1,index:2})}}function ci(e,t,n){const l=e.slice();return l[16]=t[n],l[18]=n,l}function di(e,t){let n,l,r,o,s,u,a,f,c,d=t[16].question+"",g,p,m,v,_,w,y,$,M,k,E,S,R,C,F,I;return M=new ud({props:{items:t[7],tabProps:{message:t[16],feedback:t[0],index:t[18]}}}),E=new od({props:{sources:t[16].source,source_content:t[16].source_content}}),{key:e,first:null,c(){n=A("div"),l=A("div"),r=A("div"),o=P(),s=A("div"),u=A("div"),a=A("h5"),a.textContent="Question:",f=P(),c=A("p"),g=L(d),p=P(),m=A("div"),v=A("p"),v.textContent="ℹ️ Retrieval Sources",w=P(),y=A("div"),$=A("div"),te(M.$$.fragment),k=P(),te(E.$$.fragment),S=P(),h(r,"class","avatar"),h(a,"class","bold"),h(v,"class","bold"),h(m,"class","rag-sources svelte-aj7hp0"),h(u,"class","question svelte-aj7hp0"),h($,"class","answer svelte-aj7hp0"),h(y,"class","answers svelte-aj7hp0"),h(s,"class","message-content svelte-aj7hp0"),h(l,"class","chat-message-center svelte-aj7hp0"),h(n,"class","chat-message svelte-aj7hp0"),this.first=n},m(D,z){T(D,n,z),b(n,l),b(l,r),b(l,o),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,g),b(u,p),b(u,m),b(m,v),b(s,w),b(s,y),b(y,$),J(M,$,null),b(s,k),J(E,s,null),b(n,S),C=!0,F||(I=[wn(_=Pc.call(null,v,hi(t[16]))),wn(R=vd.call(null,n,t[18]===t[4].length-1))],F=!0)},p(D,z){t=D,(!C||z&16)&&d!==(d=t[16].question+"")&&W(g,d),_&&Qe(_.update)&&z&16&&_.update.call(null,hi(t[16]));const O={};z&17&&(O.tabProps={message:t[16],feedback:t[0],index:t[18]}),M.$set(O);const U={};z&16&&(U.sources=t[16].source),z&16&&(U.source_content=t[16].source_content),E.$set(U),R&&Qe(R.update)&&z&16&&R.update.call(null,t[18]===t[4].length-1)},i(D){C||(V(M.$$.fragment,D),V(E.$$.fragment,D),C=!0)},o(D){H(M.$$.fragment,D),H(E.$$.fragment,D),C=!1},d(D){D&&N(n),Z(M),Z(E),F=!1,ge(I)}}}function _d(e){let t,n,l,r,o,s,u=[],a=new Map,f,c,d,g,p,m,v,_,w,y=(e[2]?e[3]:"Send")+"",$,M,k,E,S,R,C,F=e[4];const I=D=>D[18];for(let D=0;D<F.length;D+=1){let z=ci(e,F,D),O=I(z);a.set(O,u[D]=di(O,z))}return g=new Uc({props:{documents:e[5]}}),{c(){t=A("div"),n=A("div"),n.innerHTML=`<h5 class="underline bold svelte-aj7hp0">Vote Feedback Instructions</h5> 
    <p class="svelte-aj7hp0">Ask a question to receive an answer from the chatbot. If the response is
      satisfactory, click on the <span class="inline-button green svelte-aj7hp0">👍</span>
      button. If the response is not satisfactory, click on the
      <span class="inline-button red svelte-aj7hp0">👎</span> button.</p>`,l=P(),r=A("div"),o=A("section"),s=A("div");for(let D=0;D<u.length;D+=1)u[D].c();f=P(),c=A("div"),d=A("div"),te(g.$$.fragment),p=P(),m=A("form"),v=A("input"),_=P(),w=A("button"),$=L(y),k=P(),E=A("p"),E.textContent="Note - may produce inaccurate information.",h(n,"class","instructions svelte-aj7hp0"),h(s,"class","chat-log svelte-aj7hp0"),h(o,"class","chatbox svelte-aj7hp0"),h(v,"class","chat-input-textarea svelte-aj7hp0"),h(v,"placeholder","Type Question Here"),h(w,"class",M="btnyousend "+(e[1]===""?"":"active")+" svelte-aj7hp0"),h(w,"type","submit"),h(m,"class","chat-input-form svelte-aj7hp0"),h(d,"class","chat-and-question svelte-aj7hp0"),h(E,"class","message svelte-aj7hp0"),h(c,"class","chat-input-holder svelte-aj7hp0"),h(r,"class","ranked-chat svelte-aj7hp0"),h(t,"class","ranked-feedback-container svelte-aj7hp0")},m(D,z){T(D,t,z),b(t,n),b(t,l),b(t,r),b(r,o),b(o,s);for(let O=0;O<u.length;O+=1)u[O]&&u[O].m(s,null);b(r,f),b(r,c),b(c,d),J(g,d,null),b(d,p),b(d,m),b(m,v),lt(v,e[1]),b(m,_),b(m,w),b(w,$),b(c,k),b(c,E),S=!0,R||(C=[B(v,"input",e[11]),B(m,"submit",e[8])],R=!0)},p(D,[z]){z&145&&(F=D[4],ce(),u=ct(u,z,I,1,D,F,a,s,Xs,di,null,ci),de());const O={};z&32&&(O.documents=D[5]),g.$set(O),z&2&&v.value!==D[1]&&lt(v,D[1]),(!S||z&12)&&y!==(y=(D[2]?D[3]:"Send")+"")&&W($,y),(!S||z&2&&M!==(M="btnyousend "+(D[1]===""?"":"active")+" svelte-aj7hp0"))&&h(w,"class",M)},i(D){if(!S){for(let z=0;z<F.length;z+=1)V(u[z]);V(g.$$.fragment,D),S=!0}},o(D){for(let z=0;z<u.length;z+=1)H(u[z]);H(g.$$.fragment,D),S=!1},d(D){D&&N(t);for(let z=0;z<u.length;z+=1)u[z].d();Z(g),R=!1,ge(C)}}}function vd(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function hi(e){return e.rag_sources.length===0?"No Sources":e.rag_sources.join(", ")}function bd(e,t,n){let l,r,o,s;le(e,Ve,$=>n(4,r=$)),le(e,er,$=>n(13,o=$));let{feedback:u=!1}=t,{is_retrieval:a=!1}=t;const f=Ae([]);le(e,f,$=>n(5,s=$));let c="",d="",g=!1,p=[{label:"Answer",value:1,component:md},{label:"Modified Answer",value:2,component:dd}];st(()=>{v(),m()});async function m(){const M=await(await fetch("/retrieval/file/get")).json();console.log("data",M.files);const E=M.files.map((S,R)=>({id:String(R),name:S.name}));console.log("files",E),Ne(f,s=[...E],s)}async function v(){const k=(await(await fetch("/chat/rag_table/retrieve")).json()).rows;console.log("Got data from db",k);const E=k.map(S=>({id:S[0],question:S[1],answer:S[2],edited_answer:S[3],vote_status:S[4],rag_sources:S[5],source:S[6],source_content:S[7]}));Ne(Ve,r=[...E],r)}const _=async $=>{$.preventDefault(),c=d,n(1,d=""),n(2,g=!0);const M=[...o];let k={id:r.length+1,question:c,answer:"Loading...",rag_sources:M,vote_status:"na",source:["Loading..."],source_content:["Loading..."]};Ne(Ve,r=[...r,k],r);const E=a?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c,file_names:M})}):await fetch(`/chat/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c})});if(E.ok){const S=await E.json();console.log("response data",S),k.answer=S.answer,k.source=S.source,k.source_content=S.source_content,Ve.update(R=>(R[R.length-1]=k,R))}else{const S=await E.text();alert(S)}n(2,g=!1)};let w=0;setInterval(()=>{n(10,w=(w+1)%4)},200);function y(){d=this.value,n(1,d)}return e.$$set=$=>{"feedback"in $&&n(0,u=$.feedback),"is_retrieval"in $&&n(9,a=$.is_retrieval)},e.$$.update=()=>{e.$$.dirty&1024&&n(3,l=".".repeat(w).padEnd(3))},[u,d,g,l,r,s,f,p,_,a,w,y]}class wd extends ie{constructor(t){super(),oe(this,t,bd,_d,re,{feedback:0,is_retrieval:9})}}function gi(e){let t,n;return t=new Ar({props:{is_retrieval:e[1]}}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},p(l,r){const o={};r&2&&(o.is_retrieval=l[1]),t.$set(o)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function pi(e){let t,n;return t=new Ar({props:{feedback:!0,is_retrieval:e[1]}}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},p(l,r){const o={};r&2&&(o.is_retrieval=l[1]),t.$set(o)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function mi(e){let t,n;return t=new wd({props:{feedback:!0,is_retrieval:e[1]}}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},p(l,r){const o={};r&2&&(o.is_retrieval=l[1]),t.$set(o)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function _i(e){let t,n,l,r;const o=[kd,yd],s=[];function u(a,f){return a[1]?0:1}return t=u(e),n=s[t]=o[t](e),{c(){n.c(),l=_e()},m(a,f){s[t].m(a,f),T(a,l,f),r=!0},p(a,f){let c=t;t=u(a),t===c?s[t].p(a,f):(ce(),H(s[c],1,1,()=>{s[c]=null}),de(),n=s[t],n?n.p(a,f):(n=s[t]=o[t](a),n.c()),V(n,1),n.m(l.parentNode,l))},i(a){r||(V(n),r=!0)},o(a){H(n),r=!1},d(a){s[t].d(a),a&&N(l)}}}function yd(e){let t,n;return t=new xc({}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},p:x,i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function kd(e){let t,n;return t=new Ar({props:{feedback:!0,is_retrieval:e[1]}}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},p(l,r){const o={};r&2&&(o.is_retrieval=l[1]),t.$set(o)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function Sd(e){let t,n,l,r,o,s=!e[0]&&gi(e),u=e[0]==="vote"&&pi(e),a=e[0]==="rag"&&mi(e),f=e[0]==="rank"&&_i(e);return{c(){s&&s.c(),t=P(),u&&u.c(),n=P(),a&&a.c(),l=P(),f&&f.c(),r=_e()},m(c,d){s&&s.m(c,d),T(c,t,d),u&&u.m(c,d),T(c,n,d),a&&a.m(c,d),T(c,l,d),f&&f.m(c,d),T(c,r,d),o=!0},p(c,[d]){c[0]?s&&(ce(),H(s,1,1,()=>{s=null}),de()):s?(s.p(c,d),d&1&&V(s,1)):(s=gi(c),s.c(),V(s,1),s.m(t.parentNode,t)),c[0]==="vote"?u?(u.p(c,d),d&1&&V(u,1)):(u=pi(c),u.c(),V(u,1),u.m(n.parentNode,n)):u&&(ce(),H(u,1,1,()=>{u=null}),de()),c[0]==="rag"?a?(a.p(c,d),d&1&&V(a,1)):(a=mi(c),a.c(),V(a,1),a.m(l.parentNode,l)):a&&(ce(),H(a,1,1,()=>{a=null}),de()),c[0]==="rank"?f?(f.p(c,d),d&1&&V(f,1)):(f=_i(c),f.c(),V(f,1),f.m(r.parentNode,r)):f&&(ce(),H(f,1,1,()=>{f=null}),de())},i(c){o||(V(s),V(u),V(a),V(f),o=!0)},o(c){H(s),H(u),H(a),H(f),o=!1},d(c){s&&s.d(c),c&&N(t),u&&u.d(c),c&&N(n),a&&a.d(c),c&&N(l),f&&f.d(c),c&&N(r)}}}function Cd(e,t,n){let{feedback:l}=t,{is_retrieval:r}=t;return e.$$set=o=>{"feedback"in o&&n(0,l=o.feedback),"is_retrieval"in o&&n(1,r=o.is_retrieval)},[l,r]}class $d extends ie{constructor(t){super(),oe(this,t,Cd,Sd,re,{feedback:0,is_retrieval:1})}}function vi(e,t,n){const l=e.slice();return l[2]=t[n],l}function bi(e){let t,n=e[2]+"",l,r;return{c(){t=A("option"),l=L(n),t.__value=r=e[2],t.value=t.__value},m(o,s){T(o,t,s),b(t,l)},p(o,s){s&1&&n!==(n=o[2]+"")&&W(l,n),s&1&&r!==(r=o[2])&&(t.__value=r,t.value=t.__value)},d(o){o&&N(t)}}}function Rd(e){let t,n=e[0],l=[];for(let r=0;r<n.length;r+=1)l[r]=bi(vi(e,n,r));return{c(){t=A("select");for(let r=0;r<l.length;r+=1)l[r].c()},m(r,o){T(r,t,o);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null)},p(r,[o]){if(o&1){n=r[0];let s;for(s=0;s<n.length;s+=1){const u=vi(r,n,s);l[s]?l[s].p(u,o):(l[s]=bi(u),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},i:x,o:x,d(r){r&&N(t),ue(l,r)}}}function Ad(e,t,n){let{data_endpoint:l}=t,r=[];return st(async()=>{const o=await fetch(`/data/${l}`);n(0,r=await o.json())}),e.$$set=o=>{"data_endpoint"in o&&n(1,l=o.data_endpoint)},[r,l]}class Md extends ie{constructor(t){super(),oe(this,t,Ad,Rd,re,{data_endpoint:1})}}function Xt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ed(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function da(e){let t,n,l;e.length!==2?(t=Xt,n=(u,a)=>Xt(e(u),a),l=(u,a)=>e(u)-a):(t=e===Xt||e===Ed?e:Fd,n=e,l=e);function r(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(u[d],a)<0?f=d+1:c=d}while(f<c)}return f}function o(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(u[d],a)<=0?f=d+1:c=d}while(f<c)}return f}function s(u,a,f=0,c=u.length){const d=r(u,a,f,c-1);return d>f&&l(u[d-1],a)>-l(u[d],a)?d-1:d}return{left:r,center:s,right:o}}function Fd(){return 0}function Dd(e){return e===null?NaN:+e}function*Id(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let l of e)(l=t(l,++n,e))!=null&&(l=+l)>=l&&(yield l)}}const Nd=da(Xt),Pd=Nd.right;da(Dd).center;const ha=Pd;function Td(e,t){let n=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&++n;else{let l=-1;for(let r of e)(r=t(r,++l,e))!=null&&(r=+r)>=r&&++n}return n}function Od(e,t){let n=0,l,r=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(l=s-r,r+=l/++n,o+=l*(s-r));else{let s=-1;for(let u of e)(u=t(u,++s,e))!=null&&(u=+u)>=u&&(l=u-r,r+=l/++n,o+=l*(u-r))}if(n>1)return o/(n-1)}function Vd(e,t){const n=Od(e,t);return n&&Math.sqrt(n)}function gn(e,t){let n,l;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=l=r):(n>r&&(n=r),l<r&&(l=r)));else{let r=-1;for(let o of e)(o=t(o,++r,e))!=null&&(n===void 0?o>=o&&(n=l=o):(n>o&&(n=o),l<o&&(l=o)))}return[n,l]}class wi extends Map{constructor(t,n=qd){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[l,r]of t)this.set(l,r)}get(t){return super.get(yi(this,t))}has(t){return super.has(yi(this,t))}set(t,n){return super.set(zd(this,t),n)}delete(t){return super.delete(Hd(this,t))}}function yi({_intern:e,_key:t},n){const l=t(n);return e.has(l)?e.get(l):n}function zd({_intern:e,_key:t},n){const l=t(n);return e.has(l)?e.get(l):(e.set(l,n),n)}function Hd({_intern:e,_key:t},n){const l=t(n);return e.has(l)&&(n=e.get(l),e.delete(l)),n}function qd(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ld(e){return e}function jd(e=Xt){if(e===Xt)return ga;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const l=e(t,n);return l||l===0?l:(e(n,n)===0)-(e(t,t)===0)}}function ga(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var xd=Array.prototype,Gd=xd.slice;function Dl(e){return()=>e}const Bd=Math.sqrt(50),Ud=Math.sqrt(10),Wd=Math.sqrt(2);function rl(e,t,n){const l=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(l)),o=l/Math.pow(10,r),s=o>=Bd?10:o>=Ud?5:o>=Wd?2:1;let u,a,f;return r<0?(f=Math.pow(10,-r)/s,u=Math.round(e*f),a=Math.round(t*f),u/f<e&&++u,a/f>t&&--a,f=-f):(f=Math.pow(10,r)*s,u=Math.round(e/f),a=Math.round(t/f),u*f<e&&++u,a*f>t&&--a),a<u&&.5<=n&&n<2?rl(e,t,n*2):[u,a,f]}function pa(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const l=t<e,[r,o,s]=l?rl(t,e,n):rl(e,t,n);if(!(o>=r))return[];const u=o-r+1,a=new Array(u);if(l)if(s<0)for(let f=0;f<u;++f)a[f]=(o-f)/-s;else for(let f=0;f<u;++f)a[f]=(o-f)*s;else if(s<0)for(let f=0;f<u;++f)a[f]=(r+f)/-s;else for(let f=0;f<u;++f)a[f]=(r+f)*s;return a}function Jt(e,t,n){return t=+t,e=+e,n=+n,rl(e,t,n)[2]}function Xd(e,t,n){t=+t,e=+e,n=+n;const l=t<e,r=l?Jt(t,e,n):Jt(e,t,n);return(l?-1:1)*(r<0?1/-r:r)}function Yd(e,t,n){let l;for(;;){const r=Jt(e,t,n);if(r===l||r===0||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),l=r}}function Qd(e){return Math.max(1,Math.ceil(Math.log(Td(e))/Math.LN2)+1)}function ma(){var e=Ld,t=gn,n=Qd;function l(r){Array.isArray(r)||(r=Array.from(r));var o,s=r.length,u,a,f=new Array(s);for(o=0;o<s;++o)f[o]=e(r[o],o,r);var c=t(f),d=c[0],g=c[1],p=n(f,d,g);if(!Array.isArray(p)){const $=g,M=+p;if(t===gn&&([d,g]=Yd(d,g,M)),p=pa(d,g,M),p[0]<=d&&(a=Jt(d,g,M)),p[p.length-1]>=g)if($>=g&&t===gn){const k=Jt(d,g,M);isFinite(k)&&(k>0?g=(Math.floor(g/k)+1)*k:k<0&&(g=(Math.ceil(g*-k)+1)/-k))}else p.pop()}for(var m=p.length,v=0,_=m;p[v]<=d;)++v;for(;p[_-1]>g;)--_;(v||_<m)&&(p=p.slice(v,_),m=_-v);var w=new Array(m+1),y;for(o=0;o<=m;++o)y=w[o]=[],y.x0=o>0?p[o-1]:d,y.x1=o<m?p[o]:g;if(isFinite(a)){if(a>0)for(o=0;o<s;++o)(u=f[o])!=null&&d<=u&&u<=g&&w[Math.min(m,Math.floor((u-d)/a))].push(r[o]);else if(a<0){for(o=0;o<s;++o)if((u=f[o])!=null&&d<=u&&u<=g){const $=Math.floor((d-u)*a);w[Math.min(m,$+(p[$]<=u))].push(r[o])}}}else for(o=0;o<s;++o)(u=f[o])!=null&&d<=u&&u<=g&&w[ha(p,u,0,m)].push(r[o]);return w}return l.value=function(r){return arguments.length?(e=typeof r=="function"?r:Dl(r),l):e},l.domain=function(r){return arguments.length?(t=typeof r=="function"?r:Dl([r[0],r[1]]),l):t},l.thresholds=function(r){return arguments.length?(n=typeof r=="function"?r:Dl(Array.isArray(r)?Gd.call(r):r),l):n},l}function ht(e,t){let n;if(t===void 0)for(const l of e)l!=null&&(n<l||n===void 0&&l>=l)&&(n=l);else{let l=-1;for(let r of e)(r=t(r,++l,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function lr(e,t){let n;if(t===void 0)for(const l of e)l!=null&&(n>l||n===void 0&&l>=l)&&(n=l);else{let l=-1;for(let r of e)(r=t(r,++l,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function _a(e,t,n=0,l=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),l=Math.floor(Math.min(e.length-1,l)),!(n<=t&&t<=l))return e;for(r=r===void 0?ga:jd(r);l>n;){if(l-n>600){const a=l-n+1,f=t-n+1,c=Math.log(a),d=.5*Math.exp(2*c/3),g=.5*Math.sqrt(c*d*(a-d)/a)*(f-a/2<0?-1:1),p=Math.max(n,Math.floor(t-f*d/a+g)),m=Math.min(l,Math.floor(t+(a-f)*d/a+g));_a(e,t,p,m,r)}const o=e[t];let s=n,u=l;for(on(e,n,t),r(e[l],o)>0&&on(e,n,l);s<u;){for(on(e,s,u),++s,--u;r(e[s],o)<0;)++s;for(;r(e[u],o)>0;)--u}r(e[n],o)===0?on(e,n,u):(++u,on(e,u,l)),u<=t&&(n=u+1),t<=u&&(l=u-1)}return e}function on(e,t,n){const l=e[t];e[t]=e[n],e[n]=l}function Kd(e,t,n){if(e=Float64Array.from(Id(e,n)),!(!(l=e.length)||isNaN(t=+t))){if(t<=0||l<2)return lr(e);if(t>=1)return ht(e);var l,r=(l-1)*t,o=Math.floor(r),s=ht(_a(e,o).subarray(0,o+1)),u=lr(e.subarray(o+1));return s+(u-s)*(r-o)}}function Jd(e,t){let n=0,l=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,l+=r);else{let r=-1;for(let o of e)(o=t(o,++r,e))!=null&&(o=+o)>=o&&(++n,l+=o)}if(n)return l/n}function Zd(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var l=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(r);++l<r;)o[l]=e+l*n;return o}function eh(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function il(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}function Zt(e){return e=il(Math.abs(e)),e?e[1]:NaN}function th(e,t){return function(n,l){for(var r=n.length,o=[],s=0,u=e[0],a=0;r>0&&u>0&&(a+u+1>l&&(u=Math.max(1,l-a)),o.push(n.substring(r-=u,r+u)),!((a+=u+1)>l));)u=e[s=(s+1)%e.length];return o.reverse().join(t)}}function nh(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var lh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ol(e){if(!(t=lh.exec(e)))throw new Error("invalid format: "+e);var t;return new Mr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ol.prototype=Mr.prototype;function Mr(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Mr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rh(e){e:for(var t=e.length,n=1,l=-1,r;n<t;++n)switch(e[n]){case".":l=r=n;break;case"0":l===0&&(l=n),r=n;break;default:if(!+e[n])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(r+1):e}var va;function ih(e,t){var n=il(e,t);if(!n)return e+"";var l=n[0],r=n[1],o=r-(va=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=l.length;return o===s?l:o>s?l+new Array(o-s+1).join("0"):o>0?l.slice(0,o)+"."+l.slice(o):"0."+new Array(1-o).join("0")+il(e,Math.max(0,t+o-1))[0]}function ki(e,t){var n=il(e,t);if(!n)return e+"";var l=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+l:l.length>r+1?l.slice(0,r+1)+"."+l.slice(r+1):l+new Array(r-l.length+2).join("0")}const Si={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:eh,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ki(e*100,t),r:ki,s:ih,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ci(e){return e}var $i=Array.prototype.map,Ri=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function oh(e){var t=e.grouping===void 0||e.thousands===void 0?Ci:th($i.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Ci:nh($i.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function f(d){d=ol(d);var g=d.fill,p=d.align,m=d.sign,v=d.symbol,_=d.zero,w=d.width,y=d.comma,$=d.precision,M=d.trim,k=d.type;k==="n"?(y=!0,k="g"):Si[k]||($===void 0&&($=12),M=!0,k="g"),(_||g==="0"&&p==="=")&&(_=!0,g="0",p="=");var E=v==="$"?n:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=v==="$"?l:/[%p]/.test(k)?s:"",R=Si[k],C=/[defgprs%]/.test(k);$=$===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function F(I){var D=E,z=S,O,U,G;if(k==="c")z=R(I)+z,I="";else{I=+I;var $e=I<0||1/I<0;if(I=isNaN(I)?a:R(Math.abs(I),$),M&&(I=rh(I)),$e&&+I==0&&m!=="+"&&($e=!1),D=($e?m==="("?m:u:m==="-"||m==="("?"":m)+D,z=(k==="s"?Ri[8+va/3]:"")+z+($e&&m==="("?")":""),C){for(O=-1,U=I.length;++O<U;)if(G=I.charCodeAt(O),48>G||G>57){z=(G===46?r+I.slice(O+1):I.slice(O))+z,I=I.slice(0,O);break}}}y&&!_&&(I=t(I,1/0));var Fe=D.length+I.length+z.length,Re=Fe<w?new Array(w-Fe+1).join(g):"";switch(y&&_&&(I=t(Re+I,Re.length?w-z.length:1/0),Re=""),p){case"<":I=D+I+z+Re;break;case"=":I=D+Re+I+z;break;case"^":I=Re.slice(0,Fe=Re.length>>1)+D+I+z+Re.slice(Fe);break;default:I=Re+D+I+z;break}return o(I)}return F.toString=function(){return d+""},F}function c(d,g){var p=f((d=ol(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(Zt(g)/3)))*3,v=Math.pow(10,-m),_=Ri[8+m/3];return function(w){return p(v*w)+_}}return{format:f,formatPrefix:c}}var Tn,pt,ba;sh({thousands:",",grouping:[3],currency:["$",""]});function sh(e){return Tn=oh(e),pt=Tn.format,ba=Tn.formatPrefix,Tn}function ah(e){return Math.max(0,-Zt(Math.abs(e)))}function uh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zt(t)/3)))*3-Zt(Math.abs(e)))}function fh(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zt(t)-Zt(e))+1}function Er(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ch(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Ai=Symbol("implicit");function $t(){var e=new wi,t=[],n=[],l=Ai;function r(o){let s=e.get(o);if(s===void 0){if(l!==Ai)return l;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new wi;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(l=o,r):l},r.copy=function(){return $t(t,n).unknown(l)},Er.apply(r,arguments),r}function Vt(){var e=$t().unknown(void 0),t=e.domain,n=e.range,l=0,r=1,o,s,u=!1,a=0,f=0,c=.5;delete e.unknown;function d(){var g=t().length,p=r<l,m=p?r:l,v=p?l:r;o=(v-m)/Math.max(1,g-a+f*2),u&&(o=Math.floor(o)),m+=(v-m-o*(g-a))*c,s=o*(1-a),u&&(m=Math.round(m),s=Math.round(s));var _=Zd(g).map(function(w){return m+o*w});return n(p?_.reverse():_)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?([l,r]=g,l=+l,r=+r,d()):[l,r]},e.rangeRound=function(g){return[l,r]=g,l=+l,r=+r,u=!0,d()},e.bandwidth=function(){return s},e.step=function(){return o},e.round=function(g){return arguments.length?(u=!!g,d()):u},e.padding=function(g){return arguments.length?(a=Math.min(1,f=+g),d()):a},e.paddingInner=function(g){return arguments.length?(a=Math.min(1,g),d()):a},e.paddingOuter=function(g){return arguments.length?(f=+g,d()):f},e.align=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),d()):c},e.copy=function(){return Vt(t(),[l,r]).round(u).paddingInner(a).paddingOuter(f).align(c)},Er.apply(d(),arguments)}function wa(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return wa(t())},e}function Mi(){return wa(Vt.apply(null,arguments).paddingInner(1))}function Fr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ya(e,t){var n=Object.create(e.prototype);for(var l in t)n[l]=t[l];return n}function Mn(){}var Cn=.7,sl=1/Cn,Yt="\\s*([+-]?\\d+)\\s*",$n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dh=/^#([0-9a-f]{3,8})$/,hh=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),gh=new RegExp(`^rgb\\(${tt},${tt},${tt}\\)$`),ph=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${$n}\\)$`),mh=new RegExp(`^rgba\\(${tt},${tt},${tt},${$n}\\)$`),_h=new RegExp(`^hsl\\(${$n},${tt},${tt}\\)$`),vh=new RegExp(`^hsla\\(${$n},${tt},${tt},${$n}\\)$`),Ei={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fr(Mn,Rn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Fi,formatHex:Fi,formatHex8:bh,formatHsl:wh,formatRgb:Di,toString:Di});function Fi(){return this.rgb().formatHex()}function bh(){return this.rgb().formatHex8()}function wh(){return ka(this).formatHsl()}function Di(){return this.rgb().formatRgb()}function Rn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ii(t):n===3?new ze(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?On(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?On(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hh.exec(e))?new ze(t[1],t[2],t[3],1):(t=gh.exec(e))?new ze(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ph.exec(e))?On(t[1],t[2],t[3],t[4]):(t=mh.exec(e))?On(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_h.exec(e))?Ti(t[1],t[2]/100,t[3]/100,1):(t=vh.exec(e))?Ti(t[1],t[2]/100,t[3]/100,t[4]):Ei.hasOwnProperty(e)?Ii(Ei[e]):e==="transparent"?new ze(NaN,NaN,NaN,0):null}function Ii(e){return new ze(e>>16&255,e>>8&255,e&255,1)}function On(e,t,n,l){return l<=0&&(e=t=n=NaN),new ze(e,t,n,l)}function yh(e){return e instanceof Mn||(e=Rn(e)),e?(e=e.rgb(),new ze(e.r,e.g,e.b,e.opacity)):new ze}function rr(e,t,n,l){return arguments.length===1?yh(e):new ze(e,t,n,l??1)}function ze(e,t,n,l){this.r=+e,this.g=+t,this.b=+n,this.opacity=+l}Fr(ze,rr,ya(Mn,{brighter(e){return e=e==null?sl:Math.pow(sl,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cn:Math.pow(Cn,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ze(Tt(this.r),Tt(this.g),Tt(this.b),al(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ni,formatHex:Ni,formatHex8:kh,formatRgb:Pi,toString:Pi}));function Ni(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}`}function kh(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}${Nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pi(){const e=al(this.opacity);return`${e===1?"rgb(":"rgba("}${Tt(this.r)}, ${Tt(this.g)}, ${Tt(this.b)}${e===1?")":`, ${e})`}`}function al(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Nt(e){return e=Tt(e),(e<16?"0":"")+e.toString(16)}function Ti(e,t,n,l){return l<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Xe(e,t,n,l)}function ka(e){if(e instanceof Xe)return new Xe(e.h,e.s,e.l,e.opacity);if(e instanceof Mn||(e=Rn(e)),!e)return new Xe;if(e instanceof Xe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,l=e.b/255,r=Math.min(t,n,l),o=Math.max(t,n,l),s=NaN,u=o-r,a=(o+r)/2;return u?(t===o?s=(n-l)/u+(n<l)*6:n===o?s=(l-t)/u+2:s=(t-n)/u+4,u/=a<.5?o+r:2-o-r,s*=60):u=a>0&&a<1?0:s,new Xe(s,u,a,e.opacity)}function Sh(e,t,n,l){return arguments.length===1?ka(e):new Xe(e,t,n,l??1)}function Xe(e,t,n,l){this.h=+e,this.s=+t,this.l=+n,this.opacity=+l}Fr(Xe,Sh,ya(Mn,{brighter(e){return e=e==null?sl:Math.pow(sl,e),new Xe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cn:Math.pow(Cn,e),new Xe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,l=n+(n<.5?n:1-n)*t,r=2*n-l;return new ze(Il(e>=240?e-240:e+120,r,l),Il(e,r,l),Il(e<120?e+240:e-120,r,l),this.opacity)},clamp(){return new Xe(Oi(this.h),Vn(this.s),Vn(this.l),al(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=al(this.opacity);return`${e===1?"hsl(":"hsla("}${Oi(this.h)}, ${Vn(this.s)*100}%, ${Vn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Oi(e){return e=(e||0)%360,e<0?e+360:e}function Vn(e){return Math.max(0,Math.min(1,e||0))}function Il(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Dr=e=>()=>e;function Ch(e,t){return function(n){return e+n*t}}function $h(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(l){return Math.pow(e+l*t,n)}}function Rh(e){return(e=+e)==1?Sa:function(t,n){return n-t?$h(t,n,e):Dr(isNaN(t)?n:t)}}function Sa(e,t){var n=t-e;return n?Ch(e,n):Dr(isNaN(e)?t:e)}const ir=function e(t){var n=Rh(t);function l(r,o){var s=n((r=rr(r)).r,(o=rr(o)).r),u=n(r.g,o.g),a=n(r.b,o.b),f=Sa(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=u(c),r.b=a(c),r.opacity=f(c),r+""}}return l.gamma=e,l}(1);function Ah(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,l=t.slice(),r;return function(o){for(r=0;r<n;++r)l[r]=e[r]*(1-o)+t[r]*o;return l}}function Mh(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Eh(e,t){var n=t?t.length:0,l=e?Math.min(n,e.length):0,r=new Array(l),o=new Array(n),s;for(s=0;s<l;++s)r[s]=En(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(u){for(s=0;s<l;++s)o[s]=r[s](u);return o}}function Fh(e,t){var n=new Date;return e=+e,t=+t,function(l){return n.setTime(e*(1-l)+t*l),n}}function ul(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Dh(e,t){var n={},l={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=En(e[r],t[r]):l[r]=t[r];return function(o){for(r in n)l[r]=n[r](o);return l}}var or=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nl=new RegExp(or.source,"g");function Ih(e){return function(){return e}}function Nh(e){return function(t){return e(t)+""}}function Ph(e,t){var n=or.lastIndex=Nl.lastIndex=0,l,r,o,s=-1,u=[],a=[];for(e=e+"",t=t+"";(l=or.exec(e))&&(r=Nl.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),u[s]?u[s]+=o:u[++s]=o),(l=l[0])===(r=r[0])?u[s]?u[s]+=r:u[++s]=r:(u[++s]=null,a.push({i:s,x:ul(l,r)})),n=Nl.lastIndex;return n<t.length&&(o=t.slice(n),u[s]?u[s]+=o:u[++s]=o),u.length<2?a[0]?Nh(a[0].x):Ih(t):(t=a.length,function(f){for(var c=0,d;c<t;++c)u[(d=a[c]).i]=d.x(f);return u.join("")})}function En(e,t){var n=typeof t,l;return t==null||n==="boolean"?Dr(t):(n==="number"?ul:n==="string"?(l=Rn(t))?(t=l,ir):Ph:t instanceof Rn?ir:t instanceof Date?Fh:Mh(t)?Ah:Array.isArray(t)?Eh:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Dh:ul)(e,t)}function Ca(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Th(e){return function(){return e}}function Oh(e){return+e}var Vi=[0,1];function bt(e){return e}function sr(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Th(isNaN(t)?NaN:.5)}function Vh(e,t){var n;return e>t&&(n=e,e=t,t=n),function(l){return Math.max(e,Math.min(t,l))}}function zh(e,t,n){var l=e[0],r=e[1],o=t[0],s=t[1];return r<l?(l=sr(r,l),o=n(s,o)):(l=sr(l,r),o=n(o,s)),function(u){return o(l(u))}}function Hh(e,t,n){var l=Math.min(e.length,t.length)-1,r=new Array(l),o=new Array(l),s=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<l;)r[s]=sr(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(u){var a=ha(e,u,1,l)-1;return o[a](r[a](u))}}function qh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Lh(){var e=Vi,t=Vi,n=En,l,r,o,s=bt,u,a,f;function c(){var g=Math.min(e.length,t.length);return s!==bt&&(s=Vh(e[0],e[g-1])),u=g>2?Hh:zh,a=f=null,d}function d(g){return g==null||isNaN(g=+g)?o:(a||(a=u(e.map(l),t,n)))(l(s(g)))}return d.invert=function(g){return s(r((f||(f=u(t,e.map(l),ul)))(g)))},d.domain=function(g){return arguments.length?(e=Array.from(g,Oh),c()):e.slice()},d.range=function(g){return arguments.length?(t=Array.from(g),c()):t.slice()},d.rangeRound=function(g){return t=Array.from(g),n=Ca,c()},d.clamp=function(g){return arguments.length?(s=g?!0:bt,c()):s!==bt},d.interpolate=function(g){return arguments.length?(n=g,c()):n},d.unknown=function(g){return arguments.length?(o=g,d):o},function(g,p){return l=g,r=p,c()}}function jh(){return Lh()(bt,bt)}function xh(e,t,n,l){var r=Xd(e,t,n),o;switch(l=ol(l??",f"),l.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(o=uh(r,s))&&(l.precision=o),ba(l,s)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(o=fh(r,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=o-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(o=ah(r))&&(l.precision=o-(l.type==="%")*2);break}}return pt(l)}function $a(e){var t=e.domain;return e.ticks=function(n){var l=t();return pa(l[0],l[l.length-1],n??10)},e.tickFormat=function(n,l){var r=t();return xh(r[0],r[r.length-1],n??10,l)},e.nice=function(n){n==null&&(n=10);var l=t(),r=0,o=l.length-1,s=l[r],u=l[o],a,f,c=10;for(u<s&&(f=s,s=u,u=f,f=r,r=o,o=f);c-- >0;){if(f=Jt(s,u,n),f===a)return l[r]=s,l[o]=u,t(l);if(f>0)s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f;else if(f<0)s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f;else break;a=f}return e},e}function Ge(){var e=jh();return e.copy=function(){return qh(e,Ge())},Er.apply(e,arguments),$a(e)}function Gh(){var e=0,t=1,n,l,r,o,s=bt,u=!1,a;function f(d){return d==null||isNaN(d=+d)?a:s(r===0?.5:(d=(o(d)-n)*r,u?Math.max(0,Math.min(1,d)):d))}f.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),l=o(t=+t),r=n===l?0:1/(l-n),f):[e,t]},f.clamp=function(d){return arguments.length?(u=!!d,f):u},f.interpolator=function(d){return arguments.length?(s=d,f):s};function c(d){return function(g){var p,m;return arguments.length?([p,m]=g,s=d(p,m),f):[s(0),s(1)]}}return f.range=c(En),f.rangeRound=c(Ca),f.unknown=function(d){return arguments.length?(a=d,f):a},function(d){return o=d,n=d(e),l=d(t),r=n===l?0:1/(l-n),f}}function Bh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ra(){var e=$a(Gh()(bt));return e.copy=function(){return Bh(e,Ra())},ch.apply(e,arguments)}function Je(e){return function(){return e}}const ar=Math.PI,ur=2*ar,Ft=1e-6,Uh=ur-Ft;function Aa(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Wh(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Aa;const n=10**t;return function(l){this._+=l[0];for(let r=1,o=l.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+l[r]}}class Xh{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Aa:Wh(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,l,r){this._append`Q${+t},${+n},${this._x1=+l},${this._y1=+r}`}bezierCurveTo(t,n,l,r,o,s){this._append`C${+t},${+n},${+l},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,l,r,o){if(t=+t,n=+n,l=+l,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,u=this._y1,a=l-t,f=r-n,c=s-t,d=u-n,g=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Ft)if(!(Math.abs(d*a-f*c)>Ft)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=l-s,m=r-u,v=a*a+f*f,_=p*p+m*m,w=Math.sqrt(v),y=Math.sqrt(g),$=o*Math.tan((ar-Math.acos((v+g-_)/(2*w*y)))/2),M=$/y,k=$/w;Math.abs(M-1)>Ft&&this._append`L${t+M*c},${n+M*d}`,this._append`A${o},${o},0,0,${+(d*p>c*m)},${this._x1=t+k*a},${this._y1=n+k*f}`}}arc(t,n,l,r,o,s){if(t=+t,n=+n,l=+l,s=!!s,l<0)throw new Error(`negative radius: ${l}`);let u=l*Math.cos(r),a=l*Math.sin(r),f=t+u,c=n+a,d=1^s,g=s?r-o:o-r;this._x1===null?this._append`M${f},${c}`:(Math.abs(this._x1-f)>Ft||Math.abs(this._y1-c)>Ft)&&this._append`L${f},${c}`,l&&(g<0&&(g=g%ur+ur),g>Uh?this._append`A${l},${l},0,1,${d},${t-u},${n-a}A${l},${l},0,1,${d},${this._x1=f},${this._y1=c}`:g>Ft&&this._append`A${l},${l},0,${+(g>=ar)},${d},${this._x1=t+l*Math.cos(o)},${this._y1=n+l*Math.sin(o)}`)}rect(t,n,l,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${l=+l}v${+r}h${-l}Z`}toString(){return this._}}function Yh(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const l=Math.floor(n);if(!(l>=0))throw new RangeError(`invalid digits: ${n}`);t=l}return e},()=>new Xh(t)}function Ma(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ea(e){this._context=e}Ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Qh(e){return new Ea(e)}function Kh(e){return e[0]}function Jh(e){return e[1]}function Zh(e,t){var n=Je(!0),l=null,r=Qh,o=null,s=Yh(u);e=typeof e=="function"?e:e===void 0?Kh:Je(e),t=typeof t=="function"?t:t===void 0?Jh:Je(t);function u(a){var f,c=(a=Ma(a)).length,d,g=!1,p;for(l==null&&(o=r(p=s())),f=0;f<=c;++f)!(f<c&&n(d=a[f],f,a))===g&&((g=!g)?o.lineStart():o.lineEnd()),g&&o.point(+e(d,f,a),+t(d,f,a));if(p)return o=null,p+""||null}return u.x=function(a){return arguments.length?(e=typeof a=="function"?a:Je(+a),u):e},u.y=function(a){return arguments.length?(t=typeof a=="function"?a:Je(+a),u):t},u.defined=function(a){return arguments.length?(n=typeof a=="function"?a:Je(!!a),u):n},u.curve=function(a){return arguments.length?(r=a,l!=null&&(o=r(l)),u):r},u.context=function(a){return arguments.length?(a==null?l=o=null:o=r(l=a),u):l},u}function fr(e,t){if((s=e.length)>1)for(var n=1,l,r,o=e[t[0]],s,u=o.length;n<s;++n)for(r=o,o=e[t[n]],l=0;l<u;++l)o[l][1]+=o[l][0]=isNaN(r[l][1])?r[l][0]:r[l][1]}function cr(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function eg(e,t){return e[t]}function tg(e){const t=[];return t.key=e,t}function ng(){var e=Je([]),t=cr,n=fr,l=eg;function r(o){var s=Array.from(e.apply(this,arguments),tg),u,a=s.length,f=-1,c;for(const d of o)for(u=0,++f;u<a;++u)(s[u][f]=[0,+l(d,s[u].key,f,o)]).data=d;for(u=0,c=Ma(t(s));u<a;++u)s[c[u]].index=u;return n(s,c),s}return r.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Je(Array.from(o)),r):e},r.value=function(o){return arguments.length?(l=typeof o=="function"?o:Je(+o),r):l},r.order=function(o){return arguments.length?(t=o==null?cr:typeof o=="function"?o:Je(Array.from(o)),r):t},r.offset=function(o){return arguments.length?(n=o??fr,r):n},r}function zi(e,t,n){const l=e.slice();return l[21]=t[n],l[23]=n,l}function Hi(e,t,n){const l=e.slice();l[24]=t[n];const r=l[4][l[21].key];return l[25]=r,l}function qi(e){let t,n,l,r,o,s,u,a,f,c,d,g,p,m,v=e[21].key+"",_,w,y=e[11](e[25]/e[2])+"",$,M,k,E,S,R;return{c(){t=j("rect"),f=j("line"),m=j("text"),_=L(v),w=j("tspan"),$=L(y),k=P(),h(t,"class",n="horizontal-bar-rect "+(e[5]===e[23]?"selected":"unselected")+" svelte-tg5p7i"),h(t,"y",l=e[8](e[24].data.xVal)),h(t,"x",r=e[7](e[24][0])),h(t,"stroke","var(--black)"),h(t,"width",o=e[7](e[24][1])-e[7](e[24][0])),h(t,"fill",s=e[10](e[21].key)),h(t,"opacity",u=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(t,"height",a=e[8].bandwidth()),h(f,"class","line svelte-tg5p7i"),h(f,"x1",c=e[7](e[24][0])),h(f,"x2",d=e[7](e[24][0])),h(f,"y1",g=e[8](e[24].data.xVal)-wt),h(f,"y2",p=e[8].bandwidth()+e[8](e[24].data.xVal)+wt),h(f,"stroke","black"),h(w,"x",M=(e[7](e[24][0])+e[7](e[24][1]))/2),h(w,"dy","16"),h(w,"text-anchor","middle"),h(m,"class","horizontal-bar-text svelte-tg5p7i"),h(m,"y",E=e[8].bandwidth()/2),h(m,"x",S=(e[7](e[24][0])+e[7](e[24][1]))/2),h(m,"opacity",R=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(m,"text-anchor","middle")},m(C,F){T(C,t,F),T(C,f,F),T(C,m,F),b(m,_),b(m,w),b(w,$),b(m,k)},p(C,F){F&32&&n!==(n="horizontal-bar-rect "+(C[5]===C[23]?"selected":"unselected")+" svelte-tg5p7i")&&h(t,"class",n),F&320&&l!==(l=C[8](C[24].data.xVal))&&h(t,"y",l),F&192&&r!==(r=C[7](C[24][0]))&&h(t,"x",r),F&192&&o!==(o=C[7](C[24][1])-C[7](C[24][0]))&&h(t,"width",o),F&64&&s!==(s=C[10](C[21].key))&&h(t,"fill",s),F&32&&u!==(u=C[5]==="all"||C[5]===C[23]?"1":"0.25")&&h(t,"opacity",u),F&256&&a!==(a=C[8].bandwidth())&&h(t,"height",a),F&192&&c!==(c=C[7](C[24][0]))&&h(f,"x1",c),F&192&&d!==(d=C[7](C[24][0]))&&h(f,"x2",d),F&320&&g!==(g=C[8](C[24].data.xVal)-wt)&&h(f,"y1",g),F&320&&p!==(p=C[8].bandwidth()+C[8](C[24].data.xVal)+wt)&&h(f,"y2",p),F&64&&v!==(v=C[21].key+"")&&W(_,v),F&84&&y!==(y=C[11](C[25]/C[2])+"")&&W($,y),F&192&&M!==(M=(C[7](C[24][0])+C[7](C[24][1]))/2)&&h(w,"x",M),F&256&&E!==(E=C[8].bandwidth()/2)&&h(m,"y",E),F&192&&S!==(S=(C[7](C[24][0])+C[7](C[24][1]))/2)&&h(m,"x",S),F&32&&R!==(R=C[5]==="all"||C[5]===C[23]?"1":"0.25")&&h(m,"opacity",R)},d(C){C&&N(t),C&&N(f),C&&N(m)}}}function Li(e){let t,n,l,r,o,s,u,a,f=e[21],c=[];for(let p=0;p<f.length;p+=1)c[p]=qi(Hi(e,f,p));function d(){return e[17](e[23],e[21])}function g(){return e[18](e[23],e[21])}return{c(){t=j("g");for(let p=0;p<c.length;p+=1)c[p].c();n=j("line"),h(n,"class","line svelte-tg5p7i"),h(n,"x1",l=e[3]-e[9].right),h(n,"x2",r=e[3]-e[9].right),h(n,"y1",o=e[8]("A")-wt),h(n,"y2",s=e[8].bandwidth()+e[8]("A")+wt),h(n,"stroke","black"),h(t,"class","series svelte-tg5p7i"),h(t,"role","button"),h(t,"tabindex","0")},m(p,m){T(p,t,m);for(let v=0;v<c.length;v+=1)c[v]&&c[v].m(t,null);b(t,n),u||(a=[B(t,"click",d),B(t,"keypress",g)],u=!0)},p(p,m){if(e=p,m&3572){f=e[21];let v;for(v=0;v<f.length;v+=1){const _=Hi(e,f,v);c[v]?c[v].p(_,m):(c[v]=qi(_),c[v].c(),c[v].m(t,n))}for(;v<c.length;v+=1)c[v].d(1);c.length=f.length}m&8&&l!==(l=e[3]-e[9].right)&&h(n,"x1",l),m&8&&r!==(r=e[3]-e[9].right)&&h(n,"x2",r),m&256&&o!==(o=e[8]("A")-wt)&&h(n,"y1",o),m&256&&s!==(s=e[8].bandwidth()+e[8]("A")+wt)&&h(n,"y2",s)},d(p){p&&N(t),ue(c,p),u=!1,ge(a)}}}function lg(e){let t,n,l,r,o,s=e[6],u=[];for(let a=0;a<s.length;a+=1)u[a]=Li(zi(e,s,a));return{c(){t=A("div"),t.innerHTML="<p>Feedback Distribution</p>",n=P(),l=A("div"),r=j("svg");for(let a=0;a<u.length;a+=1)u[a].c();h(r,"width",e[1]),h(r,"height",e[0]),h(l,"id","stackedrect-holder"),h(l,"class","svelte-tg5p7i"),ke(()=>e[19].call(l))},m(a,f){T(a,t,f),T(a,n,f),T(a,l,f),b(l,r);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(r,null);o=ot(l,e[19].bind(l))},p(a,[f]){if(f&8188){s=a[6];let c;for(c=0;c<s.length;c+=1){const d=zi(a,s,c);u[c]?u[c].p(d,f):(u[c]=Li(d),u[c].c(),u[c].m(r,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=s.length}f&2&&h(r,"width",a[1]),f&1&&h(r,"height",a[0])},i:x,o:x,d(a){a&&N(t),a&&N(n),a&&N(l),ue(u,a),o()}}}const wt=5;function rg(e,t,n){let l,r,o,s,u,a,f,c,d,g,p;le(e,rt,R=>n(15,d=R)),le(e,Gr,R=>n(4,g=R)),le(e,Ve,R=>n(16,p=R));let m=300,v=300;const _={up:2,down:1,"n/a":0,all:"all"},w={top:10,bottom:10,left:25,right:5},y=$t().range(["var(--yellow)","var(--red)","var(--green)"]),$=pt(".0%");function M(R,C){l===R?n(5,l="all"):n(5,l=R),Ne(rt,d=l==="all"?"all":C,d)}const k=(R,C)=>M(R,C.key),E=(R,C)=>M(R,C.key);function S(){v=this.offsetWidth,m=this.offsetHeight,n(1,v),n(0,m)}return e.$$.update=()=>{e.$$.dirty&32768&&n(5,l=_[d]),e.$$.dirty&2&&n(3,r=v-w.left-w.right),e.$$.dirty&1&&n(14,o=m-w.top-w.bottom),e.$$.dirty&65552&&p.forEach(R=>{Ne(Gr,g[R.vote_status]++,g)}),e.$$.dirty&16&&n(2,s=g.up+g.down+g["n/a"]),e.$$.dirty&16384&&n(8,u=Vt().rangeRound([w.top,o-w.bottom]).padding(0).domain(["a"])),e.$$.dirty&12&&n(7,a=Ge().rangeRound([w.left,r-w.right]).domain([0,s])),e.$$.dirty&8208&&n(6,c=f([g]))},n(13,f=ng().keys(["n/a","down","up"]).order(cr).offset(fr)),[m,v,s,r,g,l,c,a,u,w,y,$,M,f,o,d,p,k,E,S]}class Fa extends ie{constructor(t){super(),oe(this,t,rg,lg,re,{})}}function ig(e){let t,n,l,r,o,s,u,a,f,c,d,g=e[3][e[2]]+"",p,m;return{c(){t=A("div"),n=A("div"),l=L("Q: "),r=L(e[0]),o=P(),s=A("div"),u=L("A: "),a=L(e[1]),f=P(),c=A("div"),d=L("Rating: "),p=L(g),h(n,"class","question svelte-szi0e"),h(s,"class","answer svelte-szi0e"),h(c,"class",m="feedback "+e[2]+" svelte-szi0e"),h(t,"class","qa-card svelte-szi0e")},m(v,_){T(v,t,_),b(t,n),b(n,l),b(n,r),b(t,o),b(t,s),b(s,u),b(s,a),b(t,f),b(t,c),b(c,d),b(c,p)},p(v,[_]){_&1&&W(r,v[0]),_&2&&W(a,v[1]),_&4&&g!==(g=v[3][v[2]]+"")&&W(p,g),_&4&&m!==(m="feedback "+v[2]+" svelte-szi0e")&&h(c,"class",m)},i:x,o:x,d(v){v&&N(t)}}}function og(e,t,n){let{question:l="What is gradient descent?"}=t,{answer:r="Gradient descent is an algorithm used to minimize a loss function by taking small steps in the direction of steepest descent."}=t,{feedback:o="Good: 👍"}=t;const s={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"};return e.$$set=u=>{"question"in u&&n(0,l=u.question),"answer"in u&&n(1,r=u.answer),"feedback"in u&&n(2,o=u.feedback)},[l,r,o,s]}class sg extends ie{constructor(t){super(),oe(this,t,og,ig,re,{question:0,answer:1,feedback:2})}}function ji(e,t,n){const l=e.slice();return l[5]=t[n].question,l[6]=t[n].answer,l[7]=t[n].vote_status,l}function xi(e){let t,n,l,r,o;return n=new sg({props:{question:e[5],answer:e[6],feedback:e[7]}}),{c(){t=A("div"),te(n.$$.fragment),l=P()},m(s,u){T(s,t,u),J(n,t,null),b(t,l),o=!0},p(s,u){const a={};u&1&&(a.question=s[5]),u&1&&(a.answer=s[6]),u&1&&(a.feedback=s[7]),n.$set(a)},i(s){o||(V(n.$$.fragment,s),s&&ke(()=>{o&&(r||(r=Ze(t,e[1],{duration:300},!0)),r.run(1))}),o=!0)},o(s){H(n.$$.fragment,s),s&&(r||(r=Ze(t,e[1],{duration:300},!1)),r.run(0)),o=!1},d(s){s&&N(t),Z(n),s&&r&&r.end()}}}function ag(e){let t,n,l=e[0],r=[];for(let s=0;s<l.length;s+=1)r[s]=xi(ji(e,l,s));const o=s=>H(r[s],1,1,()=>{r[s]=null});return{c(){t=A("div");for(let s=0;s<r.length;s+=1)r[s].c();h(t,"class","qa-container svelte-1xv9cfi")},m(s,u){T(s,t,u);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(t,null);n=!0},p(s,[u]){if(u&1){l=s[0];let a;for(a=0;a<l.length;a+=1){const f=ji(s,l,a);r[a]?(r[a].p(f,u),V(r[a],1)):(r[a]=xi(f),r[a].c(),V(r[a],1),r[a].m(t,null))}for(ce(),a=l.length;a<r.length;a+=1)o(a);de()}},i(s){if(!n){for(let u=0;u<l.length;u+=1)V(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)H(r[u]);n=!1},d(s){s&&N(t),ue(r,s)}}}function ug(e,t,n){let l,r,o,s;le(e,Zl,a=>n(4,r=a)),le(e,rt,a=>n(2,o=a)),le(e,kn,a=>n(3,s=a));const u=(a,{delay:f=0,duration:c=1e3,easing:d=Cr})=>Sn(a,{delay:f,duration:c,easing:d});return e.$$.update=()=>{e.$$.dirty&12&&n(0,l=o==="all"?s:s.filter(a=>a.vote_status===o)),e.$$.dirty&1&&Ne(Zl,r=Nc(l),r)},[l,u,o,s]}class Da extends ie{constructor(t){super(),oe(this,t,ug,ag,re,{})}}function Gi(e,t,n){const l=e.slice();return l[13]=t[n],l}function Bi(e,t,n){const l=e.slice();return l[16]=t[n],l}function Ui(e,t,n){const l=e.slice();return l[16]=t[n],l}function Wi(e){let t,n,l,r,o=e[16]+"",s,u;return{c(){t=j("g"),n=j("line"),r=j("text"),s=L(o),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[10].bottom+e[10].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(r,"class","axis-text svelte-1oikip4"),h(r,"y","15"),h(r,"text-anchor","middle"),h(t,"transform",u=`translate(${e[6](e[16])+e[6].bandwidth()/2} ${e[2]-e[10].bottom})`)},m(a,f){T(a,t,f),b(t,n),b(t,r),b(r,s)},p(a,f){f&4&&l!==(l=-a[2]+a[10].bottom+a[10].top)&&h(n,"y2",l),f&16&&o!==(o=a[16]+"")&&W(s,o),f&84&&u!==(u=`translate(${a[6](a[16])+a[6].bandwidth()/2} ${a[2]-a[10].bottom})`)&&h(t,"transform",u)},d(a){a&&N(t)}}}function Xi(e){let t,n,l,r;return{c(){t=j("g"),n=j("line"),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1",0),h(n,"x2",l=e[3]-e[10].right-e[10].left),h(n,"y1","0"),h(n,"y2","0"),h(n,"stroke","black"),h(t,"transform",r=`translate(${e[10].left} ${e[5](e[16])+0})`)},m(o,s){T(o,t,s),b(t,n)},p(o,s){s&8&&l!==(l=o[3]-o[10].right-o[10].left)&&h(n,"x2",l),s&32&&r!==(r=`translate(${o[10].left} ${o[5](o[16])+0})`)&&h(t,"transform",r)},d(o){o&&N(t)}}}function Yi(e){let t,n,l,r,o,s,u,a,f=Math.round(e[11](e[13].count))+"",c,d,g;return{c(){t=j("g"),n=j("rect"),a=j("text"),c=L(f),h(n,"x",l=e[6](e[13].question)),h(n,"y",r=e[5](e[13].count)),h(n,"height",o=e[2]-e[5](e[13].count)-e[10].bottom),h(n,"fill",s=e[9][e[7]]),h(n,"fill-opacity","0.95"),h(n,"width",u=e[6].bandwidth()),h(n,"class","svelte-1oikip4"),h(a,"class","axis-text svelte-1oikip4"),h(a,"x",d=e[6](e[13].question)+e[6].bandwidth()/2),h(a,"y",g=e[5](e[13].count)-5),h(a,"text-anchor","middle"),h(t,"class","series")},m(p,m){T(p,t,m),b(t,n),b(t,a),b(a,c)},p(p,m){m&80&&l!==(l=p[6](p[13].question))&&h(n,"x",l),m&48&&r!==(r=p[5](p[13].count))&&h(n,"y",r),m&52&&o!==(o=p[2]-p[5](p[13].count)-p[10].bottom)&&h(n,"height",o),m&128&&s!==(s=p[9][p[7]])&&h(n,"fill",s),m&64&&u!==(u=p[6].bandwidth())&&h(n,"width",u),m&16&&f!==(f=Math.round(p[11](p[13].count))+"")&&W(c,f),m&80&&d!==(d=p[6](p[13].question)+p[6].bandwidth()/2)&&h(a,"x",d),m&48&&g!==(g=p[5](p[13].count)-5)&&h(a,"y",g)},d(p){p&&N(t)}}}function fg(e){let t,n,l,r,o,s,u=e[8][e[7]]+"",a,f,c,d,g,p,m,v,_,w=e[4].map(Qi),y=[];for(let S=0;S<w.length;S+=1)y[S]=Wi(Ui(e,w,S));let $=e[5].ticks(),M=[];for(let S=0;S<$.length;S+=1)M[S]=Xi(Bi(e,$,S));let k=e[4],E=[];for(let S=0;S<k.length;S+=1)E[S]=Yi(Gi(e,k,S));return{c(){t=A("div"),n=j("svg");for(let S=0;S<y.length;S+=1)y[S].c();l=_e();for(let S=0;S<M.length;S+=1)M[S].c();r=_e();for(let S=0;S<E.length;S+=1)E[S].c();o=j("text"),s=L("Question Type: "),a=L(u),c=j("line"),m=j("line"),h(o,"class","chart-title svelte-1oikip4"),h(o,"y",e[10].top/2+1),h(o,"x",f=(e[3]+e[10].left)/2),h(o,"text-anchor","middle"),h(c,"class","axis-line svelte-1oikip4"),h(c,"x1",e[10].left),h(c,"x2",d=e[3]-e[10].right),h(c,"y1",g=e[2]-e[10].bottom),h(c,"y2",p=e[2]-e[10].bottom),h(m,"class","axis-line svelte-1oikip4"),h(m,"x1",e[10].left),h(m,"x2",e[10].left),h(m,"y1",e[10].top),h(m,"y2",v=e[2]-e[10].bottom),h(m,"opacity","0"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","stackedrect-holder"),h(t,"class","svelte-1oikip4"),ke(()=>e[12].call(t))},m(S,R){T(S,t,R),b(t,n);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(n,null);b(n,l);for(let C=0;C<M.length;C+=1)M[C]&&M[C].m(n,null);b(n,r);for(let C=0;C<E.length;C+=1)E[C]&&E[C].m(n,null);b(n,o),b(o,s),b(o,a),b(n,c),b(n,m),_=ot(t,e[12].bind(t))},p(S,[R]){if(R&1108){w=S[4].map(Qi);let C;for(C=0;C<w.length;C+=1){const F=Ui(S,w,C);y[C]?y[C].p(F,R):(y[C]=Wi(F),y[C].c(),y[C].m(n,l))}for(;C<y.length;C+=1)y[C].d(1);y.length=w.length}if(R&1064){$=S[5].ticks();let C;for(C=0;C<$.length;C+=1){const F=Bi(S,$,C);M[C]?M[C].p(F,R):(M[C]=Xi(F),M[C].c(),M[C].m(n,r))}for(;C<M.length;C+=1)M[C].d(1);M.length=$.length}if(R&3828){k=S[4];let C;for(C=0;C<k.length;C+=1){const F=Gi(S,k,C);E[C]?E[C].p(F,R):(E[C]=Yi(F),E[C].c(),E[C].m(n,o))}for(;C<E.length;C+=1)E[C].d(1);E.length=k.length}R&128&&u!==(u=S[8][S[7]]+"")&&W(a,u),R&8&&f!==(f=(S[3]+S[10].left)/2)&&h(o,"x",f),R&8&&d!==(d=S[3]-S[10].right)&&h(c,"x2",d),R&4&&g!==(g=S[2]-S[10].bottom)&&h(c,"y1",g),R&4&&p!==(p=S[2]-S[10].bottom)&&h(c,"y2",p),R&4&&v!==(v=S[2]-S[10].bottom)&&h(m,"y2",v),R&2&&h(n,"width",S[1]),R&1&&h(n,"height",S[0])},i:x,o:x,d(S){S&&N(t),ue(y,S),ue(M,S),ue(E,S),_()}}}const Qi=e=>e.question;function cg(e,t,n){let l,r,o,s,u,a;le(e,Zl,_=>n(4,u=_)),le(e,rt,_=>n(7,a=_));const f={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"},c={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let d=300,g=300,p={top:35,bottom:10,left:25,right:5};const m=pt(".1f");function v(){g=this.offsetWidth,d=this.offsetHeight,n(1,g),n(0,d)}return e.$$.update=()=>{e.$$.dirty&2&&n(3,l=g-p.left-p.right),e.$$.dirty&1&&n(2,r=d-p.top-p.bottom),e.$$.dirty&24&&n(6,o=Vt().rangeRound([p.left,l-p.right]).padding(.05).domain(u.map(_=>_.question))),e.$$.dirty&20&&n(5,s=Ge().rangeRound([r-p.bottom,p.top]).domain([0,ht(u,_=>_.count)])),e.$$.dirty&16&&console.log(u)},[d,g,r,l,u,s,o,a,f,c,p,m,v]}class Ia extends ie{constructor(t){super(),oe(this,t,cg,fg,re,{})}}function Ki(e,t,n){const l=e.slice();l[19]=t[n];const r=l[7](l[19].x1)-l[7](l[19].x0);return l[20]=r,l}function Ji(e,t,n){const l=e.slice();return l[23]=t[n],l}function Zi(e){let t,n,l,r,o=e[23]+"",s,u;return{c(){t=j("g"),n=j("line"),r=j("text"),s=L(o),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(r,"class","axis-text svelte-kz2qh6"),h(r,"y","15"),h(r,"text-anchor","middle"),h(t,"transform",u=`translate(${e[7](e[23])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n),b(t,r),b(r,s)},p(a,f){f&4&&l!==(l=-a[2]+a[9].bottom+a[9].top)&&h(n,"y2",l),f&128&&o!==(o=a[23]+"")&&W(s,o),f&132&&u!==(u=`translate(${a[7](a[23])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&h(t,"transform",u)},d(a){a&&N(t)}}}function eo(e){let t,n,l,r,o,s,u;return{c(){t=j("g"),n=j("rect"),h(n,"x",l=e[7](e[19].x0)+1),h(n,"width",r=e[20]),h(n,"y",o=e[6](e[19].length)),h(n,"height",s=e[6](0)-e[6](e[19].length)),h(n,"fill",u=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n)},p(a,f){f&136&&l!==(l=a[7](a[19].x0)+1)&&h(n,"x",l),f&136&&r!==(r=a[20])&&h(n,"width",r),f&72&&o!==(o=a[6](a[19].length))&&h(n,"y",o),f&72&&s!==(s=a[6](0)-a[6](a[19].length))&&h(n,"height",s),f&32&&u!==(u=a[8][a[5]])&&h(n,"fill",u)},d(a){a&&N(t)}}}function dg(e){let t,n,l,r,o,s,u,a,f,c,d,g=e[7].ticks(),p=[];for(let _=0;_<g.length;_+=1)p[_]=Zi(Ji(e,g,_));let m=e[3],v=[];for(let _=0;_<m.length;_+=1)v[_]=eo(Ki(e,m,_));return{c(){t=A("div"),n=j("svg");for(let _=0;_<p.length;_+=1)p[_].c();l=_e();for(let _=0;_<v.length;_+=1)v[_].c();r=j("text"),o=L("Answer Length"),u=j("line"),h(r,"class","chart-title svelte-kz2qh6"),h(r,"y",e[9].top/2+5),h(r,"x",s=(e[4]+e[9].left)/2),h(r,"text-anchor","middle"),h(u,"class","axis-line svelte-kz2qh6"),h(u,"x1",e[9].left),h(u,"x2",a=e[4]-e[9].right),h(u,"y1",f=e[2]-e[9].bottom),h(u,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),ke(()=>e[14].call(t))},m(_,w){T(_,t,w),b(t,n);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(n,null);b(n,l);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(n,null);b(n,r),b(r,o),b(n,u),d=ot(t,e[14].bind(t))},p(_,[w]){if(w&644){g=_[7].ticks();let y;for(y=0;y<g.length;y+=1){const $=Ji(_,g,y);p[y]?p[y].p($,w):(p[y]=Zi($),p[y].c(),p[y].m(n,l))}for(;y<p.length;y+=1)p[y].d(1);p.length=g.length}if(w&488){m=_[3];let y;for(y=0;y<m.length;y+=1){const $=Ki(_,m,y);v[y]?v[y].p($,w):(v[y]=eo($),v[y].c(),v[y].m(n,r))}for(;y<v.length;y+=1)v[y].d(1);v.length=m.length}w&16&&s!==(s=(_[4]+_[9].left)/2)&&h(r,"x",s),w&16&&a!==(a=_[4]-_[9].right)&&h(u,"x2",a),w&4&&f!==(f=_[2]-_[9].bottom)&&h(u,"y1",f),w&4&&c!==(c=_[2]-_[9].bottom)&&h(u,"y2",c),w&2&&h(n,"width",_[1]),w&1&&h(n,"height",_[0])},i:x,o:x,d(_){_&&N(t),ue(p,_),ue(v,_),d()}}}let to=100;function hg(e,t,n){let l,r,o,s,u,a,f,c,d,g;le(e,rt,$=>n(5,d=$)),le(e,Ve,$=>n(13,g=$));const p={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let m=300,v=300,_={top:15,bottom:10,left:25,right:5};pt(".1f");let w=Array.from({length:to},($,M)=>M);function y(){v=this.offsetWidth,m=this.offsetHeight,n(1,v),n(0,m)}return e.$$.update=()=>{e.$$.dirty&8224&&n(12,l=d==="all"?g:g.filter($=>$.vote_status===d)),e.$$.dirty&4096&&n(11,r=ca(l)),e.$$.dirty&2&&n(4,o=v-_.left-_.right),e.$$.dirty&1&&n(2,s=m-_.top-_.bottom),e.$$.dirty&2048&&n(3,u=ma().thresholds(w).value($=>$.answer)(r)),e.$$.dirty&16&&n(7,a=Ge().domain([3,to]).range([_.left,o-_.right])),e.$$.dirty&12&&n(6,f=Ge().domain([0,ht(u,$=>$.length)]).range([s-_.bottom,_.top])),e.$$.dirty&2048&&n(10,c=ht(r,$=>$.length)),e.$$.dirty&1056&&Ge().domain([0,c]).range(["white",p[d]]).interpolate(En)},[m,v,s,u,o,d,f,a,p,_,c,r,l,g,y]}class Na extends ie{constructor(t){super(),oe(this,t,hg,dg,re,{})}}function no(e,t,n){const l=e.slice();l[18]=t[n];const r=l[7](l[18].x1)-l[7](l[18].x0);return l[19]=r,l}function lo(e,t,n){const l=e.slice();return l[22]=t[n],l}function ro(e){let t,n,l,r,o=e[22]+"",s,u;return{c(){t=j("g"),n=j("line"),r=j("text"),s=L(o),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(r,"class","axis-text svelte-kz2qh6"),h(r,"y","15"),h(r,"text-anchor","middle"),h(t,"transform",u=`translate(${e[7](e[22])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n),b(t,r),b(r,s)},p(a,f){f&4&&l!==(l=-a[2]+a[9].bottom+a[9].top)&&h(n,"y2",l),f&128&&o!==(o=a[22]+"")&&W(s,o),f&132&&u!==(u=`translate(${a[7](a[22])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&h(t,"transform",u)},d(a){a&&N(t)}}}function io(e){let t,n,l,r,o,s,u;return{c(){t=j("g"),n=j("rect"),h(n,"x",l=e[7](e[18].x0)+1),h(n,"width",r=e[19]),h(n,"y",o=e[6](e[18].length)),h(n,"height",s=e[6](0)-e[6](e[18].length)),h(n,"fill",u=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n)},p(a,f){f&136&&l!==(l=a[7](a[18].x0)+1)&&h(n,"x",l),f&136&&r!==(r=a[19])&&h(n,"width",r),f&72&&o!==(o=a[6](a[18].length))&&h(n,"y",o),f&72&&s!==(s=a[6](0)-a[6](a[18].length))&&h(n,"height",s),f&32&&u!==(u=a[8][a[5]])&&h(n,"fill",u)},d(a){a&&N(t)}}}function gg(e){let t,n,l,r,o,s,u,a,f,c,d,g=e[7].ticks(),p=[];for(let _=0;_<g.length;_+=1)p[_]=ro(lo(e,g,_));let m=e[3],v=[];for(let _=0;_<m.length;_+=1)v[_]=io(no(e,m,_));return{c(){t=A("div"),n=j("svg");for(let _=0;_<p.length;_+=1)p[_].c();l=_e();for(let _=0;_<v.length;_+=1)v[_].c();r=j("text"),o=L("Question Length"),u=j("line"),h(r,"class","chart-title svelte-kz2qh6"),h(r,"y",e[9].top/2+5),h(r,"x",s=(e[4]+e[9].left)/2),h(r,"text-anchor","middle"),h(u,"class","axis-line svelte-kz2qh6"),h(u,"x1",e[9].left),h(u,"x2",a=e[4]-e[9].right),h(u,"y1",f=e[2]-e[9].bottom),h(u,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),ke(()=>e[13].call(t))},m(_,w){T(_,t,w),b(t,n);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(n,null);b(n,l);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(n,null);b(n,r),b(r,o),b(n,u),d=ot(t,e[13].bind(t))},p(_,[w]){if(w&644){g=_[7].ticks();let y;for(y=0;y<g.length;y+=1){const $=lo(_,g,y);p[y]?p[y].p($,w):(p[y]=ro($),p[y].c(),p[y].m(n,l))}for(;y<p.length;y+=1)p[y].d(1);p.length=g.length}if(w&488){m=_[3];let y;for(y=0;y<m.length;y+=1){const $=no(_,m,y);v[y]?v[y].p($,w):(v[y]=io($),v[y].c(),v[y].m(n,r))}for(;y<v.length;y+=1)v[y].d(1);v.length=m.length}w&16&&s!==(s=(_[4]+_[9].left)/2)&&h(r,"x",s),w&16&&a!==(a=_[4]-_[9].right)&&h(u,"x2",a),w&4&&f!==(f=_[2]-_[9].bottom)&&h(u,"y1",f),w&4&&c!==(c=_[2]-_[9].bottom)&&h(u,"y2",c),w&2&&h(n,"width",_[1]),w&1&&h(n,"height",_[0])},i:x,o:x,d(_){_&&N(t),ue(p,_),ue(v,_),d()}}}let oo=100;function pg(e,t,n){let l,r,o,s,u,a,f,c,d;le(e,rt,y=>n(5,c=y)),le(e,Ve,y=>n(12,d=y));const g={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let p=300,m=300,v={top:15,bottom:10,left:25,right:5},_=Array.from({length:oo},(y,$)=>$);$t().range(["var(--yellow)","var(--red)","var(--green)"]);function w(){m=this.offsetWidth,p=this.offsetHeight,n(1,m),n(0,p)}return e.$$.update=()=>{e.$$.dirty&4128&&n(11,l=c==="all"?d:d.filter(y=>y.vote_status===c)),e.$$.dirty&2048&&n(10,r=ca(l)),e.$$.dirty&2&&n(4,o=m-v.left-v.right),e.$$.dirty&1&&n(2,s=p-v.top-v.bottom),e.$$.dirty&1024&&n(3,u=ma().thresholds(_).value(y=>y.question)(r)),e.$$.dirty&16&&n(7,a=Ge().domain([3,oo]).range([v.left,o-v.right])),e.$$.dirty&12&&n(6,f=Ge().domain([0,ht(u,y=>y.length)]).range([s-v.bottom,v.top])),e.$$.dirty&1024&&ht(r,y=>y.length)},[p,m,s,u,o,c,f,a,g,v,r,l,d,w]}class Pa extends ie{constructor(t){super(),oe(this,t,pg,gg,re,{})}}function mg(e){let t,n,l,r,o,s,u,a,f,c,d,g,p,m=Math.round(e[5](e[3]))+"",v,_,w,y,$,M,k,E;return{c(){t=A("div"),n=A("div"),l=A("p"),l.textContent="Questions",r=P(),o=A("select"),s=A("option"),s.textContent="All",u=A("option"),u.textContent="Good",a=A("option"),a.textContent="Bad",f=A("option"),f.textContent="N/A",c=P(),d=A("div"),g=j("svg"),p=j("text"),v=L(m),$=P(),M=A("p"),M.textContent="number of responses",h(l,"class","card-text svelte-1pknxov"),s.__value="all",s.value=s.__value,h(s,"class","svelte-1pknxov"),u.__value="up",u.value=u.__value,h(u,"class","svelte-1pknxov"),a.__value="down",a.value=a.__value,h(a,"class","svelte-1pknxov"),f.__value="n/a",f.value=f.__value,h(f,"class","svelte-1pknxov"),h(o,"id","feedback-dropdown"),h(o,"name","feedback-dropdown"),ye(o,"background",e[6][e[0]]),h(o,"class","svelte-1pknxov"),e[0]===void 0&&ke(()=>e[9].call(o)),h(n,"class","svelte-1pknxov"),h(p,"dominant-baseline","middle"),h(p,"x",_=e[2]/2),h(p,"y",w=e[1]/2),h(p,"text-anchor","middle"),h(p,"class","svelte-1pknxov"),h(g,"width",e[2]),h(g,"height",e[1]),h(g,"class","svelte-1pknxov"),h(d,"class","svelte-1pknxov"),ke(()=>e[10].call(d)),h(M,"class","small svelte-1pknxov"),h(t,"class","card-container svelte-1pknxov"),ye(t,"background",e[6][e[0]])},m(S,R){T(S,t,R),b(t,n),b(n,l),b(n,r),b(n,o),b(o,s),b(o,u),b(o,a),b(o,f),Zn(o,e[0],!0),b(t,c),b(t,d),b(d,g),b(g,p),b(p,v),y=ot(d,e[10].bind(d)),b(t,$),b(t,M),k||(E=B(o,"change",e[9]),k=!0)},p(S,[R]){R&1&&ye(o,"background",S[6][S[0]]),R&1&&Zn(o,S[0]),R&8&&m!==(m=Math.round(S[5](S[3]))+"")&&W(v,m),R&4&&_!==(_=S[2]/2)&&h(p,"x",_),R&2&&w!==(w=S[1]/2)&&h(p,"y",w),R&4&&h(g,"width",S[2]),R&2&&h(g,"height",S[1]),R&1&&ye(t,"background",S[6][S[0]])},i:x,o:x,d(S){S&&N(t),y(),k=!1,E()}}}function _g(e,t){return t==="all"?e.length:e.filter(l=>l.vote_status===t).length}function vg(e,t,n){let l,r,o,s;le(e,rt,m=>n(0,r=m)),le(e,Ve,m=>n(8,o=m));let u,a,f=$r(0);le(e,f,m=>n(3,s=m));const c=pt(".1f"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function g(){r=Us(this),rt.set(r)}function p(){a=this.clientWidth,u=this.clientHeight,n(2,a),n(1,u)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,l=_g(o,r)),e.$$.dirty&128&&console.log("fbc",l),e.$$.dirty&128&&f.set(l)},[r,u,a,s,f,c,d,l,o,g,p]}class Ta extends ie{constructor(t){super(),oe(this,t,vg,mg,re,{})}}function bg(e){let t,n,l,r,o,s,u,a,f,c,d,g,p,m=e[5](e[3])+"",v,_,w,y,$,M,k,E;return{c(){t=A("div"),n=A("div"),l=A("p"),l.textContent="Questions",r=P(),o=A("select"),s=A("option"),s.textContent="All",u=A("option"),u.textContent="Good",a=A("option"),a.textContent="Bad",f=A("option"),f.textContent="N/A",c=P(),d=A("div"),g=j("svg"),p=j("text"),v=L(m),$=P(),M=A("p"),M.textContent="percentage of responses",h(l,"class","card-text svelte-mchgj2"),s.__value="all",s.value=s.__value,u.__value="up",u.value=u.__value,a.__value="down",a.value=a.__value,f.__value="n/a",f.value=f.__value,h(o,"id","feedback-dropdown"),h(o,"name","feedback-dropdown"),ye(o,"background",e[6][e[0]]),h(o,"class","svelte-mchgj2"),e[0]===void 0&&ke(()=>e[9].call(o)),h(p,"dominant-baseline","middle"),h(p,"x",_=e[2]/2),h(p,"y",w=e[1]/2),h(p,"text-anchor","middle"),h(p,"class","svelte-mchgj2"),h(g,"width",e[2]),h(g,"height",e[1]),h(g,"class","svelte-mchgj2"),ke(()=>e[10].call(d)),h(M,"class","small svelte-mchgj2"),h(t,"class","card-container svelte-mchgj2"),ye(t,"background",e[6][e[0]])},m(S,R){T(S,t,R),b(t,n),b(n,l),b(n,r),b(n,o),b(o,s),b(o,u),b(o,a),b(o,f),Zn(o,e[0],!0),b(t,c),b(t,d),b(d,g),b(g,p),b(p,v),y=ot(d,e[10].bind(d)),b(t,$),b(t,M),k||(E=B(o,"change",e[9]),k=!0)},p(S,[R]){R&1&&ye(o,"background",S[6][S[0]]),R&1&&Zn(o,S[0]),R&8&&m!==(m=S[5](S[3])+"")&&W(v,m),R&4&&_!==(_=S[2]/2)&&h(p,"x",_),R&2&&w!==(w=S[1]/2)&&h(p,"y",w),R&4&&h(g,"width",S[2]),R&2&&h(g,"height",S[1]),R&1&&ye(t,"background",S[6][S[0]])},i:x,o:x,d(S){S&&N(t),y(),k=!1,E()}}}function wg(e,t){const n=e.length;return t==="all"?1:e.filter(r=>r.vote_status===t).length/n}function yg(e,t,n){let l,r,o,s;le(e,rt,m=>n(0,r=m)),le(e,Ve,m=>n(8,o=m));let u,a,f=$r(0);le(e,f,m=>n(3,s=m));const c=pt(".1%"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function g(){r=Us(this),rt.set(r)}function p(){a=this.clientWidth,u=this.clientHeight,n(2,a),n(1,u)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,l=wg(o,r)),e.$$.dirty&128&&f.set(l)},[r,u,a,s,f,c,d,l,o,g,p]}class Oa extends ie{constructor(t){super(),oe(this,t,yg,bg,re,{})}}function kg(e){let t,n,l,r,o,s,u,a,f,c,d,g,p,m,v,_,w,y,$,M,k,E,S,R,C,F,I;return o=new Ta({}),a=new Oa({}),d=new Fa({}),m=new Ia({props:{feedback:"Bad"}}),w=new Pa({}),M=new Na({}),F=new Da({}),{c(){t=A("div"),n=A("div"),l=A("div"),r=A("div"),te(o.$$.fragment),s=P(),u=A("div"),te(a.$$.fragment),f=P(),c=A("div"),te(d.$$.fragment),g=P(),p=A("div"),te(m.$$.fragment),v=P(),_=A("div"),te(w.$$.fragment),y=P(),$=A("div"),te(M.$$.fragment),k=P(),E=A("div"),S=A("div"),S.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,R=P(),C=A("div"),te(F.$$.fragment),h(r,"class","card-1 svelte-14znspc"),h(u,"class","card-2"),h(l,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(p,"class","left-question svelte-14znspc"),h(_,"class","left-filter svelte-14znspc"),h($,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h(S,"class","right-chart svelte-14znspc"),h(C,"class","right-table svelte-14znspc"),h(E,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(D,z){T(D,t,z),b(t,n),b(n,l),b(l,r),J(o,r,null),b(l,s),b(l,u),J(a,u,null),b(n,f),b(n,c),J(d,c,null),b(n,g),b(n,p),J(m,p,null),b(n,v),b(n,_),J(w,_,null),b(n,y),b(n,$),J(M,$,null),b(t,k),b(t,E),b(E,S),b(E,R),b(E,C),J(F,C,null),I=!0},p:x,i(D){I||(V(o.$$.fragment,D),V(a.$$.fragment,D),V(d.$$.fragment,D),V(m.$$.fragment,D),V(w.$$.fragment,D),V(M.$$.fragment,D),V(F.$$.fragment,D),I=!0)},o(D){H(o.$$.fragment,D),H(a.$$.fragment,D),H(d.$$.fragment,D),H(m.$$.fragment,D),H(w.$$.fragment,D),H(M.$$.fragment,D),H(F.$$.fragment,D),I=!1},d(D){D&&N(t),Z(o),Z(a),Z(d),Z(m),Z(w),Z(M),Z(F)}}}function Sg(e,t,n){let l;le(e,kn,o=>n(0,l=o)),st(()=>{r()});async function r(){const a=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[3]}));Ne(kn,l=[...a],l)}return[]}class Va extends ie{constructor(t){super(),oe(this,t,Sg,kg,re,{})}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,l)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?so(Object(n),!0).forEach(function(l){Cg(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function Un(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Un=function(t){return typeof t}:Un=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un(e)}function Cg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(){return gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},gt.apply(this,arguments)}function $g(e,t){if(e==null)return{};var n={},l=Object.keys(e),r,o;for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Rg(e,t){if(e==null)return{};var n=$g(e,t),l,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)l=o[r],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}var Ag="1.15.0";function ft(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var mt=ft(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Fn=ft(/Edge/i),ao=ft(/firefox/i),pn=ft(/safari/i)&&!ft(/chrome/i)&&!ft(/android/i),za=ft(/iP(ad|od|hone)/i),Ha=ft(/chrome/i)&&ft(/android/i),qa={capture:!1,passive:!1};function ae(e,t,n){e.addEventListener(t,n,!mt&&qa)}function se(e,t,n){e.removeEventListener(t,n,!mt&&qa)}function fl(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Mg(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ke(e,t,n,l){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&fl(e,t):fl(e,t))||l&&e===n)return e;if(e===n)break}while(e=Mg(e))}return null}var uo=/\s+/g;function Le(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var l=(" "+e.className+" ").replace(uo," ").replace(" "+t+" "," ");e.className=(l+(n?" "+t:"")).replace(uo," ")}}function Y(e,t,n){var l=e&&e.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in l)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),l[t]=n+(typeof n=="string"?"":"px")}}function Qt(e,t){var n="";if(typeof e=="string")n=e;else do{var l=Y(e,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function La(e,t,n){if(e){var l=e.getElementsByTagName(t),r=0,o=l.length;if(n)for(;r<o;r++)n(l[r],r);return l}return[]}function nt(){var e=document.scrollingElement;return e||document.documentElement}function Ce(e,t,n,l,r){if(!(!e.getBoundingClientRect&&e!==window)){var o,s,u,a,f,c,d;if(e!==window&&e.parentNode&&e!==nt()?(o=e.getBoundingClientRect(),s=o.top,u=o.left,a=o.bottom,f=o.right,c=o.height,d=o.width):(s=0,u=0,a=window.innerHeight,f=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!mt))do if(r&&r.getBoundingClientRect&&(Y(r,"transform")!=="none"||n&&Y(r,"position")!=="static")){var g=r.getBoundingClientRect();s-=g.top+parseInt(Y(r,"border-top-width")),u-=g.left+parseInt(Y(r,"border-left-width")),a=s+o.height,f=u+o.width;break}while(r=r.parentNode);if(l&&e!==window){var p=Qt(r||e),m=p&&p.a,v=p&&p.d;p&&(s/=v,u/=m,d/=m,c/=v,a=s+c,f=u+d)}return{top:s,left:u,bottom:a,right:f,width:d,height:c}}}function fo(e,t,n){for(var l=yt(e,!0),r=Ce(e)[t];l;){var o=Ce(l)[n],s=void 0;if(n==="top"||n==="left"?s=r>=o:s=r<=o,!s)return l;if(l===nt())break;l=yt(l,!1)}return!1}function en(e,t,n,l){for(var r=0,o=0,s=e.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==X.ghost&&(l||s[o]!==X.dragged)&&Ke(s[o],n.draggable,e,!1)){if(r===t)return s[o];r++}o++}return null}function Ir(e,t){for(var n=e.lastElementChild;n&&(n===X.ghost||Y(n,"display")==="none"||t&&!fl(n,t));)n=n.previousElementSibling;return n||null}function Be(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==X.clone&&(!t||fl(e,t))&&n++;return n}function co(e){var t=0,n=0,l=nt();if(e)do{var r=Qt(e),o=r.a,s=r.d;t+=e.scrollLeft*o,n+=e.scrollTop*s}while(e!==l&&(e=e.parentNode));return[t,n]}function Eg(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var l in t)if(t.hasOwnProperty(l)&&t[l]===e[n][l])return Number(n)}return-1}function yt(e,t){if(!e||!e.getBoundingClientRect)return nt();var n=e,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Y(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return nt();if(l||t)return n;l=!0}}while(n=n.parentNode);return nt()}function Fg(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Pl(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var mn;function ja(e,t){return function(){if(!mn){var n=arguments,l=this;n.length===1?e.call(l,n[0]):e.apply(l,n),mn=setTimeout(function(){mn=void 0},t)}}}function Dg(){clearTimeout(mn),mn=void 0}function xa(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ga(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var xe="Sortable"+new Date().getTime();function Ig(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(r){if(!(Y(r,"display")==="none"||r===X.ghost)){e.push({target:r,rect:Ce(r)});var o=it({},e[e.length-1].rect);if(r.thisAnimationDuration){var s=Qt(r,!0);s&&(o.top-=s.f,o.left-=s.e)}r.fromRect=o}})}},addAnimationState:function(l){e.push(l)},removeAnimationState:function(l){e.splice(Eg(e,{target:l}),1)},animateAll:function(l){var r=this;if(!this.options.animation){clearTimeout(t),typeof l=="function"&&l();return}var o=!1,s=0;e.forEach(function(u){var a=0,f=u.target,c=f.fromRect,d=Ce(f),g=f.prevFromRect,p=f.prevToRect,m=u.rect,v=Qt(f,!0);v&&(d.top-=v.f,d.left-=v.e),f.toRect=d,f.thisAnimationDuration&&Pl(g,d)&&!Pl(c,d)&&(m.top-d.top)/(m.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(a=Pg(m,g,p,r.options)),Pl(d,c)||(f.prevFromRect=c,f.prevToRect=d,a||(a=r.options.animation),r.animate(f,m,d,a)),a&&(o=!0,s=Math.max(s,a),clearTimeout(f.animationResetTimer),f.animationResetTimer=setTimeout(function(){f.animationTime=0,f.prevFromRect=null,f.fromRect=null,f.prevToRect=null,f.thisAnimationDuration=null},a),f.thisAnimationDuration=a)}),clearTimeout(t),o?t=setTimeout(function(){typeof l=="function"&&l()},s):typeof l=="function"&&l(),e=[]},animate:function(l,r,o,s){if(s){Y(l,"transition",""),Y(l,"transform","");var u=Qt(this.el),a=u&&u.a,f=u&&u.d,c=(r.left-o.left)/(a||1),d=(r.top-o.top)/(f||1);l.animatingX=!!c,l.animatingY=!!d,Y(l,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=Ng(l),Y(l,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Y(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){Y(l,"transition",""),Y(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},s)}}}}function Ng(e){return e.offsetWidth}function Pg(e,t,n,l){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*l.animation}var Lt=[],Tl={initializeByDefault:!0},Dn={mount:function(t){for(var n in Tl)Tl.hasOwnProperty(n)&&!(n in t)&&(t[n]=Tl[n]);Lt.forEach(function(l){if(l.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Lt.push(t)},pluginEvent:function(t,n,l){var r=this;this.eventCanceled=!1,l.cancel=function(){r.eventCanceled=!0};var o=t+"Global";Lt.forEach(function(s){n[s.pluginName]&&(n[s.pluginName][o]&&n[s.pluginName][o](it({sortable:n},l)),n.options[s.pluginName]&&n[s.pluginName][t]&&n[s.pluginName][t](it({sortable:n},l)))})},initializePlugins:function(t,n,l,r){Lt.forEach(function(u){var a=u.pluginName;if(!(!t.options[a]&&!u.initializeByDefault)){var f=new u(t,n,t.options);f.sortable=t,f.options=t.options,t[a]=f,gt(l,f.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,n){var l={};return Lt.forEach(function(r){typeof r.eventProperties=="function"&&gt(l,r.eventProperties.call(n[r.pluginName],t))}),l},modifyOption:function(t,n,l){var r;return Lt.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(r=o.optionListeners[n].call(t[o.pluginName],l))}),r}};function Tg(e){var t=e.sortable,n=e.rootEl,l=e.name,r=e.targetEl,o=e.cloneEl,s=e.toEl,u=e.fromEl,a=e.oldIndex,f=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,g=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[xe],!!t){var v,_=t.options,w="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!mt&&!Fn?v=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(l,!0,!0)),v.to=s||n,v.from=u||n,v.item=r||n,v.clone=o,v.oldIndex=a,v.newIndex=f,v.oldDraggableIndex=c,v.newDraggableIndex=d,v.originalEvent=g,v.pullMode=p?p.lastPutMode:void 0;var y=it(it({},m),Dn.getEventProperties(l,t));for(var $ in y)v[$]=y[$];n&&n.dispatchEvent(v),_[w]&&_[w].call(t,v)}}var Og=["evt"],Te=function(t,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=l.evt,o=Rg(l,Og);Dn.pluginEvent.bind(X)(t,n,it({dragEl:q,parentEl:we,ghostEl:ee,rootEl:pe,nextEl:Dt,lastDownEl:Wn,cloneEl:me,cloneHidden:vt,dragStarted:un,putSortable:Me,activeSortable:X.active,originalEvent:r,oldIndex:Bt,oldDraggableIndex:_n,newIndex:je,newDraggableIndex:_t,hideGhostForTarget:Xa,unhideGhostForTarget:Ya,cloneNowHidden:function(){vt=!0},cloneNowShown:function(){vt=!1},dispatchSortableEvent:function(u){De({sortable:n,name:u,originalEvent:r})}},o))};function De(e){Tg(it({putSortable:Me,cloneEl:me,targetEl:q,rootEl:pe,oldIndex:Bt,oldDraggableIndex:_n,newIndex:je,newDraggableIndex:_t},e))}var q,we,ee,pe,Dt,Wn,me,vt,Bt,je,_n,_t,zn,Me,Gt=!1,cl=!1,dl=[],Mt,We,Ol,Vl,ho,go,un,jt,vn,bn=!1,Hn=!1,Xn,Ee,zl=[],dr=!1,hl=[],Sl=typeof document<"u",qn=za,po=Fn||mt?"cssFloat":"float",Vg=Sl&&!Ha&&!za&&"draggable"in document.createElement("div"),Ba=function(){if(Sl){if(mt)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ua=function(t,n){var l=Y(t),r=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),o=en(t,0,n),s=en(t,1,n),u=o&&Y(o),a=s&&Y(s),f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Ce(o).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ce(s).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&u.float&&u.float!=="none"){var d=u.float==="left"?"left":"right";return s&&(a.clear==="both"||a.clear===d)?"vertical":"horizontal"}return o&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||f>=r&&l[po]==="none"||s&&l[po]==="none"&&f+c>r)?"vertical":"horizontal"},zg=function(t,n,l){var r=l?t.left:t.top,o=l?t.right:t.bottom,s=l?t.width:t.height,u=l?n.left:n.top,a=l?n.right:n.bottom,f=l?n.width:n.height;return r===u||o===a||r+s/2===u+f/2},Hg=function(t,n){var l;return dl.some(function(r){var o=r[xe].options.emptyInsertThreshold;if(!(!o||Ir(r))){var s=Ce(r),u=t>=s.left-o&&t<=s.right+o,a=n>=s.top-o&&n<=s.bottom+o;if(u&&a)return l=r}}),l},Wa=function(t){function n(o,s){return function(u,a,f,c){var d=u.options.group.name&&a.options.group.name&&u.options.group.name===a.options.group.name;if(o==null&&(s||d))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return n(o(u,a,f,c),s)(u,a,f,c);var g=(s?u:a).options.group.name;return o===!0||typeof o=="string"&&o===g||o.join&&o.indexOf(g)>-1}}var l={},r=t.group;(!r||Un(r)!="object")&&(r={name:r}),l.name=r.name,l.checkPull=n(r.pull,!0),l.checkPut=n(r.put),l.revertClone=r.revertClone,t.group=l},Xa=function(){!Ba&&ee&&Y(ee,"display","none")},Ya=function(){!Ba&&ee&&Y(ee,"display","")};Sl&&!Ha&&document.addEventListener("click",function(e){if(cl)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),cl=!1,!1},!0);var Et=function(t){if(q){t=t.touches?t.touches[0]:t;var n=Hg(t.clientX,t.clientY);if(n){var l={};for(var r in t)t.hasOwnProperty(r)&&(l[r]=t[r]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[xe]._onDragOver(l)}}},qg=function(t){q&&q.parentNode[xe]._isOutsideThisEl(t.target)};function X(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=gt({},t),e[xe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ua(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,u){s.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:X.supportPointer!==!1&&"PointerEvent"in window&&!pn,emptyInsertThreshold:5};Dn.initializePlugins(this,e,n);for(var l in n)!(l in t)&&(t[l]=n[l]);Wa(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:Vg,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ae(e,"pointerdown",this._onTapStart):(ae(e,"mousedown",this._onTapStart),ae(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ae(e,"dragover",this),ae(e,"dragenter",this)),dl.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),gt(this,Ig())}X.prototype={constructor:X,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(jt=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,q):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,l=this.el,r=this.options,o=r.preventOnFilter,s=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,a=(u||t).target,f=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,c=r.filter;if(Xg(l),!q&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||r.disabled)&&!f.isContentEditable&&!(!this.nativeDraggable&&pn&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Ke(a,r.draggable,l,!1),!(a&&a.animated)&&Wn!==a)){if(Bt=Be(a),_n=Be(a,r.draggable),typeof c=="function"){if(c.call(this,t,a,this)){De({sortable:n,rootEl:f,name:"filter",targetEl:a,toEl:l,fromEl:l}),Te("filter",n,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=Ke(f,d.trim(),l,!1),d)return De({sortable:n,rootEl:d,name:"filter",targetEl:a,fromEl:l,toEl:l}),Te("filter",n,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}r.handle&&!Ke(f,r.handle,l,!1)||this._prepareDragStart(t,u,a)}}},_prepareDragStart:function(t,n,l){var r=this,o=r.el,s=r.options,u=o.ownerDocument,a;if(l&&!q&&l.parentNode===o){var f=Ce(l);if(pe=o,q=l,we=q.parentNode,Dt=q.nextSibling,Wn=l,zn=s.group,X.dragged=q,Mt={target:q,clientX:(n||t).clientX,clientY:(n||t).clientY},ho=Mt.clientX-f.left,go=Mt.clientY-f.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,q.style["will-change"]="all",a=function(){if(Te("delayEnded",r,{evt:t}),X.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!ao&&r.nativeDraggable&&(q.draggable=!0),r._triggerDragStart(t,n),De({sortable:r,name:"choose",originalEvent:t}),Le(q,s.chosenClass,!0)},s.ignore.split(",").forEach(function(c){La(q,c.trim(),Hl)}),ae(u,"dragover",Et),ae(u,"mousemove",Et),ae(u,"touchmove",Et),ae(u,"mouseup",r._onDrop),ae(u,"touchend",r._onDrop),ae(u,"touchcancel",r._onDrop),ao&&this.nativeDraggable&&(this.options.touchStartThreshold=4,q.draggable=!0),Te("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Fn||mt))){if(X.eventCanceled){this._onDrop();return}ae(u,"mouseup",r._disableDelayedDrag),ae(u,"touchend",r._disableDelayedDrag),ae(u,"touchcancel",r._disableDelayedDrag),ae(u,"mousemove",r._delayedDragTouchMoveHandler),ae(u,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&ae(u,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(a,s.delay)}else a()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){q&&Hl(q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;se(t,"mouseup",this._disableDelayedDrag),se(t,"touchend",this._disableDelayedDrag),se(t,"touchcancel",this._disableDelayedDrag),se(t,"mousemove",this._delayedDragTouchMoveHandler),se(t,"touchmove",this._delayedDragTouchMoveHandler),se(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?ae(document,"pointermove",this._onTouchMove):n?ae(document,"touchmove",this._onTouchMove):ae(document,"mousemove",this._onTouchMove):(ae(q,"dragend",this),ae(pe,"dragstart",this._onDragStart));try{document.selection?Yn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Gt=!1,pe&&q){Te("dragStarted",this,{evt:n}),this.nativeDraggable&&ae(document,"dragover",qg);var l=this.options;!t&&Le(q,l.dragClass,!1),Le(q,l.ghostClass,!0),X.active=this,t&&this._appendGhost(),De({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(We){this._lastX=We.clientX,this._lastY=We.clientY,Xa();for(var t=document.elementFromPoint(We.clientX,We.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(We.clientX,We.clientY),t!==n);)n=t;if(q.parentNode[xe]._isOutsideThisEl(t),n)do{if(n[xe]){var l=void 0;if(l=n[xe]._onDragOver({clientX:We.clientX,clientY:We.clientY,target:t,rootEl:n}),l&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);Ya()}},_onTouchMove:function(t){if(Mt){var n=this.options,l=n.fallbackTolerance,r=n.fallbackOffset,o=t.touches?t.touches[0]:t,s=ee&&Qt(ee,!0),u=ee&&s&&s.a,a=ee&&s&&s.d,f=qn&&Ee&&co(Ee),c=(o.clientX-Mt.clientX+r.x)/(u||1)+(f?f[0]-zl[0]:0)/(u||1),d=(o.clientY-Mt.clientY+r.y)/(a||1)+(f?f[1]-zl[1]:0)/(a||1);if(!X.active&&!Gt){if(l&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<l)return;this._onDragStart(t,!0)}if(ee){s?(s.e+=c-(Ol||0),s.f+=d-(Vl||0)):s={a:1,b:0,c:0,d:1,e:c,f:d};var g="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Y(ee,"webkitTransform",g),Y(ee,"mozTransform",g),Y(ee,"msTransform",g),Y(ee,"transform",g),Ol=c,Vl=d,We=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ee){var t=this.options.fallbackOnBody?document.body:pe,n=Ce(q,!0,qn,!0,t),l=this.options;if(qn){for(Ee=t;Y(Ee,"position")==="static"&&Y(Ee,"transform")==="none"&&Ee!==document;)Ee=Ee.parentNode;Ee!==document.body&&Ee!==document.documentElement?(Ee===document&&(Ee=nt()),n.top+=Ee.scrollTop,n.left+=Ee.scrollLeft):Ee=nt(),zl=co(Ee)}ee=q.cloneNode(!0),Le(ee,l.ghostClass,!1),Le(ee,l.fallbackClass,!0),Le(ee,l.dragClass,!0),Y(ee,"transition",""),Y(ee,"transform",""),Y(ee,"box-sizing","border-box"),Y(ee,"margin",0),Y(ee,"top",n.top),Y(ee,"left",n.left),Y(ee,"width",n.width),Y(ee,"height",n.height),Y(ee,"opacity","0.8"),Y(ee,"position",qn?"absolute":"fixed"),Y(ee,"zIndex","100000"),Y(ee,"pointerEvents","none"),X.ghost=ee,t.appendChild(ee),Y(ee,"transform-origin",ho/parseInt(ee.style.width)*100+"% "+go/parseInt(ee.style.height)*100+"%")}},_onDragStart:function(t,n){var l=this,r=t.dataTransfer,o=l.options;if(Te("dragStart",this,{evt:t}),X.eventCanceled){this._onDrop();return}Te("setupClone",this),X.eventCanceled||(me=Ga(q),me.removeAttribute("id"),me.draggable=!1,me.style["will-change"]="",this._hideClone(),Le(me,this.options.chosenClass,!1),X.clone=me),l.cloneId=Yn(function(){Te("clone",l),!X.eventCanceled&&(l.options.removeCloneOnHide||pe.insertBefore(me,q),l._hideClone(),De({sortable:l,name:"clone"}))}),!n&&Le(q,o.dragClass,!0),n?(cl=!0,l._loopId=setInterval(l._emulateDragOver,50)):(se(document,"mouseup",l._onDrop),se(document,"touchend",l._onDrop),se(document,"touchcancel",l._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(l,r,q)),ae(document,"drop",l),Y(q,"transform","translateZ(0)")),Gt=!0,l._dragStartId=Yn(l._dragStarted.bind(l,n,t)),ae(document,"selectstart",l),un=!0,pn&&Y(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,l=t.target,r,o,s,u=this.options,a=u.group,f=X.active,c=zn===a,d=u.sort,g=Me||f,p,m=this,v=!1;if(dr)return;function _(Fe,Re){Te(Fe,m,it({evt:t,isOwner:c,axis:p?"vertical":"horizontal",revert:s,dragRect:r,targetRect:o,canSort:d,fromSortable:g,target:l,completed:y,onMove:function(qe,In){return Ln(pe,n,q,r,qe,Ce(qe),t,In)},changed:$},Re))}function w(){_("dragOverAnimationCapture"),m.captureAnimationState(),m!==g&&g.captureAnimationState()}function y(Fe){return _("dragOverCompleted",{insertion:Fe}),Fe&&(c?f._hideClone():f._showClone(m),m!==g&&(Le(q,Me?Me.options.ghostClass:f.options.ghostClass,!1),Le(q,u.ghostClass,!0)),Me!==m&&m!==X.active?Me=m:m===X.active&&Me&&(Me=null),g===m&&(m._ignoreWhileAnimating=l),m.animateAll(function(){_("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(l===q&&!q.animated||l===n&&!l.animated)&&(jt=null),!u.dragoverBubble&&!t.rootEl&&l!==document&&(q.parentNode[xe]._isOutsideThisEl(t.target),!Fe&&Et(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),v=!0}function $(){je=Be(q),_t=Be(q,u.draggable),De({sortable:m,name:"change",toEl:n,newIndex:je,newDraggableIndex:_t,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),l=Ke(l,u.draggable,n,!0),_("dragOver"),X.eventCanceled)return v;if(q.contains(t.target)||l.animated&&l.animatingX&&l.animatingY||m._ignoreWhileAnimating===l)return y(!1);if(cl=!1,f&&!u.disabled&&(c?d||(s=we!==pe):Me===this||(this.lastPutMode=zn.checkPull(this,f,q,t))&&a.checkPut(this,f,q,t))){if(p=this._getDirection(t,l)==="vertical",r=Ce(q),_("dragOverValid"),X.eventCanceled)return v;if(s)return we=pe,w(),this._hideClone(),_("revert"),X.eventCanceled||(Dt?pe.insertBefore(q,Dt):pe.appendChild(q)),y(!0);var M=Ir(n,u.draggable);if(!M||Gg(t,p,this)&&!M.animated){if(M===q)return y(!1);if(M&&n===t.target&&(l=M),l&&(o=Ce(l)),Ln(pe,n,q,r,l,o,t,!!l)!==!1)return w(),M&&M.nextSibling?n.insertBefore(q,M.nextSibling):n.appendChild(q),we=n,$(),y(!0)}else if(M&&xg(t,p,this)){var k=en(n,0,u,!0);if(k===q)return y(!1);if(l=k,o=Ce(l),Ln(pe,n,q,r,l,o,t,!1)!==!1)return w(),n.insertBefore(q,k),we=n,$(),y(!0)}else if(l.parentNode===n){o=Ce(l);var E=0,S,R=q.parentNode!==n,C=!zg(q.animated&&q.toRect||r,l.animated&&l.toRect||o,p),F=p?"top":"left",I=fo(l,"top","top")||fo(q,"top","top"),D=I?I.scrollTop:void 0;jt!==l&&(S=o[F],bn=!1,Hn=!C&&u.invertSwap||R),E=Bg(t,l,o,p,C?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Hn,jt===l);var z;if(E!==0){var O=Be(q);do O-=E,z=we.children[O];while(z&&(Y(z,"display")==="none"||z===ee))}if(E===0||z===l)return y(!1);jt=l,vn=E;var U=l.nextElementSibling,G=!1;G=E===1;var $e=Ln(pe,n,q,r,l,o,t,G);if($e!==!1)return($e===1||$e===-1)&&(G=$e===1),dr=!0,setTimeout(jg,30),w(),G&&!U?n.appendChild(q):l.parentNode.insertBefore(q,G?U:l),I&&xa(I,0,D-I.scrollTop),we=q.parentNode,S!==void 0&&!Hn&&(Xn=Math.abs(S-Ce(l)[F])),$(),y(!0)}if(n.contains(q))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){se(document,"mousemove",this._onTouchMove),se(document,"touchmove",this._onTouchMove),se(document,"pointermove",this._onTouchMove),se(document,"dragover",Et),se(document,"mousemove",Et),se(document,"touchmove",Et)},_offUpEvents:function(){var t=this.el.ownerDocument;se(t,"mouseup",this._onDrop),se(t,"touchend",this._onDrop),se(t,"pointerup",this._onDrop),se(t,"touchcancel",this._onDrop),se(document,"selectstart",this)},_onDrop:function(t){var n=this.el,l=this.options;if(je=Be(q),_t=Be(q,l.draggable),Te("drop",this,{evt:t}),we=q&&q.parentNode,je=Be(q),_t=Be(q,l.draggable),X.eventCanceled){this._nulling();return}Gt=!1,Hn=!1,bn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),hr(this.cloneId),hr(this._dragStartId),this.nativeDraggable&&(se(document,"drop",this),se(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pn&&Y(document.body,"user-select",""),Y(q,"transform",""),t&&(un&&(t.cancelable&&t.preventDefault(),!l.dropBubble&&t.stopPropagation()),ee&&ee.parentNode&&ee.parentNode.removeChild(ee),(pe===we||Me&&Me.lastPutMode!=="clone")&&me&&me.parentNode&&me.parentNode.removeChild(me),q&&(this.nativeDraggable&&se(q,"dragend",this),Hl(q),q.style["will-change"]="",un&&!Gt&&Le(q,Me?Me.options.ghostClass:this.options.ghostClass,!1),Le(q,this.options.chosenClass,!1),De({sortable:this,name:"unchoose",toEl:we,newIndex:null,newDraggableIndex:null,originalEvent:t}),pe!==we?(je>=0&&(De({rootEl:we,name:"add",toEl:we,fromEl:pe,originalEvent:t}),De({sortable:this,name:"remove",toEl:we,originalEvent:t}),De({rootEl:we,name:"sort",toEl:we,fromEl:pe,originalEvent:t}),De({sortable:this,name:"sort",toEl:we,originalEvent:t})),Me&&Me.save()):je!==Bt&&je>=0&&(De({sortable:this,name:"update",toEl:we,originalEvent:t}),De({sortable:this,name:"sort",toEl:we,originalEvent:t})),X.active&&((je==null||je===-1)&&(je=Bt,_t=_n),De({sortable:this,name:"end",toEl:we,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Te("nulling",this),pe=q=we=ee=Dt=me=Wn=vt=Mt=We=un=je=_t=Bt=_n=jt=vn=Me=zn=X.dragged=X.ghost=X.clone=X.active=null,hl.forEach(function(t){t.checked=!0}),hl.length=Ol=Vl=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":q&&(this._onDragOver(t),Lg(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,l=this.el.children,r=0,o=l.length,s=this.options;r<o;r++)n=l[r],Ke(n,s.draggable,this.el,!1)&&t.push(n.getAttribute(s.dataIdAttr)||Wg(n));return t},sort:function(t,n){var l={},r=this.el;this.toArray().forEach(function(o,s){var u=r.children[s];Ke(u,this.options.draggable,r,!1)&&(l[o]=u)},this),n&&this.captureAnimationState(),t.forEach(function(o){l[o]&&(r.removeChild(l[o]),r.appendChild(l[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Ke(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var l=this.options;if(n===void 0)return l[t];var r=Dn.modifyOption(this,t,n);typeof r<"u"?l[t]=r:l[t]=n,t==="group"&&Wa(l)},destroy:function(){Te("destroy",this);var t=this.el;t[xe]=null,se(t,"mousedown",this._onTapStart),se(t,"touchstart",this._onTapStart),se(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(se(t,"dragover",this),se(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),dl.splice(dl.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!vt){if(Te("hideClone",this),X.eventCanceled)return;Y(me,"display","none"),this.options.removeCloneOnHide&&me.parentNode&&me.parentNode.removeChild(me),vt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(vt){if(Te("showClone",this),X.eventCanceled)return;q.parentNode==pe&&!this.options.group.revertClone?pe.insertBefore(me,q):Dt?pe.insertBefore(me,Dt):pe.appendChild(me),this.options.group.revertClone&&this.animate(q,me),Y(me,"display",""),vt=!1}}};function Lg(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Ln(e,t,n,l,r,o,s,u){var a,f=e[xe],c=f.options.onMove,d;return window.CustomEvent&&!mt&&!Fn?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=t,a.from=e,a.dragged=n,a.draggedRect=l,a.related=r||t,a.relatedRect=o||Ce(t),a.willInsertAfter=u,a.originalEvent=s,e.dispatchEvent(a),c&&(d=c.call(f,a,s)),d}function Hl(e){e.draggable=!1}function jg(){dr=!1}function xg(e,t,n){var l=Ce(en(n.el,0,n.options,!0)),r=10;return t?e.clientX<l.left-r||e.clientY<l.top&&e.clientX<l.right:e.clientY<l.top-r||e.clientY<l.bottom&&e.clientX<l.left}function Gg(e,t,n){var l=Ce(Ir(n.el,n.options.draggable)),r=10;return t?e.clientX>l.right+r||e.clientX<=l.right&&e.clientY>l.bottom&&e.clientX>=l.left:e.clientX>l.right&&e.clientY>l.top||e.clientX<=l.right&&e.clientY>l.bottom+r}function Bg(e,t,n,l,r,o,s,u){var a=l?e.clientY:e.clientX,f=l?n.height:n.width,c=l?n.top:n.left,d=l?n.bottom:n.right,g=!1;if(!s){if(u&&Xn<f*r){if(!bn&&(vn===1?a>c+f*o/2:a<d-f*o/2)&&(bn=!0),bn)g=!0;else if(vn===1?a<c+Xn:a>d-Xn)return-vn}else if(a>c+f*(1-r)/2&&a<d-f*(1-r)/2)return Ug(t)}return g=g||s,g&&(a<c+f*o/2||a>d-f*o/2)?a>c+f/2?1:-1:0}function Ug(e){return Be(q)<Be(e)?1:-1}function Wg(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,l=0;n--;)l+=t.charCodeAt(n);return l.toString(36)}function Xg(e){hl.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var l=t[n];l.checked&&hl.push(l)}}function Yn(e){return setTimeout(e,0)}function hr(e){return clearTimeout(e)}Sl&&ae(document,"touchmove",function(e){(X.active||Gt)&&e.cancelable&&e.preventDefault()});X.utils={on:ae,off:se,css:Y,find:La,is:function(t,n){return!!Ke(t,n,t,!1)},extend:Fg,throttle:ja,closest:Ke,toggleClass:Le,clone:Ga,index:Be,nextTick:Yn,cancelNextTick:hr,detectDirection:Ua,getChild:en};X.get=function(e){return e[xe]};X.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(X.utils=it(it({},X.utils),l.utils)),Dn.mount(l)})};X.create=function(e,t){return new X(e,t)};X.version=Ag;var Se=[],fn,gr,pr=!1,ql,Ll,gl,cn;function Yg(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?ae(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ae(document,"pointermove",this._handleFallbackAutoScroll):l.touches?ae(document,"touchmove",this._handleFallbackAutoScroll):ae(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?se(document,"dragover",this._handleAutoScroll):(se(document,"pointermove",this._handleFallbackAutoScroll),se(document,"touchmove",this._handleFallbackAutoScroll),se(document,"mousemove",this._handleFallbackAutoScroll)),mo(),Qn(),Dg()},nulling:function(){gl=gr=fn=pr=cn=ql=Ll=null,Se.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var r=this,o=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(o,s);if(gl=n,l||this.options.forceAutoScrollFallback||Fn||mt||pn){jl(n,this.options,u,l);var a=yt(u,!0);pr&&(!cn||o!==ql||s!==Ll)&&(cn&&mo(),cn=setInterval(function(){var f=yt(document.elementFromPoint(o,s),!0);f!==a&&(a=f,Qn()),jl(n,r.options,f,l)},10),ql=o,Ll=s)}else{if(!this.options.bubbleScroll||yt(u,!0)===nt()){Qn();return}jl(n,this.options,yt(u,!1),!1)}}},gt(e,{pluginName:"scroll",initializeByDefault:!0})}function Qn(){Se.forEach(function(e){clearInterval(e.pid)}),Se=[]}function mo(){clearInterval(cn)}var jl=ja(function(e,t,n,l){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,u=t.scrollSpeed,a=nt(),f=!1,c;gr!==n&&(gr=n,Qn(),fn=t.scroll,c=t.scrollFn,fn===!0&&(fn=yt(n,!0)));var d=0,g=fn;do{var p=g,m=Ce(p),v=m.top,_=m.bottom,w=m.left,y=m.right,$=m.width,M=m.height,k=void 0,E=void 0,S=p.scrollWidth,R=p.scrollHeight,C=Y(p),F=p.scrollLeft,I=p.scrollTop;p===a?(k=$<S&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),E=M<R&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(k=$<S&&(C.overflowX==="auto"||C.overflowX==="scroll"),E=M<R&&(C.overflowY==="auto"||C.overflowY==="scroll"));var D=k&&(Math.abs(y-r)<=s&&F+$<S)-(Math.abs(w-r)<=s&&!!F),z=E&&(Math.abs(_-o)<=s&&I+M<R)-(Math.abs(v-o)<=s&&!!I);if(!Se[d])for(var O=0;O<=d;O++)Se[O]||(Se[O]={});(Se[d].vx!=D||Se[d].vy!=z||Se[d].el!==p)&&(Se[d].el=p,Se[d].vx=D,Se[d].vy=z,clearInterval(Se[d].pid),(D!=0||z!=0)&&(f=!0,Se[d].pid=setInterval((function(){l&&this.layer===0&&X.active._onTouchMove(gl);var U=Se[this.layer].vy?Se[this.layer].vy*u:0,G=Se[this.layer].vx?Se[this.layer].vx*u:0;typeof c=="function"&&c.call(X.dragged.parentNode[xe],G,U,e,gl,Se[this.layer].el)!=="continue"||xa(Se[this.layer].el,G,U)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&g!==a&&(g=yt(g,!1)));pr=f}},30),Qa=function(t){var n=t.originalEvent,l=t.putSortable,r=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,u=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(n){var f=l||o;u();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);a(),f&&!f.el.contains(d)&&(s("spill"),this.onSpill({dragEl:r,putSortable:l}))}};function Nr(){}Nr.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,l=t.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var r=en(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:Qa};gt(Nr,{pluginName:"revertOnSpill"});function Pr(){}Pr.prototype={onSpill:function(t){var n=t.dragEl,l=t.putSortable,r=l||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:Qa};gt(Pr,{pluginName:"removeOnSpill"});X.mount(new Yg);X.mount(Pr,Nr);function _o(e,t,n){const l=e.slice();return l[19]=t[n],l[21]=n,l}function vo(e,t,n){const l=e.slice();return l[22]=t[n],l[24]=n,l}function bo(e,t,n){const l=e.slice();return l[25]=t[n],l[24]=n,l}function wo(e){let t,n=e[24]+1+"",l;return{c(){t=A("option"),l=L(n),t.__value=e[24]+1,t.value=t.__value,h(t,"class","svelte-1nj8mt0")},m(r,o){T(r,t,o),b(t,l)},p:x,d(r){r&&N(t)}}}function yo(e,t){let n,l,r=t[1][t[24]]+"",o,s,u,a,f=t[19][t[1][t[24]]]+"",c,d,g,p,m,v,_,w,y,$=Array(t[0]).fill(),M=[];for(let S=0;S<$.length;S+=1)M[S]=wo(bo(t,$,S));function k(...S){return t[13](t[19],t[24],...S)}function E(...S){return t[14](t[19],...S)}return{key:e,first:null,c(){n=A("div"),l=A("h5"),o=L(r),s=L(":"),u=P(),a=A("p"),c=L(f),d=P(),g=A("div"),p=L(`Rank:
                        `),m=A("select");for(let S=0;S<M.length;S+=1)M[S].c();v=P(),h(l,"class","bold underline svelte-1nj8mt0"),h(a,"class","svelte-1nj8mt0"),h(m,"class","answer-rank"),h(n,"class","answer svelte-1nj8mt0"),h(n,"id",_=`answer-${t[24]}-${t[19].qid}`),this.first=n},m(S,R){T(S,n,R),b(n,l),b(l,o),b(l,s),b(n,u),b(n,a),b(a,c),b(n,d),b(n,g),b(g,p),b(g,m);for(let C=0;C<M.length;C+=1)M[C]&&M[C].m(m,null);b(n,v),w||(y=[B(m,"change",k),B(n,"dragend",E)],w=!0)},p(S,R){if(t=S,R&3&&r!==(r=t[1][t[24]]+"")&&W(o,r),R&131&&f!==(f=t[19][t[1][t[24]]]+"")&&W(c,f),R&1){$=Array(t[0]).fill();let C;for(C=0;C<$.length;C+=1){const F=bo(t,$,C);M[C]?M[C].p(F,R):(M[C]=wo(F),M[C].c(),M[C].m(m,null))}for(;C<M.length;C+=1)M[C].d(1);M.length=$.length}R&129&&_!==(_=`answer-${t[24]}-${t[19].qid}`)&&h(n,"id",_)},d(S){S&&N(n),ue(M,S),w=!1,ge(y)}}}function ko(e,t){let n,l,r,o,s,u,a=t[19].qid+"",f,c,d,g=t[19].question+"",p,m,v,_=[],w=new Map,y,$,M,k,E=Array(t[0]).fill();const S=R=>R[24];for(let R=0;R<E.length;R+=1){let C=vo(t,E,R),F=S(C);w.set(F,_[R]=yo(F,C))}return{key:e,first:null,c(){n=A("div"),l=A("div"),r=A("div"),o=A("div"),s=A("h5"),u=L("Question: "),f=L(a),c=P(),d=A("p"),p=L(g),m=P(),v=A("div");for(let R=0;R<_.length;R+=1)_[R].c();y=P(),h(s,"class","bold svelte-1nj8mt0"),h(d,"class","svelte-1nj8mt0"),h(o,"class","question svelte-1nj8mt0"),h(v,"class","answers"),ye(v,"display","grid"),ye(v,"grid-template-columns",t[6]),ye(v,"gap",".25%"),ye(v,"width","100%"),ye(v,"margin","auto"),h(r,"class","message-content svelte-1nj8mt0"),h(l,"class","chat-message-center svelte-1nj8mt0"),h(n,"class","chat-message svelte-1nj8mt0"),this.first=n},m(R,C){T(R,n,C),b(n,l),b(l,r),b(r,o),b(o,s),b(s,u),b(s,f),b(o,c),b(o,d),b(d,p),b(r,m),b(r,v);for(let F=0;F<_.length;F+=1)_[F]&&_[F].m(v,null);t[15](v),b(n,y),M||(k=wn($=Kg.call(null,n,t[21]===t[7].length-1)),M=!0)},p(R,C){t=R,C&128&&a!==(a=t[19].qid+"")&&W(f,a),C&128&&g!==(g=t[19].question+"")&&W(p,g),C&1667&&(E=Array(t[0]).fill(),_=ct(_,C,S,1,t,E,w,v,Ot,yo,null,vo)),C&64&&ye(v,"grid-template-columns",t[6]),$&&Qe($.update)&&C&128&&$.update.call(null,t[21]===t[7].length-1)},d(R){R&&N(n);for(let C=0;C<_.length;C+=1)_[C].d();t[15](null),M=!1,k()}}}function Qg(e){let t,n,l,r,o,s,u=[],a=new Map,f,c,d,g,p,m,v=(e[4]?e[5]:"Send")+"",_,w,y,$,M=e[7];const k=E=>E[21];for(let E=0;E<M.length;E+=1){let S=_o(e,M,E),R=k(S);a.set(R,u[E]=ko(R,S))}return{c(){t=A("div"),n=A("div"),n.innerHTML=`<h5 class="underline bold svelte-1nj8mt0">Q &amp; A Comparison Instructions</h5> 
    <br/> 
    <p class="svelte-1nj8mt0">Ask a question and rank the answers across the models. Drag each answer to
      rank it, in ascending order, from left-to-right. Optionally, select the
      rank for each via the corresponding dropdown.</p> 
    <br/> 
    <button class="svelte-1nj8mt0">Download Data</button>`,l=P(),r=A("div"),o=A("section"),s=A("div");for(let E=0;E<u.length;E+=1)u[E].c();f=P(),c=A("div"),d=A("form"),g=A("input"),p=P(),m=A("button"),_=L(v),h(n,"class","instructions svelte-1nj8mt0"),h(s,"class","chat-log svelte-1nj8mt0"),h(o,"class","chatbox svelte-1nj8mt0"),h(g,"class","chat-input-textarea svelte-1nj8mt0"),h(g,"placeholder","Type Message Here"),h(m,"class",w="btnyousend "+(e[3]===""?"":"active")+" svelte-1nj8mt0"),h(m,"type","submit"),h(d,"class","chat-input-form svelte-1nj8mt0"),h(c,"class","chat-input-holder svelte-1nj8mt0"),h(r,"class","ranked-chat svelte-1nj8mt0"),h(t,"class","ranked-feedback-container svelte-1nj8mt0")},m(E,S){T(E,t,S),b(t,n),b(t,l),b(t,r),b(r,o),b(o,s);for(let R=0;R<u.length;R+=1)u[R]&&u[R].m(s,null);b(r,f),b(r,c),b(c,d),b(d,g),lt(g,e[3]),b(d,p),b(d,m),b(m,_),y||($=[B(g,"input",e[16]),B(d,"submit",e[8])],y=!0)},p(E,[S]){S&1735&&(M=E[7],u=ct(u,S,k,1,E,M,a,s,Ot,ko,null,_o)),S&8&&g.value!==E[3]&&lt(g,E[3]),S&48&&v!==(v=(E[4]?E[5]:"Send")+"")&&W(_,v),S&8&&w!==(w="btnyousend "+(E[3]===""?"":"active")+" svelte-1nj8mt0")&&h(m,"class",w)},i:x,o:x,d(E){E&&N(t);for(let S=0;S<u.length;S+=1)u[S].d();y=!1,ge($)}}}function Kg(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function So(e){console.log("run update",e);const n=await fetch("/chat/comparator/db/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})});if(n.ok)console.log("ok",n);else{const l=await n.text();alert(l)}}function Jg(e,t,n){let l,r,o;le(e,El,k=>n(7,o=k));let{numModels:s=1}=t,{models:u=[0]}=t,a="",f="",c=!1;st(async()=>{if(await new Promise(k=>setTimeout(k,200)),p){const k=new X(p,{animation:150,onUpdate(E){k.toArray()}});k.toArray()}});const d=async k=>{k.preventDefault(),a=f,n(3,f=""),n(4,c=!0);let E={question:a};for(let R of u)E[R]="Loading...";Ne(El,o=[...o,E],o);const S=await fetch(`/chat/comparator/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})});if(S.ok){const R=await S.json();n(1,u=Object.keys(R.answer)),n(0,s=u.length);for(let C of u)E[C]=R.answer[C];E.qid=R.qid,El.update(C=>(C[C.length-1]=E,C))}else{const R=await S.text();alert(R)}n(4,c=!1)};let g=0;setInterval(()=>{n(11,g=(g+1)%4)},200);let p,m;function v(k,E){const S=E,C=dt(k.currentTarget.parentNode).selectAll("div.answer").nodes().map(z=>z.id);C.forEach((z,O)=>{dt(`#${z}`).select(".answer-rank").property("value",O+1)});let F=[];for(let[z,O]of C.entries()){const U=parseInt(O.split("-")[1]),G=u[U],$e={rank:z,model:G};F.push($e)}let I=o.filter(z=>z.qid===S),D=[];for(let z of F){const O={model:z.model,qid:parseInt(S),rank:parseInt(z.rank)+1,answer:I[0][z.model]};D.push(O)}So(D)}function _(k,E,S){const R=E,C=parseInt(k.target.value),F=u[S],I={qid:R,rank:parseInt(C),model:F};let D=[],O=o.filter(G=>G.qid===I.qid)[0][I.model];const U={model:I.model,qid:parseInt(I.qid),rank:parseInt(I.rank),answer:O};D.push(U),So(D)}const w=(k,E,S)=>_(S,k.qid,E),y=(k,E)=>v(E,k.qid);function $(k){yn[k?"unshift":"push"](()=>{p=k,n(2,p)})}function M(){f=this.value,n(3,f)}return e.$$set=k=>{"numModels"in k&&n(0,s=k.numModels),"models"in k&&n(1,u=k.models)},e.$$.update=()=>{e.$$.dirty&1&&n(6,l="1fr ".repeat(s).trim()),e.$$.dirty&2048&&n(5,r=".".repeat(g).padEnd(3)),e.$$.dirty&4100&&p&&(n(12,m=new X(p,{animation:150,dataIdAttr:"id",onUpdate(k){m.toArray()}})),m.toArray())},[s,u,p,f,c,r,l,o,d,v,_,g,m,w,y,$,M]}class Zg extends ie{constructor(t){super(),oe(this,t,Jg,Qg,re,{numModels:0,models:1})}}const tn=Ae([{model:"llama",qid:1,rank:1,answer:"Llama's first unique answer."},{model:"gpt3.5",qid:1,rank:2,answer:"GPT-3.5's first unique answer."},{model:"gpt4",qid:1,rank:3,answer:"GPT-4's first unique answer."},{model:"claude",qid:1,rank:4,answer:"Claude's first unique answer."},{model:"llama",qid:2,rank:4,answer:"Llama's second unique answer."},{model:"gpt3.5",qid:2,rank:2,answer:"GPT-3.5's second unique answer."},{model:"gpt4",qid:2,rank:4,answer:"GPT-4's second unique answer."},{model:"claude",qid:2,rank:3,answer:"'s second unique answer."}]);function Co(e,t,n){const l=e.slice();return l[20]=t[n],l}function $o(e,t,n){const l=e.slice();return l[20]=t[n],l[24]=n,l}function Ro(e,t,n){const l=e.slice();return l[25]=t[n],l}function Ao(e){let t,n,l,r,o=`Q.${e[25]}`,s,u;return{c(){t=j("g"),n=j("line"),r=j("text"),s=L(o),h(n,"class","axis-tick svelte-1nna9rx"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[5]+e[12].bottom+e[12].top),h(n,"stroke","black"),h(n,"stroke-dasharray","4"),h(r,"class","axis-text svelte-1nna9rx"),h(r,"y","15"),h(r,"text-anchor","middle"),h(t,"transform",u=`translate(${e[3](e[25])+0} ${e[5]-e[12].bottom})`),h(t,"class","svelte-1nna9rx")},m(a,f){T(a,t,f),b(t,n),b(t,r),b(r,s)},p(a,f){f&32&&l!==(l=-a[5]+a[12].bottom+a[12].top)&&h(n,"y2",l),f&256&&o!==(o=`Q.${a[25]}`)&&W(s,o),f&296&&u!==(u=`translate(${a[3](a[25])+0} ${a[5]-a[12].bottom})`)&&h(t,"transform",u)},d(a){a&&N(t)}}}function Mo(e){let t=Number.isInteger(e[25]),n,l=t&&Ao(e);return{c(){l&&l.c(),n=_e()},m(r,o){l&&l.m(r,o),T(r,n,o)},p(r,o){o&256&&(t=Number.isInteger(r[25])),t?l?l.p(r,o):(l=Ao(r),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(r){l&&l.d(r),r&&N(n)}}}function Eo(e,t){let n,l,r,o,s,u,a,f,c;function d(){return t[15](t[24])}function g(){return t[16](t[24])}return{key:e,first:null,c(){n=j("path"),o=j("path"),h(n,"class","model-path-outer svelte-1nna9rx"),h(n,"d",l=t[10](t[20])),h(n,"stroke","white"),h(n,"data-model",r=t[2][t[24]]),h(o,"class","model-path svelte-1nna9rx"),h(o,"d",s=t[10](t[20])),h(o,"role","img"),h(o,"stroke",u=t[11](t[2][t[24]])),h(o,"data-model",a=t[2][t[24]]),this.first=n},m(p,m){T(p,n,m),T(p,o,m),f||(c=[B(o,"mouseover",d),B(o,"focus",g),B(o,"mouseout",pl),B(o,"blur",pl)],f=!0)},p(p,m){t=p,m&1536&&l!==(l=t[10](t[20]))&&h(n,"d",l),m&516&&r!==(r=t[2][t[24]])&&h(n,"data-model",r),m&1536&&s!==(s=t[10](t[20]))&&h(o,"d",s),m&2564&&u!==(u=t[11](t[2][t[24]]))&&h(o,"stroke",u),m&516&&a!==(a=t[2][t[24]])&&h(o,"data-model",a)},d(p){p&&N(n),p&&N(o),f=!1,ge(c)}}}function Fo(e,t){let n,l,r,o,s,u,a=t[20].rank+"",f,c,d,g;return{key:e,first:null,c(){n=j("g"),l=j("circle"),u=j("text"),f=L(a),h(l,"r",r=t[20].answer.length/2*0+12),h(l,"fill",o=t[11](t[20].model)),h(l,"stroke","white"),h(l,"class","model-circle svelte-1nna9rx"),h(l,"role","img"),h(l,"data-model",s=t[20].model),h(u,"class","bump-text svelte-1nna9rx"),h(u,"text-anchor","middle"),h(u,"alignment-baseline","middle"),h(u,"color","white"),h(u,"fill","white"),h(n,"transform",c=`translate(${t[3](t[20].qid)}, ${t[4](t[20].rank)})`),h(n,"class","svelte-1nna9rx"),this.first=n},m(p,m){T(p,n,m),b(n,l),b(n,u),b(u,f),d||(g=[B(l,"mouseover",t[17]),B(l,"focus",t[18]),B(l,"mouseout",pl),B(l,"blur",pl)],d=!0)},p(p,m){t=p,m&128&&r!==(r=t[20].answer.length/2*0+12)&&h(l,"r",r),m&2176&&o!==(o=t[11](t[20].model))&&h(l,"fill",o),m&128&&s!==(s=t[20].model)&&h(l,"data-model",s),m&128&&a!==(a=t[20].rank+"")&&W(f,a),m&152&&c!==(c=`translate(${t[3](t[20].qid)}, ${t[4](t[20].rank)})`)&&h(n,"transform",c)},d(p){p&&N(n),d=!1,ge(g)}}}function ep(e){let t,n,l,r,o,s,u,a,f,c,d,g,p,m=[],v=new Map,_,w=[],y=new Map,$,M,k,E,S,R=e[8],C=[];for(let O=0;O<R.length;O+=1)C[O]=Mo(Ro(e,R,O));let F=e[9];const I=O=>O[24];for(let O=0;O<F.length;O+=1){let U=$o(e,F,O),G=I(U);v.set(G,m[O]=Eo(G,U))}let D=e[7];const z=O=>O[20].model+O[20].qid;for(let O=0;O<D.length;O+=1){let U=Co(e,D,O),G=z(U);y.set(G,w[O]=Fo(G,U))}return{c(){t=A("div"),n=j("svg"),l=j("line");for(let O=0;O<C.length;O+=1)C[O].c();u=j("text"),f=j("text"),g=j("text");for(let O=0;O<m.length;O+=1)m[O].c();_=_e();for(let O=0;O<w.length;O+=1)w[O].c();$=j("text"),M=L("Per-Question Ranks"),k=j("text"),E=L("Answer ranks over time, by model."),h(l,"class","axis-line svelte-1nna9rx"),h(l,"x1",e[12].left),h(l,"x2",r=e[6]-e[12].right),h(l,"y1",o=e[5]-e[12].bottom),h(l,"y2",s=e[5]-e[12].bottom),h(u,"class","chart-title svelte-1nna9rx"),h(u,"y",e[12].top/2),h(u,"x",a=(e[6]+e[12].left)/2),h(u,"text-anchor","middle"),h(f,"class","axis-label svelte-1nna9rx"),h(f,"y",c=e[5]+e[12].bottom+10),h(f,"x",d=(e[6]+e[12].left)/2),h(f,"text-anchor","middle"),h(g,"class","axis-label svelte-1nna9rx"),h(g,"y",e[12].left/2),h(g,"x",p=-(e[5]/2)),h(g,"text-anchor","middle"),h(g,"transform","rotate(-90)"),h($,"class","chart-title svelte-1nna9rx"),h($,"y",e[12].top/2),h($,"x",e[12].left),h($,"text-anchor","start"),h(k,"class","chart-subtitle svelte-1nna9rx"),h(k,"y",e[12].top/2+15),h(k,"x",e[12].left),h(k,"opacity",".6"),h(k,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-1nna9rx"),h(t,"id","chart-holder"),h(t,"class","svelte-1nna9rx"),ke(()=>e[19].call(t))},m(O,U){T(O,t,U),b(t,n),b(n,l);for(let G=0;G<C.length;G+=1)C[G]&&C[G].m(n,null);b(n,u),b(n,f),b(n,g);for(let G=0;G<m.length;G+=1)m[G]&&m[G].m(n,null);b(n,_);for(let G=0;G<w.length;G+=1)w[G]&&w[G].m(n,null);b(n,$),b($,M),b(n,k),b(k,E),S=ot(t,e[19].bind(t))},p(O,[U]){if(U&64&&r!==(r=O[6]-O[12].right)&&h(l,"x2",r),U&32&&o!==(o=O[5]-O[12].bottom)&&h(l,"y1",o),U&32&&s!==(s=O[5]-O[12].bottom)&&h(l,"y2",s),U&4392){R=O[8];let G;for(G=0;G<R.length;G+=1){const $e=Ro(O,R,G);C[G]?C[G].p($e,U):(C[G]=Mo($e),C[G].c(),C[G].m(n,u))}for(;G<C.length;G+=1)C[G].d(1);C.length=R.length}U&64&&a!==(a=(O[6]+O[12].left)/2)&&h(u,"x",a),U&32&&c!==(c=O[5]+O[12].bottom+10)&&h(f,"y",c),U&64&&d!==(d=(O[6]+O[12].left)/2)&&h(f,"x",d),U&32&&p!==(p=-(O[5]/2))&&h(g,"x",p),U&11780&&(F=O[9],m=ct(m,U,I,1,O,F,v,n,Ot,Eo,_,$o)),U&16787608&&(D=O[7],w=ct(w,U,z,1,O,D,y,n,Ot,Fo,$,Co)),U&2&&h(n,"width",O[1]),U&1&&h(n,"height",O[0])},i:x,o:x,d(O){O&&N(t),ue(C,O);for(let U=0;U<m.length;U+=1)m[U].d();for(let U=0;U<w.length;U+=1)w[U].d();S()}}}function pl(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function tp(e,t,n){let l,r,o,s,u,a,f,c,d,g,p;le(e,tn,S=>n(7,p=S));let m,v,_={top:35,bottom:15,left:10,right:0};function w(S){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(R=>{R.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${l[S]}"], .model-circle[data-model="${l[S]}"]`).forEach(R=>{R.style.opacity=1})}const y=S=>w(S),$=S=>w(S),M=()=>w(i),k=()=>w(i);function E(){v=this.offsetWidth,m=this.offsetHeight,n(1,v),n(0,m)}return e.$$.update=()=>{e.$$.dirty&128&&n(2,l=Array.from(new Set(p.map(S=>S.model)))),e.$$.dirty&2&&n(6,r=v-_.left-_.right),e.$$.dirty&1&&n(5,o=m-_.top-_.bottom),e.$$.dirty&192&&n(3,s=Mi().domain(p.map(S=>S.qid)).padding(.3).range([_.left,r-_.right])),e.$$.dirty&128&&n(14,u=p.map(S=>S.rank).sort((S,R)=>S-R)),e.$$.dirty&16416&&n(4,a=Mi().domain(u).padding(1).range([_.top,o-_.bottom])),e.$$.dirty&128&&n(11,f=$t().domain(p.map(S=>S.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"])),e.$$.dirty&24&&n(10,c=Zh().x(S=>s(S.qid)).y(S=>a(S.rank))),e.$$.dirty&132&&n(9,d=l.map(S=>p.filter(R=>R.model===S))),e.$$.dirty&8&&n(8,g=s.domain().length>10?s.domain().filter((S,R)=>R%2===0):s.domain())},[m,v,l,s,a,o,r,p,g,d,c,f,_,w,u,y,$,M,k,E]}class np extends ie{constructor(t){super(),oe(this,t,tp,ep,re,{})}}function Do(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function Io(e,t,n){const l=e.slice();return l[16]=t[n],l}function No(e,t,n){const l=e.slice();return l[16]=t[n],l}function Po(e){let t,n,l=e[16]+"",r,o;return{c(){t=j("g"),n=j("text"),r=L(l),h(n,"class","axis-text svelte-1y9gffu"),h(n,"x","-5"),h(n,"y","0"),h(n,"text-anchor","end"),h(t,"transform",o=`translate(${e[9].left} ${e[8](e[16])+e[8].bandwidth()/2})`)},m(s,u){T(s,t,u),b(t,n),b(n,r)},p(s,u){u&4&&l!==(l=s[16]+"")&&W(r,l),u&260&&o!==(o=`translate(${s[9].left} ${s[8](s[16])+s[8].bandwidth()/2})`)&&h(t,"transform",o)},d(s){s&&N(t)}}}function To(e){let t,n,l=e[16]+"",r,o;return{c(){t=j("g"),n=j("text"),r=L(l),h(n,"class","axis-text svelte-1y9gffu"),h(n,"y","15"),h(n,"text-anchor","middle"),h(t,"transform",o=`translate(${e[7](e[16])}, ${e[4]-e[9].bottom})`)},m(s,u){T(s,t,u),b(t,n),b(n,r)},p(s,u){u&128&&l!==(l=s[16]+"")&&W(r,l),u&144&&o!==(o=`translate(${s[7](s[16])}, ${s[4]-s[9].bottom})`)&&h(t,"transform",o)},d(s){s&&N(t)}}}function Oo(e){let t,n=e[16]%2==0&&To(e);return{c(){n&&n.c(),t=_e()},m(l,r){n&&n.m(l,r),T(l,t,r)},p(l,r){l[16]%2==0?n?n.p(l,r):(n=To(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){n&&n.d(l),l&&N(t)}}}function Vo(e){let t,n,l,r,o,s,u,a=e[13].avgRank.toFixed(2)+"",f,c,d;return{c(){t=j("rect"),u=j("text"),f=L(a),h(t,"y",n=e[8](e[13].model)),h(t,"x",e[9].left),h(t,"width",l=e[7](e[13].avgRank)-e[9].left),h(t,"height",r=e[8].bandwidth()),h(t,"fill",o=e[6](e[13].model)),h(t,"class","model-path"),h(t,"data-model",s=e[5][e[15]]),h(u,"class","label-text svelte-1y9gffu"),h(u,"y",c=e[8](e[13].model)+e[8].bandwidth()/2),h(u,"x",d=e[7](e[13].avgRank)+5),h(u,"text-anchor","start"),h(u,"dominant-baseline","middle")},m(g,p){T(g,t,p),T(g,u,p),b(u,f)},p(g,p){p&260&&n!==(n=g[8](g[13].model))&&h(t,"y",n),p&132&&l!==(l=g[7](g[13].avgRank)-g[9].left)&&h(t,"width",l),p&256&&r!==(r=g[8].bandwidth())&&h(t,"height",r),p&68&&o!==(o=g[6](g[13].model))&&h(t,"fill",o),p&32&&s!==(s=g[5][g[15]])&&h(t,"data-model",s),p&4&&a!==(a=g[13].avgRank.toFixed(2)+"")&&W(f,a),p&260&&c!==(c=g[8](g[13].model)+g[8].bandwidth()/2)&&h(u,"y",c),p&132&&d!==(d=g[7](g[13].avgRank)+5)&&h(u,"x",d)},d(g){g&&N(t),g&&N(u)}}}function lp(e){let t,n,l,r,o,s,u,a,f,c,d,g,p=e[2].map(zo),m=[];for(let $=0;$<p.length;$+=1)m[$]=Po(No(e,p,$));let v=e[7].ticks(),_=[];for(let $=0;$<v.length;$+=1)_[$]=Oo(Io(e,v,$));let w=e[2],y=[];for(let $=0;$<w.length;$+=1)y[$]=Vo(Do(e,w,$));return{c(){t=A("div"),n=j("svg");for(let $=0;$<m.length;$+=1)m[$].c();l=_e();for(let $=0;$<_.length;$+=1)_[$].c();r=_e();for(let $=0;$<y.length;$+=1)y[$].c();o=j("line"),f=j("text"),c=L("Average Rank"),d=j("text"),h(o,"class","axis-line svelte-1y9gffu"),h(o,"x1",e[9].left),h(o,"x2",s=e[3]-e[9].right),h(o,"y1",u=e[4]-e[9].bottom),h(o,"y2",a=e[4]-e[9].bottom),h(f,"class","chart-title"),h(f,"y",e[9].top/2),h(f,"x",e[9].left),h(f,"text-anchor","start"),h(d,"class","chart-subtitle"),h(d,"y",e[9].top/2+15),h(d,"x",e[9].left),h(d,"opacity",".6"),h(d,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","bar-chart-holder"),h(t,"class","svelte-1y9gffu"),ke(()=>e[12].call(t))},m($,M){T($,t,M),b(t,n);for(let k=0;k<m.length;k+=1)m[k]&&m[k].m(n,null);b(n,l);for(let k=0;k<_.length;k+=1)_[k]&&_[k].m(n,null);b(n,r);for(let k=0;k<y.length;k+=1)y[k]&&y[k].m(n,null);b(n,o),b(n,f),b(f,c),b(n,d),g=ot(t,e[12].bind(t))},p($,[M]){if(M&772){p=$[2].map(zo);let k;for(k=0;k<p.length;k+=1){const E=No($,p,k);m[k]?m[k].p(E,M):(m[k]=Po(E),m[k].c(),m[k].m(n,l))}for(;k<m.length;k+=1)m[k].d(1);m.length=p.length}if(M&656){v=$[7].ticks();let k;for(k=0;k<v.length;k+=1){const E=Io($,v,k);_[k]?_[k].p(E,M):(_[k]=Oo(E),_[k].c(),_[k].m(n,r))}for(;k<_.length;k+=1)_[k].d(1);_.length=v.length}if(M&996){w=$[2];let k;for(k=0;k<w.length;k+=1){const E=Do($,w,k);y[k]?y[k].p(E,M):(y[k]=Vo(E),y[k].c(),y[k].m(n,o))}for(;k<y.length;k+=1)y[k].d(1);y.length=w.length}M&8&&s!==(s=$[3]-$[9].right)&&h(o,"x2",s),M&16&&u!==(u=$[4]-$[9].bottom)&&h(o,"y1",u),M&16&&a!==(a=$[4]-$[9].bottom)&&h(o,"y2",a),M&2&&h(n,"width",$[1]),M&1&&h(n,"height",$[0])},i:x,o:x,d($){$&&N(t),ue(m,$),ue(_,$),ue(y,$),g()}}}const zo=e=>e.model;function rp(e,t,n){let l,r,o,s,u,a,f,c,d;le(e,tn,_=>n(11,d=_));let g=300,p=500,m={top:50,bottom:0,left:100,right:0};function v(){p=this.offsetWidth,g=this.offsetHeight,n(1,p),n(0,g)}return e.$$.update=()=>{e.$$.dirty&2048&&n(10,l=d.reduce((_,w)=>(_[w.model]?(_[w.model].sum+=w.rank,_[w.model].count++):_[w.model]={sum:w.rank,count:1},_),{})),e.$$.dirty&1024&&n(2,r=Object.keys(l).map(_=>({model:_,avgRank:l[_].sum/l[_].count}))),e.$$.dirty&2&&n(3,o=p-m.left-m.right),e.$$.dirty&1&&n(4,s=g-m.top-m.bottom),e.$$.dirty&20&&n(8,u=Vt().rangeRound([m.top,s-m.bottom]).padding(.05).domain(r.map(_=>_.model))),e.$$.dirty&12&&n(7,a=Ge().rangeRound([m.left,o-m.right]).domain([0,ht(r,_=>_.avgRank)])),e.$$.dirty&4&&n(6,f=$t().domain(r.map(_=>_.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&2048&&n(5,c=Array.from(new Set(d.map(_=>_.model))))},[g,p,r,o,s,c,f,a,u,m,l,d,v]}class ip extends ie{constructor(t){super(),oe(this,t,rp,lp,re,{})}}function Ho(e,t,n){const l=e.slice();return l[20]=t[n],l[22]=n,l}function qo(e,t,n){const l=e.slice();return l[23]=t[n],l[25]=n,l}function Lo(e,t,n){const l=e.slice();return l[23]=t[n],l}function jo(e){let t,n=e[23].key+"",l,r,o;function s(){return e[10](e[23])}return{c(){t=A("th"),l=L(n),h(t,"class","svelte-owgjbp")},m(u,a){T(u,t,a),b(t,l),r||(o=B(t,"click",s),r=!0)},p(u,a){e=u,a&64&&n!==(n=e[23].key+"")&&W(l,n)},d(u){u&&N(t),r=!1,o()}}}function xo(e,t){let n,l=(t[20][t[23].key].length>Bo&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"",r,o,s,u;function a(){return t[11](t[22],t[25])}return{key:e,first:null,c(){n=A("td"),r=L(l),h(n,"class",o="cell-type-"+t[23].type+" svelte-owgjbp"),ye(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),It(n,"active",t[4]===`${t[22]}-${t[25]}`),this.first=n},m(f,c){T(f,n,c),b(n,r),s||(u=B(n,"click",a),s=!0)},p(f,c){t=f,c&112&&l!==(l=(t[20][t[23].key].length>Bo&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"")&&W(r,l),c&64&&o!==(o="cell-type-"+t[23].type+" svelte-owgjbp")&&h(n,"class",o),c&96&&ye(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),c&80&&It(n,"active",t[4]===`${t[22]}-${t[25]}`)},d(f){f&&N(n),s=!1,u()}}}function Go(e){let t,n=[],l=new Map,r,o=e[6];const s=u=>u[23].key;for(let u=0;u<o.length;u+=1){let a=qo(e,o,u),f=s(a);l.set(f,n[u]=xo(f,a))}return{c(){t=A("tr");for(let u=0;u<n.length;u+=1)n[u].c();r=P(),h(t,"class","svelte-owgjbp")},m(u,a){T(u,t,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);b(t,r)},p(u,a){a&240&&(o=u[6],n=ct(n,a,s,1,u,o,l,t,Ot,xo,r,qo))},d(u){u&&N(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function op(e){let t,n,l,r,o,s,u,a,f,c=e[6],d=[];for(let m=0;m<c.length;m+=1)d[m]=jo(Lo(e,c,m));let g=e[5],p=[];for(let m=0;m<g.length;m+=1)p[m]=Go(Ho(e,g,m));return{c(){t=A("div"),n=A("div"),l=A("table"),r=A("thead");for(let m=0;m<d.length;m+=1)d[m].c();o=P(),s=A("tbody");for(let m=0;m<p.length;m+=1)p[m].c();a=P(),f=A("br"),h(r,"class","svelte-owgjbp"),h(s,"class","svelte-owgjbp"),h(l,"class",u="pretty-table "+e[0].style+" svelte-owgjbp"),h(n,"class","svelte-owgjbp"),h(f,"class","svelte-owgjbp"),h(t,"class","table svelte-owgjbp")},m(m,v){T(m,t,v),b(t,n),b(n,l),b(l,r);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(r,null);b(l,o),b(l,s);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(s,null);b(t,a),b(t,f)},p(m,[v]){if(v&78){c=m[6];let _;for(_=0;_<c.length;_+=1){const w=Lo(m,c,_);d[_]?d[_].p(w,v):(d[_]=jo(w),d[_].c(),d[_].m(r,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=c.length}if(v&240){g=m[5];let _;for(_=0;_<g.length;_+=1){const w=Ho(m,g,_);p[_]?p[_].p(w,v):(p[_]=Go(w),p[_].c(),p[_].m(s,null))}for(;_<p.length;_+=1)p[_].d(1);p.length=g.length}v&1&&u!==(u="pretty-table "+m[0].style+" svelte-owgjbp")&&h(l,"class",u)},i:x,o:x,d(m){m&&N(t),ue(d,m),ue(p,m)}}}let Bo=25,sp=0;function ap(e,t,n){let l,r,o,s;le(e,tn,M=>n(9,s=M));let u={};const a=pt(".2f");function f(M){let k=M.reduce((S,R)=>(S[R.model]||(S[R.model]=[]),S[R.model].push(R.rank),S),{});return Object.entries(k).map(([S,R])=>{let C=R.reduce((I,D)=>(I[D]=(I[D]||0)+1,I),{}),F=Object.entries(C).reduce((I,D)=>D[1]>I[1]?D:I)[0];return{model:S,overall_rank:Number(F),average_rank:a(Jd(R)),standard_deviation_rank:a(Vd(R))}})}u={...{columns:{},style:"normal",paged:25},...u};const d=Ge().domain([-1,0,1]).range(["#FF5470","#f8f8f8","#00ebc7"]);let{sortable:g,index:p,paged:m}=u,v,_=!0;if(g&&p)throw new Error("A table can either be ranked or sortable, but not both");p=1,g=1;let w=null;const y=M=>{g&&(v===M.key&&n(2,_=!_),n(1,v=M.key))},$=(M,k)=>{n(4,w=w===`${M}-${k}`?null:`${M}-${k}`)};return e.$$.update=()=>{if(e.$$.dirty&512,e.$$.dirty&512&&n(8,l=f(s)),e.$$.dirty&774){v&&n(8,l=l.slice().sort((k,E)=>{let S=k[v],R=E[v];if(S==R)return JSON.stringify(k).localeCompare(JSON.stringify(E));let C=S>R?1:S<R?-1:0;return _&&(C=-C),C}));let M=sp*m;n(5,o=l.slice(M,M+(m||l.length))),m&&Math.ceil(s.length/m)}e.$$.dirty&257&&n(6,r=Object.keys(l[0]).map(M=>{const k=u.columns[M]||{};return{key:M,type:k.type||typeof l[0][M],options:k}}))},n(5,o=[]),[u,v,_,g,w,o,r,d,l,s,y,$]}let up=class extends ie{constructor(t){super(),oe(this,t,ap,op,re,{})}};function Uo(e,t,n){const l=e.slice();return l[19]=t[n],l}function Wo(e,t,n){const l=e.slice();return l[22]=t[n],l}function Xo(e,t,n){const l=e.slice();return l[25]=t[n],l[27]=n,l}function Yo(e){let t,n=e[25]+"",l,r,o,s=e[25]+"",u,a;return{c(){t=j("text"),l=L(n),o=j("text"),u=L(s),h(t,"class","axis-text svelte-t6wv8i"),h(t,"x",r=e[7].left+e[5](e[25])+e[5].bandwidth()/2),h(t,"y",e[7].top-10),h(t,"text-anchor","middle"),h(o,"class","axis-text svelte-t6wv8i"),h(o,"x",e[7].left-10),h(o,"y",a=e[7].top+e[4](e[25])+e[4].bandwidth()/2),h(o,"text-anchor","end"),h(o,"dominant-baseline","middle")},m(f,c){T(f,t,c),b(t,l),T(f,o,c),b(o,u)},p(f,c){c&8&&n!==(n=f[25]+"")&&W(l,n),c&40&&r!==(r=f[7].left+f[5](f[25])+f[5].bandwidth()/2)&&h(t,"x",r),c&8&&s!==(s=f[25]+"")&&W(u,s),c&24&&a!==(a=f[7].top+f[4](f[25])+f[4].bandwidth()/2)&&h(o,"y",a)},d(f){f&&N(t),f&&N(o)}}}function Qo(e){let t,n,l,r,o,s,u,a,f=e[6](e[2][e[19]][e[22]])+"",c,d,g,p;return{c(){t=j("rect"),a=j("text"),c=L(f),h(t,"x",n=e[7].left+e[5](e[22])),h(t,"y",l=e[7].top+e[4](e[19])),h(t,"width",r=e[5].bandwidth()),h(t,"height",o=e[4].bandwidth()),h(t,"fill",s=e[8](e[19],e[22])),h(t,"rx","4"),h(t,"ry","4"),h(t,"class","model-path"),h(t,"data-model",u=e[19]),h(a,"x",d=e[7].left+e[5](e[22])+e[5].bandwidth()/2),h(a,"y",g=e[7].top+e[4](e[19])+e[4].bandwidth()/2),h(a,"text-anchor","middle"),h(a,"dominant-baseline","middle"),h(a,"class","model-path"),h(a,"data-model",p=e[19])},m(m,v){T(m,t,v),T(m,a,v),b(a,c)},p(m,v){v&40&&n!==(n=m[7].left+m[5](m[22]))&&h(t,"x",n),v&24&&l!==(l=m[7].top+m[4](m[19]))&&h(t,"y",l),v&32&&r!==(r=m[5].bandwidth())&&h(t,"width",r),v&16&&o!==(o=m[4].bandwidth())&&h(t,"height",o),v&8&&s!==(s=m[8](m[19],m[22]))&&h(t,"fill",s),v&8&&u!==(u=m[19])&&h(t,"data-model",u),v&12&&f!==(f=m[6](m[2][m[19]][m[22]])+"")&&W(c,f),v&40&&d!==(d=m[7].left+m[5](m[22])+m[5].bandwidth()/2)&&h(a,"x",d),v&24&&g!==(g=m[7].top+m[4](m[19])+m[4].bandwidth()/2)&&h(a,"y",g),v&8&&p!==(p=m[19])&&h(a,"data-model",p)},d(m){m&&N(t),m&&N(a)}}}function Ko(e){let t,n=e[3],l=[];for(let r=0;r<n.length;r+=1)l[r]=Qo(Wo(e,n,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();t=_e()},m(r,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,o);T(r,t,o)},p(r,o){if(o&508){n=r[3];let s;for(s=0;s<n.length;s+=1){const u=Wo(r,n,s);l[s]?l[s].p(u,o):(l[s]=Qo(u),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(r){ue(l,r),r&&N(t)}}}function fp(e){let t,n,l,r,o,s,u,a=e[3],f=[];for(let g=0;g<a.length;g+=1)f[g]=Yo(Xo(e,a,g));let c=e[3],d=[];for(let g=0;g<c.length;g+=1)d[g]=Ko(Uo(e,c,g));return{c(){t=A("div"),n=j("svg");for(let g=0;g<f.length;g+=1)f[g].c();l=_e();for(let g=0;g<d.length;g+=1)d[g].c();r=j("text"),o=L("Relative Performance"),s=j("text"),h(r,"class","chart-title"),h(r,"y",e[7].top/2),h(r,"x",e[7].left),h(r,"text-anchor","start"),h(s,"class","chart-subtitle svelte-t6wv8i"),h(s,"y",e[7].top/2+15),h(s,"x",e[7].left),h(s,"opacity",".6"),h(s,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","heatmap-holder"),h(t,"class","svelte-t6wv8i"),ke(()=>e[16].call(t))},m(g,p){T(g,t,p),b(t,n);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(n,null);b(n,l);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(n,null);b(n,r),b(r,o),b(n,s),u=ot(t,e[16].bind(t))},p(g,[p]){if(p&184){a=g[3];let m;for(m=0;m<a.length;m+=1){const v=Xo(g,a,m);f[m]?f[m].p(v,p):(f[m]=Yo(v),f[m].c(),f[m].m(n,l))}for(;m<f.length;m+=1)f[m].d(1);f.length=a.length}if(p&508){c=g[3];let m;for(m=0;m<c.length;m+=1){const v=Uo(g,c,m);d[m]?d[m].p(v,p):(d[m]=Ko(v),d[m].c(),d[m].m(n,r))}for(;m<d.length;m+=1)d[m].d(1);d.length=c.length}p&2&&h(n,"width",g[1]),p&1&&h(n,"height",g[0])},i:x,o:x,d(g){g&&N(t),ue(f,g),ue(d,g),u()}}}function cp(e,t,n){let l,r,o,s,u,a,f,c,d,g,p;le(e,tn,k=>n(15,p=k));const m=pt(".1f");function v(k){let E=k.reduce((C,F)=>(C[F.qid]||(C[F.qid]=[]),C[F.qid].push(F),C),{}),S=Array.from(new Set(k.map(C=>C.model))),R=S.reduce((C,F)=>(C[F]=S.reduce((I,D)=>(I[D]={sum:0,count:0},I),{}),C),{});for(let C in E){let F=E[C];for(let I of S)for(let D of S){let z=F.find(U=>U.model===I),O=F.find(U=>U.model===D);z&&O&&(R[I][D].sum+=O.rank-z.rank,R[I][D].count++)}}for(let C in R)for(let F in R[C])R[C][F].count>0?R[C][F]=R[C][F].sum/R[C][F].count:R[C][F]=0;return R}let _=500,w=500,y={top:50,bottom:0,left:65,right:25};function $(k,E){let S=l[k][E];return S===0?"white":S>=0?g(k):g(E)}function M(){w=this.offsetWidth,_=this.offsetHeight,n(1,w),n(0,_)}return e.$$.update=()=>{e.$$.dirty&32768&&n(2,l=v(p)),e.$$.dirty&32768&&n(3,r=Array.from(new Set(p.map(k=>k.model)))),e.$$.dirty&2&&n(14,o=w-y.left-y.right),e.$$.dirty&1&&n(13,s=_-y.top-y.bottom),e.$$.dirty&16392&&n(5,u=Vt().range([0,o]).domain(r).padding(.05)),e.$$.dirty&8200&&n(4,a=Vt().range([0,s]).domain(r).padding(.05)),e.$$.dirty&4&&n(12,f=Object.values(l).flatMap(k=>Object.values(k))),e.$$.dirty&4096&&n(11,c=lr(f)),e.$$.dirty&4096&&n(10,d=ht(f)),e.$$.dirty&8&&n(9,g=$t().domain(r).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&3592&&r.reduce((k,E)=>(k[E]=Ra().domain([c,d]).interpolator(ir("white",g(E))),k),{})},[_,w,l,r,a,u,m,y,$,g,d,c,f,s,o,p,M]}class dp extends ie{constructor(t){super(),oe(this,t,cp,fp,re,{})}}function Jo(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function hp(e){let t;return{c(){t=A("div"),t.innerHTML="<h5>To view the comparison dashboard, you must first rank some comparisons!</h5>",h(t,"class","holder svelte-7imt18")},m(n,l){T(n,t,l)},p:x,i:x,o:x,d(n){n&&N(t)}}}function gp(e){let t,n,l,r,o,s,u,a,f,c,d,g,p,m,v,_,w,y,$,M,k,E=e[1],S=[];for(let R=0;R<E.length;R+=1)S[R]=Zo(Jo(e,E,R));return a=new np({}),d=new up({}),w=new ip({}),M=new dp({}),{c(){t=A("div"),n=A("div"),l=A("div"),r=A("h4"),r.textContent="Model Comparisons",o=P();for(let R=0;R<S.length;R+=1)S[R].c();s=P(),u=A("div"),te(a.$$.fragment),f=P(),c=A("div"),te(d.$$.fragment),g=P(),p=A("div"),m=A("div"),v=P(),_=A("div"),te(w.$$.fragment),y=P(),$=A("div"),te(M.$$.fragment),h(r,"class","svelte-7imt18"),h(l,"class","chart-captions svelte-7imt18"),h(u,"class","eval-main"),h(c,"class","eval-table svelte-7imt18"),h(n,"class","left-charts svelte-7imt18"),h(m,"class","right-chart-1"),h(_,"class","right-chart-2"),h($,"class","right-chart-3"),h(p,"class","right-charts svelte-7imt18"),h(t,"class","eval-container svelte-7imt18")},m(R,C){T(R,t,C),b(t,n),b(n,l),b(l,r),b(l,o);for(let F=0;F<S.length;F+=1)S[F]&&S[F].m(l,null);b(n,s),b(n,u),J(a,u,null),b(n,f),b(n,c),J(d,c,null),b(t,g),b(t,p),b(p,m),b(p,v),b(p,_),J(w,_,null),b(p,y),b(p,$),J(M,$,null),k=!0},p(R,C){if(C&14){E=R[1];let F;for(F=0;F<E.length;F+=1){const I=Jo(R,E,F);S[F]?S[F].p(I,C):(S[F]=Zo(I),S[F].c(),S[F].m(l,null))}for(;F<S.length;F+=1)S[F].d(1);S.length=E.length}},i(R){k||(V(a.$$.fragment,R),V(d.$$.fragment,R),V(w.$$.fragment,R),V(M.$$.fragment,R),k=!0)},o(R){H(a.$$.fragment,R),H(d.$$.fragment,R),H(w.$$.fragment,R),H(M.$$.fragment,R),k=!1},d(R){R&&N(t),ue(S,R),Z(a),Z(d),Z(w),Z(M)}}}function Zo(e){let t,n=e[7]+"",l,r,o,s;function u(){return e[4](e[9])}function a(){return e[5](e[9])}return{c(){t=A("button"),l=L(n),h(t,"data-model",r=e[7]),h(t,"class","model-path svelte-7imt18"),ye(t,"color","white"),ye(t,"background",e[2](e[7]))},m(f,c){T(f,t,c),b(t,l),o||(s=[B(t,"mouseover",u),B(t,"focus",a),B(t,"mouseout",es),B(t,"blur",es)],o=!0)},p(f,c){e=f,c&2&&n!==(n=e[7]+"")&&W(l,n),c&2&&r!==(r=e[7])&&h(t,"data-model",r),c&6&&ye(t,"background",e[2](e[7]))},d(f){f&&N(t),o=!1,ge(s)}}}function pp(e){let t,n,l,r;const o=[gp,hp],s=[];function u(a,f){return a[0].length>0?0:1}return n=u(e),l=s[n]=o[n](e),{c(){t=A("div"),l.c(),h(t,"class","main-container svelte-7imt18")},m(a,f){T(a,t,f),s[n].m(t,null),r=!0},p(a,[f]){let c=n;n=u(a),n===c?s[n].p(a,f):(ce(),H(s[c],1,1,()=>{s[c]=null}),de(),l=s[n],l?l.p(a,f):(l=s[n]=o[n](a),l.c()),V(l,1),l.m(t,null))},i(a){r||(V(l),r=!0)},o(a){H(l),r=!1},d(a){a&&N(t),s[n].d()}}}function es(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function mp(e,t,n){let l,r,o;le(e,tn,c=>n(0,o=c));async function s(){const d=await(await fetch("/chat/comparator/db/retrieve")).json();console.log("uploooo",d);const p=d.data.map(m=>({model:m.model,answer:m.answer,qid:parseInt(m.qid),rank:parseInt(m.rank)}));Ne(tn,o=[...p],o)}st(()=>{s()});function u(c){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(d=>{d.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${l[c]}"], .model-circle[data-model="${l[c]}"]`).forEach(d=>{d.style.opacity=1})}const a=c=>u(c),f=c=>u(c);return e.$$.update=()=>{e.$$.dirty&1&&n(1,l=Array.from(new Set(o.map(c=>c.model)))),e.$$.dirty&1&&n(2,r=$t().domain(o.map(c=>c.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"]))},[o,l,r,u,a,f]}class _p extends ie{constructor(t){super(),oe(this,t,mp,pp,re,{})}}function vp(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Ka(this.cover(t,n),t,n,e)}function Ka(e,t,n,l){if(isNaN(t)||isNaN(n))return e;var r,o=e._root,s={data:l},u=e._x0,a=e._y0,f=e._x1,c=e._y1,d,g,p,m,v,_,w,y;if(!o)return e._root=s,e;for(;o.length;)if((v=t>=(d=(u+f)/2))?u=d:f=d,(_=n>=(g=(a+c)/2))?a=g:c=g,r=o,!(o=o[w=_<<1|v]))return r[w]=s,e;if(p=+e._x.call(null,o.data),m=+e._y.call(null,o.data),t===p&&n===m)return s.next=o,r?r[w]=s:e._root=s,e;do r=r?r[w]=new Array(4):e._root=new Array(4),(v=t>=(d=(u+f)/2))?u=d:f=d,(_=n>=(g=(a+c)/2))?a=g:c=g;while((w=_<<1|v)===(y=(m>=g)<<1|p>=d));return r[y]=o,r[w]=s,e}function bp(e){var t,n,l=e.length,r,o,s=new Array(l),u=new Array(l),a=1/0,f=1/0,c=-1/0,d=-1/0;for(n=0;n<l;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=r,u[n]=o,r<a&&(a=r),r>c&&(c=r),o<f&&(f=o),o>d&&(d=o));if(a>c||f>d)return this;for(this.cover(a,f).cover(c,d),n=0;n<l;++n)Ka(this,s[n],u[n],e[n]);return this}function wp(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,l=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(l=Math.floor(t))+1;else{for(var s=r-n||1,u=this._root,a,f;n>e||e>=r||l>t||t>=o;)switch(f=(t<l)<<1|e<n,a=new Array(4),a[f]=u,u=a,s*=2,f){case 0:r=n+s,o=l+s;break;case 1:n=r-s,o=l+s;break;case 2:r=n+s,l=o-s;break;case 3:n=r-s,l=o-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=l,this._x1=r,this._y1=o,this}function yp(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function kp(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ie(e,t,n,l,r){this.node=e,this.x0=t,this.y0=n,this.x1=l,this.y1=r}function Sp(e,t,n){var l,r=this._x0,o=this._y0,s,u,a,f,c=this._x1,d=this._y1,g=[],p=this._root,m,v;for(p&&g.push(new Ie(p,r,o,c,d)),n==null?n=1/0:(r=e-n,o=t-n,c=e+n,d=t+n,n*=n);m=g.pop();)if(!(!(p=m.node)||(s=m.x0)>c||(u=m.y0)>d||(a=m.x1)<r||(f=m.y1)<o))if(p.length){var _=(s+a)/2,w=(u+f)/2;g.push(new Ie(p[3],_,w,a,f),new Ie(p[2],s,w,_,f),new Ie(p[1],_,u,a,w),new Ie(p[0],s,u,_,w)),(v=(t>=w)<<1|e>=_)&&(m=g[g.length-1],g[g.length-1]=g[g.length-1-v],g[g.length-1-v]=m)}else{var y=e-+this._x.call(null,p.data),$=t-+this._y.call(null,p.data),M=y*y+$*$;if(M<n){var k=Math.sqrt(n=M);r=e-k,o=t-k,c=e+k,d=t+k,l=p.data}}return l}function Cp(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,l,r,o,s=this._x0,u=this._y0,a=this._x1,f=this._y1,c,d,g,p,m,v,_,w;if(!n)return this;if(n.length)for(;;){if((m=c>=(g=(s+a)/2))?s=g:a=g,(v=d>=(p=(u+f)/2))?u=p:f=p,t=n,!(n=n[_=v<<1|m]))return this;if(!n.length)break;(t[_+1&3]||t[_+2&3]||t[_+3&3])&&(l=t,w=_)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):t?(o?t[_]=o:delete t[_],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(l?l[w]=n:this._root=n),this):(this._root=o,this)}function $p(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Rp(){return this._root}function Ap(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Mp(e){var t=[],n,l=this._root,r,o,s,u,a;for(l&&t.push(new Ie(l,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(l=n.node,o=n.x0,s=n.y0,u=n.x1,a=n.y1)&&l.length){var f=(o+u)/2,c=(s+a)/2;(r=l[3])&&t.push(new Ie(r,f,c,u,a)),(r=l[2])&&t.push(new Ie(r,o,c,f,a)),(r=l[1])&&t.push(new Ie(r,f,s,u,c)),(r=l[0])&&t.push(new Ie(r,o,s,f,c))}return this}function Ep(e){var t=[],n=[],l;for(this._root&&t.push(new Ie(this._root,this._x0,this._y0,this._x1,this._y1));l=t.pop();){var r=l.node;if(r.length){var o,s=l.x0,u=l.y0,a=l.x1,f=l.y1,c=(s+a)/2,d=(u+f)/2;(o=r[0])&&t.push(new Ie(o,s,u,c,d)),(o=r[1])&&t.push(new Ie(o,c,u,a,d)),(o=r[2])&&t.push(new Ie(o,s,d,c,f)),(o=r[3])&&t.push(new Ie(o,c,d,a,f))}n.push(l)}for(;l=n.pop();)e(l.node,l.x0,l.y0,l.x1,l.y1);return this}function Fp(e){return e[0]}function Dp(e){return arguments.length?(this._x=e,this):this._x}function Ip(e){return e[1]}function Np(e){return arguments.length?(this._y=e,this):this._y}function Ja(e,t,n){var l=new Tr(t??Fp,n??Ip,NaN,NaN,NaN,NaN);return e==null?l:l.addAll(e)}function Tr(e,t,n,l,r,o){this._x=e,this._y=t,this._x0=n,this._y0=l,this._x1=r,this._y1=o,this._root=void 0}function ts(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Pe=Ja.prototype=Tr.prototype;Pe.copy=function(){var e=new Tr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,l;if(!t)return e;if(!t.length)return e._root=ts(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(l=t.source[r])&&(l.length?n.push({source:l,target:t.target[r]=new Array(4)}):t.target[r]=ts(l));return e};Pe.add=vp;Pe.addAll=bp;Pe.cover=wp;Pe.data=yp;Pe.extent=kp;Pe.find=Sp;Pe.remove=Cp;Pe.removeAll=$p;Pe.root=Rp;Pe.size=Ap;Pe.visit=Mp;Pe.visitAfter=Ep;Pe.x=Dp;Pe.y=Np;function et(e){return function(){return e}}function ns(e){return(e()-.5)*1e-6}function Pp(e){return e.x+e.vx}function Tp(e){return e.y+e.vy}function Op(e){var t,n,l,r=1,o=1;typeof e!="function"&&(e=et(e==null?1:+e));function s(){for(var f,c=t.length,d,g,p,m,v,_,w=0;w<o;++w)for(d=Ja(t,Pp,Tp).visitAfter(u),f=0;f<c;++f)g=t[f],v=n[g.index],_=v*v,p=g.x+g.vx,m=g.y+g.vy,d.visit(y);function y($,M,k,E,S){var R=$.data,C=$.r,F=v+C;if(R){if(R.index>g.index){var I=p-R.x-R.vx,D=m-R.y-R.vy,z=I*I+D*D;z<F*F&&(I===0&&(I=ns(l),z+=I*I),D===0&&(D=ns(l),z+=D*D),z=(F-(z=Math.sqrt(z)))/z*r,g.vx+=(I*=z)*(F=(C*=C)/(_+C)),g.vy+=(D*=z)*F,R.vx-=I*(F=1-F),R.vy-=D*F)}return}return M>p+F||E<p-F||k>m+F||S<m-F}}function u(f){if(f.data)return f.r=n[f.data.index];for(var c=f.r=0;c<4;++c)f[c]&&f[c].r>f.r&&(f.r=f[c].r)}function a(){if(t){var f,c=t.length,d;for(n=new Array(c),f=0;f<c;++f)d=t[f],n[d.index]=+e(d,f,t)}}return s.initialize=function(f,c){t=f,l=c,a()},s.iterations=function(f){return arguments.length?(o=+f,s):o},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:et(+f),a(),s):e},s}var Vp={value:()=>{}};function Za(){for(var e=0,t=arguments.length,n={},l;e<t;++e){if(!(l=arguments[e]+"")||l in n||/[\s.]/.test(l))throw new Error("illegal type: "+l);n[l]=[]}return new Kn(n)}function Kn(e){this._=e}function zp(e,t){return e.trim().split(/^|\s+/).map(function(n){var l="",r=n.indexOf(".");if(r>=0&&(l=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:l}})}Kn.prototype=Za.prototype={constructor:Kn,on:function(e,t){var n=this._,l=zp(e+"",n),r,o=-1,s=l.length;if(arguments.length<2){for(;++o<s;)if((r=(e=l[o]).type)&&(r=Hp(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=l[o]).type)n[r]=ls(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ls(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Kn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),l=0,r,o;l<r;++l)n[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],l=0,r=o.length;l<r;++l)o[l].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],r=0,o=l.length;r<o;++r)l[r].value.apply(t,n)}};function Hp(e,t){for(var n=0,l=e.length,r;n<l;++n)if((r=e[n]).name===t)return r.value}function ls(e,t,n){for(var l=0,r=e.length;l<r;++l)if(e[l].name===t){e[l]=Vp,e=e.slice(0,l).concat(e.slice(l+1));break}return n!=null&&e.push({name:t,value:n}),e}var nn=0,dn=0,sn=0,eu=1e3,ml,hn,_l=0,zt=0,Cl=0,An=typeof performance=="object"&&performance.now?performance:Date,tu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nu(){return zt||(tu(qp),zt=An.now()+Cl)}function qp(){zt=0}function mr(){this._call=this._time=this._next=null}mr.prototype=lu.prototype={constructor:mr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nu():+n)+(t==null?0:+t),!this._next&&hn!==this&&(hn?hn._next=this:ml=this,hn=this),this._call=e,this._time=n,_r()},stop:function(){this._call&&(this._call=null,this._time=1/0,_r())}};function lu(e,t,n){var l=new mr;return l.restart(e,t,n),l}function Lp(){nu(),++nn;for(var e=ml,t;e;)(t=zt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--nn}function rs(){zt=(_l=An.now())+Cl,nn=dn=0;try{Lp()}finally{nn=0,xp(),zt=0}}function jp(){var e=An.now(),t=e-_l;t>eu&&(Cl-=t,_l=e)}function xp(){for(var e,t=ml,n,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ml=n);hn=e,_r(l)}function _r(e){if(!nn){dn&&(dn=clearTimeout(dn));var t=e-zt;t>24?(e<1/0&&(dn=setTimeout(rs,e-An.now()-Cl)),sn&&(sn=clearInterval(sn))):(sn||(_l=An.now(),sn=setInterval(jp,eu)),nn=1,tu(rs))}}const Gp=1664525,Bp=1013904223,is=4294967296;function Up(){let e=1;return()=>(e=(Gp*e+Bp)%is)/is}var Wp=10,Xp=Math.PI*(3-Math.sqrt(5));function Yp(e){var t,n=1,l=.001,r=1-Math.pow(l,1/300),o=0,s=.6,u=new Map,a=lu(d),f=Za("tick","end"),c=Up();e==null&&(e=[]);function d(){g(),f.call("tick",t),n<l&&(a.stop(),f.call("end",t))}function g(v){var _,w=e.length,y;v===void 0&&(v=1);for(var $=0;$<v;++$)for(n+=(o-n)*r,u.forEach(function(M){M(n)}),_=0;_<w;++_)y=e[_],y.fx==null?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return t}function p(){for(var v=0,_=e.length,w;v<_;++v){if(w=e[v],w.index=v,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var y=Wp*Math.sqrt(.5+v),$=v*Xp;w.x=y*Math.cos($),w.y=y*Math.sin($)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function m(v){return v.initialize&&v.initialize(e,c),v}return p(),t={tick:g,restart:function(){return a.restart(d),t},stop:function(){return a.stop(),t},nodes:function(v){return arguments.length?(e=v,p(),u.forEach(m),t):e},alpha:function(v){return arguments.length?(n=+v,t):n},alphaMin:function(v){return arguments.length?(l=+v,t):l},alphaDecay:function(v){return arguments.length?(r=+v,t):+r},alphaTarget:function(v){return arguments.length?(o=+v,t):o},velocityDecay:function(v){return arguments.length?(s=1-v,t):1-s},randomSource:function(v){return arguments.length?(c=v,u.forEach(m),t):c},force:function(v,_){return arguments.length>1?(_==null?u.delete(v):u.set(v,m(_)),t):u.get(v)},find:function(v,_,w){var y=0,$=e.length,M,k,E,S,R;for(w==null?w=1/0:w*=w,y=0;y<$;++y)S=e[y],M=v-S.x,k=_-S.y,E=M*M+k*k,E<w&&(R=S,w=E);return R},on:function(v,_){return arguments.length>1?(f.on(v,_),t):f.on(v)}}}function Qp(e){var t=et(.1),n,l,r;typeof e!="function"&&(e=et(e==null?0:+e));function o(u){for(var a=0,f=n.length,c;a<f;++a)c=n[a],c.vx+=(r[a]-c.x)*l[a]*u}function s(){if(n){var u,a=n.length;for(l=new Array(a),r=new Array(a),u=0;u<a;++u)l[u]=isNaN(r[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return o.initialize=function(u){n=u,s()},o.strength=function(u){return arguments.length?(t=typeof u=="function"?u:et(+u),s(),o):t},o.x=function(u){return arguments.length?(e=typeof u=="function"?u:et(+u),s(),o):e},o}function Kp(e){var t=et(.1),n,l,r;typeof e!="function"&&(e=et(e==null?0:+e));function o(u){for(var a=0,f=n.length,c;a<f;++a)c=n[a],c.vy+=(r[a]-c.y)*l[a]*u}function s(){if(n){var u,a=n.length;for(l=new Array(a),r=new Array(a),u=0;u<a;++u)l[u]=isNaN(r[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return o.initialize=function(u){n=u,s()},o.strength=function(u){return arguments.length?(t=typeof u=="function"?u:et(+u),s(),o):t},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:et(+u),s(),o):e},o}const vl=Ae([]),os=Ae({labelNames:["txt2.txt","pdf2.txt"],labels:[0,3],projection:[[.1443715864989249,.00463214192040876,.11292804485781914],[-.05626482326843836,-.013694651798983428,.01709368313171561]]});function ss(e,t,n){const l=e.slice();return l[20]=t[n],l[22]=n,l}function as(e){let t,n,l,r,o,s=e[20].file+"",u,a,f=nr(e[20].size)+"",c,d,g,p,m,v,_,w;return{c(){t=j("g"),n=j("circle"),o=j("text"),u=L(s),a=j("tspan"),c=L(f),h(n,"r",l=e[3](e[20].size)),h(n,"fill","var(--primary"),h(n,"stroke","var(--white)"),h(n,"stroke-width","1"),h(n,"fill-opacity",.95),h(n,"class","svelte-h2ab3o"),h(a,"x","0"),h(a,"y","15"),h(o,"class","bubble-file-text svelte-h2ab3o"),h(o,"text-anchor","middle"),h(o,"opacity",d=e[20].size>e[4]?1:0),h(t,"class",p="file-circle-g "+(e[20].size>e[4]?"large":"")+" svelte-h2ab3o"),h(t,"style",m=e[5](e[20].x,e[20].y)),h(t,"role","img")},m(y,$){T(y,t,$),b(t,n),b(t,o),b(o,u),b(o,a),b(a,c),v=!0,_||(w=[B(t,"mouseover",e[6]),B(t,"mouseout",e[7]),B(t,"focus",e[6]),B(t,"blur",e[7])],_=!0)},p(y,$){(!v||$&12&&l!==(l=y[3](y[20].size)))&&h(n,"r",l),(!v||$&4)&&s!==(s=y[20].file+"")&&W(u,s),(!v||$&4)&&f!==(f=nr(y[20].size)+"")&&W(c,f),(!v||$&20&&d!==(d=y[20].size>y[4]?1:0))&&h(o,"opacity",d),(!v||$&20&&p!==(p="file-circle-g "+(y[20].size>y[4]?"large":"")+" svelte-h2ab3o"))&&h(t,"class",p),(!v||$&4&&m!==(m=y[5](y[20].x,y[20].y)))&&h(t,"style",m)},i(y){v||(y&&ke(()=>{v&&(r||(r=Ze(n,Pn,{duration:1e3},!0)),r.run(1))}),y&&ke(()=>{v&&(g||(g=Ze(o,Pn,{duration:1e3},!0)),g.run(1))}),v=!0)},o(y){y&&(r||(r=Ze(n,Pn,{duration:1e3},!1)),r.run(0)),y&&(g||(g=Ze(o,Pn,{duration:1e3},!1)),g.run(0)),v=!1},d(y){y&&N(t),y&&r&&r.end(),y&&g&&g.end(),_=!1,ge(w)}}}function Jp(e){let t,n,l,r,o=e[2],s=[];for(let a=0;a<o.length;a+=1)s[a]=as(ss(e,o,a));const u=a=>H(s[a],1,1,()=>{s[a]=null});return{c(){t=A("div"),n=j("svg");for(let a=0;a<s.length;a+=1)s[a].c();h(n,"width",e[0]),h(n,"height",e[1]),h(n,"class","svelte-h2ab3o"),h(t,"id","network-chart"),ke(()=>e[15].call(t))},m(a,f){T(a,t,f),b(t,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null);l=ot(t,e[15].bind(t)),r=!0},p(a,[f]){if(f&252){o=a[2];let c;for(c=0;c<o.length;c+=1){const d=ss(a,o,c);s[c]?(s[c].p(d,f),V(s[c],1)):(s[c]=as(d),s[c].c(),V(s[c],1),s[c].m(n,null))}for(ce(),c=o.length;c<s.length;c+=1)u(c);de()}(!r||f&1)&&h(n,"width",a[0]),(!r||f&2)&&h(n,"height",a[1])},i(a){if(!r){for(let f=0;f<o.length;f+=1)V(s[f]);r=!0}},o(a){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)H(s[f]);r=!1},d(a){a&&N(t),ue(s,a),l()}}}function Zp(e,t,n){let l,r,o,s,u,a,f,c;le(e,vl,k=>n(14,c=k));let d=600,g=350,p=!0,m=!1;const v=(k,E)=>`transform: translate(${k}px, ${E}px)`,_=[-4,4],w=[-1,1];function y(){n(8,p=!0),n(9,m=!0);const k=dt(this);Fl(".file-circle-g").select("text").style("opacity",0),k.raise(),k.select("circle").attr("fill","var(--red)"),k.select("text").style("opacity",1)}const $=()=>{const k=Fl(".file-circle-g");k.select("circle").attr("fill","var(--yellow)"),k.select("text").style("opacity",0),n(9,m=!1),setTimeout(()=>{n(8,p=!1)},1e3)};function M(){d=this.offsetWidth,g=this.offsetHeight,n(0,d),n(1,g)}return e.$$.update=()=>{e.$$.dirty&16387&&n(2,l=c.map(k=>({...k,x:d/2,y:g/2,tickCount:0}))),e.$$.dirty&16384&&console.log(c.map(k=>k.size).sort((k,E)=>k-E)),e.$$.dirty&1&&n(13,r=Qp().x(d/2)),e.$$.dirty&2&&n(12,o=Kp().y(g/2)),e.$$.dirty&16384&&n(3,a=Ge().domain(gn(c,k=>k.size)).range([12,60])),e.$$.dirty&8&&n(10,s=Op().radius(k=>a(k.size)+1).iterations(3)),e.$$.dirty&16384&&n(4,u=Kd(c.map(k=>k.size).sort((k,E)=>k-E),.85)),e.$$.dirty&1&&Ge().domain(_).range([5,d]),e.$$.dirty&2&&Ge().domain(w).range([g,5]),e.$$.dirty&4&&n(11,f=Yp().nodes(l).on("tick",()=>{n(2,l=[...l])})),e.$$.dirty&15360&&(f.force("x",r),f.force("y",o),f.force("collide",s),f.alpha(.02),f.restart()),e.$$.dirty&19468&&(a.domain(gn(c,k=>k.size)),l.forEach(k=>k.radius=a(k.size)),f.nodes(l),s.radius(k=>k.radius+.5)),e.$$.dirty&768&&p===!1&&(m||Fl(".large").select("text").style("opacity",1))},[d,g,l,a,u,v,y,$,p,m,s,f,o,r,c,M]}class em extends ie{constructor(t){super(),oe(this,t,Zp,Jp,re,{})}}/**
 * table-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kt(e,t){return typeof e=="function"?e(t):e}function Ue(e,t){return n=>{t.setState(l=>({...l,[e]:kt(n,l[e])}))}}function bl(e){return e instanceof Function}function tm(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function nm(e,t){const n=[],l=r=>{r.forEach(o=>{n.push(o);const s=t(o);s!=null&&s.length&&l(s)})};return l(e),n}function Q(e,t,n){let l=[],r;return()=>{let o;n.key&&n.debug&&(o=Date.now());const s=e();if(!(s.length!==l.length||s.some((f,c)=>l[c]!==f)))return r;l=s;let a;if(n.key&&n.debug&&(a=Date.now()),r=t(...s),n==null||n.onChange==null||n.onChange(r),n.key&&n.debug&&n!=null&&n.debug()){const f=Math.round((Date.now()-o)*100)/100,c=Math.round((Date.now()-a)*100)/100,d=c/16,g=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%c⏱ ${g(c,5)} /${g(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,n==null?void 0:n.key)}return r}}function lm(e,t,n,l){var r,o;const u={...e._getDefaultColumnDef(),...t},a=u.accessorKey;let f=(r=(o=u.id)!=null?o:a?a.replace(".","_"):void 0)!=null?r:typeof u.header=="string"?u.header:void 0,c;if(u.accessorFn?c=u.accessorFn:a&&(a.includes(".")?c=g=>{let p=g;for(const v of a.split(".")){var m;p=(m=p)==null?void 0:m[v]}return p}:c=g=>g[u.accessorKey]),!f)throw new Error;let d={id:`${String(f)}`,accessorFn:c,parent:l,depth:n,columnDef:u,columns:[],getFlatColumns:Q(()=>[!0],()=>{var g;return[d,...(g=d.columns)==null?void 0:g.flatMap(p=>p.getFlatColumns())]},{key:"column.getFlatColumns",debug:()=>{var g;return(g=e.options.debugAll)!=null?g:e.options.debugColumns}}),getLeafColumns:Q(()=>[e._getOrderColumnsFn()],g=>{var p;if((p=d.columns)!=null&&p.length){let m=d.columns.flatMap(v=>v.getLeafColumns());return g(m)}return[d]},{key:"column.getLeafColumns",debug:()=>{var g;return(g=e.options.debugAll)!=null?g:e.options.debugColumns}})};return d=e._features.reduce((g,p)=>Object.assign(g,p.createColumn==null?void 0:p.createColumn(d,e)),d),d}function us(e,t,n){var l;let o={id:(l=n.id)!=null?l:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],u=a=>{a.subHeaders&&a.subHeaders.length&&a.subHeaders.map(u),s.push(a)};return u(o),s},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach(s=>{Object.assign(o,s.createHeader==null?void 0:s.createHeader(o,e))}),o}const rm={createTable:e=>({getHeaderGroups:Q(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l,r)=>{var o,s;const u=(o=l==null?void 0:l.map(d=>n.find(g=>g.id===d)).filter(Boolean))!=null?o:[],a=(s=r==null?void 0:r.map(d=>n.find(g=>g.id===d)).filter(Boolean))!=null?s:[],f=n.filter(d=>!(l!=null&&l.includes(d.id))&&!(r!=null&&r.includes(d.id)));return jn(t,[...u,...f,...a],e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterHeaderGroups:Q(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l,r)=>(n=n.filter(o=>!(l!=null&&l.includes(o.id))&&!(r!=null&&r.includes(o.id))),jn(t,n,e,"center")),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftHeaderGroups:Q(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,l)=>{var r;const o=(r=l==null?void 0:l.map(s=>n.find(u=>u.id===s)).filter(Boolean))!=null?r:[];return jn(t,o,e,"left")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightHeaderGroups:Q(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,l)=>{var r;const o=(r=l==null?void 0:l.map(s=>n.find(u=>u.id===s)).filter(Boolean))!=null?r:[];return jn(t,o,e,"right")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFooterGroups:Q(()=>[e.getHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFooterGroups:Q(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFooterGroups:Q(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFooterGroups:Q(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFlatHeaders:Q(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFlatHeaders:Q(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFlatHeaders:Q(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFlatHeaders:Q(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterLeafHeaders:Q(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftLeafHeaders:Q(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightLeafHeaders:Q(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeafHeaders:Q(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,l)=>{var r,o,s,u,a,f;return[...(r=(o=t[0])==null?void 0:o.headers)!=null?r:[],...(s=(u=n[0])==null?void 0:u.headers)!=null?s:[],...(a=(f=l[0])==null?void 0:f.headers)!=null?a:[]].map(c=>c.getLeafHeaders()).flat()},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}})})};function jn(e,t,n,l){var r,o;let s=0;const u=function(g,p){p===void 0&&(p=1),s=Math.max(s,p),g.filter(m=>m.getIsVisible()).forEach(m=>{var v;(v=m.columns)!=null&&v.length&&u(m.columns,p+1)},0)};u(e);let a=[];const f=(g,p)=>{const m={depth:p,id:[l,`${p}`].filter(Boolean).join("_"),headers:[]},v=[];g.forEach(_=>{const w=[...v].reverse()[0],y=_.column.depth===m.depth;let $,M=!1;if(y&&_.column.parent?$=_.column.parent:($=_.column,M=!0),w&&(w==null?void 0:w.column)===$)w.subHeaders.push(_);else{const k=us(n,$,{id:[l,p,$.id,_==null?void 0:_.id].filter(Boolean).join("_"),isPlaceholder:M,placeholderId:M?`${v.filter(E=>E.column===$).length}`:void 0,depth:p,index:v.length});k.subHeaders.push(_),v.push(k)}m.headers.push(_),_.headerGroup=m}),a.push(m),p>0&&f(v,p-1)},c=t.map((g,p)=>us(n,g,{depth:s,index:p}));f(c,s-1),a.reverse();const d=g=>g.filter(m=>m.column.getIsVisible()).map(m=>{let v=0,_=0,w=[0];m.subHeaders&&m.subHeaders.length?(w=[],d(m.subHeaders).forEach($=>{let{colSpan:M,rowSpan:k}=$;v+=M,w.push(k)})):v=1;const y=Math.min(...w);return _=_+y,m.colSpan=v,m.rowSpan=_,{colSpan:v,rowSpan:_}});return d((r=(o=a[0])==null?void 0:o.headers)!=null?r:[]),a}const xn={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},xl=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),im={getDefaultColumnDef:()=>xn,getInitialState:e=>({columnSizing:{},columnSizingInfo:xl(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",onColumnSizingChange:Ue("columnSizing",e),onColumnSizingInfoChange:Ue("columnSizingInfo",e)}),createColumn:(e,t)=>({getSize:()=>{var n,l,r;const o=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:xn.minSize,(l=o??e.columnDef.size)!=null?l:xn.size),(r=e.columnDef.maxSize)!=null?r:xn.maxSize)},getStart:n=>{const l=n?n==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns(),r=l.findIndex(o=>o.id===e.id);if(r>0){const o=l[r-1];return o.getStart(n)+o.getSize()}return 0},resetSize:()=>{t.setColumnSizing(n=>{let{[e.id]:l,...r}=n;return r})},getCanResize:()=>{var n,l;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((l=t.options.enableColumnResizing)!=null?l:!0)},getIsResizing:()=>t.getState().columnSizingInfo.isResizingColumn===e.id}),createHeader:(e,t)=>({getSize:()=>{let n=0;const l=r=>{if(r.subHeaders.length)r.subHeaders.forEach(l);else{var o;n+=(o=r.column.getSize())!=null?o:0}};return l(e),n},getStart:()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},getResizeHandler:()=>{const n=t.getColumn(e.column.id),l=n==null?void 0:n.getCanResize();return r=>{if(!n||!l||(r.persist==null||r.persist(),Gl(r)&&r.touches&&r.touches.length>1))return;const o=e.getSize(),s=e?e.getLeafHeaders().map(v=>[v.column.id,v.column.getSize()]):[[n.id,n.getSize()]],u=Gl(r)?Math.round(r.touches[0].clientX):r.clientX,a={},f=(v,_)=>{typeof _=="number"&&(t.setColumnSizingInfo(w=>{var y,$;const M=_-((y=w==null?void 0:w.startOffset)!=null?y:0),k=Math.max(M/(($=w==null?void 0:w.startSize)!=null?$:0),-.999999);return w.columnSizingStart.forEach(E=>{let[S,R]=E;a[S]=Math.round(Math.max(R+R*k,0)*100)/100}),{...w,deltaOffset:M,deltaPercentage:k}}),(t.options.columnResizeMode==="onChange"||v==="end")&&t.setColumnSizing(w=>({...w,...a})))},c=v=>f("move",v),d=v=>{f("end",v),t.setColumnSizingInfo(_=>({..._,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g={moveHandler:v=>c(v.clientX),upHandler:v=>{document.removeEventListener("mousemove",g.moveHandler),document.removeEventListener("mouseup",g.upHandler),d(v.clientX)}},p={moveHandler:v=>(v.cancelable&&(v.preventDefault(),v.stopPropagation()),c(v.touches[0].clientX),!1),upHandler:v=>{var _;document.removeEventListener("touchmove",p.moveHandler),document.removeEventListener("touchend",p.upHandler),v.cancelable&&(v.preventDefault(),v.stopPropagation()),d((_=v.touches[0])==null?void 0:_.clientX)}},m=om()?{passive:!1}:!1;Gl(r)?(document.addEventListener("touchmove",p.moveHandler,m),document.addEventListener("touchend",p.upHandler,m)):(document.addEventListener("mousemove",g.moveHandler,m),document.addEventListener("mouseup",g.upHandler,m)),t.setColumnSizingInfo(v=>({...v,startOffset:u,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:n.id}))}}}),createTable:e=>({setColumnSizing:t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),setColumnSizingInfo:t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),resetColumnSizing:t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},resetHeaderSizeInfo:t=>{var n;e.setColumnSizingInfo(t?xl():(n=e.initialState.columnSizingInfo)!=null?n:xl())},getTotalSize:()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((l,r)=>l+r.getSize(),0))!=null?t:0},getLeftTotalSize:()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((l,r)=>l+r.getSize(),0))!=null?t:0},getCenterTotalSize:()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((l,r)=>l+r.getSize(),0))!=null?t:0},getRightTotalSize:()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((l,r)=>l+r.getSize(),0))!=null?t:0}})};let Gn=null;function om(){if(typeof Gn=="boolean")return Gn;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return Gn=e,Gn}function Gl(e){return e.type==="touchstart"}const sm={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Ue("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;return{_autoResetExpanded:()=>{var l,r;if(!t){e._queue(()=>{t=!0});return}if((l=(r=e.options.autoResetAll)!=null?r:e.options.autoResetExpanded)!=null?l:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},setExpanded:l=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(l),toggleAllRowsExpanded:l=>{l??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},resetExpanded:l=>{var r,o;e.setExpanded(l?{}:(r=(o=e.initialState)==null?void 0:o.expanded)!=null?r:{})},getCanSomeRowsExpand:()=>e.getPrePaginationRowModel().flatRows.some(l=>l.getCanExpand()),getToggleAllRowsExpandedHandler:()=>l=>{l.persist==null||l.persist(),e.toggleAllRowsExpanded()},getIsSomeRowsExpanded:()=>{const l=e.getState().expanded;return l===!0||Object.values(l).some(Boolean)},getIsAllRowsExpanded:()=>{const l=e.getState().expanded;return typeof l=="boolean"?l===!0:!(!Object.keys(l).length||e.getRowModel().flatRows.some(r=>!r.getIsExpanded()))},getExpandedDepth:()=>{let l=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(o=>{const s=o.split(".");l=Math.max(l,s.length)}),l},getPreExpandedRowModel:()=>e.getSortedRowModel(),getExpandedRowModel:()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())}},createRow:(e,t)=>({toggleExpanded:n=>{t.setExpanded(l=>{var r;const o=l===!0?!0:!!(l!=null&&l[e.id]);let s={};if(l===!0?Object.keys(t.getRowModel().rowsById).forEach(u=>{s[u]=!0}):s=l,n=(r=n)!=null?r:!o,!o&&n)return{...s,[e.id]:!0};if(o&&!n){const{[e.id]:u,...a}=s;return a}return l})},getIsExpanded:()=>{var n;const l=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:l===!0||l!=null&&l[e.id])},getCanExpand:()=>{var n,l,r;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((l=t.options.enableExpanding)!=null?l:!0)&&!!((r=e.subRows)!=null&&r.length)},getToggleExpandedHandler:()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}})},ru=(e,t,n)=>{var l,r,o;const s=n.toLowerCase();return!!(!((l=e.getValue(t))==null||(r=l.toString())==null||(o=r.toLowerCase())==null)&&o.includes(s))};ru.autoRemove=e=>Ye(e);const iu=(e,t,n)=>{var l,r;return!!(!((l=e.getValue(t))==null||(r=l.toString())==null)&&r.includes(n))};iu.autoRemove=e=>Ye(e);const ou=(e,t,n)=>{var l,r;return((l=e.getValue(t))==null||(r=l.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};ou.autoRemove=e=>Ye(e);const su=(e,t,n)=>{var l;return(l=e.getValue(t))==null?void 0:l.includes(n)};su.autoRemove=e=>Ye(e)||!(e!=null&&e.length);const au=(e,t,n)=>!n.some(l=>{var r;return!((r=e.getValue(t))!=null&&r.includes(l))});au.autoRemove=e=>Ye(e)||!(e!=null&&e.length);const uu=(e,t,n)=>n.some(l=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(l)});uu.autoRemove=e=>Ye(e)||!(e!=null&&e.length);const fu=(e,t,n)=>e.getValue(t)===n;fu.autoRemove=e=>Ye(e);const cu=(e,t,n)=>e.getValue(t)==n;cu.autoRemove=e=>Ye(e);const Or=(e,t,n)=>{let[l,r]=n;const o=e.getValue(t);return o>=l&&o<=r};Or.resolveFilterValue=e=>{let[t,n]=e,l=typeof t!="number"?parseFloat(t):t,r=typeof n!="number"?parseFloat(n):n,o=t===null||Number.isNaN(l)?-1/0:l,s=n===null||Number.isNaN(r)?1/0:r;if(o>s){const u=o;o=s,s=u}return[o,s]};Or.autoRemove=e=>Ye(e)||Ye(e[0])&&Ye(e[1]);const at={includesString:ru,includesStringSensitive:iu,equalsString:ou,arrIncludes:su,arrIncludesAll:au,arrIncludesSome:uu,equals:fu,weakEquals:cu,inNumberRange:Or};function Ye(e){return e==null||e===""}const am={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],globalFilter:void 0,...e}),getDefaultOptions:e=>({onColumnFiltersChange:Ue("columnFilters",e),onGlobalFilterChange:Ue("globalFilter",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100,globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n,l;const r=(n=e.getCoreRowModel().flatRows[0])==null||(l=n._getAllCellsByColumnId()[t.id])==null?void 0:l.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>({getAutoFilterFn:()=>{const n=t.getCoreRowModel().flatRows[0],l=n==null?void 0:n.getValue(e.id);return typeof l=="string"?at.includesString:typeof l=="number"?at.inNumberRange:typeof l=="boolean"||l!==null&&typeof l=="object"?at.equals:Array.isArray(l)?at.arrIncludes:at.weakEquals},getFilterFn:()=>{var n,l;return bl(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(l=t.options.filterFns)==null?void 0:l[e.columnDef.filterFn])!=null?n:at[e.columnDef.filterFn]},getCanFilter:()=>{var n,l,r;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((l=t.options.enableColumnFilters)!=null?l:!0)&&((r=t.options.enableFilters)!=null?r:!0)&&!!e.accessorFn},getCanGlobalFilter:()=>{var n,l,r,o;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((l=t.options.enableGlobalFilter)!=null?l:!0)&&((r=t.options.enableFilters)!=null?r:!0)&&((o=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?o:!0)&&!!e.accessorFn},getIsFiltered:()=>e.getFilterIndex()>-1,getFilterValue:()=>{var n,l;return(n=t.getState().columnFilters)==null||(l=n.find(r=>r.id===e.id))==null?void 0:l.value},getFilterIndex:()=>{var n,l;return(n=(l=t.getState().columnFilters)==null?void 0:l.findIndex(r=>r.id===e.id))!=null?n:-1},setFilterValue:n=>{t.setColumnFilters(l=>{const r=e.getFilterFn(),o=l==null?void 0:l.find(c=>c.id===e.id),s=kt(n,o?o.value:void 0);if(fs(r,s,e)){var u;return(u=l==null?void 0:l.filter(c=>c.id!==e.id))!=null?u:[]}const a={id:e.id,value:s};if(o){var f;return(f=l==null?void 0:l.map(c=>c.id===e.id?a:c))!=null?f:[]}return l!=null&&l.length?[...l,a]:[a]})},_getFacetedRowModel:t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),getFacetedRowModel:()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),_getFacetedUniqueValues:t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),getFacetedUniqueValues:()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,_getFacetedMinMaxValues:t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),getFacetedMinMaxValues:()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}),createRow:(e,t)=>({columnFilters:{},columnFiltersMeta:{}}),createTable:e=>({getGlobalAutoFilterFn:()=>at.includesString,getGlobalFilterFn:()=>{var t,n;const{globalFilterFn:l}=e.options;return bl(l)?l:l==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[l])!=null?t:at[l]},setColumnFilters:t=>{const n=e.getAllLeafColumns(),l=r=>{var o;return(o=kt(t,r))==null?void 0:o.filter(s=>{const u=n.find(a=>a.id===s.id);if(u){const a=u.getFilterFn();if(fs(a,s.value,u))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(l)},setGlobalFilter:t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},resetGlobalFilter:t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)},resetColumnFilters:t=>{var n,l;e.setColumnFilters(t?[]:(n=(l=e.initialState)==null?void 0:l.columnFilters)!=null?n:[])},getPreFilteredRowModel:()=>e.getCoreRowModel(),getFilteredRowModel:()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel()),_getGlobalFacetedRowModel:e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),getGlobalFacetedRowModel:()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),_getGlobalFacetedUniqueValues:e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),getGlobalFacetedUniqueValues:()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,_getGlobalFacetedMinMaxValues:e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),getGlobalFacetedMinMaxValues:()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}})};function fs(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const um=(e,t,n)=>n.reduce((l,r)=>{const o=r.getValue(e);return l+(typeof o=="number"?o:0)},0),fm=(e,t,n)=>{let l;return n.forEach(r=>{const o=r.getValue(e);o!=null&&(l>o||l===void 0&&o>=o)&&(l=o)}),l},cm=(e,t,n)=>{let l;return n.forEach(r=>{const o=r.getValue(e);o!=null&&(l<o||l===void 0&&o>=o)&&(l=o)}),l},dm=(e,t,n)=>{let l,r;return n.forEach(o=>{const s=o.getValue(e);s!=null&&(l===void 0?s>=s&&(l=r=s):(l>s&&(l=s),r<s&&(r=s)))}),[l,r]},hm=(e,t)=>{let n=0,l=0;if(t.forEach(r=>{let o=r.getValue(e);o!=null&&(o=+o)>=o&&(++n,l+=o)}),n)return l/n},gm=(e,t)=>{if(!t.length)return;const n=t.map(o=>o.getValue(e));if(!tm(n))return;if(n.length===1)return n[0];const l=Math.floor(n.length/2),r=n.sort((o,s)=>o-s);return n.length%2!==0?r[l]:(r[l-1]+r[l])/2},pm=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),mm=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,_m=(e,t)=>t.length,Bl={sum:um,min:fm,max:cm,extent:dm,mean:hm,median:gm,unique:pm,uniqueCount:mm,count:_m},vm={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Ue("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>({toggleGrouping:()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(l=>l!==e.id):[...n??[],e.id])},getCanGroup:()=>{var n,l,r,o;return(n=(l=(r=(o=e.columnDef.enableGrouping)!=null?o:!0)!=null?r:t.options.enableGrouping)!=null?l:!0)!=null?n:!!e.accessorFn},getIsGrouped:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},getGroupedIndex:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},getToggleGroupingHandler:()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},getAutoAggregationFn:()=>{const n=t.getCoreRowModel().flatRows[0],l=n==null?void 0:n.getValue(e.id);if(typeof l=="number")return Bl.sum;if(Object.prototype.toString.call(l)==="[object Date]")return Bl.extent},getAggregationFn:()=>{var n,l;if(!e)throw new Error;return bl(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(l=t.options.aggregationFns)==null?void 0:l[e.columnDef.aggregationFn])!=null?n:Bl[e.columnDef.aggregationFn]}}),createTable:e=>({setGrouping:t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),resetGrouping:t=>{var n,l;e.setGrouping(t?[]:(n=(l=e.initialState)==null?void 0:l.grouping)!=null?n:[])},getPreGroupedRowModel:()=>e.getFilteredRowModel(),getGroupedRowModel:()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())}),createRow:(e,t)=>({getIsGrouped:()=>!!e.groupingColumnId,getGroupingValue:n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const l=t.getColumn(n);return l!=null&&l.columnDef.getGroupingValue?(e._groupingValuesCache[n]=l.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},_groupingValuesCache:{}}),createCell:(e,t,n,l)=>({getIsGrouped:()=>t.getIsGrouped()&&t.id===n.groupingColumnId,getIsPlaceholder:()=>!e.getIsGrouped()&&t.getIsGrouped(),getIsAggregated:()=>{var r;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((r=n.subRows)!=null&&r.length)}})};function bm(e,t,n){if(!(t!=null&&t.length)||!n)return e;const l=e.filter(o=>!t.includes(o.id));return n==="remove"?l:[...t.map(o=>e.find(s=>s.id===o)).filter(Boolean),...l]}const wm={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Ue("columnOrder",e)}),createTable:e=>({setColumnOrder:t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),resetColumnOrder:t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},_getOrderColumnsFn:Q(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,l)=>r=>{let o=[];if(!(t!=null&&t.length))o=r;else{const s=[...t],u=[...r];for(;u.length&&s.length;){const a=s.shift(),f=u.findIndex(c=>c.id===a);f>-1&&o.push(u.splice(f,1)[0])}o=[...o,...u]}return bm(o,n,l)},{key:!1})})},vr=0,br=10,Ul=()=>({pageIndex:vr,pageSize:br}),ym={getInitialState:e=>({...e,pagination:{...Ul(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:Ue("pagination",e)}),createTable:e=>{let t=!1,n=!1;return{_autoResetPageIndex:()=>{var l,r;if(!t){e._queue(()=>{t=!0});return}if((l=(r=e.options.autoResetAll)!=null?r:e.options.autoResetPageIndex)!=null?l:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},setPagination:l=>{const r=o=>kt(l,o);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(r)},resetPagination:l=>{var r;e.setPagination(l?Ul():(r=e.initialState.pagination)!=null?r:Ul())},setPageIndex:l=>{e.setPagination(r=>{let o=kt(l,r.pageIndex);const s=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,s)),{...r,pageIndex:o}})},resetPageIndex:l=>{var r,o,s;e.setPageIndex(l?vr:(r=(o=e.initialState)==null||(s=o.pagination)==null?void 0:s.pageIndex)!=null?r:vr)},resetPageSize:l=>{var r,o,s;e.setPageSize(l?br:(r=(o=e.initialState)==null||(s=o.pagination)==null?void 0:s.pageSize)!=null?r:br)},setPageSize:l=>{e.setPagination(r=>{const o=Math.max(1,kt(l,r.pageSize)),s=r.pageSize*r.pageIndex,u=Math.floor(s/o);return{...r,pageIndex:u,pageSize:o}})},setPageCount:l=>e.setPagination(r=>{var o;let s=kt(l,(o=e.options.pageCount)!=null?o:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...r,pageCount:s}}),getPageOptions:Q(()=>[e.getPageCount()],l=>{let r=[];return l&&l>0&&(r=[...new Array(l)].fill(null).map((o,s)=>s)),r},{key:!1,debug:()=>{var l;return(l=e.options.debugAll)!=null?l:e.options.debugTable}}),getCanPreviousPage:()=>e.getState().pagination.pageIndex>0,getCanNextPage:()=>{const{pageIndex:l}=e.getState().pagination,r=e.getPageCount();return r===-1?!0:r===0?!1:l<r-1},previousPage:()=>e.setPageIndex(l=>l-1),nextPage:()=>e.setPageIndex(l=>l+1),getPrePaginationRowModel:()=>e.getExpandedRowModel(),getPaginationRowModel:()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),getPageCount:()=>{var l;return(l=e.options.pageCount)!=null?l:Math.ceil(e.getPrePaginationRowModel().rows.length/e.getState().pagination.pageSize)}}}},Wl=()=>({left:[],right:[]}),km={getInitialState:e=>({columnPinning:Wl(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Ue("columnPinning",e)}),createColumn:(e,t)=>({pin:n=>{const l=e.getLeafColumns().map(r=>r.id).filter(Boolean);t.setColumnPinning(r=>{var o,s;if(n==="right"){var u,a;return{left:((u=r==null?void 0:r.left)!=null?u:[]).filter(d=>!(l!=null&&l.includes(d))),right:[...((a=r==null?void 0:r.right)!=null?a:[]).filter(d=>!(l!=null&&l.includes(d))),...l]}}if(n==="left"){var f,c;return{left:[...((f=r==null?void 0:r.left)!=null?f:[]).filter(d=>!(l!=null&&l.includes(d))),...l],right:((c=r==null?void 0:r.right)!=null?c:[]).filter(d=>!(l!=null&&l.includes(d)))}}return{left:((o=r==null?void 0:r.left)!=null?o:[]).filter(d=>!(l!=null&&l.includes(d))),right:((s=r==null?void 0:r.right)!=null?s:[]).filter(d=>!(l!=null&&l.includes(d)))}})},getCanPin:()=>e.getLeafColumns().some(l=>{var r,o;return((r=l.columnDef.enablePinning)!=null?r:!0)&&((o=t.options.enablePinning)!=null?o:!0)}),getIsPinned:()=>{const n=e.getLeafColumns().map(u=>u.id),{left:l,right:r}=t.getState().columnPinning,o=n.some(u=>l==null?void 0:l.includes(u)),s=n.some(u=>r==null?void 0:r.includes(u));return o?"left":s?"right":!1},getPinnedIndex:()=>{var n,l,r;const o=e.getIsPinned();return o?(n=(l=t.getState().columnPinning)==null||(r=l[o])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}}),createRow:(e,t)=>({getCenterVisibleCells:Q(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,l,r)=>{const o=[...l??[],...r??[]];return n.filter(s=>!o.includes(s.column.id))},{key:"row.getCenterVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getLeftVisibleCells:Q(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,,],(n,l)=>(l??[]).map(o=>n.find(s=>s.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),{key:"row.getLeftVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getRightVisibleCells:Q(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,l)=>(l??[]).map(o=>n.find(s=>s.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),{key:"row.getRightVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>({setColumnPinning:t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),resetColumnPinning:t=>{var n,l;return e.setColumnPinning(t?Wl():(n=(l=e.initialState)==null?void 0:l.columnPinning)!=null?n:Wl())},getIsSomeColumnsPinned:t=>{var n;const l=e.getState().columnPinning;if(!t){var r,o;return!!((r=l.left)!=null&&r.length||(o=l.right)!=null&&o.length)}return!!((n=l[t])!=null&&n.length)},getLeftLeafColumns:Q(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(l=>t.find(r=>r.id===l)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getRightLeafColumns:Q(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(l=>t.find(r=>r.id===l)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getCenterLeafColumns:Q(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l)=>{const r=[...n??[],...l??[]];return t.filter(o=>!r.includes(o.id))},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}})})},Sm={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Ue("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>({setRowSelection:t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),resetRowSelection:t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},toggleAllRowsSelected:t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const l={...n},r=e.getPreGroupedRowModel().flatRows;return t?r.forEach(o=>{o.getCanSelect()&&(l[o.id]=!0)}):r.forEach(o=>{delete l[o.id]}),l})},toggleAllPageRowsSelected:t=>e.setRowSelection(n=>{const l=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),r={...n};return e.getRowModel().rows.forEach(o=>{wr(r,o.id,l,e)}),r}),getPreSelectedRowModel:()=>e.getCoreRowModel(),getSelectedRowModel:Q(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Xl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getFilteredSelectedRowModel:Q(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Xl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getFilteredSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getGroupedSelectedRowModel:Q(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Xl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getGroupedSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getIsAllRowsSelected:()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let l=!!(t.length&&Object.keys(n).length);return l&&t.some(r=>r.getCanSelect()&&!n[r.id])&&(l=!1),l},getIsAllPageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows.filter(r=>r.getCanSelect()),{rowSelection:n}=e.getState();let l=!!t.length;return l&&t.some(r=>!n[r.id])&&(l=!1),l},getIsSomeRowsSelected:()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},getIsSomePageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},getToggleAllRowsSelectedHandler:()=>t=>{e.toggleAllRowsSelected(t.target.checked)},getToggleAllPageRowsSelectedHandler:()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}}),createRow:(e,t)=>({toggleSelected:n=>{const l=e.getIsSelected();t.setRowSelection(r=>{if(n=typeof n<"u"?n:!l,l===n)return r;const o={...r};return wr(o,e.id,n,t),o})},getIsSelected:()=>{const{rowSelection:n}=t.getState();return Vr(e,n)},getIsSomeSelected:()=>{const{rowSelection:n}=t.getState();return cs(e,n)==="some"},getIsAllSubRowsSelected:()=>{const{rowSelection:n}=t.getState();return cs(e,n)==="all"},getCanSelect:()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},getCanSelectSubRows:()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},getCanMultiSelect:()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},getToggleSelectedHandler:()=>{const n=e.getCanSelect();return l=>{var r;n&&e.toggleSelected((r=l.target)==null?void 0:r.checked)}}})},wr=(e,t,n,l)=>{var r;const o=l.getRow(t);n?(o.getCanMultiSelect()||Object.keys(e).forEach(s=>delete e[s]),o.getCanSelect()&&(e[t]=!0)):delete e[t],(r=o.subRows)!=null&&r.length&&o.getCanSelectSubRows()&&o.subRows.forEach(s=>wr(e,s.id,n,l))};function Xl(e,t){const n=e.getState().rowSelection,l=[],r={},o=function(s,u){return s.map(a=>{var f;const c=Vr(a,n);if(c&&(l.push(a),r[a.id]=a),(f=a.subRows)!=null&&f.length&&(a={...a,subRows:o(a.subRows)}),c)return a}).filter(Boolean)};return{rows:o(t.rows),flatRows:l,rowsById:r}}function Vr(e,t){var n;return(n=t[e.id])!=null?n:!1}function cs(e,t,n){if(e.subRows&&e.subRows.length){let l=!0,r=!1;return e.subRows.forEach(o=>{r&&!l||(Vr(o,t)?r=!0:l=!1)}),l?"all":r?"some":!1}return!1}const yr=/([0-9]+)/gm,Cm=(e,t,n)=>du(Ct(e.getValue(n)).toLowerCase(),Ct(t.getValue(n)).toLowerCase()),$m=(e,t,n)=>du(Ct(e.getValue(n)),Ct(t.getValue(n))),Rm=(e,t,n)=>zr(Ct(e.getValue(n)).toLowerCase(),Ct(t.getValue(n)).toLowerCase()),Am=(e,t,n)=>zr(Ct(e.getValue(n)),Ct(t.getValue(n))),Mm=(e,t,n)=>{const l=e.getValue(n),r=t.getValue(n);return l>r?1:l<r?-1:0},Em=(e,t,n)=>zr(e.getValue(n),t.getValue(n));function zr(e,t){return e===t?0:e>t?1:-1}function Ct(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function du(e,t){const n=e.split(yr).filter(Boolean),l=t.split(yr).filter(Boolean);for(;n.length&&l.length;){const r=n.shift(),o=l.shift(),s=parseInt(r,10),u=parseInt(o,10),a=[s,u].sort();if(isNaN(a[0])){if(r>o)return 1;if(o>r)return-1;continue}if(isNaN(a[1]))return isNaN(s)?-1:1;if(s>u)return 1;if(u>s)return-1}return n.length-l.length}const an={alphanumeric:Cm,alphanumericCaseSensitive:$m,text:Rm,textCaseSensitive:Am,datetime:Mm,basic:Em},Fm={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto"}),getDefaultOptions:e=>({onSortingChange:Ue("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>({getAutoSortingFn:()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let l=!1;for(const r of n){const o=r==null?void 0:r.getValue(e.id);if(Object.prototype.toString.call(o)==="[object Date]")return an.datetime;if(typeof o=="string"&&(l=!0,o.split(yr).length>1))return an.alphanumeric}return l?an.text:an.basic},getAutoSortDir:()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},getSortingFn:()=>{var n,l;if(!e)throw new Error;return bl(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(l=t.options.sortingFns)==null?void 0:l[e.columnDef.sortingFn])!=null?n:an[e.columnDef.sortingFn]},toggleSorting:(n,l)=>{const r=e.getNextSortingOrder(),o=typeof n<"u"&&n!==null;t.setSorting(s=>{const u=s==null?void 0:s.find(p=>p.id===e.id),a=s==null?void 0:s.findIndex(p=>p.id===e.id);let f=[],c,d=o?n:r==="desc";if(s!=null&&s.length&&e.getCanMultiSort()&&l?u?c="toggle":c="add":s!=null&&s.length&&a!==s.length-1?c="replace":u?c="toggle":c="replace",c==="toggle"&&(o||r||(c="remove")),c==="add"){var g;f=[...s,{id:e.id,desc:d}],f.splice(0,f.length-((g=t.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else c==="toggle"?f=s.map(p=>p.id===e.id?{...p,desc:d}:p):c==="remove"?f=s.filter(p=>p.id!==e.id):f=[{id:e.id,desc:d}];return f})},getFirstSortDir:()=>{var n,l;return((n=(l=e.columnDef.sortDescFirst)!=null?l:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},getNextSortingOrder:n=>{var l,r;const o=e.getFirstSortDir(),s=e.getIsSorted();return s?s!==o&&((l=t.options.enableSortingRemoval)==null||l)&&(!(n&&(r=t.options.enableMultiRemove)!=null)||r)?!1:s==="desc"?"asc":"desc":o},getCanSort:()=>{var n,l;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((l=t.options.enableSorting)!=null?l:!0)&&!!e.accessorFn},getCanMultiSort:()=>{var n,l;return(n=(l=e.columnDef.enableMultiSort)!=null?l:t.options.enableMultiSort)!=null?n:!!e.accessorFn},getIsSorted:()=>{var n;const l=(n=t.getState().sorting)==null?void 0:n.find(r=>r.id===e.id);return l?l.desc?"desc":"asc":!1},getSortIndex:()=>{var n,l;return(n=(l=t.getState().sorting)==null?void 0:l.findIndex(r=>r.id===e.id))!=null?n:-1},clearSorting:()=>{t.setSorting(n=>n!=null&&n.length?n.filter(l=>l.id!==e.id):[])},getToggleSortingHandler:()=>{const n=e.getCanSort();return l=>{n&&(l.persist==null||l.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(l):!1))}}}),createTable:e=>({setSorting:t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),resetSorting:t=>{var n,l;e.setSorting(t?[]:(n=(l=e.initialState)==null?void 0:l.sorting)!=null?n:[])},getPreSortedRowModel:()=>e.getGroupedRowModel(),getSortedRowModel:()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())})},Dm={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Ue("columnVisibility",e)}),createColumn:(e,t)=>({toggleVisibility:n=>{e.getCanHide()&&t.setColumnVisibility(l=>({...l,[e.id]:n??!e.getIsVisible()}))},getIsVisible:()=>{var n,l;return(n=(l=t.getState().columnVisibility)==null?void 0:l[e.id])!=null?n:!0},getCanHide:()=>{var n,l;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((l=t.options.enableHiding)!=null?l:!0)},getToggleVisibilityHandler:()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}}),createRow:(e,t)=>({_getAllVisibleCells:Q(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(l=>l.column.getIsVisible()),{key:"row._getAllVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getVisibleCells:Q(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,l,r)=>[...n,...l,...r],{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>{const t=(n,l)=>Q(()=>[l(),l().filter(r=>r.getIsVisible()).map(r=>r.id).join("_")],r=>r.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),{key:n,debug:()=>{var r;return(r=e.options.debugAll)!=null?r:e.options.debugColumns}});return{getVisibleFlatColumns:t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),getVisibleLeafColumns:t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),getLeftVisibleLeafColumns:t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),getRightVisibleLeafColumns:t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),getCenterVisibleLeafColumns:t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),setColumnVisibility:n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),resetColumnVisibility:n=>{var l;e.setColumnVisibility(n?{}:(l=e.initialState.columnVisibility)!=null?l:{})},toggleAllColumnsVisible:n=>{var l;n=(l=n)!=null?l:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((r,o)=>({...r,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},getIsAllColumnsVisible:()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),getIsSomeColumnsVisible:()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),getToggleAllColumnsVisibilityHandler:()=>n=>{var l;e.toggleAllColumnsVisible((l=n.target)==null?void 0:l.checked)}}}},ds=[rm,Dm,wm,km,am,Fm,vm,sm,ym,Sm,im];function Im(e){var t;(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");let n={_features:ds};const l=n._features.reduce((c,d)=>Object.assign(c,d.getDefaultOptions==null?void 0:d.getDefaultOptions(n)),{}),r=c=>n.options.mergeOptions?n.options.mergeOptions(l,c):{...l,...c};let s={...{},...(t=e.initialState)!=null?t:{}};n._features.forEach(c=>{var d;s=(d=c.getInitialState==null?void 0:c.getInitialState(s))!=null?d:s});const u=[];let a=!1;const f={_features:ds,options:{...l,...e},initialState:s,_queue:c=>{u.push(c),a||(a=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();a=!1}).catch(d=>setTimeout(()=>{throw d})))},reset:()=>{n.setState(n.initialState)},setOptions:c=>{const d=kt(c,n.options);n.options=r(d)},getState:()=>n.options.state,setState:c=>{n.options.onStateChange==null||n.options.onStateChange(c)},_getRowId:(c,d,g)=>{var p;return(p=n.options.getRowId==null?void 0:n.options.getRowId(c,d,g))!=null?p:`${g?[g.id,d].join("."):d}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:c=>{const d=n.getRowModel().rowsById[c];if(!d)throw new Error;return d},_getDefaultColumnDef:Q(()=>[n.options.defaultColumn],c=>{var d;return c=(d=c)!=null?d:{},{header:g=>{const p=g.header.column.columnDef;return p.accessorKey?p.accessorKey:p.accessorFn?p.id:null},cell:g=>{var p,m;return(p=(m=g.renderValue())==null||m.toString==null?void 0:m.toString())!=null?p:null},...n._features.reduce((g,p)=>Object.assign(g,p.getDefaultColumnDef==null?void 0:p.getDefaultColumnDef()),{}),...c}},{debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns},key:!1}),_getColumnDefs:()=>n.options.columns,getAllColumns:Q(()=>[n._getColumnDefs()],c=>{const d=function(g,p,m){return m===void 0&&(m=0),g.map(v=>{const _=lm(n,v,m,p),w=v;return _.columns=w.columns?d(w.columns,_,m+1):[],_})};return d(c)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllFlatColumns:Q(()=>[n.getAllColumns()],c=>c.flatMap(d=>d.getFlatColumns()),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),_getAllFlatColumnsById:Q(()=>[n.getAllFlatColumns()],c=>c.reduce((d,g)=>(d[g.id]=g,d),{}),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllLeafColumns:Q(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(c,d)=>{let g=c.flatMap(p=>p.getLeafColumns());return d(g)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getColumn:c=>n._getAllFlatColumnsById()[c]};return Object.assign(n,f),n._features.forEach(c=>Object.assign(n,c.createTable==null?void 0:c.createTable(n))),n}function Nm(e,t,n,l){const r=()=>{var s;return(s=o.getValue())!=null?s:e.options.renderFallbackValue},o={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(l),renderValue:r,getContext:Q(()=>[e,n,t,o],(s,u,a,f)=>({table:s,column:u,row:a,cell:f,getValue:f.getValue,renderValue:f.renderValue}),{key:!1,debug:()=>e.options.debugAll})};return e._features.forEach(s=>{Object.assign(o,s.createCell==null?void 0:s.createCell(o,n,t,e))},{}),o}const Hr=(e,t,n,l,r,o,s)=>{let u={id:t,index:l,original:n,depth:r,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:a=>{if(u._valuesCache.hasOwnProperty(a))return u._valuesCache[a];const f=e.getColumn(a);if(f!=null&&f.accessorFn)return u._valuesCache[a]=f.accessorFn(u.original,l),u._valuesCache[a]},getUniqueValues:a=>{if(u._uniqueValuesCache.hasOwnProperty(a))return u._uniqueValuesCache[a];const f=e.getColumn(a);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(u._uniqueValuesCache[a]=f.columnDef.getUniqueValues(u.original,l),u._uniqueValuesCache[a]):(u._uniqueValuesCache[a]=[u.getValue(a)],u._uniqueValuesCache[a])},renderValue:a=>{var f;return(f=u.getValue(a))!=null?f:e.options.renderFallbackValue},subRows:o??[],getLeafRows:()=>nm(u.subRows,a=>a.subRows),getParentRow:()=>u.parentId?e.getRow(u.parentId):void 0,getParentRows:()=>{let a=[],f=u;for(;;){const c=f.getParentRow();if(!c)break;a.push(c),f=c}return a.reverse()},getAllCells:Q(()=>[e.getAllLeafColumns()],a=>a.map(f=>Nm(e,u,f,f.id)),{key:!1,debug:()=>{var a;return(a=e.options.debugAll)!=null?a:e.options.debugRows}}),_getAllCellsByColumnId:Q(()=>[u.getAllCells()],a=>a.reduce((f,c)=>(f[c.column.id]=c,f),{}),{key:"row.getAllCellsByColumnId",debug:()=>{var a;return(a=e.options.debugAll)!=null?a:e.options.debugRows}})};for(let a=0;a<e._features.length;a++){const f=e._features[a];Object.assign(u,f==null||f.createRow==null?void 0:f.createRow(u,e))}return u};function Pm(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function hs(){return e=>Q(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},l=function(r,o,s){o===void 0&&(o=0);const u=[];for(let f=0;f<r.length;f++){const c=Hr(e,e._getRowId(r[f],f,s),r[f],f,o,void 0,s==null?void 0:s.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,u.push(c),e.options.getSubRows){var a;c.originalSubRows=e.options.getSubRows(r[f],f),(a=c.originalSubRows)!=null&&a.length&&(c.subRows=l(c.originalSubRows,o+1,c))}}return u};return n.rows=l(t),n},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function hu(e,t,n){return n.options.filterFromLeafRows?Tm(e,t,n):Om(e,t,n)}function Tm(e,t,n){var l;const r=[],o={},s=(l=n.options.maxLeafRowFilterDepth)!=null?l:100,u=function(a,f){f===void 0&&(f=0);const c=[];for(let g=0;g<a.length;g++){var d;let p=a[g];const m=Hr(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);if(m.columnFilters=p.columnFilters,(d=p.subRows)!=null&&d.length&&f<s){if(m.subRows=u(p.subRows,f+1),p=m,t(p)&&!m.subRows.length){c.push(p),o[p.id]=p,o[g]=p;continue}if(t(p)||m.subRows.length){c.push(p),o[p.id]=p,o[g]=p;continue}}else p=m,t(p)&&(c.push(p),o[p.id]=p,o[g]=p)}return c};return{rows:u(e),flatRows:r,rowsById:o}}function Om(e,t,n){var l;const r=[],o={},s=(l=n.options.maxLeafRowFilterDepth)!=null?l:100,u=function(a,f){f===void 0&&(f=0);const c=[];for(let g=0;g<a.length;g++){let p=a[g];if(t(p)){var d;if((d=p.subRows)!=null&&d.length&&f<s){const v=Hr(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);v.subRows=u(p.subRows,f+1),p=v}c.push(p),r.push(p),o[p.id]=p}}return c};return{rows:u(e),flatRows:r,rowsById:o}}function gs(){return e=>Q(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,l)=>{if(!t.rows.length||!(n!=null&&n.length)&&!l){for(let g=0;g<t.flatRows.length;g++)t.flatRows[g].columnFilters={},t.flatRows[g].columnFiltersMeta={};return t}const r=[],o=[];(n??[]).forEach(g=>{var p;const m=e.getColumn(g.id);if(!m)return;const v=m.getFilterFn();v&&r.push({id:g.id,filterFn:v,resolvedValue:(p=v.resolveFilterValue==null?void 0:v.resolveFilterValue(g.value))!=null?p:g.value})});const s=n.map(g=>g.id),u=e.getGlobalFilterFn(),a=e.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());l&&u&&a.length&&(s.push("__global__"),a.forEach(g=>{var p;o.push({id:g.id,filterFn:u,resolvedValue:(p=u.resolveFilterValue==null?void 0:u.resolveFilterValue(l))!=null?p:l})}));let f,c;for(let g=0;g<t.flatRows.length;g++){const p=t.flatRows[g];if(p.columnFilters={},r.length)for(let m=0;m<r.length;m++){f=r[m];const v=f.id;p.columnFilters[v]=f.filterFn(p,v,f.resolvedValue,_=>{p.columnFiltersMeta[v]=_})}if(o.length){for(let m=0;m<o.length;m++){c=o[m];const v=c.id;if(c.filterFn(p,v,c.resolvedValue,_=>{p.columnFiltersMeta[v]=_})){p.columnFilters.__global__=!0;break}}p.columnFilters.__global__!==!0&&(p.columnFilters.__global__=!1)}}const d=g=>{for(let p=0;p<s.length;p++)if(g.columnFilters[s[p]]===!1)return!1;return!0};return hu(t.rows,d,e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function ps(){return(e,t)=>Q(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,l,r)=>{if(!n.rows.length||!(l!=null&&l.length)&&!r)return n;const o=[...l.map(u=>u.id).filter(u=>u!==t),r?"__global__":void 0].filter(Boolean),s=u=>{for(let a=0;a<o.length;a++)if(u.columnFilters[o[a]]===!1)return!1;return!0};return hu(n.rows,s,e)},{key:!1,debug:()=>{var n;return(n=e.options.debugAll)!=null?n:e.options.debugTable},onChange:()=>{}})}function ms(){return e=>Q(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const l=e.getState().sorting,r=[],o=l.filter(a=>{var f;return(f=e.getColumn(a.id))==null?void 0:f.getCanSort()}),s={};o.forEach(a=>{const f=e.getColumn(a.id);f&&(s[a.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const u=a=>{const f=[...a];return f.sort((c,d)=>{for(let p=0;p<o.length;p+=1){var g;const m=o[p],v=s[m.id],_=(g=m==null?void 0:m.desc)!=null?g:!1;if(v.sortUndefined){const y=c.getValue(m.id),$=d.getValue(m.id),M=typeof y>"u",k=typeof $>"u";if(M||k){let E=M&&k?0:M?v.sortUndefined:-v.sortUndefined;return _&&E!==0&&(E*=-1),E}}let w=v.sortingFn(c,d,m.id);if(w!==0)return _&&(w*=-1),v.invertSorting&&(w*=-1),w}return c.index-d.index}),f.forEach(c=>{var d;r.push(c),(d=c.subRows)!=null&&d.length&&(c.subRows=u(c.subRows))}),f};return{rows:u(n.rows),flatRows:r,rowsById:n.rowsById}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function Vm(e){const t=[],n=l=>{var r;t.push(l),(r=l.subRows)!=null&&r.length&&l.getIsExpanded()&&l.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function _s(e){return t=>Q(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,l)=>{if(!l.rows.length)return l;const{pageSize:r,pageIndex:o}=n;let{rows:s,flatRows:u,rowsById:a}=l;const f=r*o,c=f+r;s=s.slice(f,c);let d;t.options.paginateExpandedRows?d={rows:s,flatRows:u,rowsById:a}:d=Vm({rows:s,flatRows:u,rowsById:a}),d.flatRows=[];const g=p=>{d.flatRows.push(p),p.subRows.length&&p.subRows.forEach(g)};return d.rows.forEach(g),d},{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugTable}})}/**
 * svelte-table
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zm(e){let t;return{c(){t=L(e[0])},l(n){t=Fu(n,e[0])},m(n,l){Ru(n,t,l)},p(n,[l]){l&1&&W(t,n[0])},i:x,o:x,d(n){n&&N(t)}}}function Hm(e,t,n){let{content:l}=t;return e.$$set=r=>{"content"in r&&n(0,l=r.content)},[l]}class qm extends ie{constructor(t){super(),oe(this,t,Hm,zm,re,{content:0})}}const Lm=Ks((e,t,n,l)=>`${Uu(t.content)}`);var jm=typeof document>"u"?Lm:qm;function xm(e,t,n){let l,r;return l=new t({props:n,$$inline:!0}),{c(){te(l.$$.fragment)},l(o){Xu(l.$$.fragment,o)},m(o,s){J(l,o,s),r=!0},p:x,i(o){r||(V(l.$$.fragment,o),r=!0)},o(o){H(l.$$.fragment,o),r=!1},d(o){Z(l,o)}}}function Gm(e,t){return class extends ie{constructor(l){super(),oe(this,l,null,r=>xm(r,e,t),re,{},void 0)}}}function Bm(e,t){return Ks((l,r,o,s)=>`${Wu(e,"TableComponent").$$render(l,t,{},{})}`)}const kr=typeof window>"u"?Bm:Gm;function Um(e){return typeof e=="object"&&typeof e.$$render=="function"&&typeof e.render=="function"}function Wm(e){var t,n;let l="__SVELTE_HMR"in window;return e.prototype instanceof ie||l&&((t=e.name)==null?void 0:t.startsWith("Proxy<"))&&((n=e.name)==null?void 0:n.endsWith(">"))}function vs(e){return typeof document>"u"?Um(e):Wm(e)}function bs(e){return kr(jm,{content:e})}function wl(e,t){if(!e)return null;if(vs(e))return kr(e,t);if(typeof e=="function"){const n=e(t);return n==null?null:vs(n)?kr(n,t):bs(n)}return bs(e)}function ws(e){let t;"subscribe"in e?t=e:t=Kl(e);let n={state:{},onStateChange:()=>{},renderFallbackValue:null,...vu(t)},l=Im(n),r=Ae(l.initialState),o=Qu([r,t],u=>u);return Kl(l,function(a){const f=o.subscribe(c=>{let[d,g]=c;l.setOptions(p=>({...p,...g,state:{...d,...g.state},onStateChange:m=>{m instanceof Function?r.update(m):r.set(m),n.onStateChange==null||n.onStateChange(m)}})),a(l)});return function(){f()}})}/**
 * match-sorter-utils
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const gu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},Xm=Object.keys(gu).join("|"),Ym=new RegExp(Xm,"g");function Qm(e){return e.replace(Ym,t=>gu[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const Oe={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function Km(e,t,n){var l;if(n=n||{},n.threshold=(l=n.threshold)!=null?l:Oe.MATCHES,!n.accessors){const s=ys(e,t,n);return{rankedValue:e,rank:s,accessorIndex:-1,accessorThreshold:n.threshold,passed:s>=n.threshold}}const r=t_(e,n.accessors),o={rankedValue:e,rank:Oe.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let s=0;s<r.length;s++){const u=r[s];let a=ys(u.itemValue,t,n);const{minRanking:f,maxRanking:c,threshold:d=n.threshold}=u.attributes;a<f&&a>=Oe.MATCHES?a=f:a>c&&(a=c),a=Math.min(a,c),a>=d&&a>o.rank&&(o.rank=a,o.passed=!0,o.accessorIndex=s,o.accessorThreshold=d,o.rankedValue=u.itemValue)}return o}function ys(e,t,n){return e=ks(e,n),t=ks(t,n),t.length>e.length?Oe.NO_MATCH:e===t?Oe.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?Oe.EQUAL:e.startsWith(t)?Oe.STARTS_WITH:e.includes(` ${t}`)?Oe.WORD_STARTS_WITH:e.includes(t)?Oe.CONTAINS:t.length===1?Oe.NO_MATCH:Jm(e).includes(t)?Oe.ACRONYM:Zm(e,t))}function Jm(e){let t="";return e.split(" ").forEach(l=>{l.split("-").forEach(o=>{t+=o.substr(0,1)})}),t}function Zm(e,t){let n=0,l=0;function r(a,f,c){for(let d=c,g=f.length;d<g;d++)if(f[d]===a)return n+=1,d+1;return-1}function o(a){const f=1/a,c=n/t.length;return Oe.MATCHES+c*f}const s=r(t[0],e,0);if(s<0)return Oe.NO_MATCH;l=s;for(let a=1,f=t.length;a<f;a++){const c=t[a];if(l=r(c,e,l),!(l>-1))return Oe.NO_MATCH}const u=l-s;return o(u)}function ks(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=Qm(e)),e}function e_(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const l=n(e);return l==null?[]:Array.isArray(l)?l:[String(l)]}function t_(e,t){const n=[];for(let l=0,r=t.length;l<r;l++){const o=t[l],s=n_(o),u=e_(e,o);for(let a=0,f=u.length;a<f;a++)n.push({itemValue:u[a],attributes:s})}return n}const Ss={maxRanking:1/0,minRanking:-1/0};function n_(e){return typeof e=="function"?Ss:{...Ss,...e}}function Cs(e,t,n){const l=e.slice();return l[17]=t[n],l}function $s(e,t,n){const l=e.slice();return l[20]=t[n],l}function Rs(e,t,n){const l=e.slice();return l[23]=t[n],l}function As(e,t,n){const l=e.slice();return l[26]=t[n],l}function l_(e){let t,n,l,r,o=i_(e[26].column.getIsSorted())+"",s,u,a,f;var c=wl(e[26].column.columnDef.header,e[26].getContext());function d(g){return{}}return c&&(n=St(c,d())),{c(){t=A("button"),n&&te(n.$$.fragment),l=P(),r=A("span"),s=L(o),t.disabled=!e[26].column.getCanSort(),It(t,"is-disabled",!e[26].column.getCanSort())},m(g,p){T(g,t,p),n&&J(n,t,null),b(t,l),b(t,r),b(r,s),u=!0,a||(f=B(t,"click",e[26].column.getToggleSortingHandler()),a=!0)},p(g,p){if(e=g,c!==(c=wl(e[26].column.columnDef.header,e[26].getContext()))){if(n){ce();const m=n;H(m.$$.fragment,1,0,()=>{Z(m,1)}),de()}c?(n=St(c,d()),te(n.$$.fragment),V(n.$$.fragment,1),J(n,t,l)):n=null}},i(g){u||(n&&V(n.$$.fragment,g),u=!0)},o(g){n&&H(n.$$.fragment,g),u=!1},d(g){g&&N(t),n&&Z(n),a=!1,f()}}}function Ms(e){let t,n,l=!e[26].isPlaceholder&&l_(e);return{c(){t=A("th"),l&&l.c(),h(t,"colspan",e[26].colSpan),h(t,"class","svelte-16fb3tv")},m(r,o){T(r,t,o),l&&l.m(t,null),n=!0},p(r,o){r[26].isPlaceholder||l.p(r,o)},i(r){n||(V(l),n=!0)},o(r){H(l),n=!1},d(r){r&&N(t),l&&l.d()}}}function Es(e){let t,n,l,r=e[23].headers,o=[];for(let u=0;u<r.length;u+=1)o[u]=Ms(As(e,r,u));const s=u=>H(o[u],1,1,()=>{o[u]=null});return{c(){t=A("tr");for(let u=0;u<o.length;u+=1)o[u].c();n=P()},m(u,a){T(u,t,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(t,null);b(t,n),l=!0},p(u,a){if(a&32){r=u[23].headers;let f;for(f=0;f<r.length;f+=1){const c=As(u,r,f);o[f]?(o[f].p(c,a),V(o[f],1)):(o[f]=Ms(c),o[f].c(),V(o[f],1),o[f].m(t,n))}for(ce(),f=r.length;f<o.length;f+=1)s(f);de()}},i(u){if(!l){for(let a=0;a<r.length;a+=1)V(o[a]);l=!0}},o(u){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)H(o[a]);l=!1},d(u){u&&N(t),ue(o,u)}}}function Fs(e,t){let n,l,r;var o=wl(t[20].column.columnDef.cell,t[20].getContext());function s(u){return{}}return o&&(l=St(o,s())),{key:e,first:null,c(){n=A("td"),l&&te(l.$$.fragment),h(n,"class","svelte-16fb3tv"),this.first=n},m(u,a){T(u,n,a),l&&J(l,n,null),r=!0},p(u,a){if(t=u,a&2&&o!==(o=wl(t[20].column.columnDef.cell,t[20].getContext()))){if(l){ce();const f=l;H(f.$$.fragment,1,0,()=>{Z(f,1)}),de()}o?(l=St(o,s()),te(l.$$.fragment),V(l.$$.fragment,1),J(l,n,null)):l=null}},i(u){r||(l&&V(l.$$.fragment,u),r=!0)},o(u){l&&H(l.$$.fragment,u),r=!1},d(u){u&&N(n),l&&Z(l)}}}function Ds(e){let t,n=[],l=new Map,r,o,s=e[17].getVisibleCells();const u=a=>a[20].id;for(let a=0;a<s.length;a+=1){let f=$s(e,s,a),c=u(f);l.set(c,n[a]=Fs(c,f))}return{c(){t=A("tr");for(let a=0;a<n.length;a+=1)n[a].c();r=P(),h(t,"class","svelte-16fb3tv")},m(a,f){T(a,t,f);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);b(t,r),o=!0},p(a,f){f&2&&(s=a[17].getVisibleCells(),ce(),n=ct(n,f,u,1,a,s,l,t,Xs,Fs,r,$s),de())},i(a){if(!o){for(let f=0;f<s.length;f+=1)V(n[f]);o=!0}},o(a){for(let f=0;f<n.length;f+=1)H(n[f]);o=!1},d(a){a&&N(t);for(let f=0;f<n.length;f+=1)n[f].d()}}}function r_(e){let t,n,l,r,o,s,u,a,f,c,d,g="<",p,m,v,_,w,y,$,M,k,E,S=" ",R,C,F=" ",I,D,z=e[1].getPageCount()+"",O,U,G,$e=">",Fe,Re,he,qe,In,Rt=e[5],ve=[];for(let K=0;K<Rt.length;K+=1)ve[K]=Es(Rs(e,Rt,K));const pu=K=>H(ve[K],1,1,()=>{ve[K]=null});let At=e[1].getRowModel().rows,be=[];for(let K=0;K<At.length;K+=1)be[K]=Ds(Cs(e,At,K));const mu=K=>H(be[K],1,1,()=>{be[K]=null});return{c(){t=A("div"),n=A("input"),l=P(),r=A("div"),o=A("table"),s=A("thead");for(let K=0;K<ve.length;K+=1)ve[K].c();u=P(),a=A("tbody");for(let K=0;K<be.length;K+=1)be[K].c();f=P(),c=A("div"),d=A("button"),p=L(g),v=P(),_=A("span"),_.textContent="Page",w=P(),y=A("input"),k=P(),E=A("span"),R=L(S),C=L("of"),I=L(F),D=P(),O=L(z),U=P(),G=A("button"),Fe=L($e),h(n,"type","search"),h(n,"class","input"),h(n,"placeholder","Search..."),h(s,"class","svelte-16fb3tv"),h(a,"class","svelte-16fb3tv"),h(d,"class","button is-white svelte-16fb3tv"),d.disabled=m=!e[1].getCanPreviousPage(),It(d,"is-disabled",!e[1].getCanPreviousPage()),h(y,"type","number"),y.value=$=e[1].getState().pagination.pageIndex+1,h(y,"min",0),h(y,"max",M=e[1].getPageCount()-1),h(y,"class","mx-1 svelte-16fb3tv"),h(G,"class","button is-white svelte-16fb3tv"),G.disabled=Re=!e[1].getCanNextPage(),It(G,"is-disabled",!e[1].getCanNextPage()),h(c,"class","is-flex is-align-items-center svelte-16fb3tv"),h(o,"class","table svelte-16fb3tv"),h(r,"class","table-container svelte-16fb3tv")},m(K,fe){T(K,t,fe),b(t,n),b(t,l),b(t,r),b(r,o),b(o,s);for(let ne=0;ne<ve.length;ne+=1)ve[ne]&&ve[ne].m(s,null);b(o,u),b(o,a);for(let ne=0;ne<be.length;ne+=1)be[ne]&&be[ne].m(a,null);b(o,f),b(o,c),b(c,d),b(d,p),b(c,v),b(c,_),b(c,w),b(c,y),b(c,k),b(c,E),b(E,R),b(E,C),b(E,I),b(E,D),b(E,O),b(c,U),b(c,G),b(G,Fe),he=!0,qe||(In=[B(n,"keyup",e[3]),B(n,"search",e[3]),B(d,"click",e[9]),B(y,"change",e[4]),B(G,"click",e[10])],qe=!0)},p(K,[fe]){if(fe&32){Rt=K[5];let ne;for(ne=0;ne<Rt.length;ne+=1){const ln=Rs(K,Rt,ne);ve[ne]?(ve[ne].p(ln,fe),V(ve[ne],1)):(ve[ne]=Es(ln),ve[ne].c(),V(ve[ne],1),ve[ne].m(s,null))}for(ce(),ne=Rt.length;ne<ve.length;ne+=1)pu(ne);de()}if(fe&2){At=K[1].getRowModel().rows;let ne;for(ne=0;ne<At.length;ne+=1){const ln=Cs(K,At,ne);be[ne]?(be[ne].p(ln,fe),V(be[ne],1)):(be[ne]=Ds(ln),be[ne].c(),V(be[ne],1),be[ne].m(a,null))}for(ce(),ne=At.length;ne<be.length;ne+=1)mu(ne);de()}(!he||fe&2&&m!==(m=!K[1].getCanPreviousPage()))&&(d.disabled=m),(!he||fe&2)&&It(d,"is-disabled",!K[1].getCanPreviousPage()),(!he||fe&2&&$!==($=K[1].getState().pagination.pageIndex+1)&&y.value!==$)&&(y.value=$),(!he||fe&2&&M!==(M=K[1].getPageCount()-1))&&h(y,"max",M),(!he||fe&2)&&z!==(z=K[1].getPageCount()+"")&&W(O,z),(!he||fe&2&&Re!==(Re=!K[1].getCanNextPage()))&&(G.disabled=Re),(!he||fe&2)&&It(G,"is-disabled",!K[1].getCanNextPage())},i(K){if(!he){for(let fe=0;fe<Rt.length;fe+=1)V(ve[fe]);for(let fe=0;fe<At.length;fe+=1)V(be[fe]);he=!0}},o(K){ve=ve.filter(Boolean);for(let fe=0;fe<ve.length;fe+=1)H(ve[fe]);be=be.filter(Boolean);for(let fe=0;fe<be.length;fe+=1)H(be[fe]);he=!1},d(K){K&&N(t),ue(ve,K),ue(be,K),qe=!1,ge(In)}}}function i_(e){return e?e==="asc"?"🔼":"🔽":""}function o_(e,t,n){let l,r,o=x,s=()=>(o(),o=yl(w,k=>n(1,r=k)),w);le(e,vl,k=>n(8,l=k)),e.$$.on_destroy.push(()=>o());const u=(k,E,S,R)=>{if(console.log("yessir"),Array.isArray(S))return S.length===0?!0:S.includes(k.getValue(E));typeof S=="number"&&(S=String(S));const C=Km(k.getValue(E),S);return R({itemRank:C}),C.passed},a=Pm(),f=[a.accessor("file",{header:"File",cell:k=>k.getValue(),footer:k=>k.column.id}),a.accessor("size",{header:"Size",cell:k=>nr(k.getValue()),footer:k=>k.column.id}),a.accessor("type",{header:"Type",cell:k=>k.getValue(),footer:k=>k.column.id})];let c="",d=Ae({data:l,columns:f,getCoreRowModel:hs(),getSortedRowModel:ms(),getFilteredRowModel:gs(),globalFilterFn:u,getFacetedRowModel:ps(),getPaginationRowModel:_s(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0});function g(k){n(6,c=k),d.update(E=>({...E,state:{...E.state,globalFilter:k}}))}function p(k){d.update(E=>{var S;return{...E,state:{...E.state,pagination:{...(S=E.state)==null?void 0:S.pagination,pageIndex:k}}}})}let m;function v(k){clearTimeout(m),m=setTimeout(()=>{const E=k.target;g(E.value)},100)}function _(k){const E=k.target;p(parseInt(E.value)-1)}let w=ws(d);s();let y=r.getHeaderGroups();const $=()=>p(r.getState().pagination.pageIndex-1),M=()=>p(r.getState().pagination.pageIndex+1);return e.$$.update=()=>{e.$$.dirty&448&&(n(7,d={data:l,columns:f,getCoreRowModel:hs(),getSortedRowModel:ms(),getFilteredRowModel:gs(),globalFilterFn:u,getFacetedRowModel:ps(),getPaginationRowModel:_s(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0}),s(n(0,w=ws(Ae(d)))))},[w,r,p,v,_,y,c,d,l,$,M]}class s_ extends ie{constructor(t){super(),oe(this,t,o_,r_,re,{})}}function Is(e){let t,n;return{c(){t=A("p"),n=L(e[3])},m(l,r){T(l,t,r),b(t,n)},p(l,r){r&8&&W(n,l[3])},d(l){l&&N(t)}}}function Ns(e){let t;return{c(){t=A("p"),t.textContent="Data Successfully indexed!"},m(n,l){T(n,t,l)},d(n){n&&N(t)}}}function Ps(e){let t,n;return t=new s_({}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function a_(e){let t,n,l,r,o,s,u,a,f,c,d,g,p,m,v,_,w,y,$,M,k,E,S,R=e[2]&&!e[1]&&Is(e),C=e[1]&&Ns();$=new em({});let F=e[0]&&Ps();return{c(){t=A("div"),n=A("div"),l=A("div"),r=A("div"),o=A("h4"),o.textContent="Upload Data",s=P(),u=A("br"),a=P(),f=A("form"),c=A("input"),d=P(),R&&R.c(),g=P(),C&&C.c(),p=P(),m=A("p"),m.textContent="These are the files your model will use as context.",v=P(),_=A("p"),_.innerHTML="Currently <strong>pdf</strong>, txt, and md are supported.",w=P(),y=A("div"),te($.$$.fragment),M=P(),F&&F.c(),h(c,"type","file"),c.multiple=!0,h(r,"class","upload-box svelte-1lu6hos"),h(l,"class","upload-container svelte-1lu6hos"),h(n,"class","file-container svelte-1lu6hos"),h(y,"class","charts-container svelte-1lu6hos"),h(t,"class","data-grid svelte-1lu6hos")},m(I,D){T(I,t,D),b(t,n),b(n,l),b(l,r),b(r,o),b(r,s),b(r,u),b(r,a),b(r,f),b(f,c),b(r,d),R&&R.m(r,null),b(r,g),C&&C.m(r,null),b(r,p),b(r,m),b(r,v),b(r,_),b(t,w),b(t,y),J($,y,null),b(y,M),F&&F.m(y,null),k=!0,E||(S=B(c,"change",e[4]),E=!0)},p(I,[D]){I[2]&&!I[1]?R?R.p(I,D):(R=Is(I),R.c(),R.m(r,g)):R&&(R.d(1),R=null),I[1]?C||(C=Ns(),C.c(),C.m(r,p)):C&&(C.d(1),C=null),I[0]?F?D&1&&V(F,1):(F=Ps(),F.c(),V(F,1),F.m(y,null)):F&&(ce(),H(F,1,1,()=>{F=null}),de())},i(I){k||(V($.$$.fragment,I),V(F),k=!0)},o(I){H($.$$.fragment,I),H(F),k=!1},d(I){I&&N(t),R&&R.d(),C&&C.d(),Z($),F&&F.d(),E=!1,S()}}}function u_(e,t,n){let l,r,o;le(e,os,m=>n(6,r=m)),le(e,vl,m=>n(7,o=m));let s=[],u=!1,a=!1;async function f(m){n(0,s=m.target.files);const v=new FormData;for(let _=0;_<s.length;_++)v.append("files",s[_]);await fetch("/retrieval/file/upload",{method:"POST",body:v}),d(),c(),g()}async function c(){const _=(await(await fetch("/retrieval/file/get")).json()).files.map(w=>({file:w.name,size:w.size,type:w.type}));Ne(vl,o=[..._],o)}async function d(){console.log("index!"),n(2,a=!0),await(await fetch("/retrieval/vector_db/index",{method:"POST"})).json(),n(1,u=!0),n(2,a=!1)}async function g(){console.log("getting embeddings...");const v=await(await fetch("/retrieval/vector_db/get")).json();console.log("embeddingData",v),Ne(os,r=v,r)}st(()=>{c()});let p=0;return setInterval(()=>{n(5,p=(p+1)%4)},200),e.$$.update=()=>{e.$$.dirty&32&&n(3,l="Indexing"+".".repeat(p))},[s,u,a,l,f,p]}class f_ extends ie{constructor(t){super(),oe(this,t,u_,a_,re,{})}}function c_(e){let t,n,l,r,o,s,u,a,f,c,d,g,p,m,v,_,w,y,$,M,k,E,S,R,C,F,I;return o=new Ta({}),a=new Oa({}),d=new Fa({}),m=new Ia({props:{feedback:"Bad"}}),w=new Pa({}),M=new Na({}),F=new Da({}),{c(){t=A("div"),n=A("div"),l=A("div"),r=A("div"),te(o.$$.fragment),s=P(),u=A("div"),te(a.$$.fragment),f=P(),c=A("div"),te(d.$$.fragment),g=P(),p=A("div"),te(m.$$.fragment),v=P(),_=A("div"),te(w.$$.fragment),y=P(),$=A("div"),te(M.$$.fragment),k=P(),E=A("div"),S=A("div"),S.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,R=P(),C=A("div"),te(F.$$.fragment),h(r,"class","card-1 svelte-14znspc"),h(u,"class","card-2"),h(l,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(p,"class","left-question svelte-14znspc"),h(_,"class","left-filter svelte-14znspc"),h($,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h(S,"class","right-chart svelte-14znspc"),h(C,"class","right-table svelte-14znspc"),h(E,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(D,z){T(D,t,z),b(t,n),b(n,l),b(l,r),J(o,r,null),b(l,s),b(l,u),J(a,u,null),b(n,f),b(n,c),J(d,c,null),b(n,g),b(n,p),J(m,p,null),b(n,v),b(n,_),J(w,_,null),b(n,y),b(n,$),J(M,$,null),b(t,k),b(t,E),b(E,S),b(E,R),b(E,C),J(F,C,null),I=!0},p:x,i(D){I||(V(o.$$.fragment,D),V(a.$$.fragment,D),V(d.$$.fragment,D),V(m.$$.fragment,D),V(w.$$.fragment,D),V(M.$$.fragment,D),V(F.$$.fragment,D),I=!0)},o(D){H(o.$$.fragment,D),H(a.$$.fragment,D),H(d.$$.fragment,D),H(m.$$.fragment,D),H(w.$$.fragment,D),H(M.$$.fragment,D),H(F.$$.fragment,D),I=!1},d(D){D&&N(t),Z(o),Z(a),Z(d),Z(m),Z(w),Z(M),Z(F)}}}function d_(e,t,n){let l;le(e,kn,o=>n(0,l=o)),st(()=>{console.log("FEEDBACK on mount"),r()});async function r(){const a=(await(await fetch("/chat/rag_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[4]}));Ne(kn,l=[...a],l)}return[]}class h_ extends ie{constructor(t){super(),oe(this,t,d_,c_,re,{})}}function g_(e){let t,n;return t=new Va({}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function p_(e){let t,n;return t=new h_({}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function m_(e){let t,n;return t=new Va({}),{c(){te(t.$$.fragment)},m(l,r){J(t,l,r),n=!0},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){H(t.$$.fragment,l),n=!1},d(l){Z(t,l)}}}function __(e){let t,n,l,r;const o=[m_,p_,g_],s=[];function u(a,f){return a[0]==="vote"?0:a[0]==="rag"?1:2}return t=u(e),n=s[t]=o[t](e),{c(){n.c(),l=_e()},m(a,f){s[t].m(a,f),T(a,l,f),r=!0},p(a,[f]){let c=t;t=u(a),t!==c&&(ce(),H(s[c],1,1,()=>{s[c]=null}),de(),n=s[t],n||(n=s[t]=o[t](a),n.c()),V(n,1),n.m(l.parentNode,l))},i(a){r||(V(n),r=!0)},o(a){H(n),r=!1},d(a){s[t].d(a),a&&N(l)}}}function v_(e,t,n){let{feedback:l}=t;return e.$$set=r=>{"feedback"in r&&n(0,l=r.feedback)},[l]}class b_ extends ie{constructor(t){super(),oe(this,t,v_,__,re,{feedback:0})}}function Ts(e,t,n){const l=e.slice();return l[7]=t[n],l}function Os(e){let t,n=e[0],l=[];for(let r=0;r<n.length;r+=1)l[r]=Vs(Ts(e,n,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();t=_e()},m(r,o){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,o);T(r,t,o)},p(r,o){if(o&33){n=r[0];let s;for(s=0;s<n.length;s+=1){const u=Ts(r,n,s);l[s]?l[s].p(u,o):(l[s]=Vs(u),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(r){ue(l,r),r&&N(t)}}}function Vs(e){let t,n=e[7].svelte_component+"",l,r,o,s;function u(){return e[6](e[7])}return{c(){t=A("button"),l=L(n),h(t,"aria-label",r=`Load ${e[7].svelte_component} component`)},m(a,f){T(a,t,f),b(t,l),o||(s=B(t,"click",u),o=!0)},p(a,f){e=a,f&1&&n!==(n=e[7].svelte_component+"")&&W(l,n),f&1&&r!==(r=`Load ${e[7].svelte_component} component`)&&h(t,"aria-label",r)},d(a){a&&N(t),o=!1,s()}}}function zs(e){let t,n,l;const r=[e[1].props];var o=e[4][e[1].svelte_component];function s(u){let a={};for(let f=0;f<r.length;f+=1)a=Jn(a,r[f]);return{props:a}}return o&&(t=St(o,s())),{c(){t&&te(t.$$.fragment),n=_e()},m(u,a){t&&J(t,u,a),T(u,n,a),l=!0},p(u,a){const f=a&2?Ys(r,[Qs(u[1].props)]):{};if(a&2&&o!==(o=u[4][u[1].svelte_component])){if(t){ce();const c=t;H(c.$$.fragment,1,0,()=>{Z(c,1)}),de()}o?(t=St(o,s()),te(t.$$.fragment),V(t.$$.fragment,1),J(t,n.parentNode,n)):t=null}else o&&t.$set(f)},i(u){l||(t&&V(t.$$.fragment,u),l=!0)},o(u){t&&H(t.$$.fragment,u),l=!1},d(u){u&&N(n),t&&Z(t,u)}}}function w_(e){let t,n,l,r=e[0].length>1&&Os(e),o=e[1]&&zs(e);return{c(){r&&r.c(),t=P(),o&&o.c(),n=_e()},m(s,u){r&&r.m(s,u),T(s,t,u),o&&o.m(s,u),T(s,n,u),l=!0},p(s,[u]){s[0].length>1?r?r.p(s,u):(r=Os(s),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),s[1]?o?(o.p(s,u),u&2&&V(o,1)):(o=zs(s),o.c(),V(o,1),o.m(n.parentNode,n)):o&&(ce(),H(o,1,1,()=>{o=null}),de())},i(s){l||(V(o),l=!0)},o(s){H(o),l=!1},d(s){r&&r.d(s),s&&N(t),o&&o.d(s),s&&N(n)}}}function y_(e,t,n){let l,r;const o=Ae([]);le(e,o,c=>n(0,l=c));const s=Ae(null);le(e,s,c=>n(1,r=c));const u={Chatbot:$d,Dropdown:Md,Feedback:b_,Compare:Zg,CompareDashboard:_p,RetrievalQA:f_},a=c=>{s.set(c)};return fetch("/components").then(c=>{if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return c.json()}).then(c=>{o.set(c),s.set(c[0])}).catch(c=>{console.log("Fetch request failed",c)}),[l,r,o,s,u,a,c=>a(c)]}class k_ extends ie{constructor(t){super(),oe(this,t,y_,w_,re,{})}}new k_({target:document.getElementById("app")});
