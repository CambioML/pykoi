(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function U(){}const Js=e=>e;function Sn(e,t){for(const n in t)e[n]=t[n];return e}function Zs(e){return e()}function Jl(){return Object.create(null)}function be(e){e.forEach(Zs)}function Ge(e){return typeof e=="function"}function fe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Fu(e){return Object.keys(e).length===0}function $l(e,...t){if(e==null)return U;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Du(e){let t;return $l(e,n=>t=n)(),t}function ue(e,t,n){e.$$.on_destroy.push($l(t,n))}function Uo(e,t,n,l){if(e){const o=ea(e,t,n,l);return e[0](o)}}function ea(e,t,n,l){return e[1]&&l?Sn(n.ctx.slice(),e[1](l(t))):n.ctx}function Wo(e,t,n,l){if(e[2]&&l){const o=e[2](l(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const r=[],s=Math.max(t.dirty.length,o.length);for(let u=0;u<s;u+=1)r[u]=t.dirty[u]|o[u];return r}return t.dirty|o}return t.dirty}function Xo(e,t,n,l,o,r){if(o){const s=ea(t,n,l,r);e.p(s,o)}}function Yo(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let l=0;l<n;l++)t[l]=-1;return t}return-1}function Qo(e){return e??""}function Pe(e,t,n){return e.set(n),t}function Cn(e){return e&&Ge(e.destroy)?e.destroy:U}const ta=typeof window<"u";let na=ta?()=>window.performance.now():()=>Date.now(),Mo=ta?e=>requestAnimationFrame(e):U;const Xt=new Set;function la(e){Xt.forEach(t=>{t.c(e)||(Xt.delete(t),t.f())}),Xt.size!==0&&Mo(la)}function oa(e){let t;return Xt.size===0&&Mo(la),{promise:new Promise(n=>{Xt.add(t={c:e,f:n})}),abort(){Xt.delete(t)}}}let Rl=!1;function Iu(){Rl=!0}function Nu(){Rl=!1}function Pu(e,t,n,l){for(;e<t;){const o=e+(t-e>>1);n(o)<=l?e=o+1:t=o}return e}function Tu(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const a=[];for(let f=0;f<t.length;f++){const c=t[f];c.claim_order!==void 0&&a.push(c)}t=a}const n=new Int32Array(t.length+1),l=new Int32Array(t.length);n[0]=-1;let o=0;for(let a=0;a<t.length;a++){const f=t[a].claim_order,c=(o>0&&t[n[o]].claim_order<=f?o+1:Pu(1,o,g=>t[n[g]].claim_order,f))-1;l[a]=n[c]+1;const d=c+1;n[d]=a,o=Math.max(d,o)}const r=[],s=[];let u=t.length-1;for(let a=n[o]+1;a!=0;a=l[a-1]){for(r.push(t[a-1]);u>=a;u--)s.push(t[u]);u--}for(;u>=0;u--)s.push(t[u]);r.reverse(),s.sort((a,f)=>a.claim_order-f.claim_order);for(let a=0,f=0;a<s.length;a++){for(;f<r.length&&s[a].claim_order>=r[f].claim_order;)f++;const c=f<r.length?r[f]:null;e.insertBefore(s[a],c)}}function b(e,t){e.appendChild(t)}function ia(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ou(e){const t=A("style");return Vu(ia(e),t),t.sheet}function Vu(e,t){return b(e.head||e,t),t.sheet}function zu(e,t){if(Rl){for(Tu(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function Lu(e,t,n){Rl&&!n?zu(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function P(e){e.parentNode&&e.parentNode.removeChild(e)}function _e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function A(e){return document.createElement(e)}function G(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function q(e){return document.createTextNode(e)}function N(){return q(" ")}function Se(){return q("")}function x(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function qu(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Hu(e){return function(t){t.target===this&&e.call(this,t)}}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Gu(e){return Array.from(e.childNodes)}function Bu(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function ju(e,t,n,l,o=!1){Bu(e);const r=(()=>{for(let s=e.claim_info.last_index;s<e.length;s++){const u=e[s];if(t(u)){const a=n(u);return a===void 0?e.splice(s,1):e[s]=a,o||(e.claim_info.last_index=s),u}}for(let s=e.claim_info.last_index-1;s>=0;s--){const u=e[s];if(t(u)){const a=n(u);return a===void 0?e.splice(s,1):e[s]=a,o?a===void 0&&e.claim_info.last_index--:e.claim_info.last_index=s,u}}return l()})();return r.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,r}function xu(e,t){return ju(e,n=>n.nodeType===3,n=>{const l=""+t;if(n.data.startsWith(l)){if(n.data.length!==l.length)return n.splitText(l.length)}else n.data=l},()=>q(t),!0)}function K(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ye(e,t){e.value=t??""}function Ae(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function ll(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ra(e){const t=e.querySelector(":checked");return t&&t.__value}let zn;function Uu(){if(zn===void 0){zn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{zn=!0}}return zn}function ut(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const l=A("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const o=Uu();let r;return o?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=x(window,"message",s=>{s.source===l.contentWindow&&t()})):(l.src="about:blank",l.onload=()=>{r=x(l.contentWindow,"resize",t),t()}),b(e,l),()=>{(o||r&&l.contentWindow)&&r(),P(l)}}function Pt(e,t,n){e.classList[n?"add":"remove"](t)}function Wu(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,l,t),o}function Rt(e,t){return new e(t)}const ol=new Map;let il=0;function Xu(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Yu(e,t){const n={stylesheet:Ou(t),rules:{}};return ol.set(e,n),n}function Ko(e,t,n,l,o,r,s,u=0){const a=16.666/l;let f=`{
`;for(let v=0;v<=1;v+=a){const y=t+(n-t)*r(v);f+=v*100+`%{${s(y,1-y)}}
`}const c=f+`100% {${s(n,1-n)}}
}`,d=`__svelte_${Xu(c)}_${u}`,g=ia(e),{stylesheet:p,rules:m}=ol.get(g)||Yu(g,e);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${c}`,p.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${d} ${l}ms linear ${o}ms 1 both`,il+=1,d}function Qu(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),o=n.length-l.length;o&&(e.style.animation=l.join(", "),il-=o,il||Ku())}function Ku(){Mo(()=>{il||(ol.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&P(t)}),ol.clear())})}let Zt;function Ot(e){Zt=e}function Ju(){if(!Zt)throw new Error("Function called outside component initialization");return Zt}function ft(e){Ju().$$.on_mount.push(e)}function Zu(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const xt=[],et=[];let Yt=[];const Zl=[],ef=Promise.resolve();let eo=!1;function tf(){eo||(eo=!0,ef.then(sa))}function Me(e){Yt.push(e)}function $n(e){Zl.push(e)}const El=new Set;let Ht=0;function sa(){if(Ht!==0)return;const e=Zt;do{try{for(;Ht<xt.length;){const t=xt[Ht];Ht++,Ot(t),nf(t.$$)}}catch(t){throw xt.length=0,Ht=0,t}for(Ot(null),xt.length=0,Ht=0;et.length;)et.pop()();for(let t=0;t<Yt.length;t+=1){const n=Yt[t];El.has(n)||(El.add(n),n())}Yt.length=0}while(xt.length);for(;Zl.length;)Zl.pop()();eo=!1,El.clear(),Ot(e)}function nf(e){if(e.fragment!==null){e.update(),be(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Me)}}function lf(e){const t=[],n=[];Yt.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),Yt=t}let sn;function of(){return sn||(sn=Promise.resolve(),sn.then(()=>{sn=null})),sn}function Fl(e,t,n){e.dispatchEvent(Wu(`${t?"intro":"outro"}${n}`))}const Qn=new Set;let dt;function we(){dt={r:0,c:[],p:dt}}function ye(){dt.r||be(dt.c),dt=dt.p}function V(e,t){e&&e.i&&(Qn.delete(e),e.i(t))}function z(e,t,n,l){if(e&&e.o){if(Qn.has(e))return;Qn.add(e),dt.c.push(()=>{Qn.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const rf={duration:0};function lt(e,t,n,l){const o={direction:"both"};let r=t(e,n,o),s=l?0:1,u=null,a=null,f=null;function c(){f&&Qu(e,f)}function d(p,m){const _=p.b-s;return m*=Math.abs(_),{a:s,b:p.b,d:_,duration:m,start:p.start,end:p.start+m,group:p.group}}function g(p){const{delay:m=0,duration:_=300,easing:v=Js,tick:y=U,css:w}=r||rf,S={start:na()+m,b:p};p||(S.group=dt,dt.r+=1),u||a?a=S:(w&&(c(),f=Ko(e,s,p,_,m,v,w)),p&&y(0,1),u=d(S,_),Me(()=>Fl(e,p,"start")),oa(M=>{if(a&&M>a.start&&(u=d(a,_),a=null,Fl(e,u.b,"start"),w&&(c(),f=Ko(e,s,u.b,u.duration,0,v,r.css))),u){if(M>=u.end)y(s=u.b,1-s),Fl(e,u.b,"end"),a||(u.b?c():--u.group.r||be(u.group.c)),u=null;else if(M>=u.start){const $=M-u.start;s=u.a+u.d*v($/u.duration),y(s,1-s)}}return!!(u||a)}))}return{run(p){Ge(r)?of().then(()=>{r=r(o),g(p)}):g(p)},end(){c(),u=a=null}}}function zt(e,t){e.d(1),t.delete(e.key)}function aa(e,t){z(e,1,1,()=>{t.delete(e.key)})}function gt(e,t,n,l,o,r,s,u,a,f,c,d){let g=e.length,p=r.length,m=g;const _={};for(;m--;)_[e[m].key]=m;const v=[],y=new Map,w=new Map,S=[];for(m=p;m--;){const C=d(o,r,m),R=n(C);let k=s.get(R);k?l&&S.push(()=>k.p(C,t)):(k=f(R,C),k.c()),y.set(R,v[m]=k),R in _&&w.set(R,Math.abs(m-_[R]))}const M=new Set,$=new Set;function F(C){V(C,1),C.m(u,c),s.set(C.key,C),c=C.first,p--}for(;g&&p;){const C=v[p-1],R=e[g-1],k=C.key,E=R.key;C===R?(c=C.first,g--,p--):y.has(E)?!s.has(k)||M.has(k)?F(C):$.has(E)?g--:w.get(k)>w.get(E)?($.add(k),F(C)):(M.add(E),g--):(a(R,s),g--)}for(;g--;){const C=e[g];y.has(C.key)||a(C,s)}for(;p;)F(v[p-1]);return be(S),v}function ua(e,t){const n={},l={},o={$$scope:1};let r=e.length;for(;r--;){const s=e[r],u=t[r];if(u){for(const a in s)a in u||(l[a]=1);for(const a in u)o[a]||(n[a]=u[a],o[a]=1);e[r]=u}else for(const a in s)o[a]=1}for(const s in l)s in n||(n[s]=void 0);return n}function fa(e){return typeof e=="object"&&e!==null?e:{}}const sf=/[&"]/g,af=/[&<]/g;function uf(e,t=!1){const n=String(e),l=t?sf:af;l.lastIndex=0;let o="",r=0;for(;l.test(n);){const s=l.lastIndex-1,u=n[s];o+=n.substring(r,s)+(u==="&"?"&amp;":u==='"'?"&quot;":"&lt;"),r=s+1}return o+n.substring(r)}function ff(e,t){if(!e||!e.$$render)throw t==="svelte:component"&&(t+=" this={...}"),new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${t}>.`);return e}let Dl;function ca(e){function t(n,l,o,r,s){const u=Zt,a={on_destroy:Dl,context:new Map(s||(u?u.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:Jl()};Ot({$$:a});const f=e(n,l,o,r);return Ot(u),f}return{render:(n={},{$$slots:l={},context:o=new Map}={})=>{Dl=[];const r={title:"",head:"",css:new Set},s=t(r,n,{},l,o);return be(Dl),{html:s,css:{code:Array.from(r.css).map(u=>u.code).join(`
`),map:null},head:r.title+r.head}},$$render:t}}function Rn(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function ne(e){e&&e.c()}function cf(e,t){e&&e.l(t)}function ee(e,t,n,l){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),l||Me(()=>{const s=e.$$.on_mount.map(Zs).filter(Ge);e.$$.on_destroy?e.$$.on_destroy.push(...s):be(s),e.$$.on_mount=[]}),r.forEach(Me)}function te(e,t){const n=e.$$;n.fragment!==null&&(lf(n.after_update),be(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function df(e,t){e.$$.dirty[0]===-1&&(xt.push(e),tf(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function de(e,t,n,l,o,r,s,u=[-1]){const a=Zt;Ot(e);const f=e.$$={fragment:null,ctx:[],props:r,update:U,not_equal:o,bound:Jl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Jl(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};s&&s(f.root);let c=!1;if(f.ctx=n?n(e,t.props||{},(d,g,...p)=>{const m=p.length?p[0]:g;return f.ctx&&o(f.ctx[d],f.ctx[d]=m)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](m),c&&df(e,d)),g}):[],f.update(),c=!0,be(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){Iu();const d=Gu(t.target);f.fragment&&f.fragment.l(d),d.forEach(P)}else f.fragment&&f.fragment.c();t.intro&&V(e.$$.fragment),ee(e,t.target,t.anchor,t.customElement),Nu(),sa()}Ot(a)}class ce{$destroy(){te(this,1),this.$destroy=U}$on(t,n){if(!Ge(n))return U;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!Fu(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Gt=[];function to(e,t){return{subscribe:De(e,t).subscribe}}function De(e,t=U){let n;const l=new Set;function o(u){if(fe(e,u)&&(e=u,n)){const a=!Gt.length;for(const f of l)f[1](),Gt.push(f,e);if(a){for(let f=0;f<Gt.length;f+=2)Gt[f][0](Gt[f+1]);Gt.length=0}}}function r(u){o(u(e))}function s(u,a=U){const f=[u,a];return l.add(f),l.size===1&&(n=t(o)||U),u(e),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:s}}function hf(e,t,n){const l=!Array.isArray(e),o=l?[e]:e,r=t.length<2;return to(n,s=>{let u=!1;const a=[];let f=0,c=U;const d=()=>{if(f)return;c();const p=t(l?a[0]:a,s);r?s(p):c=Ge(p)?p:U},g=o.map((p,m)=>$l(p,_=>{a[m]=_,f&=~(1<<m),u&&d()},()=>{f|=1<<m}));return u=!0,d(),function(){be(g),c(),u=!1}})}function Eo(e){const t=e-1;return t*t*t+1}function Jo(e){return Object.prototype.toString.call(e)==="[object Date]"}function no(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const l=t.map((o,r)=>no(e[r],o));return o=>l.map(r=>r(o))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Jo(e)&&Jo(t)){e=e.getTime(),t=t.getTime();const r=t-e;return s=>new Date(e+s*r)}const l=Object.keys(t),o={};return l.forEach(r=>{o[r]=no(e[r],t[r])}),r=>{const s={};return l.forEach(u=>{s[u]=o[u](r)}),s}}if(n==="number"){const l=t-e;return o=>e+o*l}throw new Error(`Cannot interpolate ${n} values`)}function Fo(e,t={}){const n=De(e);let l,o=e;function r(s,u){if(e==null)return n.set(e=s),Promise.resolve();o=s;let a=l,f=!1,{delay:c=0,duration:d=400,easing:g=Js,interpolate:p=no}=Sn(Sn({},t),u);if(d===0)return a&&(a.abort(),a=null),n.set(e=o),Promise.resolve();const m=na()+c;let _;return l=oa(v=>{if(v<m)return!0;f||(_=p(e,s),typeof d=="function"&&(d=d(e,s)),f=!0),a&&(a.abort(),a=null);const y=v-m;return y>d?(n.set(e=s),!1):(n.set(e=_(g(y/d))),!0)}),l.promise}return{set:r,update:(s,u)=>r(s(o,e),u),subscribe:n.subscribe}}const qe=De([]),Il=De([]),an=De([]),An=De([]),st=De("all"),Zo=De({"n/a":1,up:1,down:1}),gf=["who","what","how","why","where","does","can","n/a"],lo=Fo(gf.map(e=>({question:e,count:0}))),oo=De(new Set);var io="http://www.w3.org/1999/xhtml";const ei={svg:"http://www.w3.org/2000/svg",xhtml:io,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function da(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ei.hasOwnProperty(t)?{space:ei[t],local:e}:e}function pf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===io&&t.documentElement.namespaceURI===io?t.createElement(e):t.createElementNS(n,e)}}function mf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ha(e){var t=da(e);return(t.local?mf:pf)(t)}function _f(){}function ga(e){return e==null?_f:function(){return this.querySelector(e)}}function vf(e){typeof e!="function"&&(e=ga(e));for(var t=this._groups,n=t.length,l=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,u=l[o]=new Array(s),a,f,c=0;c<s;++c)(a=r[c])&&(f=e.call(a,a.__data__,c,r))&&("__data__"in a&&(f.__data__=a.__data__),u[c]=f);return new Be(l,this._parents)}function pa(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function bf(){return[]}function wf(e){return e==null?bf:function(){return this.querySelectorAll(e)}}function yf(e){return function(){return pa(e.apply(this,arguments))}}function kf(e){typeof e=="function"?e=yf(e):e=wf(e);for(var t=this._groups,n=t.length,l=[],o=[],r=0;r<n;++r)for(var s=t[r],u=s.length,a,f=0;f<u;++f)(a=s[f])&&(l.push(e.call(a,a.__data__,f,s)),o.push(a));return new Be(l,o)}function Sf(e){return function(){return this.matches(e)}}function ma(e){return function(t){return t.matches(e)}}var Cf=Array.prototype.find;function $f(e){return function(){return Cf.call(this.children,e)}}function Rf(){return this.firstElementChild}function Af(e){return this.select(e==null?Rf:$f(typeof e=="function"?e:ma(e)))}var Mf=Array.prototype.filter;function Ef(){return Array.from(this.children)}function Ff(e){return function(){return Mf.call(this.children,e)}}function Df(e){return this.selectAll(e==null?Ef:Ff(typeof e=="function"?e:ma(e)))}function If(e){typeof e!="function"&&(e=Sf(e));for(var t=this._groups,n=t.length,l=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,u=l[o]=[],a,f=0;f<s;++f)(a=r[f])&&e.call(a,a.__data__,f,r)&&u.push(a);return new Be(l,this._parents)}function _a(e){return new Array(e.length)}function Nf(){return new Be(this._enter||this._groups.map(_a),this._parents)}function rl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}rl.prototype={constructor:rl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Pf(e){return function(){return e}}function Tf(e,t,n,l,o,r){for(var s=0,u,a=t.length,f=r.length;s<f;++s)(u=t[s])?(u.__data__=r[s],l[s]=u):n[s]=new rl(e,r[s]);for(;s<a;++s)(u=t[s])&&(o[s]=u)}function Of(e,t,n,l,o,r,s){var u,a,f=new Map,c=t.length,d=r.length,g=new Array(c),p;for(u=0;u<c;++u)(a=t[u])&&(g[u]=p=s.call(a,a.__data__,u,t)+"",f.has(p)?o[u]=a:f.set(p,a));for(u=0;u<d;++u)p=s.call(e,r[u],u,r)+"",(a=f.get(p))?(l[u]=a,a.__data__=r[u],f.delete(p)):n[u]=new rl(e,r[u]);for(u=0;u<c;++u)(a=t[u])&&f.get(g[u])===a&&(o[u]=a)}function Vf(e){return e.__data__}function zf(e,t){if(!arguments.length)return Array.from(this,Vf);var n=t?Of:Tf,l=this._parents,o=this._groups;typeof e!="function"&&(e=Pf(e));for(var r=o.length,s=new Array(r),u=new Array(r),a=new Array(r),f=0;f<r;++f){var c=l[f],d=o[f],g=d.length,p=Lf(e.call(c,c&&c.__data__,f,l)),m=p.length,_=u[f]=new Array(m),v=s[f]=new Array(m),y=a[f]=new Array(g);n(c,d,_,v,y,p,t);for(var w=0,S=0,M,$;w<m;++w)if(M=_[w]){for(w>=S&&(S=w+1);!($=v[S])&&++S<m;);M._next=$||null}}return s=new Be(s,l),s._enter=u,s._exit=a,s}function Lf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qf(){return new Be(this._exit||this._groups.map(_a),this._parents)}function Hf(e,t,n){var l=this.enter(),o=this,r=this.exit();return typeof e=="function"?(l=e(l),l&&(l=l.selection())):l=l.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?r.remove():n(r),l&&o?l.merge(o).order():o}function Gf(e){for(var t=e.selection?e.selection():e,n=this._groups,l=t._groups,o=n.length,r=l.length,s=Math.min(o,r),u=new Array(o),a=0;a<s;++a)for(var f=n[a],c=l[a],d=f.length,g=u[a]=new Array(d),p,m=0;m<d;++m)(p=f[m]||c[m])&&(g[m]=p);for(;a<o;++a)u[a]=n[a];return new Be(u,this._parents)}function Bf(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var l=e[t],o=l.length-1,r=l[o],s;--o>=0;)(s=l[o])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function jf(e){e||(e=xf);function t(d,g){return d&&g?e(d.__data__,g.__data__):!d-!g}for(var n=this._groups,l=n.length,o=new Array(l),r=0;r<l;++r){for(var s=n[r],u=s.length,a=o[r]=new Array(u),f,c=0;c<u;++c)(f=s[c])&&(a[c]=f);a.sort(t)}return new Be(o,this._parents).order()}function xf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Uf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Wf(){return Array.from(this)}function Xf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],o=0,r=l.length;o<r;++o){var s=l[o];if(s)return s}return null}function Yf(){let e=0;for(const t of this)++e;return e}function Qf(){return!this.node()}function Kf(e){for(var t=this._groups,n=0,l=t.length;n<l;++n)for(var o=t[n],r=0,s=o.length,u;r<s;++r)(u=o[r])&&e.call(u,u.__data__,r,o);return this}function Jf(e){return function(){this.removeAttribute(e)}}function Zf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ec(e,t){return function(){this.setAttribute(e,t)}}function tc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function oc(e,t){var n=da(e);if(arguments.length<2){var l=this.node();return n.local?l.getAttributeNS(n.space,n.local):l.getAttribute(n)}return this.each((t==null?n.local?Zf:Jf:typeof t=="function"?n.local?lc:nc:n.local?tc:ec)(n,t))}function va(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ic(e){return function(){this.style.removeProperty(e)}}function rc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function sc(e,t,n){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,n)}}function ac(e,t,n){return arguments.length>1?this.each((t==null?ic:typeof t=="function"?sc:rc)(e,t,n??"")):uc(this.node(),e)}function uc(e,t){return e.style.getPropertyValue(t)||va(e).getComputedStyle(e,null).getPropertyValue(t)}function fc(e){return function(){delete this[e]}}function cc(e,t){return function(){this[e]=t}}function dc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function hc(e,t){return arguments.length>1?this.each((t==null?fc:typeof t=="function"?dc:cc)(e,t)):this.node()[e]}function ba(e){return e.trim().split(/^|\s+/)}function Do(e){return e.classList||new wa(e)}function wa(e){this._node=e,this._names=ba(e.getAttribute("class")||"")}wa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ya(e,t){for(var n=Do(e),l=-1,o=t.length;++l<o;)n.add(t[l])}function ka(e,t){for(var n=Do(e),l=-1,o=t.length;++l<o;)n.remove(t[l])}function gc(e){return function(){ya(this,e)}}function pc(e){return function(){ka(this,e)}}function mc(e,t){return function(){(t.apply(this,arguments)?ya:ka)(this,e)}}function _c(e,t){var n=ba(e+"");if(arguments.length<2){for(var l=Do(this.node()),o=-1,r=n.length;++o<r;)if(!l.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?mc:t?gc:pc)(n,t))}function vc(){this.textContent=""}function bc(e){return function(){this.textContent=e}}function wc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function yc(e){return arguments.length?this.each(e==null?vc:(typeof e=="function"?wc:bc)(e)):this.node().textContent}function kc(){this.innerHTML=""}function Sc(e){return function(){this.innerHTML=e}}function Cc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function $c(e){return arguments.length?this.each(e==null?kc:(typeof e=="function"?Cc:Sc)(e)):this.node().innerHTML}function Rc(){this.nextSibling&&this.parentNode.appendChild(this)}function Ac(){return this.each(Rc)}function Mc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ec(){return this.each(Mc)}function Fc(e){var t=typeof e=="function"?e:ha(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Dc(){return null}function Ic(e,t){var n=typeof e=="function"?e:ha(e),l=t==null?Dc:typeof t=="function"?t:ga(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),l.apply(this,arguments)||null)})}function Nc(){var e=this.parentNode;e&&e.removeChild(this)}function Pc(){return this.each(Nc)}function Tc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Oc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vc(e){return this.select(e?Oc:Tc)}function zc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Lc(e){return function(t){e.call(this,t,this.__data__)}}function qc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",l=t.indexOf(".");return l>=0&&(n=t.slice(l+1),t=t.slice(0,l)),{type:t,name:n}})}function Hc(e){return function(){var t=this.__on;if(t){for(var n=0,l=-1,o=t.length,r;n<o;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++l]=r;++l?t.length=l:delete this.__on}}}function Gc(e,t,n){return function(){var l=this.__on,o,r=Lc(t);if(l){for(var s=0,u=l.length;s<u;++s)if((o=l[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),o.value=t;return}}this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},l?l.push(o):this.__on=[o]}}function Bc(e,t,n){var l=qc(e+""),o,r=l.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var a=0,f=u.length,c;a<f;++a)for(o=0,c=u[a];o<r;++o)if((s=l[o]).type===c.type&&s.name===c.name)return c.value}return}for(u=t?Gc:Hc,o=0;o<r;++o)this.each(u(l[o],t,n));return this}function Sa(e,t,n){var l=va(e),o=l.CustomEvent;typeof o=="function"?o=new o(t,n):(o=l.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function jc(e,t){return function(){return Sa(this,e,t)}}function xc(e,t){return function(){return Sa(this,e,t.apply(this,arguments))}}function Uc(e,t){return this.each((typeof t=="function"?xc:jc)(e,t))}function*Wc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],o=0,r=l.length,s;o<r;++o)(s=l[o])&&(yield s)}var Ca=[null];function Be(e,t){this._groups=e,this._parents=t}function Xc(){return this}Be.prototype={constructor:Be,select:vf,selectAll:kf,selectChild:Af,selectChildren:Df,filter:If,data:zf,enter:Nf,exit:qf,join:Hf,merge:Gf,selection:Xc,order:Bf,sort:jf,call:Uf,nodes:Wf,node:Xf,size:Yf,empty:Qf,each:Kf,attr:oc,style:ac,property:hc,classed:_c,text:yc,html:$c,raise:Ac,lower:Ec,append:Fc,insert:Ic,remove:Pc,clone:Vc,datum:zc,on:Bc,dispatch:Uc,[Symbol.iterator]:Wc};function pt(e){return typeof e=="string"?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],Ca)}function Nl(e){return typeof e=="string"?new Be([document.querySelectorAll(e)],[document.documentElement]):new Be([pa(e)],Ca)}const Yc=e=>({}),ti=e=>({});function Qc(e){let t,n,l,o,r,s,u,a,f;const c=e[4].header,d=Uo(c,e,e[3],ti),g=e[4].default,p=Uo(g,e,e[3],null);return{c(){t=A("dialog"),n=A("div"),l=A("div"),o=A("button"),o.textContent="X",r=N(),d&&d.c(),s=N(),p&&p.c(),h(o,"class","close-button svelte-g384pz"),h(l,"class","btn-container svelte-g384pz"),h(n,"class","svelte-g384pz"),h(t,"class","svelte-g384pz")},m(m,_){T(m,t,_),b(t,n),b(n,l),b(l,o),b(n,r),d&&d.m(n,null),b(n,s),p&&p.m(n,null),e[6](t),u=!0,a||(f=[x(o,"click",function(){Ge(e[1])&&e[1].apply(this,arguments)}),x(n,"click",qu(e[5])),x(t,"close",function(){Ge(e[1])&&e[1].apply(this,arguments)}),x(t,"click",Hu(function(){Ge(e[1])&&e[1].apply(this,arguments)}))],a=!0)},p(m,[_]){e=m,d&&d.p&&(!u||_&8)&&Xo(d,c,e,e[3],u?Wo(c,e[3],_,Yc):Yo(e[3]),ti),p&&p.p&&(!u||_&8)&&Xo(p,g,e,e[3],u?Wo(g,e[3],_,null):Yo(e[3]),null)},i(m){u||(V(d,m),V(p,m),u=!0)},o(m){z(d,m),z(p,m),u=!1},d(m){m&&P(t),d&&d.d(m),p&&p.d(m),e[6](null),a=!1,be(f)}}}function Kc(e,t,n){let{$$slots:l={},$$scope:o}=t,{showModal:r}=t,{dialog:s}=t,{handleClose:u}=t;function a(c){Zu.call(this,e,c)}function f(c){et[c?"unshift":"push"](()=>{s=c,n(0,s)})}return e.$$set=c=>{"showModal"in c&&n(2,r=c.showModal),"dialog"in c&&n(0,s=c.dialog),"handleClose"in c&&n(1,u=c.handleClose),"$$scope"in c&&n(3,o=c.$$scope)},e.$$.update=()=>{e.$$.dirty&5&&s&&r&&s.showModal()},[s,u,r,o,l,a,f]}class Jc extends ce{constructor(t){super(),de(this,t,Kc,Qc,fe,{showModal:2,dialog:0,handleClose:1})}}function ni(e){let t,n,l,o,r,s,u,a,f;return{c(){t=A("form"),n=A("div"),l=A("label"),l.textContent="Filename",o=N(),r=A("input"),s=N(),u=A("div"),u.innerHTML='<button type="submit">Download</button>',h(l,"for","file_name"),h(l,"class","svelte-sy2m0x"),h(r,"type","text"),h(r,"placeholder","Please enter filename"),h(r,"name","file_name"),r.required=!0,h(n,"class","inputs svelte-sy2m0x"),h(u,"class","btn-container svelte-sy2m0x")},m(c,d){T(c,t,d),b(t,n),b(n,l),b(n,o),b(n,r),Ye(r,e[2]),b(t,s),b(t,u),a||(f=[x(r,"input",e[9]),x(t,"submit",e[6])],a=!0)},p(c,d){d&4&&r.value!==c[2]&&Ye(r,c[2])},d(c){c&&P(t),a=!1,be(f)}}}function li(e){let t,n,l,o,r,s,u,a,f;return{c(){t=A("div"),n=q("✅ Data downloaded to /pykoi/"),l=q(e[2]),o=q(".csv"),r=N(),s=A("div"),u=A("button"),u.textContent="Close",h(s,"class","btn-container svelte-sy2m0x")},m(c,d){T(c,t,d),b(t,n),b(t,l),b(t,o),T(c,r,d),T(c,s,d),b(s,u),a||(f=x(u,"click",e[7]),a=!0)},p(c,d){d&4&&K(l,c[2])},d(c){c&&P(t),c&&P(r),c&&P(s),a=!1,f()}}}function oi(e){let t,n,l,o,r,s,u,a;return{c(){t=A("div"),t.textContent="⚠️ Download failed. Please try again.",n=N(),l=A("div"),o=A("button"),o.textContent="Retry",r=N(),s=A("button"),s.textContent="Close",h(l,"class","btn-container svelte-sy2m0x")},m(f,c){T(f,t,c),T(f,n,c),T(f,l,c),b(l,o),b(l,r),b(l,s),u||(a=[x(o,"click",e[10]),x(s,"click",e[7])],u=!0)},p:U,d(f){f&&P(t),f&&P(n),f&&P(l),u=!1,be(a)}}}function ii(e){let t,n,l,o,r,s,u,a,f,c,d;return{c(){t=A("div"),n=q("⚠️ "),l=q(e[2]),o=q(".csv already exists. Do you wish to overwrite it?"),r=N(),s=A("div"),u=A("button"),u.textContent="Back",a=N(),f=A("button"),f.textContent="Overwrite",h(s,"class","btn-container svelte-sy2m0x")},m(g,p){T(g,t,p),b(t,n),b(t,l),b(t,o),T(g,r,p),T(g,s,p),b(s,u),b(s,a),b(s,f),c||(d=[x(u,"click",e[11]),x(f,"click",e[12])],c=!0)},p(g,p){p&4&&K(l,g[2])},d(g){g&&P(t),g&&P(r),g&&P(s),c=!1,be(d)}}}function Zc(e){let t,n,l,o,r=e[3]===e[4].FILE_INPUT&&ni(e),s=e[3]===e[4].DOWNLOADED&&li(e),u=e[3]===e[4].FAILED_DOWNLOAD&&oi(e),a=e[3]===e[4].OVERWRITE&&ii(e);return{c(){r&&r.c(),t=N(),s&&s.c(),n=N(),u&&u.c(),l=N(),a&&a.c(),o=Se()},m(f,c){r&&r.m(f,c),T(f,t,c),s&&s.m(f,c),T(f,n,c),u&&u.m(f,c),T(f,l,c),a&&a.m(f,c),T(f,o,c)},p(f,c){f[3]===f[4].FILE_INPUT?r?r.p(f,c):(r=ni(f),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),f[3]===f[4].DOWNLOADED?s?s.p(f,c):(s=li(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),f[3]===f[4].FAILED_DOWNLOAD?u?u.p(f,c):(u=oi(f),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),f[3]===f[4].OVERWRITE?a?a.p(f,c):(a=ii(f),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},d(f){r&&r.d(f),f&&P(t),s&&s.d(f),f&&P(n),u&&u.d(f),f&&P(l),a&&a.d(f),f&&P(o)}}}function ed(e){let t;return{c(){t=A("h4"),t.textContent="Download Data",h(t,"slot","header"),h(t,"class","svelte-sy2m0x")},m(n,l){T(n,t,l)},p:U,d(n){n&&P(t)}}}function td(e){let t,n,l,o;function r(a){e[13](a)}function s(a){e[14](a)}let u={handleClose:e[7],$$slots:{header:[ed],default:[Zc]},$$scope:{ctx:e}};return e[0]!==void 0&&(u.showModal=e[0]),e[1]!==void 0&&(u.dialog=e[1]),t=new Jc({props:u}),et.push(()=>Rn(t,"showModal",r)),et.push(()=>Rn(t,"dialog",s)),{c(){ne(t.$$.fragment)},m(a,f){ee(t,a,f),o=!0},p(a,[f]){const c={};f&32780&&(c.$$scope={dirty:f,ctx:a}),!n&&f&1&&(n=!0,c.showModal=a[0],$n(()=>n=!1)),!l&&f&2&&(l=!0,c.dialog=a[1],$n(()=>l=!1)),t.$set(c)},i(a){o||(V(t.$$.fragment,a),o=!0)},o(a){z(t.$$.fragment,a),o=!1},d(a){te(t,a)}}}function nd(e,t,n){let{showModal:l,table:o}=t,r,s="";const u={FILE_INPUT:0,DOWNLOADED:1,FAILED_DOWNLOAD:2,OVERWRITE:3};let a=u.FILE_INPUT;const f=async w=>{const S={file_name:w},$=await(await fetch(`/chat/${o}/save_to_csv`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).json();console.log("Download Complete: ",$),$.status==="200"?(console.log("success"),n(3,a=u.DOWNLOADED)):(console.log("failed"),n(3,a=u.FAILED_DOWNLOAD))},c=async w=>{w.preventDefault();const M=await(await fetch(`/file_exists/?file_name=${s}.csv`)).json();console.log(M),M.file_exists===!0?n(3,a=u.OVERWRITE):f(s)};function d(){n(0,l=!1),n(3,a=u.FILE_INPUT),r.close()}function g(){s=this.value,n(2,s)}const p=()=>n(3,a=u.FILE_INPUT),m=()=>n(3,a=u.FILE_INPUT),_=()=>f(s);function v(w){l=w,n(0,l)}function y(w){r=w,n(1,r)}return e.$$set=w=>{"showModal"in w&&n(0,l=w.showModal),"table"in w&&n(8,o=w.table)},[l,r,s,a,u,f,c,d,o,g,p,m,_,v,y]}class Io extends ce{constructor(t){super(),de(this,t,nd,td,fe,{showModal:0,table:8})}}function ri(e,t,n){const l=e.slice();return l[19]=t[n],l[21]=n,l}function si(e){let t,n,l,o,r,s;function u(...f){return e[12](e[21],...f)}function a(...f){return e[13](e[21],...f)}return{c(){t=A("div"),n=A("button"),n.textContent="👍",l=N(),o=A("button"),o.textContent="👎",h(n,"class","small-button thumbs-up svelte-19cad35"),h(o,"class","small-button thumbs-down svelte-19cad35"),h(t,"class","feedback-buttons svelte-19cad35")},m(f,c){T(f,t,c),b(t,n),b(t,l),b(t,o),r||(s=[x(n,"click",u),x(o,"click",a)],r=!0)},p(f,c){e=f},d(f){f&&P(t),r=!1,be(s)}}}function ai(e,t){let n,l,o,r,s,u,a,f,c,d=t[19].question+"",g,p,m,_,v,y,w,S=t[19].answer+"",M,$,F,C,R,k,E=t[0]&&si(t);return{key:e,first:null,c(){n=A("div"),l=A("div"),o=A("div"),r=N(),s=A("div"),u=A("div"),a=A("h5"),a.textContent="Question:",f=N(),c=A("p"),g=q(d),p=N(),m=A("div"),_=A("div"),v=A("h5"),v.textContent="Response:",y=N(),w=A("p"),M=q(S),$=N(),E&&E.c(),F=N(),h(o,"class","avatar"),h(a,"class","bold svelte-19cad35"),h(u,"class","question svelte-19cad35"),h(v,"class","bold svelte-19cad35"),h(_,"class","answer svelte-19cad35"),h(m,"class","answers svelte-19cad35"),h(s,"class","message-content svelte-19cad35"),h(l,"class","chat-message-center svelte-19cad35"),h(n,"class","chat-message svelte-19cad35"),this.first=n},m(I,D){T(I,n,D),b(n,l),b(l,o),b(l,r),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,g),b(s,p),b(s,m),b(m,_),b(_,v),b(_,y),b(_,w),b(w,M),b(_,$),E&&E.m(_,null),b(n,F),R||(k=Cn(C=od.call(null,n,t[21]===t[5].length-1)),R=!0)},p(I,D){t=I,D&32&&d!==(d=t[19].question+"")&&K(g,d),D&32&&S!==(S=t[19].answer+"")&&K(M,S),t[0]?E?E.p(t,D):(E=si(t),E.c(),E.m(_,null)):E&&(E.d(1),E=null),C&&Ge(C.update)&&D&32&&C.update.call(null,t[21]===t[5].length-1)},d(I){I&&P(n),E&&E.d(),R=!1,k()}}}function ld(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_=[],v=new Map,y,w,S,M,$,F,C=(e[3]?e[4]:"Send")+"",R,k,E,I,D,L,O;function B(W){e[11](W)}let j={table:"qa_table"};e[1]!==void 0&&(j.showModal=e[1]),t=new Io({props:j}),et.push(()=>Rn(t,"showModal",B));let ae=e[5];const pe=W=>W[21];for(let W=0;W<ae.length;W+=1){let Q=ri(e,ae,W),X=pe(Q);v.set(X,_[W]=ai(X,Q))}return{c(){ne(t.$$.fragment),l=N(),o=A("div"),r=A("div"),s=A("h5"),s.textContent="Vote Feedback Instructions",u=N(),a=A("p"),a.innerHTML=`Ask a question to receive an answer from the chatbot. If the response is
      satisfactory, click on the <span class="inline-button green svelte-19cad35">👍</span>
      button. If the repsonse is not satisfactory, click on the
      <span class="inline-button red svelte-19cad35">👎</span> button.`,f=N(),c=A("button"),c.textContent="Download Data",d=N(),g=A("div"),p=A("section"),m=A("div");for(let W=0;W<_.length;W+=1)_[W].c();y=N(),w=A("div"),S=A("form"),M=A("input"),$=N(),F=A("button"),R=q(C),E=N(),I=A("p"),I.textContent="Note - may produce inaccurate information.",h(s,"class","underline bold svelte-19cad35"),h(a,"class","svelte-19cad35"),h(c,"class","svelte-19cad35"),h(r,"class","instructions svelte-19cad35"),h(m,"class","chat-log svelte-19cad35"),h(p,"class","chatbox svelte-19cad35"),h(M,"class","chat-input-textarea svelte-19cad35"),h(M,"placeholder","Type Question Here"),h(F,"class",k="btnyousend "+(e[2]===""?"":"active")+" svelte-19cad35"),h(F,"type","submit"),h(S,"class","chat-input-form svelte-19cad35"),h(I,"class","message svelte-19cad35"),h(w,"class","chat-input-holder svelte-19cad35"),h(g,"class","ranked-chat svelte-19cad35"),h(o,"class","ranked-feedback-container svelte-19cad35")},m(W,Q){ee(t,W,Q),T(W,l,Q),T(W,o,Q),b(o,r),b(r,s),b(r,u),b(r,a),b(r,f),b(r,c),b(o,d),b(o,g),b(g,p),b(p,m);for(let X=0;X<_.length;X+=1)_[X]&&_[X].m(m,null);b(g,y),b(g,w),b(w,S),b(S,M),Ye(M,e[2]),b(S,$),b(S,F),b(F,R),b(w,E),b(w,I),D=!0,L||(O=[x(c,"click",e[8]),x(M,"input",e[14]),x(S,"submit",e[6])],L=!0)},p(W,[Q]){const X={};!n&&Q&2&&(n=!0,X.showModal=W[1],$n(()=>n=!1)),t.$set(X),Q&161&&(ae=W[5],_=gt(_,Q,pe,1,W,ae,v,m,zt,ai,null,ri)),Q&4&&M.value!==W[2]&&Ye(M,W[2]),(!D||Q&24)&&C!==(C=(W[3]?W[4]:"Send")+"")&&K(R,C),(!D||Q&4&&k!==(k="btnyousend "+(W[2]===""?"":"active")+" svelte-19cad35"))&&h(F,"class",k)},i(W){D||(V(t.$$.fragment,W),D=!0)},o(W){z(t.$$.fragment,W),D=!1},d(W){te(t,W),W&&P(l),W&&P(o);for(let Q=0;Q<_.length;Q+=1)_[Q].d();L=!1,be(O)}}}function od(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function id(e){const t=await fetch("/chat/qa_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function rd(e,t,n){let l,o;ue(e,qe,M=>n(5,o=M));let r=!1,{feedback:s=!1}=t,{is_retrieval:u=!1}=t,a="",f="",c=!1;ft(()=>{d()});async function d(){const C=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map(R=>({id:R[0],question:R[1],answer:R[2],vote_status:R[3]}));Pe(qe,o=[...C],o)}const g=async M=>{M.preventDefault(),a=f,n(2,f=""),n(3,c=!0);let $={id:o.length+1,question:a,answer:"Loading...",vote_status:"na"};Pe(qe,o=[...o,$],o);const F=u?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})}):await fetch(`/chat/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})});if(F.ok){const C=await F.json();console.log("response data",C),$.answer=C.answer,qe.update(R=>(R[R.length-1]=$,R))}else{const C=await F.text();alert(C)}n(3,c=!1)};let p=0;setInterval(()=>{n(10,p=(p+1)%4)},200);function m(M,$,F){const C=o[F];C.vote=$;const R={id:F+1,vote_status:$};id(R),pt(M.currentTarget.parentNode).selectAll("button").style("border","3px solid transparent").style("opacity",.65),pt(M.currentTarget).style("border","3px solid var(--black)").style("opacity",1)}function _(){n(1,r=!0)}[...Array(10).keys()].map(M=>String.fromCharCode(65+M));function v(M){r=M,n(1,r)}const y=(M,$)=>m($,"up",M),w=(M,$)=>m($,"down",M);function S(){f=this.value,n(2,f)}return e.$$set=M=>{"feedback"in M&&n(0,s=M.feedback),"is_retrieval"in M&&n(9,u=M.is_retrieval)},e.$$.update=()=>{e.$$.dirty&1024&&n(4,l=".".repeat(p).padEnd(3))},[s,r,f,c,l,o,g,m,_,u,p,v,y,w,S]}class No extends ce{constructor(t){super(),de(this,t,rd,ld,fe,{feedback:0,is_retrieval:9})}}function ui(e,t,n){const l=e.slice();return l[14]=t[n],l[16]=n,l}function fi(e,t){let n,l,o,r,s,u,a,f,c,d=t[14].question+"",g,p,m,_,v,y,w,S=t[14].up_ranking_answer+"",M,$,F,C,R,k,E=t[14].low_ranking_answer+"",I,D,L,O,B;function j(...Q){return t[7](t[14],t[16],...Q)}function ae(...Q){return t[8](t[14],t[16],...Q)}function pe(...Q){return t[9](t[14],t[16],...Q)}function W(...Q){return t[10](t[14],t[16],...Q)}return{key:e,first:null,c(){n=A("div"),l=A("div"),o=A("div"),r=N(),s=A("div"),u=A("div"),a=A("h5"),a.textContent="Question:",f=N(),c=A("p"),g=q(d),p=N(),m=A("div"),_=A("div"),v=A("h5"),v.textContent="Response 1:",y=N(),w=A("p"),M=q(S),$=N(),F=A("div"),C=A("h5"),C.textContent="Response 2:",R=N(),k=A("p"),I=q(E),D=N(),h(o,"class","avatar"),h(a,"class","bold svelte-au920n"),h(u,"class","question svelte-au920n"),h(v,"class","bold underline svelte-au920n"),h(_,"class","answer svelte-au920n"),h(C,"class","bold underline svelte-au920n"),h(F,"class","answer svelte-au920n"),h(m,"class","answers svelte-au920n"),h(s,"class","message-content svelte-au920n"),h(l,"class","chat-message-center svelte-au920n"),h(n,"class","chat-message svelte-au920n"),this.first=n},m(Q,X){T(Q,n,X),b(n,l),b(l,o),b(l,r),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,g),b(s,p),b(s,m),b(m,_),b(_,v),b(_,y),b(_,w),b(w,M),b(m,$),b(m,F),b(F,C),b(F,R),b(F,k),b(k,I),b(n,D),O||(B=[x(_,"click",j),x(_,"keydown",ae),x(F,"click",pe),x(F,"keydown",W),Cn(L=ad.call(null,n,t[16]===t[3].length-1))],O=!0)},p(Q,X){t=Q,X&8&&d!==(d=t[14].question+"")&&K(g,d),X&8&&S!==(S=t[14].up_ranking_answer+"")&&K(M,S),X&8&&E!==(E=t[14].low_ranking_answer+"")&&K(I,E),L&&Ge(L.update)&&X&8&&L.update.call(null,t[16]===t[3].length-1)},d(Q){Q&&P(n),O=!1,be(B)}}}function sd(e){let t,n,l,o,r,s,u=[],a=new Map,f,c,d,g,p,m,_=(e[1]?e[2]:"Send")+"",v,y,w,S,M,$,F=e[3];const C=R=>R[16];for(let R=0;R<F.length;R+=1){let k=ui(e,F,R),E=C(k);a.set(E,u[R]=fi(E,k))}return{c(){t=A("div"),n=A("div"),n.innerHTML=`<h5 class="underline bold svelte-au920n">Ranked Feedback Instructions</h5> 
    <p class="svelte-au920n">Ask a question and click on the better of the two responses. The better
      response will be outlined in <span class="green svelte-au920n">green</span>, the worse
      response outlined in <span class="red svelte-au920n">red</span>. This data will be
      automatically fed to RLHF.</p> 
    <button class="svelte-au920n">Download Data</button>`,l=N(),o=A("div"),r=A("section"),s=A("div");for(let R=0;R<u.length;R+=1)u[R].c();f=N(),c=A("div"),d=A("form"),g=A("input"),p=N(),m=A("button"),v=q(_),w=N(),S=A("p"),S.textContent="Note - may produce inaccurate information.",h(n,"class","instructions svelte-au920n"),h(s,"class","chat-log svelte-au920n"),h(r,"class","chatbox svelte-au920n"),h(g,"class","chat-input-textarea svelte-au920n"),h(g,"placeholder","Type Message Here"),h(m,"class",y="btnyousend "+(e[0]===""?"":"active")+" svelte-au920n"),h(m,"type","submit"),h(d,"class","chat-input-form svelte-au920n"),h(S,"class","message svelte-au920n"),h(c,"class","chat-input-holder svelte-au920n"),h(o,"class","ranked-chat svelte-au920n"),h(t,"class","ranked-feedback-container svelte-au920n")},m(R,k){T(R,t,k),b(t,n),b(t,l),b(t,o),b(o,r),b(r,s);for(let E=0;E<u.length;E+=1)u[E]&&u[E].m(s,null);b(o,f),b(o,c),b(c,d),b(d,g),Ye(g,e[0]),b(d,p),b(d,m),b(m,v),b(c,w),b(c,S),M||($=[x(g,"input",e[11]),x(d,"submit",e[4])],M=!0)},p(R,[k]){k&40&&(F=R[3],u=gt(u,k,C,1,R,F,a,s,zt,fi,null,ui)),k&1&&g.value!==R[0]&&Ye(g,R[0]),k&6&&_!==(_=(R[1]?R[2]:"Send")+"")&&K(v,_),k&1&&y!==(y="btnyousend "+(R[0]===""?"":"active")+" svelte-au920n")&&h(m,"class",y)},i:U,o:U,d(R){R&&P(t);for(let k=0;k<u.length;k+=1)u[k].d();M=!1,be($)}}}function ad(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function ud(e){const t=await fetch("/chat/ranking_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function fd(e,t,n){let l,o;ue(e,Il,v=>n(3,o=v));let r="",s="",u=!1;ft(()=>{});const a=async v=>{v.preventDefault(),r=s,n(0,s=""),n(1,u=!0);let y={question:r,up_ranking_answer:"Loading...",low_ranking_answer:"Loading..."};Pe(Il,o=[...o,y],o);const w=await fetch(`/chat/multi_responses/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r})});if(w.ok){const S=await w.json();y.up_ranking_answer=S.answer[0],y.low_ranking_answer=S.answer[1],Il.update(M=>(M[M.length-1]=y,M))}else{const S=await w.text();alert(S)}n(1,u=!1)};let f=0;setInterval(()=>{n(6,f=(f+1)%4)},200);function c(v,y,w,S){const M=o[w],$={1:"up_ranking_answer",2:"low_ranking_answer"},F={question:M.question,up_ranking_answer:M[$[S]],low_ranking_answer:M[$[S%2+1]]};ud(F),pt(v.currentTarget.parentNode).selectAll("div").style("outline","2px solid var(--red)").style("border","1px solid var(--red)"),pt(v.currentTarget).style("outline","2px solid var(--green)").style("border","1px solid var(--green)")}const d=(v,y,w)=>c(w,v,y,1),g=(v,y,w)=>c(w,v,y,1),p=(v,y,w)=>c(w,v,y,2),m=(v,y,w)=>c(w,v,y,2);function _(){s=this.value,n(0,s)}return e.$$.update=()=>{e.$$.dirty&64&&n(2,l=".".repeat(f).padEnd(3))},[s,u,l,o,a,c,f,d,g,p,m,_]}class cd extends ce{constructor(t){super(),de(this,t,fd,sd,fe,{})}}function ci(e,t,n){const l=e.slice();return l[8]=t[n],l[10]=n,l}function di(e){let t,n,l,o,r=e[8].name+"",s,u,a,f,c;function d(...g){return e[6](e[8],...g)}return{c(){t=A("label"),n=A("input"),s=q(r),u=N(),h(n,"type","checkbox"),h(n,"id",l=e[8].id),n.checked=o=e[1].has(e[8].name),h(t,"for",a=e[8].id)},m(g,p){T(g,t,p),b(t,n),b(t,s),b(t,u),f||(c=x(n,"change",d),f=!0)},p(g,p){e=g,p&1&&l!==(l=e[8].id)&&h(n,"id",l),p&3&&o!==(o=e[1].has(e[8].name))&&(n.checked=o),p&1&&r!==(r=e[8].name+"")&&K(s,r),p&1&&a!==(a=e[8].id)&&h(t,"for",a)},d(g){g&&P(t),f=!1,c()}}}function dd(e){let t,n,l,o,r,s,u,a,f,c,d,g=e[0],p=[];for(let m=0;m<g.length;m+=1)p[m]=di(ci(e,g,m));return{c(){t=A("form"),n=A("div"),l=A("div"),o=A("select"),r=A("option"),r.textContent="Documents",s=N(),u=A("div"),a=N(),f=A("div");for(let m=0;m<p.length;m+=1)p[m].c();r.__value="Documents",r.value=r.__value,h(o,"class","svelte-8o2wf2"),h(u,"class","overSelect svelte-8o2wf2"),h(l,"class","selectBox svelte-8o2wf2"),h(f,"class","dropdown-content svelte-8o2wf2"),Ae(f,"display",e[2]?"block":"none"),h(n,"class","multiselect svelte-8o2wf2")},m(m,_){T(m,t,_),b(t,n),b(n,l),b(l,o),b(o,r),b(l,s),b(l,u),b(n,a),b(n,f);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(f,null);e[7](f),c||(d=x(l,"click",e[4]),c=!0)},p(m,[_]){if(_&35){g=m[0];let v;for(v=0;v<g.length;v+=1){const y=ci(m,g,v);p[v]?p[v].p(y,_):(p[v]=di(y),p[v].c(),p[v].m(f,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=g.length}_&4&&Ae(f,"display",m[2]?"block":"none")},i:U,o:U,d(m){m&&P(t),_e(p,m),e[7](null),c=!1,d()}}}function hd(e,t,n){let l;ue(e,oo,d=>n(1,l=d));let{documents:o=[]}=t,r=!1,s;function u(){n(2,r=!r)}function a(d,g){g.target.checked?l.add(d):l.delete(d),oo.set(new Set(l))}const f=(d,g)=>a(d.name,g);function c(d){et[d?"unshift":"push"](()=>{s=d,n(3,s)})}return e.$$set=d=>{"documents"in d&&n(0,o=d.documents)},e.$$.update=()=>{e.$$.dirty&2&&console.log(l)},[o,l,r,s,u,a,f,c]}let gd=class extends ce{constructor(t){super(),de(this,t,hd,dd,fe,{documents:0})}};function ro(e,t=2){if(e===0)return"0 Bytes";const n=1024,l=t<0?0:t,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(l))+" "+o[r]}function pd(e){let t={who:0,what:0,how:0,why:0,where:0,does:0,can:0,"n/a":0};for(let l=0;l<e.length;l++){let o=e[l].question.split(" ")[0].toLowerCase();o in t?t[o]++:t["n/a"]++}return Object.keys(t).map(l=>({question:l,count:t[l]}))}function $a(e){return e.map(t=>{const n=t.question.split(" ").length,l=t.answer.split(" ").length;return{index:t.index,question:+n,answer:+l,vote:t.vote}})}function md(e,t){e.classList.add("tooltip"),e.setAttribute("tabindex",0);function n(){const o=document.createElement("span");o.textContent=t,o.setAttribute("id","tooltip"),e.appendChild(o),e.addEventListener("mouseleave",l),e.addEventListener("blur",l),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}function l(){e.removeChild(e.querySelector("#tooltip")),e.removeEventListener("mouseleave",l),e.removeEventListener("blur",l),e.addEventListener("mouseenter",n),e.addEventListener("focus",n)}return e.addEventListener("mouseenter",n),e.addEventListener("focus",n),{onDestroy(){e.classList.remove("tooltip"),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}}}function Mn(e,{delay:t=0,duration:n=400,easing:l=Eo,axis:o="y"}={}){const r=getComputedStyle(e),s=+r.opacity,u=o==="y"?"height":"width",a=parseFloat(r[u]),f=o==="y"?["top","bottom"]:["left","right"],c=f.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),d=parseFloat(r[`padding${c[0]}`]),g=parseFloat(r[`padding${c[1]}`]),p=parseFloat(r[`margin${c[0]}`]),m=parseFloat(r[`margin${c[1]}`]),_=parseFloat(r[`border${c[0]}Width`]),v=parseFloat(r[`border${c[1]}Width`]);return{delay:t,duration:n,easing:l,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*s};${u}: ${y*a}px;padding-${f[0]}: ${y*d}px;padding-${f[1]}: ${y*g}px;margin-${f[0]}: ${y*p}px;margin-${f[1]}: ${y*m}px;border-${f[0]}-width: ${y*_}px;border-${f[1]}-width: ${y*v}px;`}}function Ln(e,{delay:t=0,duration:n=400,easing:l=Eo,start:o=0,opacity:r=0}={}){const s=getComputedStyle(e),u=+s.opacity,a=s.transform==="none"?"":s.transform,f=1-o,c=u*(1-r);return{delay:t,duration:n,easing:l,css:(d,g)=>`
			transform: ${a} scale(${1-f*g});
			opacity: ${u-c*g}
		`}}function _d(e){let t;return{c(){t=A("p"),t.textContent="⌄",h(t,"class","svelte-1pk2e1k")},m(n,l){T(n,t,l)},d(n){n&&P(t)}}}function vd(e){let t;return{c(){t=A("p"),t.textContent="⌃",h(t,"class","svelte-1pk2e1k")},m(n,l){T(n,t,l)},d(n){n&&P(t)}}}function hi(e){let t,n,l,o,r;return{c(){t=A("div"),n=A("p"),l=q(e[1]),h(n,"class","bold svelte-1pk2e1k"),h(t,"class","source_content svelte-1pk2e1k")},m(s,u){T(s,t,u),b(t,n),b(n,l),r=!0},p(s,u){(!r||u&2)&&K(l,s[1])},i(s){r||(Me(()=>{r&&(o||(o=lt(t,Mn,{},!0)),o.run(1))}),r=!0)},o(s){o||(o=lt(t,Mn,{},!1)),o.run(0),r=!1},d(s){s&&P(t),s&&o&&o.end()}}}function bd(e){let t,n,l,o=e[2]+1+"",r,s,u,a,f,c,d,g,p;function m(w,S){return w[3]?vd:_d}let _=m(e),v=_(e),y=e[3]&&hi(e);return{c(){t=A("div"),n=A("div"),l=A("p"),r=q(o),s=q(": "),u=q(e[0]),a=N(),v.c(),c=N(),y&&y.c(),h(l,"class","bold svelte-1pk2e1k"),h(n,"class","source_tab svelte-1pk2e1k"),h(t,"class","source svelte-1pk2e1k")},m(w,S){T(w,t,S),b(t,n),b(n,l),b(l,r),b(l,s),b(l,u),b(n,a),v.m(n,null),b(t,c),y&&y.m(t,null),d=!0,g||(p=x(n,"click",e[4]),g=!0)},p(w,[S]){(!d||S&4)&&o!==(o=w[2]+1+"")&&K(r,o),(!d||S&1)&&K(u,w[0]),_!==(_=m(w))&&(v.d(1),v=_(w),v&&(v.c(),v.m(n,null))),w[3]?y?(y.p(w,S),S&8&&V(y,1)):(y=hi(w),y.c(),V(y,1),y.m(t,null)):y&&(we(),z(y,1,1,()=>{y=null}),ye())},i(w){d||(Me(()=>{d&&(f||(f=lt(n,Mn,{},!0)),f.run(1))}),V(y),d=!0)},o(w){f||(f=lt(n,Mn,{},!1)),f.run(0),z(y),d=!1},d(w){w&&P(t),v.d(),w&&f&&f.end(),y&&y.d(),g=!1,p()}}}function wd(e,t,n){let{source:l=""}=t,{source_content:o=""}=t,{i:r=0}=t,s=r===0;const u=()=>n(3,s=!s);return e.$$set=a=>{"source"in a&&n(0,l=a.source),"source_content"in a&&n(1,o=a.source_content),"i"in a&&n(2,r=a.i)},[l,o,r,s,u]}class yd extends ce{constructor(t){super(),de(this,t,wd,bd,fe,{source:0,source_content:1,i:2})}}function gi(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function pi(e){let t,n,l,o;const r=[$d,Cd,Sd,kd],s=[];function u(a,f){return a[0][0]==="N/A"?0:a[0][0]==="Loading..."?1:a[0][0]==="Not loaded"?2:3}return t=u(e),n=s[t]=r[t](e),{c(){n.c(),l=Se()},m(a,f){s[t].m(a,f),T(a,l,f),o=!0},p(a,f){let c=t;t=u(a),t===c?s[t].p(a,f):(we(),z(s[c],1,1,()=>{s[c]=null}),ye(),n=s[t],n?n.p(a,f):(n=s[t]=r[t](a),n.c()),V(n,1),n.m(l.parentNode,l))},i(a){o||(V(n),o=!0)},o(a){z(n),o=!1},d(a){s[t].d(a),a&&P(l)}}}function kd(e){let t,n,l,o=e[0].length+"",r,s,u,a,f,c,d,g;function p(y,w){return y[2]?Ad:Rd}let m=p(e),_=m(e),v=e[2]&&mi(e);return{c(){t=A("div"),n=A("h5"),l=q("📖 Response Sources ("),r=q(o),s=q(")"),u=N(),_.c(),a=N(),v&&v.c(),f=Se(),h(n,"class","bold"),h(t,"class","sources-header svelte-1r759df")},m(y,w){T(y,t,w),b(t,n),b(n,l),b(n,r),b(n,s),b(t,u),_.m(t,null),T(y,a,w),v&&v.m(y,w),T(y,f,w),c=!0,d||(g=x(t,"click",e[3]),d=!0)},p(y,w){(!c||w&1)&&o!==(o=y[0].length+"")&&K(r,o),m!==(m=p(y))&&(_.d(1),_=m(y),_&&(_.c(),_.m(t,null))),y[2]?v?(v.p(y,w),w&4&&V(v,1)):(v=mi(y),v.c(),V(v,1),v.m(f.parentNode,f)):v&&(we(),z(v,1,1,()=>{v=null}),ye())},i(y){c||(V(v),c=!0)},o(y){z(v),c=!1},d(y){y&&P(t),_.d(),y&&P(a),v&&v.d(y),y&&P(f),d=!1,g()}}}function Sd(e){let t;return{c(){t=A("h5"),t.textContent="⚠️ No sources loaded",h(t,"class","bold")},m(n,l){T(n,t,l)},p:U,i:U,o:U,d(n){n&&P(t)}}}function Cd(e){let t;return{c(){t=A("h5"),t.textContent="📖 Loading...",h(t,"class","bold")},m(n,l){T(n,t,l)},p:U,i:U,o:U,d(n){n&&P(t)}}}function $d(e){let t;return{c(){t=A("h5"),t.textContent="⚠️ No Retrieval Sources selected",h(t,"class","bold")},m(n,l){T(n,t,l)},p:U,i:U,o:U,d(n){n&&P(t)}}}function Rd(e){let t;return{c(){t=A("span"),t.textContent="⌄"},m(n,l){T(n,t,l)},d(n){n&&P(t)}}}function Ad(e){let t;return{c(){t=A("span"),t.textContent="⌃"},m(n,l){T(n,t,l)},d(n){n&&P(t)}}}function mi(e){let t,n,l=e[0],o=[];for(let s=0;s<l.length;s+=1)o[s]=_i(gi(e,l,s));const r=s=>z(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=Se()},m(s,u){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,u);T(s,t,u),n=!0},p(s,u){if(u&3){l=s[0];let a;for(a=0;a<l.length;a+=1){const f=gi(s,l,a);o[a]?(o[a].p(f,u),V(o[a],1)):(o[a]=_i(f),o[a].c(),V(o[a],1),o[a].m(t.parentNode,t))}for(we(),a=l.length;a<o.length;a+=1)r(a);ye()}},i(s){if(!n){for(let u=0;u<l.length;u+=1)V(o[u]);n=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)z(o[u]);n=!1},d(s){_e(o,s),s&&P(t)}}}function _i(e){let t,n;return t=new yd({props:{source:e[4],source_content:e[1][e[6]],i:e[6]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&1&&(r.source=l[4]),o&2&&(r.source_content=l[1][l[6]]),t.$set(r)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Md(e){let t,n,l=e[0]!==void 0&&pi(e);return{c(){t=A("div"),l&&l.c(),h(t,"class","sources svelte-1r759df")},m(o,r){T(o,t,r),l&&l.m(t,null),n=!0},p(o,[r]){o[0]!==void 0?l?(l.p(o,r),r&1&&V(l,1)):(l=pi(o),l.c(),V(l,1),l.m(t,null)):l&&(we(),z(l,1,1,()=>{l=null}),ye())},i(o){n||(V(l),n=!0)},o(o){z(l),n=!1},d(o){o&&P(t),l&&l.d()}}}function Ed(e,t,n){let{sources:l=[]}=t,{source_content:o=[]}=t,r=!1;const s=()=>n(2,r=!r);return e.$$set=u=>{"sources"in u&&n(0,l=u.sources),"source_content"in u&&n(1,o=u.source_content)},[l,o,r,s]}class Fd extends ce{constructor(t){super(),de(this,t,Ed,Md,fe,{sources:0,source_content:1})}}function vi(e,t,n){const l=e.slice();return l[4]=t[n],l}function bi(e,t,n){const l=e.slice();return l[4]=t[n],l}function wi(e){let t,n,l,o=e[4].label+"",r,s,u,a,f;return{c(){t=A("li"),n=A("span"),l=A("h5"),r=q(o),s=N(),h(l,"class","bold"),h(n,"class","svelte-iwm583"),h(t,"class",u=Qo(e[0]===e[4].value?"active":"")+" svelte-iwm583")},m(c,d){T(c,t,d),b(t,n),b(n,l),b(l,r),b(t,s),a||(f=x(n,"click",function(){Ge(e[3](e[4].value))&&e[3](e[4].value).apply(this,arguments)}),a=!0)},p(c,d){e=c,d&2&&o!==(o=e[4].label+"")&&K(r,o),d&3&&u!==(u=Qo(e[0]===e[4].value?"active":"")+" svelte-iwm583")&&h(t,"class",u)},d(c){c&&P(t),a=!1,f()}}}function yi(e){let t,n,l,o;const r=[e[2]];var s=e[4].component;function u(a){let f={};for(let c=0;c<r.length;c+=1)f=Sn(f,r[c]);return{props:f}}return s&&(n=Rt(s,u())),{c(){t=A("div"),n&&ne(n.$$.fragment),l=N(),h(t,"class","box svelte-iwm583")},m(a,f){T(a,t,f),n&&ee(n,t,null),b(t,l),o=!0},p(a,f){const c=f&4?ua(r,[fa(a[2])]):{};if(f&2&&s!==(s=a[4].component)){if(n){we();const d=n;z(d.$$.fragment,1,0,()=>{te(d,1)}),ye()}s?(n=Rt(s,u()),ne(n.$$.fragment),V(n.$$.fragment,1),ee(n,t,l)):n=null}else s&&n.$set(c)},i(a){o||(n&&V(n.$$.fragment,a),o=!0)},o(a){n&&z(n.$$.fragment,a),o=!1},d(a){a&&P(t),n&&te(n)}}}function ki(e){let t,n,l=e[0]==e[4].value&&yi(e);return{c(){l&&l.c(),t=Se()},m(o,r){l&&l.m(o,r),T(o,t,r),n=!0},p(o,r){o[0]==o[4].value?l?(l.p(o,r),r&3&&V(l,1)):(l=yi(o),l.c(),V(l,1),l.m(t.parentNode,t)):l&&(we(),z(l,1,1,()=>{l=null}),ye())},i(o){n||(V(l),n=!0)},o(o){z(l),n=!1},d(o){l&&l.d(o),o&&P(t)}}}function Dd(e){let t,n,l,o,r=e[1],s=[];for(let c=0;c<r.length;c+=1)s[c]=wi(bi(e,r,c));let u=e[1],a=[];for(let c=0;c<u.length;c+=1)a[c]=ki(vi(e,u,c));const f=c=>z(a[c],1,1,()=>{a[c]=null});return{c(){t=A("ul");for(let c=0;c<s.length;c+=1)s[c].c();n=N();for(let c=0;c<a.length;c+=1)a[c].c();l=Se(),h(t,"class","svelte-iwm583")},m(c,d){T(c,t,d);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(t,null);T(c,n,d);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(c,d);T(c,l,d),o=!0},p(c,[d]){if(d&11){r=c[1];let g;for(g=0;g<r.length;g+=1){const p=bi(c,r,g);s[g]?s[g].p(p,d):(s[g]=wi(p),s[g].c(),s[g].m(t,null))}for(;g<s.length;g+=1)s[g].d(1);s.length=r.length}if(d&7){u=c[1];let g;for(g=0;g<u.length;g+=1){const p=vi(c,u,g);a[g]?(a[g].p(p,d),V(a[g],1)):(a[g]=ki(p),a[g].c(),V(a[g],1),a[g].m(l.parentNode,l))}for(we(),g=u.length;g<a.length;g+=1)f(g);ye()}},i(c){if(!o){for(let d=0;d<u.length;d+=1)V(a[d]);o=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)z(a[d]);o=!1},d(c){c&&P(t),_e(s,c),c&&P(n),_e(a,c),c&&P(l)}}}function Id(e,t,n){let{items:l=[]}=t,{activeTabValue:o=1}=t,{tabProps:r={}}=t;const s=u=>()=>n(0,o=u);return e.$$set=u=>{"items"in u&&n(1,l=u.items),"activeTabValue"in u&&n(0,o=u.activeTabValue),"tabProps"in u&&n(2,r=u.tabProps)},[o,l,r,s]}class Nd extends ce{constructor(t){super(),de(this,t,Id,Dd,fe,{items:1,activeTabValue:0,tabProps:2})}}function Si(e){let t;return{c(){t=q("Press ENTER to autofill with the RAG answer.")},m(n,l){T(n,t,l)},d(n){n&&P(t)}}}function Pd(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m=e[0].edited_answer===sl&&Si();return{c(){t=A("form"),n=A("textarea"),o=N(),r=A("div"),s=A("div"),m&&m.c(),u=N(),a=A("div"),f=A("button"),f.textContent="Update",c=N(),d=A("button"),d.textContent="Reset",h(n,"placeholder",l=e[0].answer),h(s,"class","note svelte-i9wciy"),h(r,"class","button-container svelte-i9wciy")},m(_,v){T(_,t,v),b(t,n),Ye(n,e[0].edited_answer),e[6](n),b(t,o),b(t,r),b(r,s),m&&m.m(s,null),b(r,u),b(r,a),b(a,f),b(a,c),b(a,d),g||(p=[x(n,"input",e[5]),x(n,"keydown",e[4]),x(f,"click",e[2]),x(d,"click",e[3])],g=!0)},p(_,[v]){v&1&&l!==(l=_[0].answer)&&h(n,"placeholder",l),v&1&&Ye(n,_[0].edited_answer),_[0].edited_answer===sl?m||(m=Si(),m.c(),m.m(s,null)):m&&(m.d(1),m=null)},i:U,o:U,d(_){_&&P(t),e[6](null),m&&m.d(),g=!1,be(p)}}}const sl="";function Td(e,t,n){let{message:l={}}=t,o;const r=async d=>{const g={id:l.id,new_answer:d},p=await fetch("/chat/rag_table/update_answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(p.ok)console.log("Answer updated successfully",p),n(0,l.edited_answer=d,l);else{const m=await p.text();alert(m)}},s=d=>{d.preventDefault(),r(l.edited_answer)},u=d=>{d.preventDefault(),r(sl)},a=d=>{d.key=="Enter"&&l.edited_answer===sl&&(d.preventDefault(),console.log("ENTER"),n(0,l.edited_answer=l.answer,l))};ft(function(){o.focus()});function f(){l.edited_answer=this.value,n(0,l)}function c(d){et[d?"unshift":"push"](()=>{o=d,n(1,o)})}return e.$$set=d=>{"message"in d&&n(0,l=d.message)},[l,o,s,u,a,f,c]}class Od extends ce{constructor(t){super(),de(this,t,Td,Pd,fe,{message:0})}}function Ci(e){let t,n,l,o,r,s;return{c(){t=A("div"),n=A("button"),n.textContent="👍",l=N(),o=A("button"),o.textContent="👎",h(n,"class","small-button thumbs-up svelte-1u8cd0w"),h(o,"class","small-button thumbs-down svelte-1u8cd0w"),h(t,"class","feedback-buttons svelte-1u8cd0w")},m(u,a){T(u,t,a),b(t,n),b(t,l),b(t,o),r||(s=[x(n,"click",e[4]),x(o,"click",e[5])],r=!0)},p:U,d(u){u&&P(t),r=!1,be(s)}}}function Vd(e){let t,n=e[0].answer+"",l,o,r,s=e[1]&&Ci(e);return{c(){t=A("div"),l=q(n),o=N(),s&&s.c(),r=Se()},m(u,a){T(u,t,a),b(t,l),T(u,o,a),s&&s.m(u,a),T(u,r,a)},p(u,[a]){a&1&&n!==(n=u[0].answer+"")&&K(l,n),u[1]?s?s.p(u,a):(s=Ci(u),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},i:U,o:U,d(u){u&&P(t),u&&P(o),s&&s.d(u),u&&P(r)}}}async function zd(e){const t=await fetch("/chat/rag_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function Ld(e,t,n){let l;ue(e,qe,c=>n(6,l=c));let{message:o={}}=t,{feedback:r=!1}=t,{index:s=0}=t;function u(c,d,g){const p=l[g];p.vote=d;const m={id:g+1,vote_status:d};zd(m),pt(c.currentTarget.parentNode).selectAll("button").style("border","3px solid transparent").style("opacity",.65),pt(c.currentTarget).style("border","3px solid var(--black)").style("opacity",1)}const a=c=>u(c,"up",s),f=c=>u(c,"down",s);return e.$$set=c=>{"message"in c&&n(0,o=c.message),"feedback"in c&&n(1,r=c.feedback),"index"in c&&n(2,s=c.index)},[o,r,s,u,a,f]}class qd extends ce{constructor(t){super(),de(this,t,Ld,Vd,fe,{message:0,feedback:1,index:2})}}function $i(e,t,n){const l=e.slice();return l[19]=t[n],l[21]=n,l}function Ri(e,t){let n,l,o,r,s,u,a,f,c,d=t[19].question+"",g,p,m,_,v,y,w,S,M,$,F,C,R,k,E,I;return M=new Nd({props:{items:t[8],tabProps:{message:t[19],feedback:t[0],index:t[21]}}}),F=new Fd({props:{sources:t[19].source,source_content:t[19].source_content}}),{key:e,first:null,c(){n=A("div"),l=A("div"),o=A("div"),r=N(),s=A("div"),u=A("div"),a=A("h5"),a.textContent="Question:",f=N(),c=A("p"),g=q(d),p=N(),m=A("div"),_=A("p"),_.textContent="ℹ️ Retrieval Sources",y=N(),w=A("div"),S=A("div"),ne(M.$$.fragment),$=N(),ne(F.$$.fragment),C=N(),h(o,"class","avatar"),h(a,"class","bold"),h(_,"class","bold"),h(m,"class","rag-sources svelte-vgv4ev"),h(u,"class","question svelte-vgv4ev"),h(S,"class","answer svelte-vgv4ev"),h(w,"class","answers svelte-vgv4ev"),h(s,"class","message-content svelte-vgv4ev"),h(l,"class","chat-message-center svelte-vgv4ev"),h(n,"class","chat-message svelte-vgv4ev"),this.first=n},m(D,L){T(D,n,L),b(n,l),b(l,o),b(l,r),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,g),b(u,p),b(u,m),b(m,_),b(s,y),b(s,w),b(w,S),ee(M,S,null),b(s,$),ee(F,s,null),b(n,C),k=!0,E||(I=[Cn(v=md.call(null,_,Ai(t[19]))),Cn(R=Gd.call(null,n,t[21]===t[5].length-1))],E=!0)},p(D,L){t=D,(!k||L&32)&&d!==(d=t[19].question+"")&&K(g,d),v&&Ge(v.update)&&L&32&&v.update.call(null,Ai(t[19]));const O={};L&33&&(O.tabProps={message:t[19],feedback:t[0],index:t[21]}),M.$set(O);const B={};L&32&&(B.sources=t[19].source),L&32&&(B.source_content=t[19].source_content),F.$set(B),R&&Ge(R.update)&&L&32&&R.update.call(null,t[21]===t[5].length-1)},i(D){k||(V(M.$$.fragment,D),V(F.$$.fragment,D),k=!0)},o(D){z(M.$$.fragment,D),z(F.$$.fragment,D),k=!1},d(D){D&&P(n),te(M),te(F),E=!1,be(I)}}}function Hd(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_=[],v=new Map,y,w,S,M,$,F,C,R,k,E=(e[2]?e[4]:"Send")+"",I,D,L,O,B,j,ae;function pe(Y){e[13](Y)}let W={table:"rag_table"};e[3]!==void 0&&(W.showModal=e[3]),t=new Io({props:W}),et.push(()=>Rn(t,"showModal",pe));let Q=e[5];const X=Y=>Y[21];for(let Y=0;Y<Q.length;Y+=1){let le=$i(e,Q,Y),he=X(le);v.set(he,_[Y]=Ri(he,le))}return M=new gd({props:{documents:e[6]}}),{c(){ne(t.$$.fragment),l=N(),o=A("div"),r=A("div"),s=A("h5"),s.textContent="Vote Feedback Instructions",u=N(),a=A("p"),a.innerHTML=`Ask a question to receive an answer from the chatbot. If the response is
      satisfactory, click on the <span class="inline-button green svelte-vgv4ev">👍</span>
      button. If the response is not satisfactory, click on the
      <span class="inline-button red svelte-vgv4ev">👎</span> button.`,f=N(),c=A("button"),c.textContent="Download Data",d=N(),g=A("div"),p=A("section"),m=A("div");for(let Y=0;Y<_.length;Y+=1)_[Y].c();y=N(),w=A("div"),S=A("div"),ne(M.$$.fragment),$=N(),F=A("form"),C=A("input"),R=N(),k=A("button"),I=q(E),L=N(),O=A("p"),O.textContent="Note - may produce inaccurate information.",h(s,"class","underline bold svelte-vgv4ev"),h(a,"class","svelte-vgv4ev"),h(c,"class","svelte-vgv4ev"),h(r,"class","instructions svelte-vgv4ev"),h(m,"class","chat-log svelte-vgv4ev"),h(p,"class","chatbox svelte-vgv4ev"),h(C,"class","chat-input-textarea svelte-vgv4ev"),h(C,"placeholder","Type Question Here"),h(k,"class",D="btnyousend "+(e[1]===""?"":"active")+" svelte-vgv4ev"),h(k,"type","submit"),h(F,"class","chat-input-form svelte-vgv4ev"),h(S,"class","chat-and-question svelte-vgv4ev"),h(O,"class","message svelte-vgv4ev"),h(w,"class","chat-input-holder svelte-vgv4ev"),h(g,"class","ranked-chat svelte-vgv4ev"),h(o,"class","ranked-feedback-container svelte-vgv4ev")},m(Y,le){ee(t,Y,le),T(Y,l,le),T(Y,o,le),b(o,r),b(r,s),b(r,u),b(r,a),b(r,f),b(r,c),b(o,d),b(o,g),b(g,p),b(p,m);for(let he=0;he<_.length;he+=1)_[he]&&_[he].m(m,null);b(g,y),b(g,w),b(w,S),ee(M,S,null),b(S,$),b(S,F),b(F,C),Ye(C,e[1]),b(F,R),b(F,k),b(k,I),b(w,L),b(w,O),B=!0,j||(ae=[x(c,"click",e[10]),x(C,"input",e[14]),x(F,"submit",e[9])],j=!0)},p(Y,[le]){const he={};!n&&le&8&&(n=!0,he.showModal=Y[3],$n(()=>n=!1)),t.$set(he),le&289&&(Q=Y[5],we(),_=gt(_,le,X,1,Y,Q,v,m,aa,Ri,null,$i),ye());const Vn={};le&64&&(Vn.documents=Y[6]),M.$set(Vn),le&2&&C.value!==Y[1]&&Ye(C,Y[1]),(!B||le&20)&&E!==(E=(Y[2]?Y[4]:"Send")+"")&&K(I,E),(!B||le&2&&D!==(D="btnyousend "+(Y[1]===""?"":"active")+" svelte-vgv4ev"))&&h(k,"class",D)},i(Y){if(!B){V(t.$$.fragment,Y);for(let le=0;le<Q.length;le+=1)V(_[le]);V(M.$$.fragment,Y),B=!0}},o(Y){z(t.$$.fragment,Y);for(let le=0;le<_.length;le+=1)z(_[le]);z(M.$$.fragment,Y),B=!1},d(Y){te(t,Y),Y&&P(l),Y&&P(o);for(let le=0;le<_.length;le+=1)_[le].d();te(M),j=!1,be(ae)}}}function Gd(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function Ai(e){return e.rag_sources.length===0?"No Sources":e.rag_sources.join(", ")}function Bd(e,t,n){let l,o,r,s;ue(e,qe,F=>n(5,o=F)),ue(e,oo,F=>n(16,r=F));let{feedback:u=!1}=t,{is_retrieval:a=!1}=t;const f=De([]);ue(e,f,F=>n(6,s=F));let c="",d="",g=!1,p=!1,m=[{label:"Answer",value:1,component:qd},{label:"Modified Answer",value:2,component:Od}];ft(()=>{v(),_()});async function _(){const C=await(await fetch("/retrieval/file/get")).json();console.log("data",C.files);const k=C.files.map((E,I)=>({id:String(I),name:E.name}));console.log("files",k),Pe(f,s=[...k],s)}async function v(){const R=(await(await fetch("/chat/rag_table/retrieve")).json()).rows;console.log("Got data from db",R);const k=R.map(E=>({id:E[0],question:E[1],answer:E[2],edited_answer:E[3],vote_status:E[4],rag_sources:E[5],source:E[6],source_content:E[7]}));Pe(qe,o=[...k],o)}const y=async F=>{F.preventDefault(),c=d,n(1,d=""),n(2,g=!0);const C=[...r];let R={id:o.length+1,question:c,answer:"Loading...",rag_sources:C,vote_status:"na",source:["Loading..."],source_content:["Loading..."]};Pe(qe,o=[...o,R],o);const k=a?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c,file_names:C})}):await fetch(`/chat/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c})});if(k.ok){const E=await k.json();console.log("response data",E),R.answer=E.answer,R.source=E.source,R.source_content=E.source_content,qe.update(I=>(I[I.length-1]=R,I))}else{const E=await k.text();alert(E)}n(2,g=!1)};let w=0;setInterval(()=>{n(12,w=(w+1)%4)},200);function S(){n(3,p=!0)}function M(F){p=F,n(3,p)}function $(){d=this.value,n(1,d)}return e.$$set=F=>{"feedback"in F&&n(0,u=F.feedback),"is_retrieval"in F&&n(11,a=F.is_retrieval)},e.$$.update=()=>{e.$$.dirty&4096&&n(4,l=".".repeat(w).padEnd(3))},[u,d,g,p,l,o,s,f,m,y,S,a,w,M,$]}class jd extends ce{constructor(t){super(),de(this,t,Bd,Hd,fe,{feedback:0,is_retrieval:11})}}function Mi(e){let t,n;return t=new No({props:{is_retrieval:e[1]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Ei(e){let t,n;return t=new No({props:{feedback:!0,is_retrieval:e[1]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Fi(e){let t,n;return t=new jd({props:{feedback:!0,is_retrieval:e[1]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Di(e){let t,n,l,o;const r=[Ud,xd],s=[];function u(a,f){return a[1]?0:1}return t=u(e),n=s[t]=r[t](e),{c(){n.c(),l=Se()},m(a,f){s[t].m(a,f),T(a,l,f),o=!0},p(a,f){let c=t;t=u(a),t===c?s[t].p(a,f):(we(),z(s[c],1,1,()=>{s[c]=null}),ye(),n=s[t],n?n.p(a,f):(n=s[t]=r[t](a),n.c()),V(n,1),n.m(l.parentNode,l))},i(a){o||(V(n),o=!0)},o(a){z(n),o=!1},d(a){s[t].d(a),a&&P(l)}}}function xd(e){let t,n;return t=new cd({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p:U,i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Ud(e){let t,n;return t=new No({props:{feedback:!0,is_retrieval:e[1]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Wd(e){let t,n,l,o,r,s=!e[0]&&Mi(e),u=e[0]==="vote"&&Ei(e),a=e[0]==="rag"&&Fi(e),f=e[0]==="rank"&&Di(e);return{c(){s&&s.c(),t=N(),u&&u.c(),n=N(),a&&a.c(),l=N(),f&&f.c(),o=Se()},m(c,d){s&&s.m(c,d),T(c,t,d),u&&u.m(c,d),T(c,n,d),a&&a.m(c,d),T(c,l,d),f&&f.m(c,d),T(c,o,d),r=!0},p(c,[d]){c[0]?s&&(we(),z(s,1,1,()=>{s=null}),ye()):s?(s.p(c,d),d&1&&V(s,1)):(s=Mi(c),s.c(),V(s,1),s.m(t.parentNode,t)),c[0]==="vote"?u?(u.p(c,d),d&1&&V(u,1)):(u=Ei(c),u.c(),V(u,1),u.m(n.parentNode,n)):u&&(we(),z(u,1,1,()=>{u=null}),ye()),c[0]==="rag"?a?(a.p(c,d),d&1&&V(a,1)):(a=Fi(c),a.c(),V(a,1),a.m(l.parentNode,l)):a&&(we(),z(a,1,1,()=>{a=null}),ye()),c[0]==="rank"?f?(f.p(c,d),d&1&&V(f,1)):(f=Di(c),f.c(),V(f,1),f.m(o.parentNode,o)):f&&(we(),z(f,1,1,()=>{f=null}),ye())},i(c){r||(V(s),V(u),V(a),V(f),r=!0)},o(c){z(s),z(u),z(a),z(f),r=!1},d(c){s&&s.d(c),c&&P(t),u&&u.d(c),c&&P(n),a&&a.d(c),c&&P(l),f&&f.d(c),c&&P(o)}}}function Xd(e,t,n){let{feedback:l}=t,{is_retrieval:o}=t;return e.$$set=r=>{"feedback"in r&&n(0,l=r.feedback),"is_retrieval"in r&&n(1,o=r.is_retrieval)},[l,o]}class Yd extends ce{constructor(t){super(),de(this,t,Xd,Wd,fe,{feedback:0,is_retrieval:1})}}function Ii(e,t,n){const l=e.slice();return l[2]=t[n],l}function Ni(e){let t,n=e[2]+"",l,o;return{c(){t=A("option"),l=q(n),t.__value=o=e[2],t.value=t.__value},m(r,s){T(r,t,s),b(t,l)},p(r,s){s&1&&n!==(n=r[2]+"")&&K(l,n),s&1&&o!==(o=r[2])&&(t.__value=o,t.value=t.__value)},d(r){r&&P(t)}}}function Qd(e){let t,n=e[0],l=[];for(let o=0;o<n.length;o+=1)l[o]=Ni(Ii(e,n,o));return{c(){t=A("select");for(let o=0;o<l.length;o+=1)l[o].c()},m(o,r){T(o,t,r);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null)},p(o,[r]){if(r&1){n=o[0];let s;for(s=0;s<n.length;s+=1){const u=Ii(o,n,s);l[s]?l[s].p(u,r):(l[s]=Ni(u),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},i:U,o:U,d(o){o&&P(t),_e(l,o)}}}function Kd(e,t,n){let{data_endpoint:l}=t,o=[];return ft(async()=>{const r=await fetch(`/data/${l}`);n(0,o=await r.json())}),e.$$set=r=>{"data_endpoint"in r&&n(1,l=r.data_endpoint)},[o,l]}class Jd extends ce{constructor(t){super(),de(this,t,Kd,Qd,fe,{data_endpoint:1})}}function Qt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zd(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ra(e){let t,n,l;e.length!==2?(t=Qt,n=(u,a)=>Qt(e(u),a),l=(u,a)=>e(u)-a):(t=e===Qt||e===Zd?e:eh,n=e,l=e);function o(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(u[d],a)<0?f=d+1:c=d}while(f<c)}return f}function r(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(u[d],a)<=0?f=d+1:c=d}while(f<c)}return f}function s(u,a,f=0,c=u.length){const d=o(u,a,f,c-1);return d>f&&l(u[d-1],a)>-l(u[d],a)?d-1:d}return{left:o,center:s,right:r}}function eh(){return 0}function th(e){return e===null?NaN:+e}function*nh(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let l of e)(l=t(l,++n,e))!=null&&(l=+l)>=l&&(yield l)}}const lh=Ra(Qt),oh=lh.right;Ra(th).center;const Aa=oh;function ih(e,t){let n=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&++n;else{let l=-1;for(let o of e)(o=t(o,++l,e))!=null&&(o=+o)>=o&&++n}return n}function rh(e,t){let n=0,l,o=0,r=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(l=s-o,o+=l/++n,r+=l*(s-o));else{let s=-1;for(let u of e)(u=t(u,++s,e))!=null&&(u=+u)>=u&&(l=u-o,o+=l/++n,r+=l*(u-o))}if(n>1)return r/(n-1)}function sh(e,t){const n=rh(e,t);return n&&Math.sqrt(n)}function _n(e,t){let n,l;if(t===void 0)for(const o of e)o!=null&&(n===void 0?o>=o&&(n=l=o):(n>o&&(n=o),l<o&&(l=o)));else{let o=-1;for(let r of e)(r=t(r,++o,e))!=null&&(n===void 0?r>=r&&(n=l=r):(n>r&&(n=r),l<r&&(l=r)))}return[n,l]}class Pi extends Map{constructor(t,n=fh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[l,o]of t)this.set(l,o)}get(t){return super.get(Ti(this,t))}has(t){return super.has(Ti(this,t))}set(t,n){return super.set(ah(this,t),n)}delete(t){return super.delete(uh(this,t))}}function Ti({_intern:e,_key:t},n){const l=t(n);return e.has(l)?e.get(l):n}function ah({_intern:e,_key:t},n){const l=t(n);return e.has(l)?e.get(l):(e.set(l,n),n)}function uh({_intern:e,_key:t},n){const l=t(n);return e.has(l)&&(n=e.get(l),e.delete(l)),n}function fh(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ch(e){return e}function dh(e=Qt){if(e===Qt)return Ma;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const l=e(t,n);return l||l===0?l:(e(n,n)===0)-(e(t,t)===0)}}function Ma(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var hh=Array.prototype,gh=hh.slice;function Pl(e){return()=>e}const ph=Math.sqrt(50),mh=Math.sqrt(10),_h=Math.sqrt(2);function al(e,t,n){const l=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(l)),r=l/Math.pow(10,o),s=r>=ph?10:r>=mh?5:r>=_h?2:1;let u,a,f;return o<0?(f=Math.pow(10,-o)/s,u=Math.round(e*f),a=Math.round(t*f),u/f<e&&++u,a/f>t&&--a,f=-f):(f=Math.pow(10,o)*s,u=Math.round(e/f),a=Math.round(t/f),u*f<e&&++u,a*f>t&&--a),a<u&&.5<=n&&n<2?al(e,t,n*2):[u,a,f]}function Ea(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const l=t<e,[o,r,s]=l?al(t,e,n):al(e,t,n);if(!(r>=o))return[];const u=r-o+1,a=new Array(u);if(l)if(s<0)for(let f=0;f<u;++f)a[f]=(r-f)/-s;else for(let f=0;f<u;++f)a[f]=(r-f)*s;else if(s<0)for(let f=0;f<u;++f)a[f]=(o+f)/-s;else for(let f=0;f<u;++f)a[f]=(o+f)*s;return a}function en(e,t,n){return t=+t,e=+e,n=+n,al(e,t,n)[2]}function vh(e,t,n){t=+t,e=+e,n=+n;const l=t<e,o=l?en(t,e,n):en(e,t,n);return(l?-1:1)*(o<0?1/-o:o)}function bh(e,t,n){let l;for(;;){const o=en(e,t,n);if(o===l||o===0||!isFinite(o))return[e,t];o>0?(e=Math.floor(e/o)*o,t=Math.ceil(t/o)*o):o<0&&(e=Math.ceil(e*o)/o,t=Math.floor(t*o)/o),l=o}}function wh(e){return Math.max(1,Math.ceil(Math.log(ih(e))/Math.LN2)+1)}function Fa(){var e=ch,t=_n,n=wh;function l(o){Array.isArray(o)||(o=Array.from(o));var r,s=o.length,u,a,f=new Array(s);for(r=0;r<s;++r)f[r]=e(o[r],r,o);var c=t(f),d=c[0],g=c[1],p=n(f,d,g);if(!Array.isArray(p)){const S=g,M=+p;if(t===_n&&([d,g]=bh(d,g,M)),p=Ea(d,g,M),p[0]<=d&&(a=en(d,g,M)),p[p.length-1]>=g)if(S>=g&&t===_n){const $=en(d,g,M);isFinite($)&&($>0?g=(Math.floor(g/$)+1)*$:$<0&&(g=(Math.ceil(g*-$)+1)/-$))}else p.pop()}for(var m=p.length,_=0,v=m;p[_]<=d;)++_;for(;p[v-1]>g;)--v;(_||v<m)&&(p=p.slice(_,v),m=v-_);var y=new Array(m+1),w;for(r=0;r<=m;++r)w=y[r]=[],w.x0=r>0?p[r-1]:d,w.x1=r<m?p[r]:g;if(isFinite(a)){if(a>0)for(r=0;r<s;++r)(u=f[r])!=null&&d<=u&&u<=g&&y[Math.min(m,Math.floor((u-d)/a))].push(o[r]);else if(a<0){for(r=0;r<s;++r)if((u=f[r])!=null&&d<=u&&u<=g){const S=Math.floor((d-u)*a);y[Math.min(m,S+(p[S]<=u))].push(o[r])}}}else for(r=0;r<s;++r)(u=f[r])!=null&&d<=u&&u<=g&&y[Aa(p,u,0,m)].push(o[r]);return y}return l.value=function(o){return arguments.length?(e=typeof o=="function"?o:Pl(o),l):e},l.domain=function(o){return arguments.length?(t=typeof o=="function"?o:Pl([o[0],o[1]]),l):t},l.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:Pl(Array.isArray(o)?gh.call(o):o),l):n},l}function mt(e,t){let n;if(t===void 0)for(const l of e)l!=null&&(n<l||n===void 0&&l>=l)&&(n=l);else{let l=-1;for(let o of e)(o=t(o,++l,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function so(e,t){let n;if(t===void 0)for(const l of e)l!=null&&(n>l||n===void 0&&l>=l)&&(n=l);else{let l=-1;for(let o of e)(o=t(o,++l,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function Da(e,t,n=0,l=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),l=Math.floor(Math.min(e.length-1,l)),!(n<=t&&t<=l))return e;for(o=o===void 0?Ma:dh(o);l>n;){if(l-n>600){const a=l-n+1,f=t-n+1,c=Math.log(a),d=.5*Math.exp(2*c/3),g=.5*Math.sqrt(c*d*(a-d)/a)*(f-a/2<0?-1:1),p=Math.max(n,Math.floor(t-f*d/a+g)),m=Math.min(l,Math.floor(t+(a-f)*d/a+g));Da(e,t,p,m,o)}const r=e[t];let s=n,u=l;for(un(e,n,t),o(e[l],r)>0&&un(e,n,l);s<u;){for(un(e,s,u),++s,--u;o(e[s],r)<0;)++s;for(;o(e[u],r)>0;)--u}o(e[n],r)===0?un(e,n,u):(++u,un(e,u,l)),u<=t&&(n=u+1),t<=u&&(l=u-1)}return e}function un(e,t,n){const l=e[t];e[t]=e[n],e[n]=l}function yh(e,t,n){if(e=Float64Array.from(nh(e,n)),!(!(l=e.length)||isNaN(t=+t))){if(t<=0||l<2)return so(e);if(t>=1)return mt(e);var l,o=(l-1)*t,r=Math.floor(o),s=mt(Da(e,r).subarray(0,r+1)),u=so(e.subarray(r+1));return s+(u-s)*(o-r)}}function kh(e,t){let n=0,l=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(++n,l+=o);else{let o=-1;for(let r of e)(r=t(r,++o,e))!=null&&(r=+r)>=r&&(++n,l+=r)}if(n)return l/n}function Sh(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var l=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,r=new Array(o);++l<o;)r[l]=e+l*n;return r}function Ch(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ul(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}function tn(e){return e=ul(Math.abs(e)),e?e[1]:NaN}function $h(e,t){return function(n,l){for(var o=n.length,r=[],s=0,u=e[0],a=0;o>0&&u>0&&(a+u+1>l&&(u=Math.max(1,l-a)),r.push(n.substring(o-=u,o+u)),!((a+=u+1)>l));)u=e[s=(s+1)%e.length];return r.reverse().join(t)}}function Rh(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ah=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fl(e){if(!(t=Ah.exec(e)))throw new Error("invalid format: "+e);var t;return new Po({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fl.prototype=Po.prototype;function Po(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Po.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Mh(e){e:for(var t=e.length,n=1,l=-1,o;n<t;++n)switch(e[n]){case".":l=o=n;break;case"0":l===0&&(l=n),o=n;break;default:if(!+e[n])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(o+1):e}var Ia;function Eh(e,t){var n=ul(e,t);if(!n)return e+"";var l=n[0],o=n[1],r=o-(Ia=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,s=l.length;return r===s?l:r>s?l+new Array(r-s+1).join("0"):r>0?l.slice(0,r)+"."+l.slice(r):"0."+new Array(1-r).join("0")+ul(e,Math.max(0,t+r-1))[0]}function Oi(e,t){var n=ul(e,t);if(!n)return e+"";var l=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+l:l.length>o+1?l.slice(0,o+1)+"."+l.slice(o+1):l+new Array(o-l.length+2).join("0")}const Vi={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ch,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Oi(e*100,t),r:Oi,s:Eh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function zi(e){return e}var Li=Array.prototype.map,qi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fh(e){var t=e.grouping===void 0||e.thousands===void 0?zi:$h(Li.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?zi:Rh(Li.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function f(d){d=fl(d);var g=d.fill,p=d.align,m=d.sign,_=d.symbol,v=d.zero,y=d.width,w=d.comma,S=d.precision,M=d.trim,$=d.type;$==="n"?(w=!0,$="g"):Vi[$]||(S===void 0&&(S=12),M=!0,$="g"),(v||g==="0"&&p==="=")&&(v=!0,g="0",p="=");var F=_==="$"?n:_==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",C=_==="$"?l:/[%p]/.test($)?s:"",R=Vi[$],k=/[defgprs%]/.test($);S=S===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function E(I){var D=F,L=C,O,B,j;if($==="c")L=R(I)+L,I="";else{I=+I;var ae=I<0||1/I<0;if(I=isNaN(I)?a:R(Math.abs(I),S),M&&(I=Mh(I)),ae&&+I==0&&m!=="+"&&(ae=!1),D=(ae?m==="("?m:u:m==="-"||m==="("?"":m)+D,L=($==="s"?qi[8+Ia/3]:"")+L+(ae&&m==="("?")":""),k){for(O=-1,B=I.length;++O<B;)if(j=I.charCodeAt(O),48>j||j>57){L=(j===46?o+I.slice(O+1):I.slice(O))+L,I=I.slice(0,O);break}}}w&&!v&&(I=t(I,1/0));var pe=D.length+I.length+L.length,W=pe<y?new Array(y-pe+1).join(g):"";switch(w&&v&&(I=t(W+I,W.length?y-L.length:1/0),W=""),p){case"<":I=D+I+L+W;break;case"=":I=D+W+I+L;break;case"^":I=W.slice(0,pe=W.length>>1)+D+I+L+W.slice(pe);break;default:I=W+D+I+L;break}return r(I)}return E.toString=function(){return d+""},E}function c(d,g){var p=f((d=fl(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(tn(g)/3)))*3,_=Math.pow(10,-m),v=qi[8+m/3];return function(y){return p(_*y)+v}}return{format:f,formatPrefix:c}}var qn,vt,Na;Dh({thousands:",",grouping:[3],currency:["$",""]});function Dh(e){return qn=Fh(e),vt=qn.format,Na=qn.formatPrefix,qn}function Ih(e){return Math.max(0,-tn(Math.abs(e)))}function Nh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tn(t)/3)))*3-tn(Math.abs(e)))}function Ph(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tn(t)-tn(e))+1}function To(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Th(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Hi=Symbol("implicit");function Mt(){var e=new Pi,t=[],n=[],l=Hi;function o(r){let s=e.get(r);if(s===void 0){if(l!==Hi)return l;e.set(r,s=t.push(r)-1)}return n[s%n.length]}return o.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new Pi;for(const s of r)e.has(s)||e.set(s,t.push(s)-1);return o},o.range=function(r){return arguments.length?(n=Array.from(r),o):n.slice()},o.unknown=function(r){return arguments.length?(l=r,o):l},o.copy=function(){return Mt(t,n).unknown(l)},To.apply(o,arguments),o}function Lt(){var e=Mt().unknown(void 0),t=e.domain,n=e.range,l=0,o=1,r,s,u=!1,a=0,f=0,c=.5;delete e.unknown;function d(){var g=t().length,p=o<l,m=p?o:l,_=p?l:o;r=(_-m)/Math.max(1,g-a+f*2),u&&(r=Math.floor(r)),m+=(_-m-r*(g-a))*c,s=r*(1-a),u&&(m=Math.round(m),s=Math.round(s));var v=Sh(g).map(function(y){return m+r*y});return n(p?v.reverse():v)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?([l,o]=g,l=+l,o=+o,d()):[l,o]},e.rangeRound=function(g){return[l,o]=g,l=+l,o=+o,u=!0,d()},e.bandwidth=function(){return s},e.step=function(){return r},e.round=function(g){return arguments.length?(u=!!g,d()):u},e.padding=function(g){return arguments.length?(a=Math.min(1,f=+g),d()):a},e.paddingInner=function(g){return arguments.length?(a=Math.min(1,g),d()):a},e.paddingOuter=function(g){return arguments.length?(f=+g,d()):f},e.align=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),d()):c},e.copy=function(){return Lt(t(),[l,o]).round(u).paddingInner(a).paddingOuter(f).align(c)},To.apply(d(),arguments)}function Pa(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Pa(t())},e}function Gi(){return Pa(Lt.apply(null,arguments).paddingInner(1))}function Oo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ta(e,t){var n=Object.create(e.prototype);for(var l in t)n[l]=t[l];return n}function Nn(){}var En=.7,cl=1/En,Kt="\\s*([+-]?\\d+)\\s*",Fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Oh=/^#([0-9a-f]{3,8})$/,Vh=new RegExp(`^rgb\\(${Kt},${Kt},${Kt}\\)$`),zh=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),Lh=new RegExp(`^rgba\\(${Kt},${Kt},${Kt},${Fn}\\)$`),qh=new RegExp(`^rgba\\(${it},${it},${it},${Fn}\\)$`),Hh=new RegExp(`^hsl\\(${Fn},${it},${it}\\)$`),Gh=new RegExp(`^hsla\\(${Fn},${it},${it},${Fn}\\)$`),Bi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oo(Nn,Dn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ji,formatHex:ji,formatHex8:Bh,formatHsl:jh,formatRgb:xi,toString:xi});function ji(){return this.rgb().formatHex()}function Bh(){return this.rgb().formatHex8()}function jh(){return Oa(this).formatHsl()}function xi(){return this.rgb().formatRgb()}function Dn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Oh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ui(t):n===3?new He(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Hn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vh.exec(e))?new He(t[1],t[2],t[3],1):(t=zh.exec(e))?new He(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Lh.exec(e))?Hn(t[1],t[2],t[3],t[4]):(t=qh.exec(e))?Hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Hh.exec(e))?Yi(t[1],t[2]/100,t[3]/100,1):(t=Gh.exec(e))?Yi(t[1],t[2]/100,t[3]/100,t[4]):Bi.hasOwnProperty(e)?Ui(Bi[e]):e==="transparent"?new He(NaN,NaN,NaN,0):null}function Ui(e){return new He(e>>16&255,e>>8&255,e&255,1)}function Hn(e,t,n,l){return l<=0&&(e=t=n=NaN),new He(e,t,n,l)}function xh(e){return e instanceof Nn||(e=Dn(e)),e?(e=e.rgb(),new He(e.r,e.g,e.b,e.opacity)):new He}function ao(e,t,n,l){return arguments.length===1?xh(e):new He(e,t,n,l??1)}function He(e,t,n,l){this.r=+e,this.g=+t,this.b=+n,this.opacity=+l}Oo(He,ao,Ta(Nn,{brighter(e){return e=e==null?cl:Math.pow(cl,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?En:Math.pow(En,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new He(Vt(this.r),Vt(this.g),Vt(this.b),dl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wi,formatHex:Wi,formatHex8:Uh,formatRgb:Xi,toString:Xi}));function Wi(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}`}function Uh(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}${Tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xi(){const e=dl(this.opacity);return`${e===1?"rgb(":"rgba("}${Vt(this.r)}, ${Vt(this.g)}, ${Vt(this.b)}${e===1?")":`, ${e})`}`}function dl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tt(e){return e=Vt(e),(e<16?"0":"")+e.toString(16)}function Yi(e,t,n,l){return l<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Je(e,t,n,l)}function Oa(e){if(e instanceof Je)return new Je(e.h,e.s,e.l,e.opacity);if(e instanceof Nn||(e=Dn(e)),!e)return new Je;if(e instanceof Je)return e;e=e.rgb();var t=e.r/255,n=e.g/255,l=e.b/255,o=Math.min(t,n,l),r=Math.max(t,n,l),s=NaN,u=r-o,a=(r+o)/2;return u?(t===r?s=(n-l)/u+(n<l)*6:n===r?s=(l-t)/u+2:s=(t-n)/u+4,u/=a<.5?r+o:2-r-o,s*=60):u=a>0&&a<1?0:s,new Je(s,u,a,e.opacity)}function Wh(e,t,n,l){return arguments.length===1?Oa(e):new Je(e,t,n,l??1)}function Je(e,t,n,l){this.h=+e,this.s=+t,this.l=+n,this.opacity=+l}Oo(Je,Wh,Ta(Nn,{brighter(e){return e=e==null?cl:Math.pow(cl,e),new Je(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?En:Math.pow(En,e),new Je(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,l=n+(n<.5?n:1-n)*t,o=2*n-l;return new He(Tl(e>=240?e-240:e+120,o,l),Tl(e,o,l),Tl(e<120?e+240:e-120,o,l),this.opacity)},clamp(){return new Je(Qi(this.h),Gn(this.s),Gn(this.l),dl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dl(this.opacity);return`${e===1?"hsl(":"hsla("}${Qi(this.h)}, ${Gn(this.s)*100}%, ${Gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qi(e){return e=(e||0)%360,e<0?e+360:e}function Gn(e){return Math.max(0,Math.min(1,e||0))}function Tl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Vo=e=>()=>e;function Xh(e,t){return function(n){return e+n*t}}function Yh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(l){return Math.pow(e+l*t,n)}}function Qh(e){return(e=+e)==1?Va:function(t,n){return n-t?Yh(t,n,e):Vo(isNaN(t)?n:t)}}function Va(e,t){var n=t-e;return n?Xh(e,n):Vo(isNaN(e)?t:e)}const uo=function e(t){var n=Qh(t);function l(o,r){var s=n((o=ao(o)).r,(r=ao(r)).r),u=n(o.g,r.g),a=n(o.b,r.b),f=Va(o.opacity,r.opacity);return function(c){return o.r=s(c),o.g=u(c),o.b=a(c),o.opacity=f(c),o+""}}return l.gamma=e,l}(1);function Kh(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,l=t.slice(),o;return function(r){for(o=0;o<n;++o)l[o]=e[o]*(1-r)+t[o]*r;return l}}function Jh(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Zh(e,t){var n=t?t.length:0,l=e?Math.min(n,e.length):0,o=new Array(l),r=new Array(n),s;for(s=0;s<l;++s)o[s]=Pn(e[s],t[s]);for(;s<n;++s)r[s]=t[s];return function(u){for(s=0;s<l;++s)r[s]=o[s](u);return r}}function eg(e,t){var n=new Date;return e=+e,t=+t,function(l){return n.setTime(e*(1-l)+t*l),n}}function hl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function tg(e,t){var n={},l={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Pn(e[o],t[o]):l[o]=t[o];return function(r){for(o in n)l[o]=n[o](r);return l}}var fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ol=new RegExp(fo.source,"g");function ng(e){return function(){return e}}function lg(e){return function(t){return e(t)+""}}function og(e,t){var n=fo.lastIndex=Ol.lastIndex=0,l,o,r,s=-1,u=[],a=[];for(e=e+"",t=t+"";(l=fo.exec(e))&&(o=Ol.exec(t));)(r=o.index)>n&&(r=t.slice(n,r),u[s]?u[s]+=r:u[++s]=r),(l=l[0])===(o=o[0])?u[s]?u[s]+=o:u[++s]=o:(u[++s]=null,a.push({i:s,x:hl(l,o)})),n=Ol.lastIndex;return n<t.length&&(r=t.slice(n),u[s]?u[s]+=r:u[++s]=r),u.length<2?a[0]?lg(a[0].x):ng(t):(t=a.length,function(f){for(var c=0,d;c<t;++c)u[(d=a[c]).i]=d.x(f);return u.join("")})}function Pn(e,t){var n=typeof t,l;return t==null||n==="boolean"?Vo(t):(n==="number"?hl:n==="string"?(l=Dn(t))?(t=l,uo):og:t instanceof Dn?uo:t instanceof Date?eg:Jh(t)?Kh:Array.isArray(t)?Zh:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?tg:hl)(e,t)}function za(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function ig(e){return function(){return e}}function rg(e){return+e}var Ki=[0,1];function kt(e){return e}function co(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ig(isNaN(t)?NaN:.5)}function sg(e,t){var n;return e>t&&(n=e,e=t,t=n),function(l){return Math.max(e,Math.min(t,l))}}function ag(e,t,n){var l=e[0],o=e[1],r=t[0],s=t[1];return o<l?(l=co(o,l),r=n(s,r)):(l=co(l,o),r=n(r,s)),function(u){return r(l(u))}}function ug(e,t,n){var l=Math.min(e.length,t.length)-1,o=new Array(l),r=new Array(l),s=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<l;)o[s]=co(e[s],e[s+1]),r[s]=n(t[s],t[s+1]);return function(u){var a=Aa(e,u,1,l)-1;return r[a](o[a](u))}}function fg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cg(){var e=Ki,t=Ki,n=Pn,l,o,r,s=kt,u,a,f;function c(){var g=Math.min(e.length,t.length);return s!==kt&&(s=sg(e[0],e[g-1])),u=g>2?ug:ag,a=f=null,d}function d(g){return g==null||isNaN(g=+g)?r:(a||(a=u(e.map(l),t,n)))(l(s(g)))}return d.invert=function(g){return s(o((f||(f=u(t,e.map(l),hl)))(g)))},d.domain=function(g){return arguments.length?(e=Array.from(g,rg),c()):e.slice()},d.range=function(g){return arguments.length?(t=Array.from(g),c()):t.slice()},d.rangeRound=function(g){return t=Array.from(g),n=za,c()},d.clamp=function(g){return arguments.length?(s=g?!0:kt,c()):s!==kt},d.interpolate=function(g){return arguments.length?(n=g,c()):n},d.unknown=function(g){return arguments.length?(r=g,d):r},function(g,p){return l=g,o=p,c()}}function dg(){return cg()(kt,kt)}function hg(e,t,n,l){var o=vh(e,t,n),r;switch(l=fl(l??",f"),l.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(r=Nh(o,s))&&(l.precision=r),Na(l,s)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(r=Ph(o,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=r-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(r=Ih(o))&&(l.precision=r-(l.type==="%")*2);break}}return vt(l)}function La(e){var t=e.domain;return e.ticks=function(n){var l=t();return Ea(l[0],l[l.length-1],n??10)},e.tickFormat=function(n,l){var o=t();return hg(o[0],o[o.length-1],n??10,l)},e.nice=function(n){n==null&&(n=10);var l=t(),o=0,r=l.length-1,s=l[o],u=l[r],a,f,c=10;for(u<s&&(f=s,s=u,u=f,f=o,o=r,r=f);c-- >0;){if(f=en(s,u,n),f===a)return l[o]=s,l[r]=u,t(l);if(f>0)s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f;else if(f<0)s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f;else break;a=f}return e},e}function We(){var e=dg();return e.copy=function(){return fg(e,We())},To.apply(e,arguments),La(e)}function gg(){var e=0,t=1,n,l,o,r,s=kt,u=!1,a;function f(d){return d==null||isNaN(d=+d)?a:s(o===0?.5:(d=(r(d)-n)*o,u?Math.max(0,Math.min(1,d)):d))}f.domain=function(d){return arguments.length?([e,t]=d,n=r(e=+e),l=r(t=+t),o=n===l?0:1/(l-n),f):[e,t]},f.clamp=function(d){return arguments.length?(u=!!d,f):u},f.interpolator=function(d){return arguments.length?(s=d,f):s};function c(d){return function(g){var p,m;return arguments.length?([p,m]=g,s=d(p,m),f):[s(0),s(1)]}}return f.range=c(Pn),f.rangeRound=c(za),f.unknown=function(d){return arguments.length?(a=d,f):a},function(d){return r=d,n=d(e),l=d(t),o=n===l?0:1/(l-n),f}}function pg(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qa(){var e=La(gg()(kt));return e.copy=function(){return pg(e,qa())},Th.apply(e,arguments)}function nt(e){return function(){return e}}const ho=Math.PI,go=2*ho,It=1e-6,mg=go-It;function Ha(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _g(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ha;const n=10**t;return function(l){this._+=l[0];for(let o=1,r=l.length;o<r;++o)this._+=Math.round(arguments[o]*n)/n+l[o]}}class vg{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ha:_g(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,l,o){this._append`Q${+t},${+n},${this._x1=+l},${this._y1=+o}`}bezierCurveTo(t,n,l,o,r,s){this._append`C${+t},${+n},${+l},${+o},${this._x1=+r},${this._y1=+s}`}arcTo(t,n,l,o,r){if(t=+t,n=+n,l=+l,o=+o,r=+r,r<0)throw new Error(`negative radius: ${r}`);let s=this._x1,u=this._y1,a=l-t,f=o-n,c=s-t,d=u-n,g=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>It)if(!(Math.abs(d*a-f*c)>It)||!r)this._append`L${this._x1=t},${this._y1=n}`;else{let p=l-s,m=o-u,_=a*a+f*f,v=p*p+m*m,y=Math.sqrt(_),w=Math.sqrt(g),S=r*Math.tan((ho-Math.acos((_+g-v)/(2*y*w)))/2),M=S/w,$=S/y;Math.abs(M-1)>It&&this._append`L${t+M*c},${n+M*d}`,this._append`A${r},${r},0,0,${+(d*p>c*m)},${this._x1=t+$*a},${this._y1=n+$*f}`}}arc(t,n,l,o,r,s){if(t=+t,n=+n,l=+l,s=!!s,l<0)throw new Error(`negative radius: ${l}`);let u=l*Math.cos(o),a=l*Math.sin(o),f=t+u,c=n+a,d=1^s,g=s?o-r:r-o;this._x1===null?this._append`M${f},${c}`:(Math.abs(this._x1-f)>It||Math.abs(this._y1-c)>It)&&this._append`L${f},${c}`,l&&(g<0&&(g=g%go+go),g>mg?this._append`A${l},${l},0,1,${d},${t-u},${n-a}A${l},${l},0,1,${d},${this._x1=f},${this._y1=c}`:g>It&&this._append`A${l},${l},0,${+(g>=ho)},${d},${this._x1=t+l*Math.cos(r)},${this._y1=n+l*Math.sin(r)}`)}rect(t,n,l,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${l=+l}v${+o}h${-l}Z`}toString(){return this._}}function bg(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const l=Math.floor(n);if(!(l>=0))throw new RangeError(`invalid digits: ${n}`);t=l}return e},()=>new vg(t)}function Ga(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ba(e){this._context=e}Ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function wg(e){return new Ba(e)}function yg(e){return e[0]}function kg(e){return e[1]}function Sg(e,t){var n=nt(!0),l=null,o=wg,r=null,s=bg(u);e=typeof e=="function"?e:e===void 0?yg:nt(e),t=typeof t=="function"?t:t===void 0?kg:nt(t);function u(a){var f,c=(a=Ga(a)).length,d,g=!1,p;for(l==null&&(r=o(p=s())),f=0;f<=c;++f)!(f<c&&n(d=a[f],f,a))===g&&((g=!g)?r.lineStart():r.lineEnd()),g&&r.point(+e(d,f,a),+t(d,f,a));if(p)return r=null,p+""||null}return u.x=function(a){return arguments.length?(e=typeof a=="function"?a:nt(+a),u):e},u.y=function(a){return arguments.length?(t=typeof a=="function"?a:nt(+a),u):t},u.defined=function(a){return arguments.length?(n=typeof a=="function"?a:nt(!!a),u):n},u.curve=function(a){return arguments.length?(o=a,l!=null&&(r=o(l)),u):o},u.context=function(a){return arguments.length?(a==null?l=r=null:r=o(l=a),u):l},u}function po(e,t){if((s=e.length)>1)for(var n=1,l,o,r=e[t[0]],s,u=r.length;n<s;++n)for(o=r,r=e[t[n]],l=0;l<u;++l)r[l][1]+=r[l][0]=isNaN(o[l][1])?o[l][0]:o[l][1]}function mo(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Cg(e,t){return e[t]}function $g(e){const t=[];return t.key=e,t}function Rg(){var e=nt([]),t=mo,n=po,l=Cg;function o(r){var s=Array.from(e.apply(this,arguments),$g),u,a=s.length,f=-1,c;for(const d of r)for(u=0,++f;u<a;++u)(s[u][f]=[0,+l(d,s[u].key,f,r)]).data=d;for(u=0,c=Ga(t(s));u<a;++u)s[c[u]].index=u;return n(s,c),s}return o.keys=function(r){return arguments.length?(e=typeof r=="function"?r:nt(Array.from(r)),o):e},o.value=function(r){return arguments.length?(l=typeof r=="function"?r:nt(+r),o):l},o.order=function(r){return arguments.length?(t=r==null?mo:typeof r=="function"?r:nt(Array.from(r)),o):t},o.offset=function(r){return arguments.length?(n=r??po,o):n},o}function Ji(e,t,n){const l=e.slice();return l[21]=t[n],l[23]=n,l}function Zi(e,t,n){const l=e.slice();l[24]=t[n];const o=l[4][l[21].key];return l[25]=o,l}function er(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_=e[21].key+"",v,y,w=e[11](e[25]/e[2])+"",S,M,$,F,C,R;return{c(){t=G("rect"),f=G("line"),m=G("text"),v=q(_),y=G("tspan"),S=q(w),$=N(),h(t,"class",n="horizontal-bar-rect "+(e[5]===e[23]?"selected":"unselected")+" svelte-tg5p7i"),h(t,"y",l=e[8](e[24].data.xVal)),h(t,"x",o=e[7](e[24][0])),h(t,"stroke","var(--black)"),h(t,"width",r=e[7](e[24][1])-e[7](e[24][0])),h(t,"fill",s=e[10](e[21].key)),h(t,"opacity",u=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(t,"height",a=e[8].bandwidth()),h(f,"class","line svelte-tg5p7i"),h(f,"x1",c=e[7](e[24][0])),h(f,"x2",d=e[7](e[24][0])),h(f,"y1",g=e[8](e[24].data.xVal)-St),h(f,"y2",p=e[8].bandwidth()+e[8](e[24].data.xVal)+St),h(f,"stroke","black"),h(y,"x",M=(e[7](e[24][0])+e[7](e[24][1]))/2),h(y,"dy","16"),h(y,"text-anchor","middle"),h(m,"class","horizontal-bar-text svelte-tg5p7i"),h(m,"y",F=e[8].bandwidth()/2),h(m,"x",C=(e[7](e[24][0])+e[7](e[24][1]))/2),h(m,"opacity",R=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(m,"text-anchor","middle")},m(k,E){T(k,t,E),T(k,f,E),T(k,m,E),b(m,v),b(m,y),b(y,S),b(m,$)},p(k,E){E&32&&n!==(n="horizontal-bar-rect "+(k[5]===k[23]?"selected":"unselected")+" svelte-tg5p7i")&&h(t,"class",n),E&320&&l!==(l=k[8](k[24].data.xVal))&&h(t,"y",l),E&192&&o!==(o=k[7](k[24][0]))&&h(t,"x",o),E&192&&r!==(r=k[7](k[24][1])-k[7](k[24][0]))&&h(t,"width",r),E&64&&s!==(s=k[10](k[21].key))&&h(t,"fill",s),E&32&&u!==(u=k[5]==="all"||k[5]===k[23]?"1":"0.25")&&h(t,"opacity",u),E&256&&a!==(a=k[8].bandwidth())&&h(t,"height",a),E&192&&c!==(c=k[7](k[24][0]))&&h(f,"x1",c),E&192&&d!==(d=k[7](k[24][0]))&&h(f,"x2",d),E&320&&g!==(g=k[8](k[24].data.xVal)-St)&&h(f,"y1",g),E&320&&p!==(p=k[8].bandwidth()+k[8](k[24].data.xVal)+St)&&h(f,"y2",p),E&64&&_!==(_=k[21].key+"")&&K(v,_),E&84&&w!==(w=k[11](k[25]/k[2])+"")&&K(S,w),E&192&&M!==(M=(k[7](k[24][0])+k[7](k[24][1]))/2)&&h(y,"x",M),E&256&&F!==(F=k[8].bandwidth()/2)&&h(m,"y",F),E&192&&C!==(C=(k[7](k[24][0])+k[7](k[24][1]))/2)&&h(m,"x",C),E&32&&R!==(R=k[5]==="all"||k[5]===k[23]?"1":"0.25")&&h(m,"opacity",R)},d(k){k&&P(t),k&&P(f),k&&P(m)}}}function tr(e){let t,n,l,o,r,s,u,a,f=e[21],c=[];for(let p=0;p<f.length;p+=1)c[p]=er(Zi(e,f,p));function d(){return e[17](e[23],e[21])}function g(){return e[18](e[23],e[21])}return{c(){t=G("g");for(let p=0;p<c.length;p+=1)c[p].c();n=G("line"),h(n,"class","line svelte-tg5p7i"),h(n,"x1",l=e[3]-e[9].right),h(n,"x2",o=e[3]-e[9].right),h(n,"y1",r=e[8]("A")-St),h(n,"y2",s=e[8].bandwidth()+e[8]("A")+St),h(n,"stroke","black"),h(t,"class","series svelte-tg5p7i"),h(t,"role","button"),h(t,"tabindex","0")},m(p,m){T(p,t,m);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(t,null);b(t,n),u||(a=[x(t,"click",d),x(t,"keypress",g)],u=!0)},p(p,m){if(e=p,m&3572){f=e[21];let _;for(_=0;_<f.length;_+=1){const v=Zi(e,f,_);c[_]?c[_].p(v,m):(c[_]=er(v),c[_].c(),c[_].m(t,n))}for(;_<c.length;_+=1)c[_].d(1);c.length=f.length}m&8&&l!==(l=e[3]-e[9].right)&&h(n,"x1",l),m&8&&o!==(o=e[3]-e[9].right)&&h(n,"x2",o),m&256&&r!==(r=e[8]("A")-St)&&h(n,"y1",r),m&256&&s!==(s=e[8].bandwidth()+e[8]("A")+St)&&h(n,"y2",s)},d(p){p&&P(t),_e(c,p),u=!1,be(a)}}}function Ag(e){let t,n,l,o,r,s=e[6],u=[];for(let a=0;a<s.length;a+=1)u[a]=tr(Ji(e,s,a));return{c(){t=A("div"),t.innerHTML="<p>Feedback Distribution</p>",n=N(),l=A("div"),o=G("svg");for(let a=0;a<u.length;a+=1)u[a].c();h(o,"width",e[1]),h(o,"height",e[0]),h(l,"id","stackedrect-holder"),h(l,"class","svelte-tg5p7i"),Me(()=>e[19].call(l))},m(a,f){T(a,t,f),T(a,n,f),T(a,l,f),b(l,o);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(o,null);r=ut(l,e[19].bind(l))},p(a,[f]){if(f&8188){s=a[6];let c;for(c=0;c<s.length;c+=1){const d=Ji(a,s,c);u[c]?u[c].p(d,f):(u[c]=tr(d),u[c].c(),u[c].m(o,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=s.length}f&2&&h(o,"width",a[1]),f&1&&h(o,"height",a[0])},i:U,o:U,d(a){a&&P(t),a&&P(n),a&&P(l),_e(u,a),r()}}}const St=5;function Mg(e,t,n){let l,o,r,s,u,a,f,c,d,g,p;ue(e,st,R=>n(15,d=R)),ue(e,Zo,R=>n(4,g=R)),ue(e,qe,R=>n(16,p=R));let m=300,_=300;const v={up:2,down:1,"n/a":0,all:"all"},y={top:10,bottom:10,left:25,right:5},w=Mt().range(["var(--yellow)","var(--red)","var(--green)"]),S=vt(".0%");function M(R,k){l===R?n(5,l="all"):n(5,l=R),Pe(st,d=l==="all"?"all":k,d)}const $=(R,k)=>M(R,k.key),F=(R,k)=>M(R,k.key);function C(){_=this.offsetWidth,m=this.offsetHeight,n(1,_),n(0,m)}return e.$$.update=()=>{e.$$.dirty&32768&&n(5,l=v[d]),e.$$.dirty&2&&n(3,o=_-y.left-y.right),e.$$.dirty&1&&n(14,r=m-y.top-y.bottom),e.$$.dirty&65552&&p.forEach(R=>{Pe(Zo,g[R.vote_status]++,g)}),e.$$.dirty&16&&n(2,s=g.up+g.down+g["n/a"]),e.$$.dirty&16384&&n(8,u=Lt().rangeRound([y.top,r-y.bottom]).padding(0).domain(["a"])),e.$$.dirty&12&&n(7,a=We().rangeRound([y.left,o-y.right]).domain([0,s])),e.$$.dirty&8208&&n(6,c=f([g]))},n(13,f=Rg().keys(["n/a","down","up"]).order(mo).offset(po)),[m,_,s,o,g,l,c,a,u,y,w,S,M,f,r,d,p,$,F,C]}class ja extends ce{constructor(t){super(),de(this,t,Mg,Ag,fe,{})}}function Eg(e){let t,n,l,o,r,s,u,a,f,c,d,g=e[3][e[2]]+"",p,m;return{c(){t=A("div"),n=A("div"),l=q("Q: "),o=q(e[0]),r=N(),s=A("div"),u=q("A: "),a=q(e[1]),f=N(),c=A("div"),d=q("Rating: "),p=q(g),h(n,"class","question svelte-szi0e"),h(s,"class","answer svelte-szi0e"),h(c,"class",m="feedback "+e[2]+" svelte-szi0e"),h(t,"class","qa-card svelte-szi0e")},m(_,v){T(_,t,v),b(t,n),b(n,l),b(n,o),b(t,r),b(t,s),b(s,u),b(s,a),b(t,f),b(t,c),b(c,d),b(c,p)},p(_,[v]){v&1&&K(o,_[0]),v&2&&K(a,_[1]),v&4&&g!==(g=_[3][_[2]]+"")&&K(p,g),v&4&&m!==(m="feedback "+_[2]+" svelte-szi0e")&&h(c,"class",m)},i:U,o:U,d(_){_&&P(t)}}}function Fg(e,t,n){let{question:l="What is gradient descent?"}=t,{answer:o="Gradient descent is an algorithm used to minimize a loss function by taking small steps in the direction of steepest descent."}=t,{feedback:r="Good: 👍"}=t;const s={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"};return e.$$set=u=>{"question"in u&&n(0,l=u.question),"answer"in u&&n(1,o=u.answer),"feedback"in u&&n(2,r=u.feedback)},[l,o,r,s]}class Dg extends ce{constructor(t){super(),de(this,t,Fg,Eg,fe,{question:0,answer:1,feedback:2})}}function nr(e,t,n){const l=e.slice();return l[5]=t[n].question,l[6]=t[n].answer,l[7]=t[n].vote_status,l}function lr(e){let t,n,l,o,r;return n=new Dg({props:{question:e[5],answer:e[6],feedback:e[7]}}),{c(){t=A("div"),ne(n.$$.fragment),l=N()},m(s,u){T(s,t,u),ee(n,t,null),b(t,l),r=!0},p(s,u){const a={};u&1&&(a.question=s[5]),u&1&&(a.answer=s[6]),u&1&&(a.feedback=s[7]),n.$set(a)},i(s){r||(V(n.$$.fragment,s),s&&Me(()=>{r&&(o||(o=lt(t,e[1],{duration:300},!0)),o.run(1))}),r=!0)},o(s){z(n.$$.fragment,s),s&&(o||(o=lt(t,e[1],{duration:300},!1)),o.run(0)),r=!1},d(s){s&&P(t),te(n),s&&o&&o.end()}}}function Ig(e){let t,n,l=e[0],o=[];for(let s=0;s<l.length;s+=1)o[s]=lr(nr(e,l,s));const r=s=>z(o[s],1,1,()=>{o[s]=null});return{c(){t=A("div");for(let s=0;s<o.length;s+=1)o[s].c();h(t,"class","qa-container svelte-1xv9cfi")},m(s,u){T(s,t,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(s,[u]){if(u&1){l=s[0];let a;for(a=0;a<l.length;a+=1){const f=nr(s,l,a);o[a]?(o[a].p(f,u),V(o[a],1)):(o[a]=lr(f),o[a].c(),V(o[a],1),o[a].m(t,null))}for(we(),a=l.length;a<o.length;a+=1)r(a);ye()}},i(s){if(!n){for(let u=0;u<l.length;u+=1)V(o[u]);n=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)z(o[u]);n=!1},d(s){s&&P(t),_e(o,s)}}}function Ng(e,t,n){let l,o,r,s;ue(e,lo,a=>n(4,o=a)),ue(e,st,a=>n(2,r=a)),ue(e,An,a=>n(3,s=a));const u=(a,{delay:f=0,duration:c=1e3,easing:d=Eo})=>Mn(a,{delay:f,duration:c,easing:d});return e.$$.update=()=>{e.$$.dirty&12&&n(0,l=r==="all"?s:s.filter(a=>a.vote_status===r)),e.$$.dirty&1&&Pe(lo,o=pd(l),o)},[l,u,r,s]}class xa extends ce{constructor(t){super(),de(this,t,Ng,Ig,fe,{})}}function or(e,t,n){const l=e.slice();return l[13]=t[n],l}function ir(e,t,n){const l=e.slice();return l[16]=t[n],l}function rr(e,t,n){const l=e.slice();return l[16]=t[n],l}function sr(e){let t,n,l,o,r=e[16]+"",s,u;return{c(){t=G("g"),n=G("line"),o=G("text"),s=q(r),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[10].bottom+e[10].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-1oikip4"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[6](e[16])+e[6].bandwidth()/2} ${e[2]-e[10].bottom})`)},m(a,f){T(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&4&&l!==(l=-a[2]+a[10].bottom+a[10].top)&&h(n,"y2",l),f&16&&r!==(r=a[16]+"")&&K(s,r),f&84&&u!==(u=`translate(${a[6](a[16])+a[6].bandwidth()/2} ${a[2]-a[10].bottom})`)&&h(t,"transform",u)},d(a){a&&P(t)}}}function ar(e){let t,n,l,o;return{c(){t=G("g"),n=G("line"),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1",0),h(n,"x2",l=e[3]-e[10].right-e[10].left),h(n,"y1","0"),h(n,"y2","0"),h(n,"stroke","black"),h(t,"transform",o=`translate(${e[10].left} ${e[5](e[16])+0})`)},m(r,s){T(r,t,s),b(t,n)},p(r,s){s&8&&l!==(l=r[3]-r[10].right-r[10].left)&&h(n,"x2",l),s&32&&o!==(o=`translate(${r[10].left} ${r[5](r[16])+0})`)&&h(t,"transform",o)},d(r){r&&P(t)}}}function ur(e){let t,n,l,o,r,s,u,a,f=Math.round(e[11](e[13].count))+"",c,d,g;return{c(){t=G("g"),n=G("rect"),a=G("text"),c=q(f),h(n,"x",l=e[6](e[13].question)),h(n,"y",o=e[5](e[13].count)),h(n,"height",r=e[2]-e[5](e[13].count)-e[10].bottom),h(n,"fill",s=e[9][e[7]]),h(n,"fill-opacity","0.95"),h(n,"width",u=e[6].bandwidth()),h(n,"class","svelte-1oikip4"),h(a,"class","axis-text svelte-1oikip4"),h(a,"x",d=e[6](e[13].question)+e[6].bandwidth()/2),h(a,"y",g=e[5](e[13].count)-5),h(a,"text-anchor","middle"),h(t,"class","series")},m(p,m){T(p,t,m),b(t,n),b(t,a),b(a,c)},p(p,m){m&80&&l!==(l=p[6](p[13].question))&&h(n,"x",l),m&48&&o!==(o=p[5](p[13].count))&&h(n,"y",o),m&52&&r!==(r=p[2]-p[5](p[13].count)-p[10].bottom)&&h(n,"height",r),m&128&&s!==(s=p[9][p[7]])&&h(n,"fill",s),m&64&&u!==(u=p[6].bandwidth())&&h(n,"width",u),m&16&&f!==(f=Math.round(p[11](p[13].count))+"")&&K(c,f),m&80&&d!==(d=p[6](p[13].question)+p[6].bandwidth()/2)&&h(a,"x",d),m&48&&g!==(g=p[5](p[13].count)-5)&&h(a,"y",g)},d(p){p&&P(t)}}}function Pg(e){let t,n,l,o,r,s,u=e[8][e[7]]+"",a,f,c,d,g,p,m,_,v,y=e[4].map(fr),w=[];for(let C=0;C<y.length;C+=1)w[C]=sr(rr(e,y,C));let S=e[5].ticks(),M=[];for(let C=0;C<S.length;C+=1)M[C]=ar(ir(e,S,C));let $=e[4],F=[];for(let C=0;C<$.length;C+=1)F[C]=ur(or(e,$,C));return{c(){t=A("div"),n=G("svg");for(let C=0;C<w.length;C+=1)w[C].c();l=Se();for(let C=0;C<M.length;C+=1)M[C].c();o=Se();for(let C=0;C<F.length;C+=1)F[C].c();r=G("text"),s=q("Question Type: "),a=q(u),c=G("line"),m=G("line"),h(r,"class","chart-title svelte-1oikip4"),h(r,"y",e[10].top/2+1),h(r,"x",f=(e[3]+e[10].left)/2),h(r,"text-anchor","middle"),h(c,"class","axis-line svelte-1oikip4"),h(c,"x1",e[10].left),h(c,"x2",d=e[3]-e[10].right),h(c,"y1",g=e[2]-e[10].bottom),h(c,"y2",p=e[2]-e[10].bottom),h(m,"class","axis-line svelte-1oikip4"),h(m,"x1",e[10].left),h(m,"x2",e[10].left),h(m,"y1",e[10].top),h(m,"y2",_=e[2]-e[10].bottom),h(m,"opacity","0"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","stackedrect-holder"),h(t,"class","svelte-1oikip4"),Me(()=>e[12].call(t))},m(C,R){T(C,t,R),b(t,n);for(let k=0;k<w.length;k+=1)w[k]&&w[k].m(n,null);b(n,l);for(let k=0;k<M.length;k+=1)M[k]&&M[k].m(n,null);b(n,o);for(let k=0;k<F.length;k+=1)F[k]&&F[k].m(n,null);b(n,r),b(r,s),b(r,a),b(n,c),b(n,m),v=ut(t,e[12].bind(t))},p(C,[R]){if(R&1108){y=C[4].map(fr);let k;for(k=0;k<y.length;k+=1){const E=rr(C,y,k);w[k]?w[k].p(E,R):(w[k]=sr(E),w[k].c(),w[k].m(n,l))}for(;k<w.length;k+=1)w[k].d(1);w.length=y.length}if(R&1064){S=C[5].ticks();let k;for(k=0;k<S.length;k+=1){const E=ir(C,S,k);M[k]?M[k].p(E,R):(M[k]=ar(E),M[k].c(),M[k].m(n,o))}for(;k<M.length;k+=1)M[k].d(1);M.length=S.length}if(R&3828){$=C[4];let k;for(k=0;k<$.length;k+=1){const E=or(C,$,k);F[k]?F[k].p(E,R):(F[k]=ur(E),F[k].c(),F[k].m(n,r))}for(;k<F.length;k+=1)F[k].d(1);F.length=$.length}R&128&&u!==(u=C[8][C[7]]+"")&&K(a,u),R&8&&f!==(f=(C[3]+C[10].left)/2)&&h(r,"x",f),R&8&&d!==(d=C[3]-C[10].right)&&h(c,"x2",d),R&4&&g!==(g=C[2]-C[10].bottom)&&h(c,"y1",g),R&4&&p!==(p=C[2]-C[10].bottom)&&h(c,"y2",p),R&4&&_!==(_=C[2]-C[10].bottom)&&h(m,"y2",_),R&2&&h(n,"width",C[1]),R&1&&h(n,"height",C[0])},i:U,o:U,d(C){C&&P(t),_e(w,C),_e(M,C),_e(F,C),v()}}}const fr=e=>e.question;function Tg(e,t,n){let l,o,r,s,u,a;ue(e,lo,v=>n(4,u=v)),ue(e,st,v=>n(7,a=v));const f={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"},c={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let d=300,g=300,p={top:35,bottom:10,left:25,right:5};const m=vt(".1f");function _(){g=this.offsetWidth,d=this.offsetHeight,n(1,g),n(0,d)}return e.$$.update=()=>{e.$$.dirty&2&&n(3,l=g-p.left-p.right),e.$$.dirty&1&&n(2,o=d-p.top-p.bottom),e.$$.dirty&24&&n(6,r=Lt().rangeRound([p.left,l-p.right]).padding(.05).domain(u.map(v=>v.question))),e.$$.dirty&20&&n(5,s=We().rangeRound([o-p.bottom,p.top]).domain([0,mt(u,v=>v.count)])),e.$$.dirty&16&&console.log(u)},[d,g,o,l,u,s,r,a,f,c,p,m,_]}class Ua extends ce{constructor(t){super(),de(this,t,Tg,Pg,fe,{})}}function cr(e,t,n){const l=e.slice();l[19]=t[n];const o=l[7](l[19].x1)-l[7](l[19].x0);return l[20]=o,l}function dr(e,t,n){const l=e.slice();return l[23]=t[n],l}function hr(e){let t,n,l,o,r=e[23]+"",s,u;return{c(){t=G("g"),n=G("line"),o=G("text"),s=q(r),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-kz2qh6"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[7](e[23])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&4&&l!==(l=-a[2]+a[9].bottom+a[9].top)&&h(n,"y2",l),f&128&&r!==(r=a[23]+"")&&K(s,r),f&132&&u!==(u=`translate(${a[7](a[23])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&h(t,"transform",u)},d(a){a&&P(t)}}}function gr(e){let t,n,l,o,r,s,u;return{c(){t=G("g"),n=G("rect"),h(n,"x",l=e[7](e[19].x0)+1),h(n,"width",o=e[20]),h(n,"y",r=e[6](e[19].length)),h(n,"height",s=e[6](0)-e[6](e[19].length)),h(n,"fill",u=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n)},p(a,f){f&136&&l!==(l=a[7](a[19].x0)+1)&&h(n,"x",l),f&136&&o!==(o=a[20])&&h(n,"width",o),f&72&&r!==(r=a[6](a[19].length))&&h(n,"y",r),f&72&&s!==(s=a[6](0)-a[6](a[19].length))&&h(n,"height",s),f&32&&u!==(u=a[8][a[5]])&&h(n,"fill",u)},d(a){a&&P(t)}}}function Og(e){let t,n,l,o,r,s,u,a,f,c,d,g=e[7].ticks(),p=[];for(let v=0;v<g.length;v+=1)p[v]=hr(dr(e,g,v));let m=e[3],_=[];for(let v=0;v<m.length;v+=1)_[v]=gr(cr(e,m,v));return{c(){t=A("div"),n=G("svg");for(let v=0;v<p.length;v+=1)p[v].c();l=Se();for(let v=0;v<_.length;v+=1)_[v].c();o=G("text"),r=q("Answer Length"),u=G("line"),h(o,"class","chart-title svelte-kz2qh6"),h(o,"y",e[9].top/2+5),h(o,"x",s=(e[4]+e[9].left)/2),h(o,"text-anchor","middle"),h(u,"class","axis-line svelte-kz2qh6"),h(u,"x1",e[9].left),h(u,"x2",a=e[4]-e[9].right),h(u,"y1",f=e[2]-e[9].bottom),h(u,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),Me(()=>e[14].call(t))},m(v,y){T(v,t,y),b(t,n);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(n,null);b(n,l);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(n,null);b(n,o),b(o,r),b(n,u),d=ut(t,e[14].bind(t))},p(v,[y]){if(y&644){g=v[7].ticks();let w;for(w=0;w<g.length;w+=1){const S=dr(v,g,w);p[w]?p[w].p(S,y):(p[w]=hr(S),p[w].c(),p[w].m(n,l))}for(;w<p.length;w+=1)p[w].d(1);p.length=g.length}if(y&488){m=v[3];let w;for(w=0;w<m.length;w+=1){const S=cr(v,m,w);_[w]?_[w].p(S,y):(_[w]=gr(S),_[w].c(),_[w].m(n,o))}for(;w<_.length;w+=1)_[w].d(1);_.length=m.length}y&16&&s!==(s=(v[4]+v[9].left)/2)&&h(o,"x",s),y&16&&a!==(a=v[4]-v[9].right)&&h(u,"x2",a),y&4&&f!==(f=v[2]-v[9].bottom)&&h(u,"y1",f),y&4&&c!==(c=v[2]-v[9].bottom)&&h(u,"y2",c),y&2&&h(n,"width",v[1]),y&1&&h(n,"height",v[0])},i:U,o:U,d(v){v&&P(t),_e(p,v),_e(_,v),d()}}}let pr=100;function Vg(e,t,n){let l,o,r,s,u,a,f,c,d,g;ue(e,st,S=>n(5,d=S)),ue(e,qe,S=>n(13,g=S));const p={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let m=300,_=300,v={top:15,bottom:10,left:25,right:5};vt(".1f");let y=Array.from({length:pr},(S,M)=>M);function w(){_=this.offsetWidth,m=this.offsetHeight,n(1,_),n(0,m)}return e.$$.update=()=>{e.$$.dirty&8224&&n(12,l=d==="all"?g:g.filter(S=>S.vote_status===d)),e.$$.dirty&4096&&n(11,o=$a(l)),e.$$.dirty&2&&n(4,r=_-v.left-v.right),e.$$.dirty&1&&n(2,s=m-v.top-v.bottom),e.$$.dirty&2048&&n(3,u=Fa().thresholds(y).value(S=>S.answer)(o)),e.$$.dirty&16&&n(7,a=We().domain([3,pr]).range([v.left,r-v.right])),e.$$.dirty&12&&n(6,f=We().domain([0,mt(u,S=>S.length)]).range([s-v.bottom,v.top])),e.$$.dirty&2048&&n(10,c=mt(o,S=>S.length)),e.$$.dirty&1056&&We().domain([0,c]).range(["white",p[d]]).interpolate(Pn)},[m,_,s,u,r,d,f,a,p,v,c,o,l,g,w]}class Wa extends ce{constructor(t){super(),de(this,t,Vg,Og,fe,{})}}function mr(e,t,n){const l=e.slice();l[18]=t[n];const o=l[7](l[18].x1)-l[7](l[18].x0);return l[19]=o,l}function _r(e,t,n){const l=e.slice();return l[22]=t[n],l}function vr(e){let t,n,l,o,r=e[22]+"",s,u;return{c(){t=G("g"),n=G("line"),o=G("text"),s=q(r),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-kz2qh6"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[7](e[22])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&4&&l!==(l=-a[2]+a[9].bottom+a[9].top)&&h(n,"y2",l),f&128&&r!==(r=a[22]+"")&&K(s,r),f&132&&u!==(u=`translate(${a[7](a[22])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&h(t,"transform",u)},d(a){a&&P(t)}}}function br(e){let t,n,l,o,r,s,u;return{c(){t=G("g"),n=G("rect"),h(n,"x",l=e[7](e[18].x0)+1),h(n,"width",o=e[19]),h(n,"y",r=e[6](e[18].length)),h(n,"height",s=e[6](0)-e[6](e[18].length)),h(n,"fill",u=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n)},p(a,f){f&136&&l!==(l=a[7](a[18].x0)+1)&&h(n,"x",l),f&136&&o!==(o=a[19])&&h(n,"width",o),f&72&&r!==(r=a[6](a[18].length))&&h(n,"y",r),f&72&&s!==(s=a[6](0)-a[6](a[18].length))&&h(n,"height",s),f&32&&u!==(u=a[8][a[5]])&&h(n,"fill",u)},d(a){a&&P(t)}}}function zg(e){let t,n,l,o,r,s,u,a,f,c,d,g=e[7].ticks(),p=[];for(let v=0;v<g.length;v+=1)p[v]=vr(_r(e,g,v));let m=e[3],_=[];for(let v=0;v<m.length;v+=1)_[v]=br(mr(e,m,v));return{c(){t=A("div"),n=G("svg");for(let v=0;v<p.length;v+=1)p[v].c();l=Se();for(let v=0;v<_.length;v+=1)_[v].c();o=G("text"),r=q("Question Length"),u=G("line"),h(o,"class","chart-title svelte-kz2qh6"),h(o,"y",e[9].top/2+5),h(o,"x",s=(e[4]+e[9].left)/2),h(o,"text-anchor","middle"),h(u,"class","axis-line svelte-kz2qh6"),h(u,"x1",e[9].left),h(u,"x2",a=e[4]-e[9].right),h(u,"y1",f=e[2]-e[9].bottom),h(u,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),Me(()=>e[13].call(t))},m(v,y){T(v,t,y),b(t,n);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(n,null);b(n,l);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(n,null);b(n,o),b(o,r),b(n,u),d=ut(t,e[13].bind(t))},p(v,[y]){if(y&644){g=v[7].ticks();let w;for(w=0;w<g.length;w+=1){const S=_r(v,g,w);p[w]?p[w].p(S,y):(p[w]=vr(S),p[w].c(),p[w].m(n,l))}for(;w<p.length;w+=1)p[w].d(1);p.length=g.length}if(y&488){m=v[3];let w;for(w=0;w<m.length;w+=1){const S=mr(v,m,w);_[w]?_[w].p(S,y):(_[w]=br(S),_[w].c(),_[w].m(n,o))}for(;w<_.length;w+=1)_[w].d(1);_.length=m.length}y&16&&s!==(s=(v[4]+v[9].left)/2)&&h(o,"x",s),y&16&&a!==(a=v[4]-v[9].right)&&h(u,"x2",a),y&4&&f!==(f=v[2]-v[9].bottom)&&h(u,"y1",f),y&4&&c!==(c=v[2]-v[9].bottom)&&h(u,"y2",c),y&2&&h(n,"width",v[1]),y&1&&h(n,"height",v[0])},i:U,o:U,d(v){v&&P(t),_e(p,v),_e(_,v),d()}}}let wr=100;function Lg(e,t,n){let l,o,r,s,u,a,f,c,d;ue(e,st,w=>n(5,c=w)),ue(e,qe,w=>n(12,d=w));const g={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let p=300,m=300,_={top:15,bottom:10,left:25,right:5},v=Array.from({length:wr},(w,S)=>S);Mt().range(["var(--yellow)","var(--red)","var(--green)"]);function y(){m=this.offsetWidth,p=this.offsetHeight,n(1,m),n(0,p)}return e.$$.update=()=>{e.$$.dirty&4128&&n(11,l=c==="all"?d:d.filter(w=>w.vote_status===c)),e.$$.dirty&2048&&n(10,o=$a(l)),e.$$.dirty&2&&n(4,r=m-_.left-_.right),e.$$.dirty&1&&n(2,s=p-_.top-_.bottom),e.$$.dirty&1024&&n(3,u=Fa().thresholds(v).value(w=>w.question)(o)),e.$$.dirty&16&&n(7,a=We().domain([3,wr]).range([_.left,r-_.right])),e.$$.dirty&12&&n(6,f=We().domain([0,mt(u,w=>w.length)]).range([s-_.bottom,_.top])),e.$$.dirty&1024&&mt(o,w=>w.length)},[p,m,s,u,r,c,f,a,g,_,o,l,d,y]}class Xa extends ce{constructor(t){super(),de(this,t,Lg,zg,fe,{})}}function qg(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m=Math.round(e[5](e[3]))+"",_,v,y,w,S,M,$,F;return{c(){t=A("div"),n=A("div"),l=A("p"),l.textContent="Questions",o=N(),r=A("select"),s=A("option"),s.textContent="All",u=A("option"),u.textContent="Good",a=A("option"),a.textContent="Bad",f=A("option"),f.textContent="N/A",c=N(),d=A("div"),g=G("svg"),p=G("text"),_=q(m),S=N(),M=A("p"),M.textContent="number of responses",h(l,"class","card-text svelte-1pknxov"),s.__value="all",s.value=s.__value,h(s,"class","svelte-1pknxov"),u.__value="up",u.value=u.__value,h(u,"class","svelte-1pknxov"),a.__value="down",a.value=a.__value,h(a,"class","svelte-1pknxov"),f.__value="n/a",f.value=f.__value,h(f,"class","svelte-1pknxov"),h(r,"id","feedback-dropdown"),h(r,"name","feedback-dropdown"),Ae(r,"background",e[6][e[0]]),h(r,"class","svelte-1pknxov"),e[0]===void 0&&Me(()=>e[9].call(r)),h(n,"class","svelte-1pknxov"),h(p,"dominant-baseline","middle"),h(p,"x",v=e[2]/2),h(p,"y",y=e[1]/2),h(p,"text-anchor","middle"),h(p,"class","svelte-1pknxov"),h(g,"width",e[2]),h(g,"height",e[1]),h(g,"class","svelte-1pknxov"),h(d,"class","svelte-1pknxov"),Me(()=>e[10].call(d)),h(M,"class","small svelte-1pknxov"),h(t,"class","card-container svelte-1pknxov"),Ae(t,"background",e[6][e[0]])},m(C,R){T(C,t,R),b(t,n),b(n,l),b(n,o),b(n,r),b(r,s),b(r,u),b(r,a),b(r,f),ll(r,e[0],!0),b(t,c),b(t,d),b(d,g),b(g,p),b(p,_),w=ut(d,e[10].bind(d)),b(t,S),b(t,M),$||(F=x(r,"change",e[9]),$=!0)},p(C,[R]){R&1&&Ae(r,"background",C[6][C[0]]),R&1&&ll(r,C[0]),R&8&&m!==(m=Math.round(C[5](C[3]))+"")&&K(_,m),R&4&&v!==(v=C[2]/2)&&h(p,"x",v),R&2&&y!==(y=C[1]/2)&&h(p,"y",y),R&4&&h(g,"width",C[2]),R&2&&h(g,"height",C[1]),R&1&&Ae(t,"background",C[6][C[0]])},i:U,o:U,d(C){C&&P(t),w(),$=!1,F()}}}function Hg(e,t){return t==="all"?e.length:e.filter(l=>l.vote_status===t).length}function Gg(e,t,n){let l,o,r,s;ue(e,st,m=>n(0,o=m)),ue(e,qe,m=>n(8,r=m));let u,a,f=Fo(0);ue(e,f,m=>n(3,s=m));const c=vt(".1f"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function g(){o=ra(this),st.set(o)}function p(){a=this.clientWidth,u=this.clientHeight,n(2,a),n(1,u)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,l=Hg(r,o)),e.$$.dirty&128&&console.log("fbc",l),e.$$.dirty&128&&f.set(l)},[o,u,a,s,f,c,d,l,r,g,p]}class Ya extends ce{constructor(t){super(),de(this,t,Gg,qg,fe,{})}}function Bg(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m=e[5](e[3])+"",_,v,y,w,S,M,$,F;return{c(){t=A("div"),n=A("div"),l=A("p"),l.textContent="Questions",o=N(),r=A("select"),s=A("option"),s.textContent="All",u=A("option"),u.textContent="Good",a=A("option"),a.textContent="Bad",f=A("option"),f.textContent="N/A",c=N(),d=A("div"),g=G("svg"),p=G("text"),_=q(m),S=N(),M=A("p"),M.textContent="percentage of responses",h(l,"class","card-text svelte-mchgj2"),s.__value="all",s.value=s.__value,u.__value="up",u.value=u.__value,a.__value="down",a.value=a.__value,f.__value="n/a",f.value=f.__value,h(r,"id","feedback-dropdown"),h(r,"name","feedback-dropdown"),Ae(r,"background",e[6][e[0]]),h(r,"class","svelte-mchgj2"),e[0]===void 0&&Me(()=>e[9].call(r)),h(p,"dominant-baseline","middle"),h(p,"x",v=e[2]/2),h(p,"y",y=e[1]/2),h(p,"text-anchor","middle"),h(p,"class","svelte-mchgj2"),h(g,"width",e[2]),h(g,"height",e[1]),h(g,"class","svelte-mchgj2"),Me(()=>e[10].call(d)),h(M,"class","small svelte-mchgj2"),h(t,"class","card-container svelte-mchgj2"),Ae(t,"background",e[6][e[0]])},m(C,R){T(C,t,R),b(t,n),b(n,l),b(n,o),b(n,r),b(r,s),b(r,u),b(r,a),b(r,f),ll(r,e[0],!0),b(t,c),b(t,d),b(d,g),b(g,p),b(p,_),w=ut(d,e[10].bind(d)),b(t,S),b(t,M),$||(F=x(r,"change",e[9]),$=!0)},p(C,[R]){R&1&&Ae(r,"background",C[6][C[0]]),R&1&&ll(r,C[0]),R&8&&m!==(m=C[5](C[3])+"")&&K(_,m),R&4&&v!==(v=C[2]/2)&&h(p,"x",v),R&2&&y!==(y=C[1]/2)&&h(p,"y",y),R&4&&h(g,"width",C[2]),R&2&&h(g,"height",C[1]),R&1&&Ae(t,"background",C[6][C[0]])},i:U,o:U,d(C){C&&P(t),w(),$=!1,F()}}}function jg(e,t){const n=e.length;return t==="all"?1:e.filter(o=>o.vote_status===t).length/n}function xg(e,t,n){let l,o,r,s;ue(e,st,m=>n(0,o=m)),ue(e,qe,m=>n(8,r=m));let u,a,f=Fo(0);ue(e,f,m=>n(3,s=m));const c=vt(".1%"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function g(){o=ra(this),st.set(o)}function p(){a=this.clientWidth,u=this.clientHeight,n(2,a),n(1,u)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,l=jg(r,o)),e.$$.dirty&128&&f.set(l)},[o,u,a,s,f,c,d,l,r,g,p]}class Qa extends ce{constructor(t){super(),de(this,t,xg,Bg,fe,{})}}function Ug(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,y,w,S,M,$,F,C,R,k,E,I;return r=new Ya({}),a=new Qa({}),d=new ja({}),m=new Ua({props:{feedback:"Bad"}}),y=new Xa({}),M=new Wa({}),E=new xa({}),{c(){t=A("div"),n=A("div"),l=A("div"),o=A("div"),ne(r.$$.fragment),s=N(),u=A("div"),ne(a.$$.fragment),f=N(),c=A("div"),ne(d.$$.fragment),g=N(),p=A("div"),ne(m.$$.fragment),_=N(),v=A("div"),ne(y.$$.fragment),w=N(),S=A("div"),ne(M.$$.fragment),$=N(),F=A("div"),C=A("div"),C.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,R=N(),k=A("div"),ne(E.$$.fragment),h(o,"class","card-1 svelte-14znspc"),h(u,"class","card-2"),h(l,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(p,"class","left-question svelte-14znspc"),h(v,"class","left-filter svelte-14znspc"),h(S,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h(C,"class","right-chart svelte-14znspc"),h(k,"class","right-table svelte-14znspc"),h(F,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(D,L){T(D,t,L),b(t,n),b(n,l),b(l,o),ee(r,o,null),b(l,s),b(l,u),ee(a,u,null),b(n,f),b(n,c),ee(d,c,null),b(n,g),b(n,p),ee(m,p,null),b(n,_),b(n,v),ee(y,v,null),b(n,w),b(n,S),ee(M,S,null),b(t,$),b(t,F),b(F,C),b(F,R),b(F,k),ee(E,k,null),I=!0},p:U,i(D){I||(V(r.$$.fragment,D),V(a.$$.fragment,D),V(d.$$.fragment,D),V(m.$$.fragment,D),V(y.$$.fragment,D),V(M.$$.fragment,D),V(E.$$.fragment,D),I=!0)},o(D){z(r.$$.fragment,D),z(a.$$.fragment,D),z(d.$$.fragment,D),z(m.$$.fragment,D),z(y.$$.fragment,D),z(M.$$.fragment,D),z(E.$$.fragment,D),I=!1},d(D){D&&P(t),te(r),te(a),te(d),te(m),te(y),te(M),te(E)}}}function Wg(e,t,n){let l;ue(e,An,r=>n(0,l=r)),ft(()=>{o()});async function o(){const a=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[3]}));Pe(An,l=[...a],l)}return[]}class Ka extends ce{constructor(t){super(),de(this,t,Wg,Ug,fe,{})}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,l)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yr(Object(n),!0).forEach(function(l){Xg(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function Kn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kn=function(t){return typeof t}:Kn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(e)}function Xg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(){return _t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},_t.apply(this,arguments)}function Yg(e,t){if(e==null)return{};var n={},l=Object.keys(e),o,r;for(r=0;r<l.length;r++)o=l[r],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Qg(e,t){if(e==null)return{};var n=Yg(e,t),l,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)l=r[o],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}var Kg="1.15.0";function ht(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var bt=ht(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Tn=ht(/Edge/i),kr=ht(/firefox/i),vn=ht(/safari/i)&&!ht(/chrome/i)&&!ht(/android/i),Ja=ht(/iP(ad|od|hone)/i),Za=ht(/chrome/i)&&ht(/android/i),eu={capture:!1,passive:!1};function me(e,t,n){e.addEventListener(t,n,!bt&&eu)}function ge(e,t,n){e.removeEventListener(t,n,!bt&&eu)}function gl(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Jg(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function tt(e,t,n,l){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&gl(e,t):gl(e,t))||l&&e===n)return e;if(e===n)break}while(e=Jg(e))}return null}var Sr=/\s+/g;function je(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var l=(" "+e.className+" ").replace(Sr," ").replace(" "+t+" "," ");e.className=(l+(n?" "+t:"")).replace(Sr," ")}}function Z(e,t,n){var l=e&&e.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in l)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),l[t]=n+(typeof n=="string"?"":"px")}}function Jt(e,t){var n="";if(typeof e=="string")n=e;else do{var l=Z(e,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function tu(e,t,n){if(e){var l=e.getElementsByTagName(t),o=0,r=l.length;if(n)for(;o<r;o++)n(l[o],o);return l}return[]}function rt(){var e=document.scrollingElement;return e||document.documentElement}function Fe(e,t,n,l,o){if(!(!e.getBoundingClientRect&&e!==window)){var r,s,u,a,f,c,d;if(e!==window&&e.parentNode&&e!==rt()?(r=e.getBoundingClientRect(),s=r.top,u=r.left,a=r.bottom,f=r.right,c=r.height,d=r.width):(s=0,u=0,a=window.innerHeight,f=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!bt))do if(o&&o.getBoundingClientRect&&(Z(o,"transform")!=="none"||n&&Z(o,"position")!=="static")){var g=o.getBoundingClientRect();s-=g.top+parseInt(Z(o,"border-top-width")),u-=g.left+parseInt(Z(o,"border-left-width")),a=s+r.height,f=u+r.width;break}while(o=o.parentNode);if(l&&e!==window){var p=Jt(o||e),m=p&&p.a,_=p&&p.d;p&&(s/=_,u/=m,d/=m,c/=_,a=s+c,f=u+d)}return{top:s,left:u,bottom:a,right:f,width:d,height:c}}}function Cr(e,t,n){for(var l=Ct(e,!0),o=Fe(e)[t];l;){var r=Fe(l)[n],s=void 0;if(n==="top"||n==="left"?s=o>=r:s=o<=r,!s)return l;if(l===rt())break;l=Ct(l,!1)}return!1}function nn(e,t,n,l){for(var o=0,r=0,s=e.children;r<s.length;){if(s[r].style.display!=="none"&&s[r]!==J.ghost&&(l||s[r]!==J.dragged)&&tt(s[r],n.draggable,e,!1)){if(o===t)return s[r];o++}r++}return null}function zo(e,t){for(var n=e.lastElementChild;n&&(n===J.ghost||Z(n,"display")==="none"||t&&!gl(n,t));)n=n.previousElementSibling;return n||null}function Xe(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==J.clone&&(!t||gl(e,t))&&n++;return n}function $r(e){var t=0,n=0,l=rt();if(e)do{var o=Jt(e),r=o.a,s=o.d;t+=e.scrollLeft*r,n+=e.scrollTop*s}while(e!==l&&(e=e.parentNode));return[t,n]}function Zg(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var l in t)if(t.hasOwnProperty(l)&&t[l]===e[n][l])return Number(n)}return-1}function Ct(e,t){if(!e||!e.getBoundingClientRect)return rt();var n=e,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=Z(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return rt();if(l||t)return n;l=!0}}while(n=n.parentNode);return rt()}function ep(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Vl(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var bn;function nu(e,t){return function(){if(!bn){var n=arguments,l=this;n.length===1?e.call(l,n[0]):e.apply(l,n),bn=setTimeout(function(){bn=void 0},t)}}}function tp(){clearTimeout(bn),bn=void 0}function lu(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function ou(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var Ue="Sortable"+new Date().getTime();function np(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(o){if(!(Z(o,"display")==="none"||o===J.ghost)){e.push({target:o,rect:Fe(o)});var r=at({},e[e.length-1].rect);if(o.thisAnimationDuration){var s=Jt(o,!0);s&&(r.top-=s.f,r.left-=s.e)}o.fromRect=r}})}},addAnimationState:function(l){e.push(l)},removeAnimationState:function(l){e.splice(Zg(e,{target:l}),1)},animateAll:function(l){var o=this;if(!this.options.animation){clearTimeout(t),typeof l=="function"&&l();return}var r=!1,s=0;e.forEach(function(u){var a=0,f=u.target,c=f.fromRect,d=Fe(f),g=f.prevFromRect,p=f.prevToRect,m=u.rect,_=Jt(f,!0);_&&(d.top-=_.f,d.left-=_.e),f.toRect=d,f.thisAnimationDuration&&Vl(g,d)&&!Vl(c,d)&&(m.top-d.top)/(m.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(a=op(m,g,p,o.options)),Vl(d,c)||(f.prevFromRect=c,f.prevToRect=d,a||(a=o.options.animation),o.animate(f,m,d,a)),a&&(r=!0,s=Math.max(s,a),clearTimeout(f.animationResetTimer),f.animationResetTimer=setTimeout(function(){f.animationTime=0,f.prevFromRect=null,f.fromRect=null,f.prevToRect=null,f.thisAnimationDuration=null},a),f.thisAnimationDuration=a)}),clearTimeout(t),r?t=setTimeout(function(){typeof l=="function"&&l()},s):typeof l=="function"&&l(),e=[]},animate:function(l,o,r,s){if(s){Z(l,"transition",""),Z(l,"transform","");var u=Jt(this.el),a=u&&u.a,f=u&&u.d,c=(o.left-r.left)/(a||1),d=(o.top-r.top)/(f||1);l.animatingX=!!c,l.animatingY=!!d,Z(l,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=lp(l),Z(l,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Z(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){Z(l,"transition",""),Z(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},s)}}}}function lp(e){return e.offsetWidth}function op(e,t,n,l){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*l.animation}var Bt=[],zl={initializeByDefault:!0},On={mount:function(t){for(var n in zl)zl.hasOwnProperty(n)&&!(n in t)&&(t[n]=zl[n]);Bt.forEach(function(l){if(l.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Bt.push(t)},pluginEvent:function(t,n,l){var o=this;this.eventCanceled=!1,l.cancel=function(){o.eventCanceled=!0};var r=t+"Global";Bt.forEach(function(s){n[s.pluginName]&&(n[s.pluginName][r]&&n[s.pluginName][r](at({sortable:n},l)),n.options[s.pluginName]&&n[s.pluginName][t]&&n[s.pluginName][t](at({sortable:n},l)))})},initializePlugins:function(t,n,l,o){Bt.forEach(function(u){var a=u.pluginName;if(!(!t.options[a]&&!u.initializeByDefault)){var f=new u(t,n,t.options);f.sortable=t,f.options=t.options,t[a]=f,_t(l,f.defaults)}});for(var r in t.options)if(t.options.hasOwnProperty(r)){var s=this.modifyOption(t,r,t.options[r]);typeof s<"u"&&(t.options[r]=s)}},getEventProperties:function(t,n){var l={};return Bt.forEach(function(o){typeof o.eventProperties=="function"&&_t(l,o.eventProperties.call(n[o.pluginName],t))}),l},modifyOption:function(t,n,l){var o;return Bt.forEach(function(r){t[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(o=r.optionListeners[n].call(t[r.pluginName],l))}),o}};function ip(e){var t=e.sortable,n=e.rootEl,l=e.name,o=e.targetEl,r=e.cloneEl,s=e.toEl,u=e.fromEl,a=e.oldIndex,f=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,g=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[Ue],!!t){var _,v=t.options,y="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!bt&&!Tn?_=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent(l,!0,!0)),_.to=s||n,_.from=u||n,_.item=o||n,_.clone=r,_.oldIndex=a,_.newIndex=f,_.oldDraggableIndex=c,_.newDraggableIndex=d,_.originalEvent=g,_.pullMode=p?p.lastPutMode:void 0;var w=at(at({},m),On.getEventProperties(l,t));for(var S in w)_[S]=w[S];n&&n.dispatchEvent(_),v[y]&&v[y].call(t,_)}}var rp=["evt"],ze=function(t,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=l.evt,r=Qg(l,rp);On.pluginEvent.bind(J)(t,n,at({dragEl:H,parentEl:Re,ghostEl:re,rootEl:ke,nextEl:Nt,lastDownEl:Jn,cloneEl:Ce,cloneHidden:yt,dragStarted:dn,putSortable:Ie,activeSortable:J.active,originalEvent:o,oldIndex:Wt,oldDraggableIndex:wn,newIndex:xe,newDraggableIndex:wt,hideGhostForTarget:au,unhideGhostForTarget:uu,cloneNowHidden:function(){yt=!0},cloneNowShown:function(){yt=!1},dispatchSortableEvent:function(u){Te({sortable:n,name:u,originalEvent:o})}},r))};function Te(e){ip(at({putSortable:Ie,cloneEl:Ce,targetEl:H,rootEl:ke,oldIndex:Wt,oldDraggableIndex:wn,newIndex:xe,newDraggableIndex:wt},e))}var H,Re,re,ke,Nt,Jn,Ce,yt,Wt,xe,wn,wt,Bn,Ie,Ut=!1,pl=!1,ml=[],Ft,Ke,Ll,ql,Rr,Ar,dn,jt,yn,kn=!1,jn=!1,Zn,Ne,Hl=[],_o=!1,_l=[],Al=typeof document<"u",xn=Ja,Mr=Tn||bt?"cssFloat":"float",sp=Al&&!Za&&!Ja&&"draggable"in document.createElement("div"),iu=function(){if(Al){if(bt)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),ru=function(t,n){var l=Z(t),o=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),r=nn(t,0,n),s=nn(t,1,n),u=r&&Z(r),a=s&&Z(s),f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Fe(r).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Fe(s).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&u.float&&u.float!=="none"){var d=u.float==="left"?"left":"right";return s&&(a.clear==="both"||a.clear===d)?"vertical":"horizontal"}return r&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||f>=o&&l[Mr]==="none"||s&&l[Mr]==="none"&&f+c>o)?"vertical":"horizontal"},ap=function(t,n,l){var o=l?t.left:t.top,r=l?t.right:t.bottom,s=l?t.width:t.height,u=l?n.left:n.top,a=l?n.right:n.bottom,f=l?n.width:n.height;return o===u||r===a||o+s/2===u+f/2},up=function(t,n){var l;return ml.some(function(o){var r=o[Ue].options.emptyInsertThreshold;if(!(!r||zo(o))){var s=Fe(o),u=t>=s.left-r&&t<=s.right+r,a=n>=s.top-r&&n<=s.bottom+r;if(u&&a)return l=o}}),l},su=function(t){function n(r,s){return function(u,a,f,c){var d=u.options.group.name&&a.options.group.name&&u.options.group.name===a.options.group.name;if(r==null&&(s||d))return!0;if(r==null||r===!1)return!1;if(s&&r==="clone")return r;if(typeof r=="function")return n(r(u,a,f,c),s)(u,a,f,c);var g=(s?u:a).options.group.name;return r===!0||typeof r=="string"&&r===g||r.join&&r.indexOf(g)>-1}}var l={},o=t.group;(!o||Kn(o)!="object")&&(o={name:o}),l.name=o.name,l.checkPull=n(o.pull,!0),l.checkPut=n(o.put),l.revertClone=o.revertClone,t.group=l},au=function(){!iu&&re&&Z(re,"display","none")},uu=function(){!iu&&re&&Z(re,"display","")};Al&&!Za&&document.addEventListener("click",function(e){if(pl)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),pl=!1,!1},!0);var Dt=function(t){if(H){t=t.touches?t.touches[0]:t;var n=up(t.clientX,t.clientY);if(n){var l={};for(var o in t)t.hasOwnProperty(o)&&(l[o]=t[o]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[Ue]._onDragOver(l)}}},fp=function(t){H&&H.parentNode[Ue]._isOutsideThisEl(t.target)};function J(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=_t({},t),e[Ue]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ru(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,u){s.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:J.supportPointer!==!1&&"PointerEvent"in window&&!vn,emptyInsertThreshold:5};On.initializePlugins(this,e,n);for(var l in n)!(l in t)&&(t[l]=n[l]);su(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:sp,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?me(e,"pointerdown",this._onTapStart):(me(e,"mousedown",this._onTapStart),me(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(me(e,"dragover",this),me(e,"dragenter",this)),ml.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),_t(this,np())}J.prototype={constructor:J,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(jt=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,H):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,l=this.el,o=this.options,r=o.preventOnFilter,s=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,a=(u||t).target,f=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,c=o.filter;if(vp(l),!H&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||o.disabled)&&!f.isContentEditable&&!(!this.nativeDraggable&&vn&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=tt(a,o.draggable,l,!1),!(a&&a.animated)&&Jn!==a)){if(Wt=Xe(a),wn=Xe(a,o.draggable),typeof c=="function"){if(c.call(this,t,a,this)){Te({sortable:n,rootEl:f,name:"filter",targetEl:a,toEl:l,fromEl:l}),ze("filter",n,{evt:t}),r&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=tt(f,d.trim(),l,!1),d)return Te({sortable:n,rootEl:d,name:"filter",targetEl:a,fromEl:l,toEl:l}),ze("filter",n,{evt:t}),!0}),c)){r&&t.cancelable&&t.preventDefault();return}o.handle&&!tt(f,o.handle,l,!1)||this._prepareDragStart(t,u,a)}}},_prepareDragStart:function(t,n,l){var o=this,r=o.el,s=o.options,u=r.ownerDocument,a;if(l&&!H&&l.parentNode===r){var f=Fe(l);if(ke=r,H=l,Re=H.parentNode,Nt=H.nextSibling,Jn=l,Bn=s.group,J.dragged=H,Ft={target:H,clientX:(n||t).clientX,clientY:(n||t).clientY},Rr=Ft.clientX-f.left,Ar=Ft.clientY-f.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,H.style["will-change"]="all",a=function(){if(ze("delayEnded",o,{evt:t}),J.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!kr&&o.nativeDraggable&&(H.draggable=!0),o._triggerDragStart(t,n),Te({sortable:o,name:"choose",originalEvent:t}),je(H,s.chosenClass,!0)},s.ignore.split(",").forEach(function(c){tu(H,c.trim(),Gl)}),me(u,"dragover",Dt),me(u,"mousemove",Dt),me(u,"touchmove",Dt),me(u,"mouseup",o._onDrop),me(u,"touchend",o._onDrop),me(u,"touchcancel",o._onDrop),kr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,H.draggable=!0),ze("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Tn||bt))){if(J.eventCanceled){this._onDrop();return}me(u,"mouseup",o._disableDelayedDrag),me(u,"touchend",o._disableDelayedDrag),me(u,"touchcancel",o._disableDelayedDrag),me(u,"mousemove",o._delayedDragTouchMoveHandler),me(u,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&me(u,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,s.delay)}else a()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){H&&Gl(H),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ge(t,"mouseup",this._disableDelayedDrag),ge(t,"touchend",this._disableDelayedDrag),ge(t,"touchcancel",this._disableDelayedDrag),ge(t,"mousemove",this._delayedDragTouchMoveHandler),ge(t,"touchmove",this._delayedDragTouchMoveHandler),ge(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?me(document,"pointermove",this._onTouchMove):n?me(document,"touchmove",this._onTouchMove):me(document,"mousemove",this._onTouchMove):(me(H,"dragend",this),me(ke,"dragstart",this._onDragStart));try{document.selection?el(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Ut=!1,ke&&H){ze("dragStarted",this,{evt:n}),this.nativeDraggable&&me(document,"dragover",fp);var l=this.options;!t&&je(H,l.dragClass,!1),je(H,l.ghostClass,!0),J.active=this,t&&this._appendGhost(),Te({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ke){this._lastX=Ke.clientX,this._lastY=Ke.clientY,au();for(var t=document.elementFromPoint(Ke.clientX,Ke.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ke.clientX,Ke.clientY),t!==n);)n=t;if(H.parentNode[Ue]._isOutsideThisEl(t),n)do{if(n[Ue]){var l=void 0;if(l=n[Ue]._onDragOver({clientX:Ke.clientX,clientY:Ke.clientY,target:t,rootEl:n}),l&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);uu()}},_onTouchMove:function(t){if(Ft){var n=this.options,l=n.fallbackTolerance,o=n.fallbackOffset,r=t.touches?t.touches[0]:t,s=re&&Jt(re,!0),u=re&&s&&s.a,a=re&&s&&s.d,f=xn&&Ne&&$r(Ne),c=(r.clientX-Ft.clientX+o.x)/(u||1)+(f?f[0]-Hl[0]:0)/(u||1),d=(r.clientY-Ft.clientY+o.y)/(a||1)+(f?f[1]-Hl[1]:0)/(a||1);if(!J.active&&!Ut){if(l&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<l)return;this._onDragStart(t,!0)}if(re){s?(s.e+=c-(Ll||0),s.f+=d-(ql||0)):s={a:1,b:0,c:0,d:1,e:c,f:d};var g="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Z(re,"webkitTransform",g),Z(re,"mozTransform",g),Z(re,"msTransform",g),Z(re,"transform",g),Ll=c,ql=d,Ke=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!re){var t=this.options.fallbackOnBody?document.body:ke,n=Fe(H,!0,xn,!0,t),l=this.options;if(xn){for(Ne=t;Z(Ne,"position")==="static"&&Z(Ne,"transform")==="none"&&Ne!==document;)Ne=Ne.parentNode;Ne!==document.body&&Ne!==document.documentElement?(Ne===document&&(Ne=rt()),n.top+=Ne.scrollTop,n.left+=Ne.scrollLeft):Ne=rt(),Hl=$r(Ne)}re=H.cloneNode(!0),je(re,l.ghostClass,!1),je(re,l.fallbackClass,!0),je(re,l.dragClass,!0),Z(re,"transition",""),Z(re,"transform",""),Z(re,"box-sizing","border-box"),Z(re,"margin",0),Z(re,"top",n.top),Z(re,"left",n.left),Z(re,"width",n.width),Z(re,"height",n.height),Z(re,"opacity","0.8"),Z(re,"position",xn?"absolute":"fixed"),Z(re,"zIndex","100000"),Z(re,"pointerEvents","none"),J.ghost=re,t.appendChild(re),Z(re,"transform-origin",Rr/parseInt(re.style.width)*100+"% "+Ar/parseInt(re.style.height)*100+"%")}},_onDragStart:function(t,n){var l=this,o=t.dataTransfer,r=l.options;if(ze("dragStart",this,{evt:t}),J.eventCanceled){this._onDrop();return}ze("setupClone",this),J.eventCanceled||(Ce=ou(H),Ce.removeAttribute("id"),Ce.draggable=!1,Ce.style["will-change"]="",this._hideClone(),je(Ce,this.options.chosenClass,!1),J.clone=Ce),l.cloneId=el(function(){ze("clone",l),!J.eventCanceled&&(l.options.removeCloneOnHide||ke.insertBefore(Ce,H),l._hideClone(),Te({sortable:l,name:"clone"}))}),!n&&je(H,r.dragClass,!0),n?(pl=!0,l._loopId=setInterval(l._emulateDragOver,50)):(ge(document,"mouseup",l._onDrop),ge(document,"touchend",l._onDrop),ge(document,"touchcancel",l._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(l,o,H)),me(document,"drop",l),Z(H,"transform","translateZ(0)")),Ut=!0,l._dragStartId=el(l._dragStarted.bind(l,n,t)),me(document,"selectstart",l),dn=!0,vn&&Z(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,l=t.target,o,r,s,u=this.options,a=u.group,f=J.active,c=Bn===a,d=u.sort,g=Ie||f,p,m=this,_=!1;if(_o)return;function v(pe,W){ze(pe,m,at({evt:t,isOwner:c,axis:p?"vertical":"horizontal",revert:s,dragRect:o,targetRect:r,canSort:d,fromSortable:g,target:l,completed:w,onMove:function(X,Y){return Un(ke,n,H,o,X,Fe(X),t,Y)},changed:S},W))}function y(){v("dragOverAnimationCapture"),m.captureAnimationState(),m!==g&&g.captureAnimationState()}function w(pe){return v("dragOverCompleted",{insertion:pe}),pe&&(c?f._hideClone():f._showClone(m),m!==g&&(je(H,Ie?Ie.options.ghostClass:f.options.ghostClass,!1),je(H,u.ghostClass,!0)),Ie!==m&&m!==J.active?Ie=m:m===J.active&&Ie&&(Ie=null),g===m&&(m._ignoreWhileAnimating=l),m.animateAll(function(){v("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(l===H&&!H.animated||l===n&&!l.animated)&&(jt=null),!u.dragoverBubble&&!t.rootEl&&l!==document&&(H.parentNode[Ue]._isOutsideThisEl(t.target),!pe&&Dt(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),_=!0}function S(){xe=Xe(H),wt=Xe(H,u.draggable),Te({sortable:m,name:"change",toEl:n,newIndex:xe,newDraggableIndex:wt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),l=tt(l,u.draggable,n,!0),v("dragOver"),J.eventCanceled)return _;if(H.contains(t.target)||l.animated&&l.animatingX&&l.animatingY||m._ignoreWhileAnimating===l)return w(!1);if(pl=!1,f&&!u.disabled&&(c?d||(s=Re!==ke):Ie===this||(this.lastPutMode=Bn.checkPull(this,f,H,t))&&a.checkPut(this,f,H,t))){if(p=this._getDirection(t,l)==="vertical",o=Fe(H),v("dragOverValid"),J.eventCanceled)return _;if(s)return Re=ke,y(),this._hideClone(),v("revert"),J.eventCanceled||(Nt?ke.insertBefore(H,Nt):ke.appendChild(H)),w(!0);var M=zo(n,u.draggable);if(!M||gp(t,p,this)&&!M.animated){if(M===H)return w(!1);if(M&&n===t.target&&(l=M),l&&(r=Fe(l)),Un(ke,n,H,o,l,r,t,!!l)!==!1)return y(),M&&M.nextSibling?n.insertBefore(H,M.nextSibling):n.appendChild(H),Re=n,S(),w(!0)}else if(M&&hp(t,p,this)){var $=nn(n,0,u,!0);if($===H)return w(!1);if(l=$,r=Fe(l),Un(ke,n,H,o,l,r,t,!1)!==!1)return y(),n.insertBefore(H,$),Re=n,S(),w(!0)}else if(l.parentNode===n){r=Fe(l);var F=0,C,R=H.parentNode!==n,k=!ap(H.animated&&H.toRect||o,l.animated&&l.toRect||r,p),E=p?"top":"left",I=Cr(l,"top","top")||Cr(H,"top","top"),D=I?I.scrollTop:void 0;jt!==l&&(C=r[E],kn=!1,jn=!k&&u.invertSwap||R),F=pp(t,l,r,p,k?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,jn,jt===l);var L;if(F!==0){var O=Xe(H);do O-=F,L=Re.children[O];while(L&&(Z(L,"display")==="none"||L===re))}if(F===0||L===l)return w(!1);jt=l,yn=F;var B=l.nextElementSibling,j=!1;j=F===1;var ae=Un(ke,n,H,o,l,r,t,j);if(ae!==!1)return(ae===1||ae===-1)&&(j=ae===1),_o=!0,setTimeout(dp,30),y(),j&&!B?n.appendChild(H):l.parentNode.insertBefore(H,j?B:l),I&&lu(I,0,D-I.scrollTop),Re=H.parentNode,C!==void 0&&!jn&&(Zn=Math.abs(C-Fe(l)[E])),S(),w(!0)}if(n.contains(H))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ge(document,"mousemove",this._onTouchMove),ge(document,"touchmove",this._onTouchMove),ge(document,"pointermove",this._onTouchMove),ge(document,"dragover",Dt),ge(document,"mousemove",Dt),ge(document,"touchmove",Dt)},_offUpEvents:function(){var t=this.el.ownerDocument;ge(t,"mouseup",this._onDrop),ge(t,"touchend",this._onDrop),ge(t,"pointerup",this._onDrop),ge(t,"touchcancel",this._onDrop),ge(document,"selectstart",this)},_onDrop:function(t){var n=this.el,l=this.options;if(xe=Xe(H),wt=Xe(H,l.draggable),ze("drop",this,{evt:t}),Re=H&&H.parentNode,xe=Xe(H),wt=Xe(H,l.draggable),J.eventCanceled){this._nulling();return}Ut=!1,jn=!1,kn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),vo(this.cloneId),vo(this._dragStartId),this.nativeDraggable&&(ge(document,"drop",this),ge(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),vn&&Z(document.body,"user-select",""),Z(H,"transform",""),t&&(dn&&(t.cancelable&&t.preventDefault(),!l.dropBubble&&t.stopPropagation()),re&&re.parentNode&&re.parentNode.removeChild(re),(ke===Re||Ie&&Ie.lastPutMode!=="clone")&&Ce&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),H&&(this.nativeDraggable&&ge(H,"dragend",this),Gl(H),H.style["will-change"]="",dn&&!Ut&&je(H,Ie?Ie.options.ghostClass:this.options.ghostClass,!1),je(H,this.options.chosenClass,!1),Te({sortable:this,name:"unchoose",toEl:Re,newIndex:null,newDraggableIndex:null,originalEvent:t}),ke!==Re?(xe>=0&&(Te({rootEl:Re,name:"add",toEl:Re,fromEl:ke,originalEvent:t}),Te({sortable:this,name:"remove",toEl:Re,originalEvent:t}),Te({rootEl:Re,name:"sort",toEl:Re,fromEl:ke,originalEvent:t}),Te({sortable:this,name:"sort",toEl:Re,originalEvent:t})),Ie&&Ie.save()):xe!==Wt&&xe>=0&&(Te({sortable:this,name:"update",toEl:Re,originalEvent:t}),Te({sortable:this,name:"sort",toEl:Re,originalEvent:t})),J.active&&((xe==null||xe===-1)&&(xe=Wt,wt=wn),Te({sortable:this,name:"end",toEl:Re,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ze("nulling",this),ke=H=Re=re=Nt=Ce=Jn=yt=Ft=Ke=dn=xe=wt=Wt=wn=jt=yn=Ie=Bn=J.dragged=J.ghost=J.clone=J.active=null,_l.forEach(function(t){t.checked=!0}),_l.length=Ll=ql=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":H&&(this._onDragOver(t),cp(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,l=this.el.children,o=0,r=l.length,s=this.options;o<r;o++)n=l[o],tt(n,s.draggable,this.el,!1)&&t.push(n.getAttribute(s.dataIdAttr)||_p(n));return t},sort:function(t,n){var l={},o=this.el;this.toArray().forEach(function(r,s){var u=o.children[s];tt(u,this.options.draggable,o,!1)&&(l[r]=u)},this),n&&this.captureAnimationState(),t.forEach(function(r){l[r]&&(o.removeChild(l[r]),o.appendChild(l[r]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return tt(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var l=this.options;if(n===void 0)return l[t];var o=On.modifyOption(this,t,n);typeof o<"u"?l[t]=o:l[t]=n,t==="group"&&su(l)},destroy:function(){ze("destroy",this);var t=this.el;t[Ue]=null,ge(t,"mousedown",this._onTapStart),ge(t,"touchstart",this._onTapStart),ge(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ge(t,"dragover",this),ge(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ml.splice(ml.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!yt){if(ze("hideClone",this),J.eventCanceled)return;Z(Ce,"display","none"),this.options.removeCloneOnHide&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),yt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(yt){if(ze("showClone",this),J.eventCanceled)return;H.parentNode==ke&&!this.options.group.revertClone?ke.insertBefore(Ce,H):Nt?ke.insertBefore(Ce,Nt):ke.appendChild(Ce),this.options.group.revertClone&&this.animate(H,Ce),Z(Ce,"display",""),yt=!1}}};function cp(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Un(e,t,n,l,o,r,s,u){var a,f=e[Ue],c=f.options.onMove,d;return window.CustomEvent&&!bt&&!Tn?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=t,a.from=e,a.dragged=n,a.draggedRect=l,a.related=o||t,a.relatedRect=r||Fe(t),a.willInsertAfter=u,a.originalEvent=s,e.dispatchEvent(a),c&&(d=c.call(f,a,s)),d}function Gl(e){e.draggable=!1}function dp(){_o=!1}function hp(e,t,n){var l=Fe(nn(n.el,0,n.options,!0)),o=10;return t?e.clientX<l.left-o||e.clientY<l.top&&e.clientX<l.right:e.clientY<l.top-o||e.clientY<l.bottom&&e.clientX<l.left}function gp(e,t,n){var l=Fe(zo(n.el,n.options.draggable)),o=10;return t?e.clientX>l.right+o||e.clientX<=l.right&&e.clientY>l.bottom&&e.clientX>=l.left:e.clientX>l.right&&e.clientY>l.top||e.clientX<=l.right&&e.clientY>l.bottom+o}function pp(e,t,n,l,o,r,s,u){var a=l?e.clientY:e.clientX,f=l?n.height:n.width,c=l?n.top:n.left,d=l?n.bottom:n.right,g=!1;if(!s){if(u&&Zn<f*o){if(!kn&&(yn===1?a>c+f*r/2:a<d-f*r/2)&&(kn=!0),kn)g=!0;else if(yn===1?a<c+Zn:a>d-Zn)return-yn}else if(a>c+f*(1-o)/2&&a<d-f*(1-o)/2)return mp(t)}return g=g||s,g&&(a<c+f*r/2||a>d-f*r/2)?a>c+f/2?1:-1:0}function mp(e){return Xe(H)<Xe(e)?1:-1}function _p(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,l=0;n--;)l+=t.charCodeAt(n);return l.toString(36)}function vp(e){_l.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var l=t[n];l.checked&&_l.push(l)}}function el(e){return setTimeout(e,0)}function vo(e){return clearTimeout(e)}Al&&me(document,"touchmove",function(e){(J.active||Ut)&&e.cancelable&&e.preventDefault()});J.utils={on:me,off:ge,css:Z,find:tu,is:function(t,n){return!!tt(t,n,t,!1)},extend:ep,throttle:nu,closest:tt,toggleClass:je,clone:ou,index:Xe,nextTick:el,cancelNextTick:vo,detectDirection:ru,getChild:nn};J.get=function(e){return e[Ue]};J.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(J.utils=at(at({},J.utils),l.utils)),On.mount(l)})};J.create=function(e,t){return new J(e,t)};J.version=Kg;var Ee=[],hn,bo,wo=!1,Bl,jl,vl,gn;function bp(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?me(document,"dragover",this._handleAutoScroll):this.options.supportPointer?me(document,"pointermove",this._handleFallbackAutoScroll):l.touches?me(document,"touchmove",this._handleFallbackAutoScroll):me(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?ge(document,"dragover",this._handleAutoScroll):(ge(document,"pointermove",this._handleFallbackAutoScroll),ge(document,"touchmove",this._handleFallbackAutoScroll),ge(document,"mousemove",this._handleFallbackAutoScroll)),Er(),tl(),tp()},nulling:function(){vl=bo=hn=wo=gn=Bl=jl=null,Ee.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var o=this,r=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(r,s);if(vl=n,l||this.options.forceAutoScrollFallback||Tn||bt||vn){xl(n,this.options,u,l);var a=Ct(u,!0);wo&&(!gn||r!==Bl||s!==jl)&&(gn&&Er(),gn=setInterval(function(){var f=Ct(document.elementFromPoint(r,s),!0);f!==a&&(a=f,tl()),xl(n,o.options,f,l)},10),Bl=r,jl=s)}else{if(!this.options.bubbleScroll||Ct(u,!0)===rt()){tl();return}xl(n,this.options,Ct(u,!1),!1)}}},_t(e,{pluginName:"scroll",initializeByDefault:!0})}function tl(){Ee.forEach(function(e){clearInterval(e.pid)}),Ee=[]}function Er(){clearInterval(gn)}var xl=nu(function(e,t,n,l){if(t.scroll){var o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,u=t.scrollSpeed,a=rt(),f=!1,c;bo!==n&&(bo=n,tl(),hn=t.scroll,c=t.scrollFn,hn===!0&&(hn=Ct(n,!0)));var d=0,g=hn;do{var p=g,m=Fe(p),_=m.top,v=m.bottom,y=m.left,w=m.right,S=m.width,M=m.height,$=void 0,F=void 0,C=p.scrollWidth,R=p.scrollHeight,k=Z(p),E=p.scrollLeft,I=p.scrollTop;p===a?($=S<C&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),F=M<R&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):($=S<C&&(k.overflowX==="auto"||k.overflowX==="scroll"),F=M<R&&(k.overflowY==="auto"||k.overflowY==="scroll"));var D=$&&(Math.abs(w-o)<=s&&E+S<C)-(Math.abs(y-o)<=s&&!!E),L=F&&(Math.abs(v-r)<=s&&I+M<R)-(Math.abs(_-r)<=s&&!!I);if(!Ee[d])for(var O=0;O<=d;O++)Ee[O]||(Ee[O]={});(Ee[d].vx!=D||Ee[d].vy!=L||Ee[d].el!==p)&&(Ee[d].el=p,Ee[d].vx=D,Ee[d].vy=L,clearInterval(Ee[d].pid),(D!=0||L!=0)&&(f=!0,Ee[d].pid=setInterval((function(){l&&this.layer===0&&J.active._onTouchMove(vl);var B=Ee[this.layer].vy?Ee[this.layer].vy*u:0,j=Ee[this.layer].vx?Ee[this.layer].vx*u:0;typeof c=="function"&&c.call(J.dragged.parentNode[Ue],j,B,e,vl,Ee[this.layer].el)!=="continue"||lu(Ee[this.layer].el,j,B)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&g!==a&&(g=Ct(g,!1)));wo=f}},30),fu=function(t){var n=t.originalEvent,l=t.putSortable,o=t.dragEl,r=t.activeSortable,s=t.dispatchSortableEvent,u=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(n){var f=l||r;u();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);a(),f&&!f.el.contains(d)&&(s("spill"),this.onSpill({dragEl:o,putSortable:l}))}};function Lo(){}Lo.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,l=t.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var o=nn(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:fu};_t(Lo,{pluginName:"revertOnSpill"});function qo(){}qo.prototype={onSpill:function(t){var n=t.dragEl,l=t.putSortable,o=l||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:fu};_t(qo,{pluginName:"removeOnSpill"});J.mount(new bp);J.mount(qo,Lo);function Fr(e,t,n){const l=e.slice();return l[23]=t[n],l[25]=n,l}function Dr(e,t,n){const l=e.slice();return l[26]=t[n],l[28]=n,l}function Ir(e,t,n){const l=e.slice();return l[29]=t[n],l[28]=n,l}function Nr(e){let t,n=e[28]+1+"",l;return{c(){t=A("option"),l=q(n),t.__value=e[28]+1,t.value=t.__value,h(t,"class","svelte-1nj8mt0")},m(o,r){T(o,t,r),b(t,l)},p:U,d(o){o&&P(t)}}}function Pr(e,t){let n,l,o=t[1][t[28]]+"",r,s,u,a,f=t[23][t[1][t[28]]]+"",c,d,g,p,m,_,v,y,w,S=Array(t[0]).fill(),M=[];for(let C=0;C<S.length;C+=1)M[C]=Nr(Ir(t,S,C));function $(...C){return t[16](t[23],t[28],...C)}function F(...C){return t[17](t[23],...C)}return{key:e,first:null,c(){n=A("div"),l=A("h5"),r=q(o),s=q(":"),u=N(),a=A("p"),c=q(f),d=N(),g=A("div"),p=q(`Rank:
                        `),m=A("select");for(let C=0;C<M.length;C+=1)M[C].c();_=N(),h(l,"class","bold underline svelte-1nj8mt0"),h(a,"class","svelte-1nj8mt0"),h(m,"class","answer-rank"),h(n,"class","answer svelte-1nj8mt0"),h(n,"id",v=`answer-${t[28]}-${t[23].qid}`),this.first=n},m(C,R){T(C,n,R),b(n,l),b(l,r),b(l,s),b(n,u),b(n,a),b(a,c),b(n,d),b(n,g),b(g,p),b(g,m);for(let k=0;k<M.length;k+=1)M[k]&&M[k].m(m,null);b(n,_),y||(w=[x(m,"change",$),x(n,"dragend",F)],y=!0)},p(C,R){if(t=C,R&3&&o!==(o=t[1][t[28]]+"")&&K(r,o),R&259&&f!==(f=t[23][t[1][t[28]]]+"")&&K(c,f),R&1){S=Array(t[0]).fill();let k;for(k=0;k<S.length;k+=1){const E=Ir(t,S,k);M[k]?M[k].p(E,R):(M[k]=Nr(E),M[k].c(),M[k].m(m,null))}for(;k<M.length;k+=1)M[k].d(1);M.length=S.length}R&257&&v!==(v=`answer-${t[28]}-${t[23].qid}`)&&h(n,"id",v)},d(C){C&&P(n),_e(M,C),y=!1,be(w)}}}function Tr(e,t){let n,l,o,r,s,u,a=t[23].qid+"",f,c,d,g=t[23].question+"",p,m,_,v=[],y=new Map,w,S,M,$,F=Array(t[0]).fill();const C=R=>R[28];for(let R=0;R<F.length;R+=1){let k=Dr(t,F,R),E=C(k);y.set(E,v[R]=Pr(E,k))}return{key:e,first:null,c(){n=A("div"),l=A("div"),o=A("div"),r=A("div"),s=A("h5"),u=q("Question: "),f=q(a),c=N(),d=A("p"),p=q(g),m=N(),_=A("div");for(let R=0;R<v.length;R+=1)v[R].c();w=N(),h(s,"class","bold svelte-1nj8mt0"),h(d,"class","svelte-1nj8mt0"),h(r,"class","question svelte-1nj8mt0"),h(_,"class","answers"),Ae(_,"display","grid"),Ae(_,"grid-template-columns",t[7]),Ae(_,"gap",".25%"),Ae(_,"width","100%"),Ae(_,"margin","auto"),h(o,"class","message-content svelte-1nj8mt0"),h(l,"class","chat-message-center svelte-1nj8mt0"),h(n,"class","chat-message svelte-1nj8mt0"),this.first=n},m(R,k){T(R,n,k),b(n,l),b(l,o),b(o,r),b(r,s),b(s,u),b(s,f),b(r,c),b(r,d),b(d,p),b(o,m),b(o,_);for(let E=0;E<v.length;E+=1)v[E]&&v[E].m(_,null);t[18](_),b(n,w),M||($=Cn(S=yp.call(null,n,t[25]===t[8].length-1)),M=!0)},p(R,k){t=R,k&256&&a!==(a=t[23].qid+"")&&K(f,a),k&256&&g!==(g=t[23].question+"")&&K(p,g),k&3331&&(F=Array(t[0]).fill(),v=gt(v,k,C,1,t,F,y,_,zt,Pr,null,Dr)),k&128&&Ae(_,"grid-template-columns",t[7]),S&&Ge(S.update)&&k&256&&S.update.call(null,t[25]===t[8].length-1)},d(R){R&&P(n);for(let k=0;k<v.length;k+=1)v[k].d();t[18](null),M=!1,$()}}}function wp(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,y,w,S=[],M=new Map,$,F,C,R,k,E,I=(e[4]?e[6]:"Send")+"",D,L,O,B,j;function ae(X){e[15](X)}let pe={table:"comparator/db"};e[5]!==void 0&&(pe.showModal=e[5]),t=new Io({props:pe}),et.push(()=>Rn(t,"showModal",ae));let W=e[8];const Q=X=>X[25];for(let X=0;X<W.length;X+=1){let Y=Fr(e,W,X),le=Q(Y);M.set(le,S[X]=Tr(le,Y))}return{c(){ne(t.$$.fragment),l=N(),o=A("div"),r=A("div"),s=A("h5"),s.textContent="Q & A Comparison Instructions",u=N(),a=A("br"),f=N(),c=A("p"),c.textContent=`Ask a question and rank the answers across the models. Drag each answer to
      rank it, in ascending order, from left-to-right. Optionally, select the
      rank for each via the corresponding dropdown.`,d=N(),g=A("br"),p=N(),m=A("button"),m.textContent="Download Data",_=N(),v=A("div"),y=A("section"),w=A("div");for(let X=0;X<S.length;X+=1)S[X].c();$=N(),F=A("div"),C=A("form"),R=A("input"),k=N(),E=A("button"),D=q(I),h(s,"class","underline bold svelte-1nj8mt0"),h(c,"class","svelte-1nj8mt0"),h(m,"class","svelte-1nj8mt0"),h(r,"class","instructions svelte-1nj8mt0"),h(w,"class","chat-log svelte-1nj8mt0"),h(y,"class","chatbox svelte-1nj8mt0"),h(R,"class","chat-input-textarea svelte-1nj8mt0"),h(R,"placeholder","Type Message Here"),h(E,"class",L="btnyousend "+(e[3]===""?"":"active")+" svelte-1nj8mt0"),h(E,"type","submit"),h(C,"class","chat-input-form svelte-1nj8mt0"),h(F,"class","chat-input-holder svelte-1nj8mt0"),h(v,"class","ranked-chat svelte-1nj8mt0"),h(o,"class","ranked-feedback-container svelte-1nj8mt0")},m(X,Y){ee(t,X,Y),T(X,l,Y),T(X,o,Y),b(o,r),b(r,s),b(r,u),b(r,a),b(r,f),b(r,c),b(r,d),b(r,g),b(r,p),b(r,m),b(o,_),b(o,v),b(v,y),b(y,w);for(let le=0;le<S.length;le+=1)S[le]&&S[le].m(w,null);b(v,$),b(v,F),b(F,C),b(C,R),Ye(R,e[3]),b(C,k),b(C,E),b(E,D),O=!0,B||(j=[x(m,"click",e[12]),x(R,"input",e[19]),x(C,"submit",e[9])],B=!0)},p(X,[Y]){const le={};!n&&Y&32&&(n=!0,le.showModal=X[5],$n(()=>n=!1)),t.$set(le),Y&3463&&(W=X[8],S=gt(S,Y,Q,1,X,W,M,w,zt,Tr,null,Fr)),Y&8&&R.value!==X[3]&&Ye(R,X[3]),(!O||Y&80)&&I!==(I=(X[4]?X[6]:"Send")+"")&&K(D,I),(!O||Y&8&&L!==(L="btnyousend "+(X[3]===""?"":"active")+" svelte-1nj8mt0"))&&h(E,"class",L)},i(X){O||(V(t.$$.fragment,X),O=!0)},o(X){z(t.$$.fragment,X),O=!1},d(X){te(t,X),X&&P(l),X&&P(o);for(let Y=0;Y<S.length;Y+=1)S[Y].d();B=!1,be(j)}}}function yp(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function Or(e){console.log("run update",e);const n=await fetch("/chat/comparator/db/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})});if(n.ok)console.log("ok",n);else{const l=await n.text();alert(l)}}function kp(e,t,n){let l,o,r;ue(e,an,k=>n(8,r=k));let{numModels:s=1}=t,{models:u=[0]}=t,a="",f="",c=!1,d=!1;ft(async()=>{if(await new Promise(k=>setTimeout(k,200)),_){const k=new J(_,{animation:150,onUpdate(E){k.toArray()}});k.toArray()}g()});async function g(){const E=await(await fetch("/chat/comparator/db/retrieve")).json();console.log(E);const I=E.data;let D={},L=new Set;for(const O of I)L.add(O.model),D[O.qid]||(D[O.qid]={},D[O.qid].qid=O.qid,D[O.qid].question=O.question),D[O.qid][O.model]=O.answer,console.log(D);n(1,u=Array.from(L)),n(0,s=u.length),console.log(Object.values(D)),Pe(an,r=[...Object.values(D)],r)}const p=async k=>{k.preventDefault(),a=f,n(3,f=""),n(4,c=!0);let E={question:a};for(let D of u)E[D]="Loading...";Pe(an,r=[...r,E],r),console.log("compare chat log",an);const I=await fetch(`/chat/comparator/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})});if(I.ok){const D=await I.json();n(1,u=Object.keys(D.answer)),n(0,s=u.length);for(let L of u)E[L]=D.answer[L];E.qid=D.qid,an.update(L=>(L[L.length-1]=E,L))}else{const D=await I.text();alert(D)}n(4,c=!1)};let m=0;setInterval(()=>{n(13,m=(m+1)%4)},200);let _,v;function y(k,E){const I=E,L=pt(k.currentTarget.parentNode).selectAll("div.answer").nodes().map(ae=>ae.id);L.forEach((ae,pe)=>{pt(`#${ae}`).select(".answer-rank").property("value",pe+1)});let O=[];for(let[ae,pe]of L.entries()){const W=parseInt(pe.split("-")[1]),Q=u[W],X={rank:ae,model:Q};O.push(X)}let B=r.filter(ae=>ae.qid===I),j=[];for(let ae of O){const pe={model:ae.model,qid:parseInt(I),rank:parseInt(ae.rank)+1,answer:B[0][ae.model]};j.push(pe)}Or(j)}function w(k,E,I){const D=E,L=parseInt(k.target.value),O=u[I],B={qid:D,rank:parseInt(L),model:O};let j=[],pe=r.filter(Q=>Q.qid===B.qid)[0][B.model];const W={model:B.model,qid:parseInt(B.qid),rank:parseInt(B.rank),answer:pe};j.push(W),Or(j)}function S(){n(5,d=!0)}function M(k){d=k,n(5,d)}const $=(k,E,I)=>w(I,k.qid,E),F=(k,E)=>y(E,k.qid);function C(k){et[k?"unshift":"push"](()=>{_=k,n(2,_)})}function R(){f=this.value,n(3,f)}return e.$$set=k=>{"numModels"in k&&n(0,s=k.numModels),"models"in k&&n(1,u=k.models)},e.$$.update=()=>{e.$$.dirty&1&&n(7,l="1fr ".repeat(s).trim()),e.$$.dirty&8192&&n(6,o=".".repeat(m).padEnd(3)),e.$$.dirty&16388&&_&&(n(14,v=new J(_,{animation:150,dataIdAttr:"id",onUpdate(k){v.toArray()}})),v.toArray())},[s,u,_,f,c,d,o,l,r,p,y,w,S,m,v,M,$,F,C,R]}class Sp extends ce{constructor(t){super(),de(this,t,kp,wp,fe,{numModels:0,models:1})}}const ln=De([{model:"llama",qid:1,rank:1,answer:"Llama's first unique answer."},{model:"gpt3.5",qid:1,rank:2,answer:"GPT-3.5's first unique answer."},{model:"gpt4",qid:1,rank:3,answer:"GPT-4's first unique answer."},{model:"claude",qid:1,rank:4,answer:"Claude's first unique answer."},{model:"llama",qid:2,rank:4,answer:"Llama's second unique answer."},{model:"gpt3.5",qid:2,rank:2,answer:"GPT-3.5's second unique answer."},{model:"gpt4",qid:2,rank:4,answer:"GPT-4's second unique answer."},{model:"claude",qid:2,rank:3,answer:"'s second unique answer."}]);function Vr(e,t,n){const l=e.slice();return l[20]=t[n],l}function zr(e,t,n){const l=e.slice();return l[20]=t[n],l[24]=n,l}function Lr(e,t,n){const l=e.slice();return l[25]=t[n],l}function qr(e){let t,n,l,o,r=`Q.${e[25]}`,s,u;return{c(){t=G("g"),n=G("line"),o=G("text"),s=q(r),h(n,"class","axis-tick svelte-1nna9rx"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[5]+e[12].bottom+e[12].top),h(n,"stroke","black"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-1nna9rx"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[3](e[25])+0} ${e[5]-e[12].bottom})`),h(t,"class","svelte-1nna9rx")},m(a,f){T(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&32&&l!==(l=-a[5]+a[12].bottom+a[12].top)&&h(n,"y2",l),f&256&&r!==(r=`Q.${a[25]}`)&&K(s,r),f&296&&u!==(u=`translate(${a[3](a[25])+0} ${a[5]-a[12].bottom})`)&&h(t,"transform",u)},d(a){a&&P(t)}}}function Hr(e){let t=Number.isInteger(e[25]),n,l=t&&qr(e);return{c(){l&&l.c(),n=Se()},m(o,r){l&&l.m(o,r),T(o,n,r)},p(o,r){r&256&&(t=Number.isInteger(o[25])),t?l?l.p(o,r):(l=qr(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){l&&l.d(o),o&&P(n)}}}function Gr(e,t){let n,l,o,r,s,u,a,f,c;function d(){return t[15](t[24])}function g(){return t[16](t[24])}return{key:e,first:null,c(){n=G("path"),r=G("path"),h(n,"class","model-path-outer svelte-1nna9rx"),h(n,"d",l=t[10](t[20])),h(n,"stroke","white"),h(n,"data-model",o=t[2][t[24]]),h(r,"class","model-path svelte-1nna9rx"),h(r,"d",s=t[10](t[20])),h(r,"role","img"),h(r,"stroke",u=t[11](t[2][t[24]])),h(r,"data-model",a=t[2][t[24]]),this.first=n},m(p,m){T(p,n,m),T(p,r,m),f||(c=[x(r,"mouseover",d),x(r,"focus",g),x(r,"mouseout",bl),x(r,"blur",bl)],f=!0)},p(p,m){t=p,m&1536&&l!==(l=t[10](t[20]))&&h(n,"d",l),m&516&&o!==(o=t[2][t[24]])&&h(n,"data-model",o),m&1536&&s!==(s=t[10](t[20]))&&h(r,"d",s),m&2564&&u!==(u=t[11](t[2][t[24]]))&&h(r,"stroke",u),m&516&&a!==(a=t[2][t[24]])&&h(r,"data-model",a)},d(p){p&&P(n),p&&P(r),f=!1,be(c)}}}function Br(e,t){let n,l,o,r,s,u,a=t[20].rank+"",f,c,d,g;return{key:e,first:null,c(){n=G("g"),l=G("circle"),u=G("text"),f=q(a),h(l,"r",o=t[20].answer.length/2*0+12),h(l,"fill",r=t[11](t[20].model)),h(l,"stroke","white"),h(l,"class","model-circle svelte-1nna9rx"),h(l,"role","img"),h(l,"data-model",s=t[20].model),h(u,"class","bump-text svelte-1nna9rx"),h(u,"text-anchor","middle"),h(u,"alignment-baseline","middle"),h(u,"color","white"),h(u,"fill","white"),h(n,"transform",c=`translate(${t[3](t[20].qid)}, ${t[4](t[20].rank)})`),h(n,"class","svelte-1nna9rx"),this.first=n},m(p,m){T(p,n,m),b(n,l),b(n,u),b(u,f),d||(g=[x(l,"mouseover",t[17]),x(l,"focus",t[18]),x(l,"mouseout",bl),x(l,"blur",bl)],d=!0)},p(p,m){t=p,m&128&&o!==(o=t[20].answer.length/2*0+12)&&h(l,"r",o),m&2176&&r!==(r=t[11](t[20].model))&&h(l,"fill",r),m&128&&s!==(s=t[20].model)&&h(l,"data-model",s),m&128&&a!==(a=t[20].rank+"")&&K(f,a),m&152&&c!==(c=`translate(${t[3](t[20].qid)}, ${t[4](t[20].rank)})`)&&h(n,"transform",c)},d(p){p&&P(n),d=!1,be(g)}}}function Cp(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m=[],_=new Map,v,y=[],w=new Map,S,M,$,F,C,R=e[8],k=[];for(let O=0;O<R.length;O+=1)k[O]=Hr(Lr(e,R,O));let E=e[9];const I=O=>O[24];for(let O=0;O<E.length;O+=1){let B=zr(e,E,O),j=I(B);_.set(j,m[O]=Gr(j,B))}let D=e[7];const L=O=>O[20].model+O[20].qid;for(let O=0;O<D.length;O+=1){let B=Vr(e,D,O),j=L(B);w.set(j,y[O]=Br(j,B))}return{c(){t=A("div"),n=G("svg"),l=G("line");for(let O=0;O<k.length;O+=1)k[O].c();u=G("text"),f=G("text"),g=G("text");for(let O=0;O<m.length;O+=1)m[O].c();v=Se();for(let O=0;O<y.length;O+=1)y[O].c();S=G("text"),M=q("Per-Question Ranks"),$=G("text"),F=q("Answer ranks over time, by model."),h(l,"class","axis-line svelte-1nna9rx"),h(l,"x1",e[12].left),h(l,"x2",o=e[6]-e[12].right),h(l,"y1",r=e[5]-e[12].bottom),h(l,"y2",s=e[5]-e[12].bottom),h(u,"class","chart-title svelte-1nna9rx"),h(u,"y",e[12].top/2),h(u,"x",a=(e[6]+e[12].left)/2),h(u,"text-anchor","middle"),h(f,"class","axis-label svelte-1nna9rx"),h(f,"y",c=e[5]+e[12].bottom+10),h(f,"x",d=(e[6]+e[12].left)/2),h(f,"text-anchor","middle"),h(g,"class","axis-label svelte-1nna9rx"),h(g,"y",e[12].left/2),h(g,"x",p=-(e[5]/2)),h(g,"text-anchor","middle"),h(g,"transform","rotate(-90)"),h(S,"class","chart-title svelte-1nna9rx"),h(S,"y",e[12].top/2),h(S,"x",e[12].left),h(S,"text-anchor","start"),h($,"class","chart-subtitle svelte-1nna9rx"),h($,"y",e[12].top/2+15),h($,"x",e[12].left),h($,"opacity",".6"),h($,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-1nna9rx"),h(t,"id","chart-holder"),h(t,"class","svelte-1nna9rx"),Me(()=>e[19].call(t))},m(O,B){T(O,t,B),b(t,n),b(n,l);for(let j=0;j<k.length;j+=1)k[j]&&k[j].m(n,null);b(n,u),b(n,f),b(n,g);for(let j=0;j<m.length;j+=1)m[j]&&m[j].m(n,null);b(n,v);for(let j=0;j<y.length;j+=1)y[j]&&y[j].m(n,null);b(n,S),b(S,M),b(n,$),b($,F),C=ut(t,e[19].bind(t))},p(O,[B]){if(B&64&&o!==(o=O[6]-O[12].right)&&h(l,"x2",o),B&32&&r!==(r=O[5]-O[12].bottom)&&h(l,"y1",r),B&32&&s!==(s=O[5]-O[12].bottom)&&h(l,"y2",s),B&4392){R=O[8];let j;for(j=0;j<R.length;j+=1){const ae=Lr(O,R,j);k[j]?k[j].p(ae,B):(k[j]=Hr(ae),k[j].c(),k[j].m(n,u))}for(;j<k.length;j+=1)k[j].d(1);k.length=R.length}B&64&&a!==(a=(O[6]+O[12].left)/2)&&h(u,"x",a),B&32&&c!==(c=O[5]+O[12].bottom+10)&&h(f,"y",c),B&64&&d!==(d=(O[6]+O[12].left)/2)&&h(f,"x",d),B&32&&p!==(p=-(O[5]/2))&&h(g,"x",p),B&11780&&(E=O[9],m=gt(m,B,I,1,O,E,_,n,zt,Gr,v,zr)),B&16787608&&(D=O[7],y=gt(y,B,L,1,O,D,w,n,zt,Br,S,Vr)),B&2&&h(n,"width",O[1]),B&1&&h(n,"height",O[0])},i:U,o:U,d(O){O&&P(t),_e(k,O);for(let B=0;B<m.length;B+=1)m[B].d();for(let B=0;B<y.length;B+=1)y[B].d();C()}}}function bl(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function $p(e,t,n){let l,o,r,s,u,a,f,c,d,g,p;ue(e,ln,C=>n(7,p=C));let m,_,v={top:35,bottom:15,left:10,right:0};function y(C){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(R=>{R.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${l[C]}"], .model-circle[data-model="${l[C]}"]`).forEach(R=>{R.style.opacity=1})}const w=C=>y(C),S=C=>y(C),M=()=>y(i),$=()=>y(i);function F(){_=this.offsetWidth,m=this.offsetHeight,n(1,_),n(0,m)}return e.$$.update=()=>{e.$$.dirty&128&&n(2,l=Array.from(new Set(p.map(C=>C.model)))),e.$$.dirty&2&&n(6,o=_-v.left-v.right),e.$$.dirty&1&&n(5,r=m-v.top-v.bottom),e.$$.dirty&192&&n(3,s=Gi().domain(p.map(C=>C.qid)).padding(.3).range([v.left,o-v.right])),e.$$.dirty&128&&n(14,u=p.map(C=>C.rank).sort((C,R)=>C-R)),e.$$.dirty&16416&&n(4,a=Gi().domain(u).padding(1).range([v.top,r-v.bottom])),e.$$.dirty&128&&n(11,f=Mt().domain(p.map(C=>C.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"])),e.$$.dirty&24&&n(10,c=Sg().x(C=>s(C.qid)).y(C=>a(C.rank))),e.$$.dirty&132&&n(9,d=l.map(C=>p.filter(R=>R.model===C))),e.$$.dirty&8&&n(8,g=s.domain().length>10?s.domain().filter((C,R)=>R%2===0):s.domain())},[m,_,l,s,a,r,o,p,g,d,c,f,v,y,u,w,S,M,$,F]}class Rp extends ce{constructor(t){super(),de(this,t,$p,Cp,fe,{})}}function jr(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function xr(e,t,n){const l=e.slice();return l[16]=t[n],l}function Ur(e,t,n){const l=e.slice();return l[16]=t[n],l}function Wr(e){let t,n,l=e[16]+"",o,r;return{c(){t=G("g"),n=G("text"),o=q(l),h(n,"class","axis-text svelte-1y9gffu"),h(n,"x","-5"),h(n,"y","0"),h(n,"text-anchor","end"),h(t,"transform",r=`translate(${e[9].left} ${e[8](e[16])+e[8].bandwidth()/2})`)},m(s,u){T(s,t,u),b(t,n),b(n,o)},p(s,u){u&4&&l!==(l=s[16]+"")&&K(o,l),u&260&&r!==(r=`translate(${s[9].left} ${s[8](s[16])+s[8].bandwidth()/2})`)&&h(t,"transform",r)},d(s){s&&P(t)}}}function Xr(e){let t,n,l=e[16]+"",o,r;return{c(){t=G("g"),n=G("text"),o=q(l),h(n,"class","axis-text svelte-1y9gffu"),h(n,"y","15"),h(n,"text-anchor","middle"),h(t,"transform",r=`translate(${e[7](e[16])}, ${e[4]-e[9].bottom})`)},m(s,u){T(s,t,u),b(t,n),b(n,o)},p(s,u){u&128&&l!==(l=s[16]+"")&&K(o,l),u&144&&r!==(r=`translate(${s[7](s[16])}, ${s[4]-s[9].bottom})`)&&h(t,"transform",r)},d(s){s&&P(t)}}}function Yr(e){let t,n=e[16]%2==0&&Xr(e);return{c(){n&&n.c(),t=Se()},m(l,o){n&&n.m(l,o),T(l,t,o)},p(l,o){l[16]%2==0?n?n.p(l,o):(n=Xr(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){n&&n.d(l),l&&P(t)}}}function Qr(e){let t,n,l,o,r,s,u,a=e[13].avgRank.toFixed(2)+"",f,c,d;return{c(){t=G("rect"),u=G("text"),f=q(a),h(t,"y",n=e[8](e[13].model)),h(t,"x",e[9].left),h(t,"width",l=e[7](e[13].avgRank)-e[9].left),h(t,"height",o=e[8].bandwidth()),h(t,"fill",r=e[6](e[13].model)),h(t,"class","model-path"),h(t,"data-model",s=e[5][e[15]]),h(u,"class","label-text svelte-1y9gffu"),h(u,"y",c=e[8](e[13].model)+e[8].bandwidth()/2),h(u,"x",d=e[7](e[13].avgRank)+5),h(u,"text-anchor","start"),h(u,"dominant-baseline","middle")},m(g,p){T(g,t,p),T(g,u,p),b(u,f)},p(g,p){p&260&&n!==(n=g[8](g[13].model))&&h(t,"y",n),p&132&&l!==(l=g[7](g[13].avgRank)-g[9].left)&&h(t,"width",l),p&256&&o!==(o=g[8].bandwidth())&&h(t,"height",o),p&68&&r!==(r=g[6](g[13].model))&&h(t,"fill",r),p&32&&s!==(s=g[5][g[15]])&&h(t,"data-model",s),p&4&&a!==(a=g[13].avgRank.toFixed(2)+"")&&K(f,a),p&260&&c!==(c=g[8](g[13].model)+g[8].bandwidth()/2)&&h(u,"y",c),p&132&&d!==(d=g[7](g[13].avgRank)+5)&&h(u,"x",d)},d(g){g&&P(t),g&&P(u)}}}function Ap(e){let t,n,l,o,r,s,u,a,f,c,d,g,p=e[2].map(Kr),m=[];for(let S=0;S<p.length;S+=1)m[S]=Wr(Ur(e,p,S));let _=e[7].ticks(),v=[];for(let S=0;S<_.length;S+=1)v[S]=Yr(xr(e,_,S));let y=e[2],w=[];for(let S=0;S<y.length;S+=1)w[S]=Qr(jr(e,y,S));return{c(){t=A("div"),n=G("svg");for(let S=0;S<m.length;S+=1)m[S].c();l=Se();for(let S=0;S<v.length;S+=1)v[S].c();o=Se();for(let S=0;S<w.length;S+=1)w[S].c();r=G("line"),f=G("text"),c=q("Average Rank"),d=G("text"),h(r,"class","axis-line svelte-1y9gffu"),h(r,"x1",e[9].left),h(r,"x2",s=e[3]-e[9].right),h(r,"y1",u=e[4]-e[9].bottom),h(r,"y2",a=e[4]-e[9].bottom),h(f,"class","chart-title"),h(f,"y",e[9].top/2),h(f,"x",e[9].left),h(f,"text-anchor","start"),h(d,"class","chart-subtitle"),h(d,"y",e[9].top/2+15),h(d,"x",e[9].left),h(d,"opacity",".6"),h(d,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","bar-chart-holder"),h(t,"class","svelte-1y9gffu"),Me(()=>e[12].call(t))},m(S,M){T(S,t,M),b(t,n);for(let $=0;$<m.length;$+=1)m[$]&&m[$].m(n,null);b(n,l);for(let $=0;$<v.length;$+=1)v[$]&&v[$].m(n,null);b(n,o);for(let $=0;$<w.length;$+=1)w[$]&&w[$].m(n,null);b(n,r),b(n,f),b(f,c),b(n,d),g=ut(t,e[12].bind(t))},p(S,[M]){if(M&772){p=S[2].map(Kr);let $;for($=0;$<p.length;$+=1){const F=Ur(S,p,$);m[$]?m[$].p(F,M):(m[$]=Wr(F),m[$].c(),m[$].m(n,l))}for(;$<m.length;$+=1)m[$].d(1);m.length=p.length}if(M&656){_=S[7].ticks();let $;for($=0;$<_.length;$+=1){const F=xr(S,_,$);v[$]?v[$].p(F,M):(v[$]=Yr(F),v[$].c(),v[$].m(n,o))}for(;$<v.length;$+=1)v[$].d(1);v.length=_.length}if(M&996){y=S[2];let $;for($=0;$<y.length;$+=1){const F=jr(S,y,$);w[$]?w[$].p(F,M):(w[$]=Qr(F),w[$].c(),w[$].m(n,r))}for(;$<w.length;$+=1)w[$].d(1);w.length=y.length}M&8&&s!==(s=S[3]-S[9].right)&&h(r,"x2",s),M&16&&u!==(u=S[4]-S[9].bottom)&&h(r,"y1",u),M&16&&a!==(a=S[4]-S[9].bottom)&&h(r,"y2",a),M&2&&h(n,"width",S[1]),M&1&&h(n,"height",S[0])},i:U,o:U,d(S){S&&P(t),_e(m,S),_e(v,S),_e(w,S),g()}}}const Kr=e=>e.model;function Mp(e,t,n){let l,o,r,s,u,a,f,c,d;ue(e,ln,v=>n(11,d=v));let g=300,p=500,m={top:50,bottom:0,left:100,right:0};function _(){p=this.offsetWidth,g=this.offsetHeight,n(1,p),n(0,g)}return e.$$.update=()=>{e.$$.dirty&2048&&n(10,l=d.reduce((v,y)=>(v[y.model]?(v[y.model].sum+=y.rank,v[y.model].count++):v[y.model]={sum:y.rank,count:1},v),{})),e.$$.dirty&1024&&n(2,o=Object.keys(l).map(v=>({model:v,avgRank:l[v].sum/l[v].count}))),e.$$.dirty&2&&n(3,r=p-m.left-m.right),e.$$.dirty&1&&n(4,s=g-m.top-m.bottom),e.$$.dirty&20&&n(8,u=Lt().rangeRound([m.top,s-m.bottom]).padding(.05).domain(o.map(v=>v.model))),e.$$.dirty&12&&n(7,a=We().rangeRound([m.left,r-m.right]).domain([0,mt(o,v=>v.avgRank)])),e.$$.dirty&4&&n(6,f=Mt().domain(o.map(v=>v.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&2048&&n(5,c=Array.from(new Set(d.map(v=>v.model))))},[g,p,o,r,s,c,f,a,u,m,l,d,_]}class Ep extends ce{constructor(t){super(),de(this,t,Mp,Ap,fe,{})}}function Jr(e,t,n){const l=e.slice();return l[20]=t[n],l[22]=n,l}function Zr(e,t,n){const l=e.slice();return l[23]=t[n],l[25]=n,l}function es(e,t,n){const l=e.slice();return l[23]=t[n],l}function ts(e){let t,n=e[23].key+"",l,o,r;function s(){return e[10](e[23])}return{c(){t=A("th"),l=q(n),h(t,"class","svelte-owgjbp")},m(u,a){T(u,t,a),b(t,l),o||(r=x(t,"click",s),o=!0)},p(u,a){e=u,a&64&&n!==(n=e[23].key+"")&&K(l,n)},d(u){u&&P(t),o=!1,r()}}}function ns(e,t){let n,l=(t[20][t[23].key].length>os&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"",o,r,s,u;function a(){return t[11](t[22],t[25])}return{key:e,first:null,c(){n=A("td"),o=q(l),h(n,"class",r="cell-type-"+t[23].type+" svelte-owgjbp"),Ae(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),Pt(n,"active",t[4]===`${t[22]}-${t[25]}`),this.first=n},m(f,c){T(f,n,c),b(n,o),s||(u=x(n,"click",a),s=!0)},p(f,c){t=f,c&112&&l!==(l=(t[20][t[23].key].length>os&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"")&&K(o,l),c&64&&r!==(r="cell-type-"+t[23].type+" svelte-owgjbp")&&h(n,"class",r),c&96&&Ae(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),c&80&&Pt(n,"active",t[4]===`${t[22]}-${t[25]}`)},d(f){f&&P(n),s=!1,u()}}}function ls(e){let t,n=[],l=new Map,o,r=e[6];const s=u=>u[23].key;for(let u=0;u<r.length;u+=1){let a=Zr(e,r,u),f=s(a);l.set(f,n[u]=ns(f,a))}return{c(){t=A("tr");for(let u=0;u<n.length;u+=1)n[u].c();o=N(),h(t,"class","svelte-owgjbp")},m(u,a){T(u,t,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);b(t,o)},p(u,a){a&240&&(r=u[6],n=gt(n,a,s,1,u,r,l,t,zt,ns,o,Zr))},d(u){u&&P(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Fp(e){let t,n,l,o,r,s,u,a,f,c=e[6],d=[];for(let m=0;m<c.length;m+=1)d[m]=ts(es(e,c,m));let g=e[5],p=[];for(let m=0;m<g.length;m+=1)p[m]=ls(Jr(e,g,m));return{c(){t=A("div"),n=A("div"),l=A("table"),o=A("thead");for(let m=0;m<d.length;m+=1)d[m].c();r=N(),s=A("tbody");for(let m=0;m<p.length;m+=1)p[m].c();a=N(),f=A("br"),h(o,"class","svelte-owgjbp"),h(s,"class","svelte-owgjbp"),h(l,"class",u="pretty-table "+e[0].style+" svelte-owgjbp"),h(n,"class","svelte-owgjbp"),h(f,"class","svelte-owgjbp"),h(t,"class","table svelte-owgjbp")},m(m,_){T(m,t,_),b(t,n),b(n,l),b(l,o);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(o,null);b(l,r),b(l,s);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(s,null);b(t,a),b(t,f)},p(m,[_]){if(_&78){c=m[6];let v;for(v=0;v<c.length;v+=1){const y=es(m,c,v);d[v]?d[v].p(y,_):(d[v]=ts(y),d[v].c(),d[v].m(o,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=c.length}if(_&240){g=m[5];let v;for(v=0;v<g.length;v+=1){const y=Jr(m,g,v);p[v]?p[v].p(y,_):(p[v]=ls(y),p[v].c(),p[v].m(s,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=g.length}_&1&&u!==(u="pretty-table "+m[0].style+" svelte-owgjbp")&&h(l,"class",u)},i:U,o:U,d(m){m&&P(t),_e(d,m),_e(p,m)}}}let os=25,Dp=0;function Ip(e,t,n){let l,o,r,s;ue(e,ln,M=>n(9,s=M));let u={};const a=vt(".2f");function f(M){let $=M.reduce((C,R)=>(C[R.model]||(C[R.model]=[]),C[R.model].push(R.rank),C),{});return Object.entries($).map(([C,R])=>{let k=R.reduce((I,D)=>(I[D]=(I[D]||0)+1,I),{}),E=Object.entries(k).reduce((I,D)=>D[1]>I[1]?D:I)[0];return{model:C,overall_rank:Number(E),average_rank:a(kh(R)),standard_deviation_rank:a(sh(R))}})}u={...{columns:{},style:"normal",paged:25},...u};const d=We().domain([-1,0,1]).range(["#FF5470","#f8f8f8","#00ebc7"]);let{sortable:g,index:p,paged:m}=u,_,v=!0;if(g&&p)throw new Error("A table can either be ranked or sortable, but not both");p=1,g=1;let y=null;const w=M=>{g&&(_===M.key&&n(2,v=!v),n(1,_=M.key))},S=(M,$)=>{n(4,y=y===`${M}-${$}`?null:`${M}-${$}`)};return e.$$.update=()=>{if(e.$$.dirty&512,e.$$.dirty&512&&n(8,l=f(s)),e.$$.dirty&774){_&&n(8,l=l.slice().sort(($,F)=>{let C=$[_],R=F[_];if(C==R)return JSON.stringify($).localeCompare(JSON.stringify(F));let k=C>R?1:C<R?-1:0;return v&&(k=-k),k}));let M=Dp*m;n(5,r=l.slice(M,M+(m||l.length))),m&&Math.ceil(s.length/m)}e.$$.dirty&257&&n(6,o=Object.keys(l[0]).map(M=>{const $=u.columns[M]||{};return{key:M,type:$.type||typeof l[0][M],options:$}}))},n(5,r=[]),[u,_,v,g,y,r,o,d,l,s,w,S]}let Np=class extends ce{constructor(t){super(),de(this,t,Ip,Fp,fe,{})}};function is(e,t,n){const l=e.slice();return l[19]=t[n],l}function rs(e,t,n){const l=e.slice();return l[22]=t[n],l}function ss(e,t,n){const l=e.slice();return l[25]=t[n],l[27]=n,l}function as(e){let t,n=e[25]+"",l,o,r,s=e[25]+"",u,a;return{c(){t=G("text"),l=q(n),r=G("text"),u=q(s),h(t,"class","axis-text svelte-t6wv8i"),h(t,"x",o=e[7].left+e[5](e[25])+e[5].bandwidth()/2),h(t,"y",e[7].top-10),h(t,"text-anchor","middle"),h(r,"class","axis-text svelte-t6wv8i"),h(r,"x",e[7].left-10),h(r,"y",a=e[7].top+e[4](e[25])+e[4].bandwidth()/2),h(r,"text-anchor","end"),h(r,"dominant-baseline","middle")},m(f,c){T(f,t,c),b(t,l),T(f,r,c),b(r,u)},p(f,c){c&8&&n!==(n=f[25]+"")&&K(l,n),c&40&&o!==(o=f[7].left+f[5](f[25])+f[5].bandwidth()/2)&&h(t,"x",o),c&8&&s!==(s=f[25]+"")&&K(u,s),c&24&&a!==(a=f[7].top+f[4](f[25])+f[4].bandwidth()/2)&&h(r,"y",a)},d(f){f&&P(t),f&&P(r)}}}function us(e){let t,n,l,o,r,s,u,a,f=e[6](e[2][e[19]][e[22]])+"",c,d,g,p;return{c(){t=G("rect"),a=G("text"),c=q(f),h(t,"x",n=e[7].left+e[5](e[22])),h(t,"y",l=e[7].top+e[4](e[19])),h(t,"width",o=e[5].bandwidth()),h(t,"height",r=e[4].bandwidth()),h(t,"fill",s=e[8](e[19],e[22])),h(t,"rx","4"),h(t,"ry","4"),h(t,"class","model-path"),h(t,"data-model",u=e[19]),h(a,"x",d=e[7].left+e[5](e[22])+e[5].bandwidth()/2),h(a,"y",g=e[7].top+e[4](e[19])+e[4].bandwidth()/2),h(a,"text-anchor","middle"),h(a,"dominant-baseline","middle"),h(a,"class","model-path"),h(a,"data-model",p=e[19])},m(m,_){T(m,t,_),T(m,a,_),b(a,c)},p(m,_){_&40&&n!==(n=m[7].left+m[5](m[22]))&&h(t,"x",n),_&24&&l!==(l=m[7].top+m[4](m[19]))&&h(t,"y",l),_&32&&o!==(o=m[5].bandwidth())&&h(t,"width",o),_&16&&r!==(r=m[4].bandwidth())&&h(t,"height",r),_&8&&s!==(s=m[8](m[19],m[22]))&&h(t,"fill",s),_&8&&u!==(u=m[19])&&h(t,"data-model",u),_&12&&f!==(f=m[6](m[2][m[19]][m[22]])+"")&&K(c,f),_&40&&d!==(d=m[7].left+m[5](m[22])+m[5].bandwidth()/2)&&h(a,"x",d),_&24&&g!==(g=m[7].top+m[4](m[19])+m[4].bandwidth()/2)&&h(a,"y",g),_&8&&p!==(p=m[19])&&h(a,"data-model",p)},d(m){m&&P(t),m&&P(a)}}}function fs(e){let t,n=e[3],l=[];for(let o=0;o<n.length;o+=1)l[o]=us(rs(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=Se()},m(o,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(o,r);T(o,t,r)},p(o,r){if(r&508){n=o[3];let s;for(s=0;s<n.length;s+=1){const u=rs(o,n,s);l[s]?l[s].p(u,r):(l[s]=us(u),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(o){_e(l,o),o&&P(t)}}}function Pp(e){let t,n,l,o,r,s,u,a=e[3],f=[];for(let g=0;g<a.length;g+=1)f[g]=as(ss(e,a,g));let c=e[3],d=[];for(let g=0;g<c.length;g+=1)d[g]=fs(is(e,c,g));return{c(){t=A("div"),n=G("svg");for(let g=0;g<f.length;g+=1)f[g].c();l=Se();for(let g=0;g<d.length;g+=1)d[g].c();o=G("text"),r=q("Relative Performance"),s=G("text"),h(o,"class","chart-title"),h(o,"y",e[7].top/2),h(o,"x",e[7].left),h(o,"text-anchor","start"),h(s,"class","chart-subtitle svelte-t6wv8i"),h(s,"y",e[7].top/2+15),h(s,"x",e[7].left),h(s,"opacity",".6"),h(s,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","heatmap-holder"),h(t,"class","svelte-t6wv8i"),Me(()=>e[16].call(t))},m(g,p){T(g,t,p),b(t,n);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(n,null);b(n,l);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(n,null);b(n,o),b(o,r),b(n,s),u=ut(t,e[16].bind(t))},p(g,[p]){if(p&184){a=g[3];let m;for(m=0;m<a.length;m+=1){const _=ss(g,a,m);f[m]?f[m].p(_,p):(f[m]=as(_),f[m].c(),f[m].m(n,l))}for(;m<f.length;m+=1)f[m].d(1);f.length=a.length}if(p&508){c=g[3];let m;for(m=0;m<c.length;m+=1){const _=is(g,c,m);d[m]?d[m].p(_,p):(d[m]=fs(_),d[m].c(),d[m].m(n,o))}for(;m<d.length;m+=1)d[m].d(1);d.length=c.length}p&2&&h(n,"width",g[1]),p&1&&h(n,"height",g[0])},i:U,o:U,d(g){g&&P(t),_e(f,g),_e(d,g),u()}}}function Tp(e,t,n){let l,o,r,s,u,a,f,c,d,g,p;ue(e,ln,$=>n(15,p=$));const m=vt(".1f");function _($){let F=$.reduce((k,E)=>(k[E.qid]||(k[E.qid]=[]),k[E.qid].push(E),k),{}),C=Array.from(new Set($.map(k=>k.model))),R=C.reduce((k,E)=>(k[E]=C.reduce((I,D)=>(I[D]={sum:0,count:0},I),{}),k),{});for(let k in F){let E=F[k];for(let I of C)for(let D of C){let L=E.find(B=>B.model===I),O=E.find(B=>B.model===D);L&&O&&(R[I][D].sum+=O.rank-L.rank,R[I][D].count++)}}for(let k in R)for(let E in R[k])R[k][E].count>0?R[k][E]=R[k][E].sum/R[k][E].count:R[k][E]=0;return R}let v=500,y=500,w={top:50,bottom:0,left:65,right:25};function S($,F){let C=l[$][F];return C===0?"white":C>=0?g($):g(F)}function M(){y=this.offsetWidth,v=this.offsetHeight,n(1,y),n(0,v)}return e.$$.update=()=>{e.$$.dirty&32768&&n(2,l=_(p)),e.$$.dirty&32768&&n(3,o=Array.from(new Set(p.map($=>$.model)))),e.$$.dirty&2&&n(14,r=y-w.left-w.right),e.$$.dirty&1&&n(13,s=v-w.top-w.bottom),e.$$.dirty&16392&&n(5,u=Lt().range([0,r]).domain(o).padding(.05)),e.$$.dirty&8200&&n(4,a=Lt().range([0,s]).domain(o).padding(.05)),e.$$.dirty&4&&n(12,f=Object.values(l).flatMap($=>Object.values($))),e.$$.dirty&4096&&n(11,c=so(f)),e.$$.dirty&4096&&n(10,d=mt(f)),e.$$.dirty&8&&n(9,g=Mt().domain(o).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&3592&&o.reduce(($,F)=>($[F]=qa().domain([c,d]).interpolator(uo("white",g(F))),$),{})},[v,y,l,o,a,u,m,w,S,g,d,c,f,s,r,p,M]}class Op extends ce{constructor(t){super(),de(this,t,Tp,Pp,fe,{})}}function cs(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function Vp(e){let t;return{c(){t=A("div"),t.innerHTML="<h5>To view the comparison dashboard, you must first rank some comparisons!</h5>",h(t,"class","holder svelte-7imt18")},m(n,l){T(n,t,l)},p:U,i:U,o:U,d(n){n&&P(t)}}}function zp(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,y,w,S,M,$,F=e[1],C=[];for(let R=0;R<F.length;R+=1)C[R]=ds(cs(e,F,R));return a=new Rp({}),d=new Np({}),y=new Ep({}),M=new Op({}),{c(){t=A("div"),n=A("div"),l=A("div"),o=A("h4"),o.textContent="Model Comparisons",r=N();for(let R=0;R<C.length;R+=1)C[R].c();s=N(),u=A("div"),ne(a.$$.fragment),f=N(),c=A("div"),ne(d.$$.fragment),g=N(),p=A("div"),m=A("div"),_=N(),v=A("div"),ne(y.$$.fragment),w=N(),S=A("div"),ne(M.$$.fragment),h(o,"class","svelte-7imt18"),h(l,"class","chart-captions svelte-7imt18"),h(u,"class","eval-main"),h(c,"class","eval-table svelte-7imt18"),h(n,"class","left-charts svelte-7imt18"),h(m,"class","right-chart-1"),h(v,"class","right-chart-2"),h(S,"class","right-chart-3"),h(p,"class","right-charts svelte-7imt18"),h(t,"class","eval-container svelte-7imt18")},m(R,k){T(R,t,k),b(t,n),b(n,l),b(l,o),b(l,r);for(let E=0;E<C.length;E+=1)C[E]&&C[E].m(l,null);b(n,s),b(n,u),ee(a,u,null),b(n,f),b(n,c),ee(d,c,null),b(t,g),b(t,p),b(p,m),b(p,_),b(p,v),ee(y,v,null),b(p,w),b(p,S),ee(M,S,null),$=!0},p(R,k){if(k&14){F=R[1];let E;for(E=0;E<F.length;E+=1){const I=cs(R,F,E);C[E]?C[E].p(I,k):(C[E]=ds(I),C[E].c(),C[E].m(l,null))}for(;E<C.length;E+=1)C[E].d(1);C.length=F.length}},i(R){$||(V(a.$$.fragment,R),V(d.$$.fragment,R),V(y.$$.fragment,R),V(M.$$.fragment,R),$=!0)},o(R){z(a.$$.fragment,R),z(d.$$.fragment,R),z(y.$$.fragment,R),z(M.$$.fragment,R),$=!1},d(R){R&&P(t),_e(C,R),te(a),te(d),te(y),te(M)}}}function ds(e){let t,n=e[7]+"",l,o,r,s;function u(){return e[4](e[9])}function a(){return e[5](e[9])}return{c(){t=A("button"),l=q(n),h(t,"data-model",o=e[7]),h(t,"class","model-path svelte-7imt18"),Ae(t,"color","white"),Ae(t,"background",e[2](e[7]))},m(f,c){T(f,t,c),b(t,l),r||(s=[x(t,"mouseover",u),x(t,"focus",a),x(t,"mouseout",hs),x(t,"blur",hs)],r=!0)},p(f,c){e=f,c&2&&n!==(n=e[7]+"")&&K(l,n),c&2&&o!==(o=e[7])&&h(t,"data-model",o),c&6&&Ae(t,"background",e[2](e[7]))},d(f){f&&P(t),r=!1,be(s)}}}function Lp(e){let t,n,l,o;const r=[zp,Vp],s=[];function u(a,f){return a[0].length>0?0:1}return n=u(e),l=s[n]=r[n](e),{c(){t=A("div"),l.c(),h(t,"class","main-container svelte-7imt18")},m(a,f){T(a,t,f),s[n].m(t,null),o=!0},p(a,[f]){let c=n;n=u(a),n===c?s[n].p(a,f):(we(),z(s[c],1,1,()=>{s[c]=null}),ye(),l=s[n],l?l.p(a,f):(l=s[n]=r[n](a),l.c()),V(l,1),l.m(t,null))},i(a){o||(V(l),o=!0)},o(a){z(l),o=!1},d(a){a&&P(t),s[n].d()}}}function hs(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function qp(e,t,n){let l,o,r;ue(e,ln,c=>n(0,r=c));async function s(){const d=await(await fetch("/chat/comparator/db/retrieve")).json();console.log("uploooo",d);const p=d.data.map(m=>({model:m.model,answer:m.answer,qid:parseInt(m.qid),rank:parseInt(m.rank)}));Pe(ln,r=[...p],r)}ft(()=>{s()});function u(c){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(d=>{d.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${l[c]}"], .model-circle[data-model="${l[c]}"]`).forEach(d=>{d.style.opacity=1})}const a=c=>u(c),f=c=>u(c);return e.$$.update=()=>{e.$$.dirty&1&&n(1,l=Array.from(new Set(r.map(c=>c.model)))),e.$$.dirty&1&&n(2,o=Mt().domain(r.map(c=>c.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"]))},[r,l,o,u,a,f]}class Hp extends ce{constructor(t){super(),de(this,t,qp,Lp,fe,{})}}function Gp(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return cu(this.cover(t,n),t,n,e)}function cu(e,t,n,l){if(isNaN(t)||isNaN(n))return e;var o,r=e._root,s={data:l},u=e._x0,a=e._y0,f=e._x1,c=e._y1,d,g,p,m,_,v,y,w;if(!r)return e._root=s,e;for(;r.length;)if((_=t>=(d=(u+f)/2))?u=d:f=d,(v=n>=(g=(a+c)/2))?a=g:c=g,o=r,!(r=r[y=v<<1|_]))return o[y]=s,e;if(p=+e._x.call(null,r.data),m=+e._y.call(null,r.data),t===p&&n===m)return s.next=r,o?o[y]=s:e._root=s,e;do o=o?o[y]=new Array(4):e._root=new Array(4),(_=t>=(d=(u+f)/2))?u=d:f=d,(v=n>=(g=(a+c)/2))?a=g:c=g;while((y=v<<1|_)===(w=(m>=g)<<1|p>=d));return o[w]=r,o[y]=s,e}function Bp(e){var t,n,l=e.length,o,r,s=new Array(l),u=new Array(l),a=1/0,f=1/0,c=-1/0,d=-1/0;for(n=0;n<l;++n)isNaN(o=+this._x.call(null,t=e[n]))||isNaN(r=+this._y.call(null,t))||(s[n]=o,u[n]=r,o<a&&(a=o),o>c&&(c=o),r<f&&(f=r),r>d&&(d=r));if(a>c||f>d)return this;for(this.cover(a,f).cover(c,d),n=0;n<l;++n)cu(this,s[n],u[n],e[n]);return this}function jp(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,l=this._y0,o=this._x1,r=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,r=(l=Math.floor(t))+1;else{for(var s=o-n||1,u=this._root,a,f;n>e||e>=o||l>t||t>=r;)switch(f=(t<l)<<1|e<n,a=new Array(4),a[f]=u,u=a,s*=2,f){case 0:o=n+s,r=l+s;break;case 1:n=o-s,r=l+s;break;case 2:o=n+s,l=r-s;break;case 3:n=o-s,l=r-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=l,this._x1=o,this._y1=r,this}function xp(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Up(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Oe(e,t,n,l,o){this.node=e,this.x0=t,this.y0=n,this.x1=l,this.y1=o}function Wp(e,t,n){var l,o=this._x0,r=this._y0,s,u,a,f,c=this._x1,d=this._y1,g=[],p=this._root,m,_;for(p&&g.push(new Oe(p,o,r,c,d)),n==null?n=1/0:(o=e-n,r=t-n,c=e+n,d=t+n,n*=n);m=g.pop();)if(!(!(p=m.node)||(s=m.x0)>c||(u=m.y0)>d||(a=m.x1)<o||(f=m.y1)<r))if(p.length){var v=(s+a)/2,y=(u+f)/2;g.push(new Oe(p[3],v,y,a,f),new Oe(p[2],s,y,v,f),new Oe(p[1],v,u,a,y),new Oe(p[0],s,u,v,y)),(_=(t>=y)<<1|e>=v)&&(m=g[g.length-1],g[g.length-1]=g[g.length-1-_],g[g.length-1-_]=m)}else{var w=e-+this._x.call(null,p.data),S=t-+this._y.call(null,p.data),M=w*w+S*S;if(M<n){var $=Math.sqrt(n=M);o=e-$,r=t-$,c=e+$,d=t+$,l=p.data}}return l}function Xp(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,l,o,r,s=this._x0,u=this._y0,a=this._x1,f=this._y1,c,d,g,p,m,_,v,y;if(!n)return this;if(n.length)for(;;){if((m=c>=(g=(s+a)/2))?s=g:a=g,(_=d>=(p=(u+f)/2))?u=p:f=p,t=n,!(n=n[v=_<<1|m]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(l=t,y=v)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(r=n.next)&&delete n.next,o?(r?o.next=r:delete o.next,this):t?(r?t[v]=r:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(l?l[y]=n:this._root=n),this):(this._root=r,this)}function Yp(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Qp(){return this._root}function Kp(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Jp(e){var t=[],n,l=this._root,o,r,s,u,a;for(l&&t.push(new Oe(l,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(l=n.node,r=n.x0,s=n.y0,u=n.x1,a=n.y1)&&l.length){var f=(r+u)/2,c=(s+a)/2;(o=l[3])&&t.push(new Oe(o,f,c,u,a)),(o=l[2])&&t.push(new Oe(o,r,c,f,a)),(o=l[1])&&t.push(new Oe(o,f,s,u,c)),(o=l[0])&&t.push(new Oe(o,r,s,f,c))}return this}function Zp(e){var t=[],n=[],l;for(this._root&&t.push(new Oe(this._root,this._x0,this._y0,this._x1,this._y1));l=t.pop();){var o=l.node;if(o.length){var r,s=l.x0,u=l.y0,a=l.x1,f=l.y1,c=(s+a)/2,d=(u+f)/2;(r=o[0])&&t.push(new Oe(r,s,u,c,d)),(r=o[1])&&t.push(new Oe(r,c,u,a,d)),(r=o[2])&&t.push(new Oe(r,s,d,c,f)),(r=o[3])&&t.push(new Oe(r,c,d,a,f))}n.push(l)}for(;l=n.pop();)e(l.node,l.x0,l.y0,l.x1,l.y1);return this}function em(e){return e[0]}function tm(e){return arguments.length?(this._x=e,this):this._x}function nm(e){return e[1]}function lm(e){return arguments.length?(this._y=e,this):this._y}function du(e,t,n){var l=new Ho(t??em,n??nm,NaN,NaN,NaN,NaN);return e==null?l:l.addAll(e)}function Ho(e,t,n,l,o,r){this._x=e,this._y=t,this._x0=n,this._y0=l,this._x1=o,this._y1=r,this._root=void 0}function gs(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ve=du.prototype=Ho.prototype;Ve.copy=function(){var e=new Ho(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,l;if(!t)return e;if(!t.length)return e._root=gs(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var o=0;o<4;++o)(l=t.source[o])&&(l.length?n.push({source:l,target:t.target[o]=new Array(4)}):t.target[o]=gs(l));return e};Ve.add=Gp;Ve.addAll=Bp;Ve.cover=jp;Ve.data=xp;Ve.extent=Up;Ve.find=Wp;Ve.remove=Xp;Ve.removeAll=Yp;Ve.root=Qp;Ve.size=Kp;Ve.visit=Jp;Ve.visitAfter=Zp;Ve.x=tm;Ve.y=lm;function ot(e){return function(){return e}}function ps(e){return(e()-.5)*1e-6}function om(e){return e.x+e.vx}function im(e){return e.y+e.vy}function rm(e){var t,n,l,o=1,r=1;typeof e!="function"&&(e=ot(e==null?1:+e));function s(){for(var f,c=t.length,d,g,p,m,_,v,y=0;y<r;++y)for(d=du(t,om,im).visitAfter(u),f=0;f<c;++f)g=t[f],_=n[g.index],v=_*_,p=g.x+g.vx,m=g.y+g.vy,d.visit(w);function w(S,M,$,F,C){var R=S.data,k=S.r,E=_+k;if(R){if(R.index>g.index){var I=p-R.x-R.vx,D=m-R.y-R.vy,L=I*I+D*D;L<E*E&&(I===0&&(I=ps(l),L+=I*I),D===0&&(D=ps(l),L+=D*D),L=(E-(L=Math.sqrt(L)))/L*o,g.vx+=(I*=L)*(E=(k*=k)/(v+k)),g.vy+=(D*=L)*E,R.vx-=I*(E=1-E),R.vy-=D*E)}return}return M>p+E||F<p-E||$>m+E||C<m-E}}function u(f){if(f.data)return f.r=n[f.data.index];for(var c=f.r=0;c<4;++c)f[c]&&f[c].r>f.r&&(f.r=f[c].r)}function a(){if(t){var f,c=t.length,d;for(n=new Array(c),f=0;f<c;++f)d=t[f],n[d.index]=+e(d,f,t)}}return s.initialize=function(f,c){t=f,l=c,a()},s.iterations=function(f){return arguments.length?(r=+f,s):r},s.strength=function(f){return arguments.length?(o=+f,s):o},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:ot(+f),a(),s):e},s}var sm={value:()=>{}};function hu(){for(var e=0,t=arguments.length,n={},l;e<t;++e){if(!(l=arguments[e]+"")||l in n||/[\s.]/.test(l))throw new Error("illegal type: "+l);n[l]=[]}return new nl(n)}function nl(e){this._=e}function am(e,t){return e.trim().split(/^|\s+/).map(function(n){var l="",o=n.indexOf(".");if(o>=0&&(l=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:l}})}nl.prototype=hu.prototype={constructor:nl,on:function(e,t){var n=this._,l=am(e+"",n),o,r=-1,s=l.length;if(arguments.length<2){for(;++r<s;)if((o=(e=l[r]).type)&&(o=um(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<s;)if(o=(e=l[r]).type)n[o]=ms(n[o],e.name,t);else if(t==null)for(o in n)n[o]=ms(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new nl(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),l=0,o,r;l<o;++l)n[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],l=0,o=r.length;l<o;++l)r[l].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],o=0,r=l.length;o<r;++o)l[o].value.apply(t,n)}};function um(e,t){for(var n=0,l=e.length,o;n<l;++n)if((o=e[n]).name===t)return o.value}function ms(e,t,n){for(var l=0,o=e.length;l<o;++l)if(e[l].name===t){e[l]=sm,e=e.slice(0,l).concat(e.slice(l+1));break}return n!=null&&e.push({name:t,value:n}),e}var on=0,pn=0,fn=0,gu=1e3,wl,mn,yl=0,qt=0,Ml=0,In=typeof performance=="object"&&performance.now?performance:Date,pu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function mu(){return qt||(pu(fm),qt=In.now()+Ml)}function fm(){qt=0}function yo(){this._call=this._time=this._next=null}yo.prototype=_u.prototype={constructor:yo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?mu():+n)+(t==null?0:+t),!this._next&&mn!==this&&(mn?mn._next=this:wl=this,mn=this),this._call=e,this._time=n,ko()},stop:function(){this._call&&(this._call=null,this._time=1/0,ko())}};function _u(e,t,n){var l=new yo;return l.restart(e,t,n),l}function cm(){mu(),++on;for(var e=wl,t;e;)(t=qt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--on}function _s(){qt=(yl=In.now())+Ml,on=pn=0;try{cm()}finally{on=0,hm(),qt=0}}function dm(){var e=In.now(),t=e-yl;t>gu&&(Ml-=t,yl=e)}function hm(){for(var e,t=wl,n,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:wl=n);mn=e,ko(l)}function ko(e){if(!on){pn&&(pn=clearTimeout(pn));var t=e-qt;t>24?(e<1/0&&(pn=setTimeout(_s,e-In.now()-Ml)),fn&&(fn=clearInterval(fn))):(fn||(yl=In.now(),fn=setInterval(dm,gu)),on=1,pu(_s))}}const gm=1664525,pm=1013904223,vs=4294967296;function mm(){let e=1;return()=>(e=(gm*e+pm)%vs)/vs}var _m=10,vm=Math.PI*(3-Math.sqrt(5));function bm(e){var t,n=1,l=.001,o=1-Math.pow(l,1/300),r=0,s=.6,u=new Map,a=_u(d),f=hu("tick","end"),c=mm();e==null&&(e=[]);function d(){g(),f.call("tick",t),n<l&&(a.stop(),f.call("end",t))}function g(_){var v,y=e.length,w;_===void 0&&(_=1);for(var S=0;S<_;++S)for(n+=(r-n)*o,u.forEach(function(M){M(n)}),v=0;v<y;++v)w=e[v],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function p(){for(var _=0,v=e.length,y;_<v;++_){if(y=e[_],y.index=_,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var w=_m*Math.sqrt(.5+_),S=_*vm;y.x=w*Math.cos(S),y.y=w*Math.sin(S)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function m(_){return _.initialize&&_.initialize(e,c),_}return p(),t={tick:g,restart:function(){return a.restart(d),t},stop:function(){return a.stop(),t},nodes:function(_){return arguments.length?(e=_,p(),u.forEach(m),t):e},alpha:function(_){return arguments.length?(n=+_,t):n},alphaMin:function(_){return arguments.length?(l=+_,t):l},alphaDecay:function(_){return arguments.length?(o=+_,t):+o},alphaTarget:function(_){return arguments.length?(r=+_,t):r},velocityDecay:function(_){return arguments.length?(s=1-_,t):1-s},randomSource:function(_){return arguments.length?(c=_,u.forEach(m),t):c},force:function(_,v){return arguments.length>1?(v==null?u.delete(_):u.set(_,m(v)),t):u.get(_)},find:function(_,v,y){var w=0,S=e.length,M,$,F,C,R;for(y==null?y=1/0:y*=y,w=0;w<S;++w)C=e[w],M=_-C.x,$=v-C.y,F=M*M+$*$,F<y&&(R=C,y=F);return R},on:function(_,v){return arguments.length>1?(f.on(_,v),t):f.on(_)}}}function wm(e){var t=ot(.1),n,l,o;typeof e!="function"&&(e=ot(e==null?0:+e));function r(u){for(var a=0,f=n.length,c;a<f;++a)c=n[a],c.vx+=(o[a]-c.x)*l[a]*u}function s(){if(n){var u,a=n.length;for(l=new Array(a),o=new Array(a),u=0;u<a;++u)l[u]=isNaN(o[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return r.initialize=function(u){n=u,s()},r.strength=function(u){return arguments.length?(t=typeof u=="function"?u:ot(+u),s(),r):t},r.x=function(u){return arguments.length?(e=typeof u=="function"?u:ot(+u),s(),r):e},r}function ym(e){var t=ot(.1),n,l,o;typeof e!="function"&&(e=ot(e==null?0:+e));function r(u){for(var a=0,f=n.length,c;a<f;++a)c=n[a],c.vy+=(o[a]-c.y)*l[a]*u}function s(){if(n){var u,a=n.length;for(l=new Array(a),o=new Array(a),u=0;u<a;++u)l[u]=isNaN(o[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return r.initialize=function(u){n=u,s()},r.strength=function(u){return arguments.length?(t=typeof u=="function"?u:ot(+u),s(),r):t},r.y=function(u){return arguments.length?(e=typeof u=="function"?u:ot(+u),s(),r):e},r}const kl=De([]),bs=De({labelNames:["txt2.txt","pdf2.txt"],labels:[0,3],projection:[[.1443715864989249,.00463214192040876,.11292804485781914],[-.05626482326843836,-.013694651798983428,.01709368313171561]]});function ws(e,t,n){const l=e.slice();return l[20]=t[n],l[22]=n,l}function ys(e){let t,n,l,o,r,s=e[20].file+"",u,a,f=ro(e[20].size)+"",c,d,g,p,m,_,v,y;return{c(){t=G("g"),n=G("circle"),r=G("text"),u=q(s),a=G("tspan"),c=q(f),h(n,"r",l=e[3](e[20].size)),h(n,"fill","var(--primary"),h(n,"stroke","var(--white)"),h(n,"stroke-width","1"),h(n,"fill-opacity",.95),h(n,"class","svelte-h2ab3o"),h(a,"x","0"),h(a,"y","15"),h(r,"class","bubble-file-text svelte-h2ab3o"),h(r,"text-anchor","middle"),h(r,"opacity",d=e[20].size>e[4]?1:0),h(t,"class",p="file-circle-g "+(e[20].size>e[4]?"large":"")+" svelte-h2ab3o"),h(t,"style",m=e[5](e[20].x,e[20].y)),h(t,"role","img")},m(w,S){T(w,t,S),b(t,n),b(t,r),b(r,u),b(r,a),b(a,c),_=!0,v||(y=[x(t,"mouseover",e[6]),x(t,"mouseout",e[7]),x(t,"focus",e[6]),x(t,"blur",e[7])],v=!0)},p(w,S){(!_||S&12&&l!==(l=w[3](w[20].size)))&&h(n,"r",l),(!_||S&4)&&s!==(s=w[20].file+"")&&K(u,s),(!_||S&4)&&f!==(f=ro(w[20].size)+"")&&K(c,f),(!_||S&20&&d!==(d=w[20].size>w[4]?1:0))&&h(r,"opacity",d),(!_||S&20&&p!==(p="file-circle-g "+(w[20].size>w[4]?"large":"")+" svelte-h2ab3o"))&&h(t,"class",p),(!_||S&4&&m!==(m=w[5](w[20].x,w[20].y)))&&h(t,"style",m)},i(w){_||(w&&Me(()=>{_&&(o||(o=lt(n,Ln,{duration:1e3},!0)),o.run(1))}),w&&Me(()=>{_&&(g||(g=lt(r,Ln,{duration:1e3},!0)),g.run(1))}),_=!0)},o(w){w&&(o||(o=lt(n,Ln,{duration:1e3},!1)),o.run(0)),w&&(g||(g=lt(r,Ln,{duration:1e3},!1)),g.run(0)),_=!1},d(w){w&&P(t),w&&o&&o.end(),w&&g&&g.end(),v=!1,be(y)}}}function km(e){let t,n,l,o,r=e[2],s=[];for(let a=0;a<r.length;a+=1)s[a]=ys(ws(e,r,a));const u=a=>z(s[a],1,1,()=>{s[a]=null});return{c(){t=A("div"),n=G("svg");for(let a=0;a<s.length;a+=1)s[a].c();h(n,"width",e[0]),h(n,"height",e[1]),h(n,"class","svelte-h2ab3o"),h(t,"id","network-chart"),Me(()=>e[15].call(t))},m(a,f){T(a,t,f),b(t,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null);l=ut(t,e[15].bind(t)),o=!0},p(a,[f]){if(f&252){r=a[2];let c;for(c=0;c<r.length;c+=1){const d=ws(a,r,c);s[c]?(s[c].p(d,f),V(s[c],1)):(s[c]=ys(d),s[c].c(),V(s[c],1),s[c].m(n,null))}for(we(),c=r.length;c<s.length;c+=1)u(c);ye()}(!o||f&1)&&h(n,"width",a[0]),(!o||f&2)&&h(n,"height",a[1])},i(a){if(!o){for(let f=0;f<r.length;f+=1)V(s[f]);o=!0}},o(a){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)z(s[f]);o=!1},d(a){a&&P(t),_e(s,a),l()}}}function Sm(e,t,n){let l,o,r,s,u,a,f,c;ue(e,kl,$=>n(14,c=$));let d=600,g=350,p=!0,m=!1;const _=($,F)=>`transform: translate(${$}px, ${F}px)`,v=[-4,4],y=[-1,1];function w(){n(8,p=!0),n(9,m=!0);const $=pt(this);Nl(".file-circle-g").select("text").style("opacity",0),$.raise(),$.select("circle").attr("fill","var(--red)"),$.select("text").style("opacity",1)}const S=()=>{const $=Nl(".file-circle-g");$.select("circle").attr("fill","var(--yellow)"),$.select("text").style("opacity",0),n(9,m=!1),setTimeout(()=>{n(8,p=!1)},1e3)};function M(){d=this.offsetWidth,g=this.offsetHeight,n(0,d),n(1,g)}return e.$$.update=()=>{e.$$.dirty&16387&&n(2,l=c.map($=>({...$,x:d/2,y:g/2,tickCount:0}))),e.$$.dirty&16384&&console.log(c.map($=>$.size).sort(($,F)=>$-F)),e.$$.dirty&1&&n(13,o=wm().x(d/2)),e.$$.dirty&2&&n(12,r=ym().y(g/2)),e.$$.dirty&16384&&n(3,a=We().domain(_n(c,$=>$.size)).range([12,60])),e.$$.dirty&8&&n(10,s=rm().radius($=>a($.size)+1).iterations(3)),e.$$.dirty&16384&&n(4,u=yh(c.map($=>$.size).sort(($,F)=>$-F),.85)),e.$$.dirty&1&&We().domain(v).range([5,d]),e.$$.dirty&2&&We().domain(y).range([g,5]),e.$$.dirty&4&&n(11,f=bm().nodes(l).on("tick",()=>{n(2,l=[...l])})),e.$$.dirty&15360&&(f.force("x",o),f.force("y",r),f.force("collide",s),f.alpha(.02),f.restart()),e.$$.dirty&19468&&(a.domain(_n(c,$=>$.size)),l.forEach($=>$.radius=a($.size)),f.nodes(l),s.radius($=>$.radius+.5)),e.$$.dirty&768&&p===!1&&(m||Nl(".large").select("text").style("opacity",1))},[d,g,l,a,u,_,w,S,p,m,s,f,r,o,c,M]}class Cm extends ce{constructor(t){super(),de(this,t,Sm,km,fe,{})}}/**
 * table-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $t(e,t){return typeof e=="function"?e(t):e}function Qe(e,t){return n=>{t.setState(l=>({...l,[e]:$t(n,l[e])}))}}function Sl(e){return e instanceof Function}function $m(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Rm(e,t){const n=[],l=o=>{o.forEach(r=>{n.push(r);const s=t(r);s!=null&&s.length&&l(s)})};return l(e),n}function oe(e,t,n){let l=[],o;return()=>{let r;n.key&&n.debug&&(r=Date.now());const s=e();if(!(s.length!==l.length||s.some((f,c)=>l[c]!==f)))return o;l=s;let a;if(n.key&&n.debug&&(a=Date.now()),o=t(...s),n==null||n.onChange==null||n.onChange(o),n.key&&n.debug&&n!=null&&n.debug()){const f=Math.round((Date.now()-r)*100)/100,c=Math.round((Date.now()-a)*100)/100,d=c/16,g=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%c⏱ ${g(c,5)} /${g(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,n==null?void 0:n.key)}return o}}function Am(e,t,n,l){var o,r;const u={...e._getDefaultColumnDef(),...t},a=u.accessorKey;let f=(o=(r=u.id)!=null?r:a?a.replace(".","_"):void 0)!=null?o:typeof u.header=="string"?u.header:void 0,c;if(u.accessorFn?c=u.accessorFn:a&&(a.includes(".")?c=g=>{let p=g;for(const _ of a.split(".")){var m;p=(m=p)==null?void 0:m[_]}return p}:c=g=>g[u.accessorKey]),!f)throw new Error;let d={id:`${String(f)}`,accessorFn:c,parent:l,depth:n,columnDef:u,columns:[],getFlatColumns:oe(()=>[!0],()=>{var g;return[d,...(g=d.columns)==null?void 0:g.flatMap(p=>p.getFlatColumns())]},{key:"column.getFlatColumns",debug:()=>{var g;return(g=e.options.debugAll)!=null?g:e.options.debugColumns}}),getLeafColumns:oe(()=>[e._getOrderColumnsFn()],g=>{var p;if((p=d.columns)!=null&&p.length){let m=d.columns.flatMap(_=>_.getLeafColumns());return g(m)}return[d]},{key:"column.getLeafColumns",debug:()=>{var g;return(g=e.options.debugAll)!=null?g:e.options.debugColumns}})};return d=e._features.reduce((g,p)=>Object.assign(g,p.createColumn==null?void 0:p.createColumn(d,e)),d),d}function ks(e,t,n){var l;let r={id:(l=n.id)!=null?l:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],u=a=>{a.subHeaders&&a.subHeaders.length&&a.subHeaders.map(u),s.push(a)};return u(r),s},getContext:()=>({table:e,header:r,column:t})};return e._features.forEach(s=>{Object.assign(r,s.createHeader==null?void 0:s.createHeader(r,e))}),r}const Mm={createTable:e=>({getHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l,o)=>{var r,s;const u=(r=l==null?void 0:l.map(d=>n.find(g=>g.id===d)).filter(Boolean))!=null?r:[],a=(s=o==null?void 0:o.map(d=>n.find(g=>g.id===d)).filter(Boolean))!=null?s:[],f=n.filter(d=>!(l!=null&&l.includes(d.id))&&!(o!=null&&o.includes(d.id)));return Wn(t,[...u,...f,...a],e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l,o)=>(n=n.filter(r=>!(l!=null&&l.includes(r.id))&&!(o!=null&&o.includes(r.id))),Wn(t,n,e,"center")),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,l)=>{var o;const r=(o=l==null?void 0:l.map(s=>n.find(u=>u.id===s)).filter(Boolean))!=null?o:[];return Wn(t,r,e,"left")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,l)=>{var o;const r=(o=l==null?void 0:l.map(s=>n.find(u=>u.id===s)).filter(Boolean))!=null?o:[];return Wn(t,r,e,"right")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFooterGroups:oe(()=>[e.getHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFooterGroups:oe(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFooterGroups:oe(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFooterGroups:oe(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFlatHeaders:oe(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFlatHeaders:oe(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFlatHeaders:oe(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFlatHeaders:oe(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterLeafHeaders:oe(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftLeafHeaders:oe(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightLeafHeaders:oe(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeafHeaders:oe(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,l)=>{var o,r,s,u,a,f;return[...(o=(r=t[0])==null?void 0:r.headers)!=null?o:[],...(s=(u=n[0])==null?void 0:u.headers)!=null?s:[],...(a=(f=l[0])==null?void 0:f.headers)!=null?a:[]].map(c=>c.getLeafHeaders()).flat()},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}})})};function Wn(e,t,n,l){var o,r;let s=0;const u=function(g,p){p===void 0&&(p=1),s=Math.max(s,p),g.filter(m=>m.getIsVisible()).forEach(m=>{var _;(_=m.columns)!=null&&_.length&&u(m.columns,p+1)},0)};u(e);let a=[];const f=(g,p)=>{const m={depth:p,id:[l,`${p}`].filter(Boolean).join("_"),headers:[]},_=[];g.forEach(v=>{const y=[..._].reverse()[0],w=v.column.depth===m.depth;let S,M=!1;if(w&&v.column.parent?S=v.column.parent:(S=v.column,M=!0),y&&(y==null?void 0:y.column)===S)y.subHeaders.push(v);else{const $=ks(n,S,{id:[l,p,S.id,v==null?void 0:v.id].filter(Boolean).join("_"),isPlaceholder:M,placeholderId:M?`${_.filter(F=>F.column===S).length}`:void 0,depth:p,index:_.length});$.subHeaders.push(v),_.push($)}m.headers.push(v),v.headerGroup=m}),a.push(m),p>0&&f(_,p-1)},c=t.map((g,p)=>ks(n,g,{depth:s,index:p}));f(c,s-1),a.reverse();const d=g=>g.filter(m=>m.column.getIsVisible()).map(m=>{let _=0,v=0,y=[0];m.subHeaders&&m.subHeaders.length?(y=[],d(m.subHeaders).forEach(S=>{let{colSpan:M,rowSpan:$}=S;_+=M,y.push($)})):_=1;const w=Math.min(...y);return v=v+w,m.colSpan=_,m.rowSpan=v,{colSpan:_,rowSpan:v}});return d((o=(r=a[0])==null?void 0:r.headers)!=null?o:[]),a}const Xn={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Ul=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Em={getDefaultColumnDef:()=>Xn,getInitialState:e=>({columnSizing:{},columnSizingInfo:Ul(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",onColumnSizingChange:Qe("columnSizing",e),onColumnSizingInfoChange:Qe("columnSizingInfo",e)}),createColumn:(e,t)=>({getSize:()=>{var n,l,o;const r=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Xn.minSize,(l=r??e.columnDef.size)!=null?l:Xn.size),(o=e.columnDef.maxSize)!=null?o:Xn.maxSize)},getStart:n=>{const l=n?n==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns(),o=l.findIndex(r=>r.id===e.id);if(o>0){const r=l[o-1];return r.getStart(n)+r.getSize()}return 0},resetSize:()=>{t.setColumnSizing(n=>{let{[e.id]:l,...o}=n;return o})},getCanResize:()=>{var n,l;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((l=t.options.enableColumnResizing)!=null?l:!0)},getIsResizing:()=>t.getState().columnSizingInfo.isResizingColumn===e.id}),createHeader:(e,t)=>({getSize:()=>{let n=0;const l=o=>{if(o.subHeaders.length)o.subHeaders.forEach(l);else{var r;n+=(r=o.column.getSize())!=null?r:0}};return l(e),n},getStart:()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},getResizeHandler:()=>{const n=t.getColumn(e.column.id),l=n==null?void 0:n.getCanResize();return o=>{if(!n||!l||(o.persist==null||o.persist(),Wl(o)&&o.touches&&o.touches.length>1))return;const r=e.getSize(),s=e?e.getLeafHeaders().map(_=>[_.column.id,_.column.getSize()]):[[n.id,n.getSize()]],u=Wl(o)?Math.round(o.touches[0].clientX):o.clientX,a={},f=(_,v)=>{typeof v=="number"&&(t.setColumnSizingInfo(y=>{var w,S;const M=v-((w=y==null?void 0:y.startOffset)!=null?w:0),$=Math.max(M/((S=y==null?void 0:y.startSize)!=null?S:0),-.999999);return y.columnSizingStart.forEach(F=>{let[C,R]=F;a[C]=Math.round(Math.max(R+R*$,0)*100)/100}),{...y,deltaOffset:M,deltaPercentage:$}}),(t.options.columnResizeMode==="onChange"||_==="end")&&t.setColumnSizing(y=>({...y,...a})))},c=_=>f("move",_),d=_=>{f("end",_),t.setColumnSizingInfo(v=>({...v,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g={moveHandler:_=>c(_.clientX),upHandler:_=>{document.removeEventListener("mousemove",g.moveHandler),document.removeEventListener("mouseup",g.upHandler),d(_.clientX)}},p={moveHandler:_=>(_.cancelable&&(_.preventDefault(),_.stopPropagation()),c(_.touches[0].clientX),!1),upHandler:_=>{var v;document.removeEventListener("touchmove",p.moveHandler),document.removeEventListener("touchend",p.upHandler),_.cancelable&&(_.preventDefault(),_.stopPropagation()),d((v=_.touches[0])==null?void 0:v.clientX)}},m=Fm()?{passive:!1}:!1;Wl(o)?(document.addEventListener("touchmove",p.moveHandler,m),document.addEventListener("touchend",p.upHandler,m)):(document.addEventListener("mousemove",g.moveHandler,m),document.addEventListener("mouseup",g.upHandler,m)),t.setColumnSizingInfo(_=>({..._,startOffset:u,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:n.id}))}}}),createTable:e=>({setColumnSizing:t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),setColumnSizingInfo:t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),resetColumnSizing:t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},resetHeaderSizeInfo:t=>{var n;e.setColumnSizingInfo(t?Ul():(n=e.initialState.columnSizingInfo)!=null?n:Ul())},getTotalSize:()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0},getLeftTotalSize:()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0},getCenterTotalSize:()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0},getRightTotalSize:()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0}})};let Yn=null;function Fm(){if(typeof Yn=="boolean")return Yn;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return Yn=e,Yn}function Wl(e){return e.type==="touchstart"}const Dm={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Qe("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;return{_autoResetExpanded:()=>{var l,o;if(!t){e._queue(()=>{t=!0});return}if((l=(o=e.options.autoResetAll)!=null?o:e.options.autoResetExpanded)!=null?l:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},setExpanded:l=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(l),toggleAllRowsExpanded:l=>{l??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},resetExpanded:l=>{var o,r;e.setExpanded(l?{}:(o=(r=e.initialState)==null?void 0:r.expanded)!=null?o:{})},getCanSomeRowsExpand:()=>e.getPrePaginationRowModel().flatRows.some(l=>l.getCanExpand()),getToggleAllRowsExpandedHandler:()=>l=>{l.persist==null||l.persist(),e.toggleAllRowsExpanded()},getIsSomeRowsExpanded:()=>{const l=e.getState().expanded;return l===!0||Object.values(l).some(Boolean)},getIsAllRowsExpanded:()=>{const l=e.getState().expanded;return typeof l=="boolean"?l===!0:!(!Object.keys(l).length||e.getRowModel().flatRows.some(o=>!o.getIsExpanded()))},getExpandedDepth:()=>{let l=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(r=>{const s=r.split(".");l=Math.max(l,s.length)}),l},getPreExpandedRowModel:()=>e.getSortedRowModel(),getExpandedRowModel:()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())}},createRow:(e,t)=>({toggleExpanded:n=>{t.setExpanded(l=>{var o;const r=l===!0?!0:!!(l!=null&&l[e.id]);let s={};if(l===!0?Object.keys(t.getRowModel().rowsById).forEach(u=>{s[u]=!0}):s=l,n=(o=n)!=null?o:!r,!r&&n)return{...s,[e.id]:!0};if(r&&!n){const{[e.id]:u,...a}=s;return a}return l})},getIsExpanded:()=>{var n;const l=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:l===!0||l!=null&&l[e.id])},getCanExpand:()=>{var n,l,o;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((l=t.options.enableExpanding)!=null?l:!0)&&!!((o=e.subRows)!=null&&o.length)},getToggleExpandedHandler:()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}})},vu=(e,t,n)=>{var l,o,r;const s=n.toLowerCase();return!!(!((l=e.getValue(t))==null||(o=l.toString())==null||(r=o.toLowerCase())==null)&&r.includes(s))};vu.autoRemove=e=>Ze(e);const bu=(e,t,n)=>{var l,o;return!!(!((l=e.getValue(t))==null||(o=l.toString())==null)&&o.includes(n))};bu.autoRemove=e=>Ze(e);const wu=(e,t,n)=>{var l,o;return((l=e.getValue(t))==null||(o=l.toString())==null?void 0:o.toLowerCase())===(n==null?void 0:n.toLowerCase())};wu.autoRemove=e=>Ze(e);const yu=(e,t,n)=>{var l;return(l=e.getValue(t))==null?void 0:l.includes(n)};yu.autoRemove=e=>Ze(e)||!(e!=null&&e.length);const ku=(e,t,n)=>!n.some(l=>{var o;return!((o=e.getValue(t))!=null&&o.includes(l))});ku.autoRemove=e=>Ze(e)||!(e!=null&&e.length);const Su=(e,t,n)=>n.some(l=>{var o;return(o=e.getValue(t))==null?void 0:o.includes(l)});Su.autoRemove=e=>Ze(e)||!(e!=null&&e.length);const Cu=(e,t,n)=>e.getValue(t)===n;Cu.autoRemove=e=>Ze(e);const $u=(e,t,n)=>e.getValue(t)==n;$u.autoRemove=e=>Ze(e);const Go=(e,t,n)=>{let[l,o]=n;const r=e.getValue(t);return r>=l&&r<=o};Go.resolveFilterValue=e=>{let[t,n]=e,l=typeof t!="number"?parseFloat(t):t,o=typeof n!="number"?parseFloat(n):n,r=t===null||Number.isNaN(l)?-1/0:l,s=n===null||Number.isNaN(o)?1/0:o;if(r>s){const u=r;r=s,s=u}return[r,s]};Go.autoRemove=e=>Ze(e)||Ze(e[0])&&Ze(e[1]);const ct={includesString:vu,includesStringSensitive:bu,equalsString:wu,arrIncludes:yu,arrIncludesAll:ku,arrIncludesSome:Su,equals:Cu,weakEquals:$u,inNumberRange:Go};function Ze(e){return e==null||e===""}const Im={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],globalFilter:void 0,...e}),getDefaultOptions:e=>({onColumnFiltersChange:Qe("columnFilters",e),onGlobalFilterChange:Qe("globalFilter",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100,globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n,l;const o=(n=e.getCoreRowModel().flatRows[0])==null||(l=n._getAllCellsByColumnId()[t.id])==null?void 0:l.getValue();return typeof o=="string"||typeof o=="number"}}),createColumn:(e,t)=>({getAutoFilterFn:()=>{const n=t.getCoreRowModel().flatRows[0],l=n==null?void 0:n.getValue(e.id);return typeof l=="string"?ct.includesString:typeof l=="number"?ct.inNumberRange:typeof l=="boolean"||l!==null&&typeof l=="object"?ct.equals:Array.isArray(l)?ct.arrIncludes:ct.weakEquals},getFilterFn:()=>{var n,l;return Sl(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(l=t.options.filterFns)==null?void 0:l[e.columnDef.filterFn])!=null?n:ct[e.columnDef.filterFn]},getCanFilter:()=>{var n,l,o;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((l=t.options.enableColumnFilters)!=null?l:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&!!e.accessorFn},getCanGlobalFilter:()=>{var n,l,o,r;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((l=t.options.enableGlobalFilter)!=null?l:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&((r=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?r:!0)&&!!e.accessorFn},getIsFiltered:()=>e.getFilterIndex()>-1,getFilterValue:()=>{var n,l;return(n=t.getState().columnFilters)==null||(l=n.find(o=>o.id===e.id))==null?void 0:l.value},getFilterIndex:()=>{var n,l;return(n=(l=t.getState().columnFilters)==null?void 0:l.findIndex(o=>o.id===e.id))!=null?n:-1},setFilterValue:n=>{t.setColumnFilters(l=>{const o=e.getFilterFn(),r=l==null?void 0:l.find(c=>c.id===e.id),s=$t(n,r?r.value:void 0);if(Ss(o,s,e)){var u;return(u=l==null?void 0:l.filter(c=>c.id!==e.id))!=null?u:[]}const a={id:e.id,value:s};if(r){var f;return(f=l==null?void 0:l.map(c=>c.id===e.id?a:c))!=null?f:[]}return l!=null&&l.length?[...l,a]:[a]})},_getFacetedRowModel:t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),getFacetedRowModel:()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),_getFacetedUniqueValues:t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),getFacetedUniqueValues:()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,_getFacetedMinMaxValues:t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),getFacetedMinMaxValues:()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}),createRow:(e,t)=>({columnFilters:{},columnFiltersMeta:{}}),createTable:e=>({getGlobalAutoFilterFn:()=>ct.includesString,getGlobalFilterFn:()=>{var t,n;const{globalFilterFn:l}=e.options;return Sl(l)?l:l==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[l])!=null?t:ct[l]},setColumnFilters:t=>{const n=e.getAllLeafColumns(),l=o=>{var r;return(r=$t(t,o))==null?void 0:r.filter(s=>{const u=n.find(a=>a.id===s.id);if(u){const a=u.getFilterFn();if(Ss(a,s.value,u))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(l)},setGlobalFilter:t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},resetGlobalFilter:t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)},resetColumnFilters:t=>{var n,l;e.setColumnFilters(t?[]:(n=(l=e.initialState)==null?void 0:l.columnFilters)!=null?n:[])},getPreFilteredRowModel:()=>e.getCoreRowModel(),getFilteredRowModel:()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel()),_getGlobalFacetedRowModel:e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),getGlobalFacetedRowModel:()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),_getGlobalFacetedUniqueValues:e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),getGlobalFacetedUniqueValues:()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,_getGlobalFacetedMinMaxValues:e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),getGlobalFacetedMinMaxValues:()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}})};function Ss(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Nm=(e,t,n)=>n.reduce((l,o)=>{const r=o.getValue(e);return l+(typeof r=="number"?r:0)},0),Pm=(e,t,n)=>{let l;return n.forEach(o=>{const r=o.getValue(e);r!=null&&(l>r||l===void 0&&r>=r)&&(l=r)}),l},Tm=(e,t,n)=>{let l;return n.forEach(o=>{const r=o.getValue(e);r!=null&&(l<r||l===void 0&&r>=r)&&(l=r)}),l},Om=(e,t,n)=>{let l,o;return n.forEach(r=>{const s=r.getValue(e);s!=null&&(l===void 0?s>=s&&(l=o=s):(l>s&&(l=s),o<s&&(o=s)))}),[l,o]},Vm=(e,t)=>{let n=0,l=0;if(t.forEach(o=>{let r=o.getValue(e);r!=null&&(r=+r)>=r&&(++n,l+=r)}),n)return l/n},zm=(e,t)=>{if(!t.length)return;const n=t.map(r=>r.getValue(e));if(!$m(n))return;if(n.length===1)return n[0];const l=Math.floor(n.length/2),o=n.sort((r,s)=>r-s);return n.length%2!==0?o[l]:(o[l-1]+o[l])/2},Lm=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),qm=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Hm=(e,t)=>t.length,Xl={sum:Nm,min:Pm,max:Tm,extent:Om,mean:Vm,median:zm,unique:Lm,uniqueCount:qm,count:Hm},Gm={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Qe("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>({toggleGrouping:()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(l=>l!==e.id):[...n??[],e.id])},getCanGroup:()=>{var n,l,o,r;return(n=(l=(o=(r=e.columnDef.enableGrouping)!=null?r:!0)!=null?o:t.options.enableGrouping)!=null?l:!0)!=null?n:!!e.accessorFn},getIsGrouped:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},getGroupedIndex:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},getToggleGroupingHandler:()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},getAutoAggregationFn:()=>{const n=t.getCoreRowModel().flatRows[0],l=n==null?void 0:n.getValue(e.id);if(typeof l=="number")return Xl.sum;if(Object.prototype.toString.call(l)==="[object Date]")return Xl.extent},getAggregationFn:()=>{var n,l;if(!e)throw new Error;return Sl(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(l=t.options.aggregationFns)==null?void 0:l[e.columnDef.aggregationFn])!=null?n:Xl[e.columnDef.aggregationFn]}}),createTable:e=>({setGrouping:t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),resetGrouping:t=>{var n,l;e.setGrouping(t?[]:(n=(l=e.initialState)==null?void 0:l.grouping)!=null?n:[])},getPreGroupedRowModel:()=>e.getFilteredRowModel(),getGroupedRowModel:()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())}),createRow:(e,t)=>({getIsGrouped:()=>!!e.groupingColumnId,getGroupingValue:n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const l=t.getColumn(n);return l!=null&&l.columnDef.getGroupingValue?(e._groupingValuesCache[n]=l.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},_groupingValuesCache:{}}),createCell:(e,t,n,l)=>({getIsGrouped:()=>t.getIsGrouped()&&t.id===n.groupingColumnId,getIsPlaceholder:()=>!e.getIsGrouped()&&t.getIsGrouped(),getIsAggregated:()=>{var o;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((o=n.subRows)!=null&&o.length)}})};function Bm(e,t,n){if(!(t!=null&&t.length)||!n)return e;const l=e.filter(r=>!t.includes(r.id));return n==="remove"?l:[...t.map(r=>e.find(s=>s.id===r)).filter(Boolean),...l]}const jm={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Qe("columnOrder",e)}),createTable:e=>({setColumnOrder:t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),resetColumnOrder:t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},_getOrderColumnsFn:oe(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,l)=>o=>{let r=[];if(!(t!=null&&t.length))r=o;else{const s=[...t],u=[...o];for(;u.length&&s.length;){const a=s.shift(),f=u.findIndex(c=>c.id===a);f>-1&&r.push(u.splice(f,1)[0])}r=[...r,...u]}return Bm(r,n,l)},{key:!1})})},So=0,Co=10,Yl=()=>({pageIndex:So,pageSize:Co}),xm={getInitialState:e=>({...e,pagination:{...Yl(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:Qe("pagination",e)}),createTable:e=>{let t=!1,n=!1;return{_autoResetPageIndex:()=>{var l,o;if(!t){e._queue(()=>{t=!0});return}if((l=(o=e.options.autoResetAll)!=null?o:e.options.autoResetPageIndex)!=null?l:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},setPagination:l=>{const o=r=>$t(l,r);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(o)},resetPagination:l=>{var o;e.setPagination(l?Yl():(o=e.initialState.pagination)!=null?o:Yl())},setPageIndex:l=>{e.setPagination(o=>{let r=$t(l,o.pageIndex);const s=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return r=Math.max(0,Math.min(r,s)),{...o,pageIndex:r}})},resetPageIndex:l=>{var o,r,s;e.setPageIndex(l?So:(o=(r=e.initialState)==null||(s=r.pagination)==null?void 0:s.pageIndex)!=null?o:So)},resetPageSize:l=>{var o,r,s;e.setPageSize(l?Co:(o=(r=e.initialState)==null||(s=r.pagination)==null?void 0:s.pageSize)!=null?o:Co)},setPageSize:l=>{e.setPagination(o=>{const r=Math.max(1,$t(l,o.pageSize)),s=o.pageSize*o.pageIndex,u=Math.floor(s/r);return{...o,pageIndex:u,pageSize:r}})},setPageCount:l=>e.setPagination(o=>{var r;let s=$t(l,(r=e.options.pageCount)!=null?r:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...o,pageCount:s}}),getPageOptions:oe(()=>[e.getPageCount()],l=>{let o=[];return l&&l>0&&(o=[...new Array(l)].fill(null).map((r,s)=>s)),o},{key:!1,debug:()=>{var l;return(l=e.options.debugAll)!=null?l:e.options.debugTable}}),getCanPreviousPage:()=>e.getState().pagination.pageIndex>0,getCanNextPage:()=>{const{pageIndex:l}=e.getState().pagination,o=e.getPageCount();return o===-1?!0:o===0?!1:l<o-1},previousPage:()=>e.setPageIndex(l=>l-1),nextPage:()=>e.setPageIndex(l=>l+1),getPrePaginationRowModel:()=>e.getExpandedRowModel(),getPaginationRowModel:()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),getPageCount:()=>{var l;return(l=e.options.pageCount)!=null?l:Math.ceil(e.getPrePaginationRowModel().rows.length/e.getState().pagination.pageSize)}}}},Ql=()=>({left:[],right:[]}),Um={getInitialState:e=>({columnPinning:Ql(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Qe("columnPinning",e)}),createColumn:(e,t)=>({pin:n=>{const l=e.getLeafColumns().map(o=>o.id).filter(Boolean);t.setColumnPinning(o=>{var r,s;if(n==="right"){var u,a;return{left:((u=o==null?void 0:o.left)!=null?u:[]).filter(d=>!(l!=null&&l.includes(d))),right:[...((a=o==null?void 0:o.right)!=null?a:[]).filter(d=>!(l!=null&&l.includes(d))),...l]}}if(n==="left"){var f,c;return{left:[...((f=o==null?void 0:o.left)!=null?f:[]).filter(d=>!(l!=null&&l.includes(d))),...l],right:((c=o==null?void 0:o.right)!=null?c:[]).filter(d=>!(l!=null&&l.includes(d)))}}return{left:((r=o==null?void 0:o.left)!=null?r:[]).filter(d=>!(l!=null&&l.includes(d))),right:((s=o==null?void 0:o.right)!=null?s:[]).filter(d=>!(l!=null&&l.includes(d)))}})},getCanPin:()=>e.getLeafColumns().some(l=>{var o,r;return((o=l.columnDef.enablePinning)!=null?o:!0)&&((r=t.options.enablePinning)!=null?r:!0)}),getIsPinned:()=>{const n=e.getLeafColumns().map(u=>u.id),{left:l,right:o}=t.getState().columnPinning,r=n.some(u=>l==null?void 0:l.includes(u)),s=n.some(u=>o==null?void 0:o.includes(u));return r?"left":s?"right":!1},getPinnedIndex:()=>{var n,l,o;const r=e.getIsPinned();return r?(n=(l=t.getState().columnPinning)==null||(o=l[r])==null?void 0:o.indexOf(e.id))!=null?n:-1:0}}),createRow:(e,t)=>({getCenterVisibleCells:oe(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,l,o)=>{const r=[...l??[],...o??[]];return n.filter(s=>!r.includes(s.column.id))},{key:"row.getCenterVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getLeftVisibleCells:oe(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,,],(n,l)=>(l??[]).map(r=>n.find(s=>s.column.id===r)).filter(Boolean).map(r=>({...r,position:"left"})),{key:"row.getLeftVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getRightVisibleCells:oe(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,l)=>(l??[]).map(r=>n.find(s=>s.column.id===r)).filter(Boolean).map(r=>({...r,position:"right"})),{key:"row.getRightVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>({setColumnPinning:t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),resetColumnPinning:t=>{var n,l;return e.setColumnPinning(t?Ql():(n=(l=e.initialState)==null?void 0:l.columnPinning)!=null?n:Ql())},getIsSomeColumnsPinned:t=>{var n;const l=e.getState().columnPinning;if(!t){var o,r;return!!((o=l.left)!=null&&o.length||(r=l.right)!=null&&r.length)}return!!((n=l[t])!=null&&n.length)},getLeftLeafColumns:oe(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(l=>t.find(o=>o.id===l)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getRightLeafColumns:oe(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(l=>t.find(o=>o.id===l)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getCenterLeafColumns:oe(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l)=>{const o=[...n??[],...l??[]];return t.filter(r=>!o.includes(r.id))},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}})})},Wm={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Qe("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>({setRowSelection:t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),resetRowSelection:t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},toggleAllRowsSelected:t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const l={...n},o=e.getPreGroupedRowModel().flatRows;return t?o.forEach(r=>{r.getCanSelect()&&(l[r.id]=!0)}):o.forEach(r=>{delete l[r.id]}),l})},toggleAllPageRowsSelected:t=>e.setRowSelection(n=>{const l=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),o={...n};return e.getRowModel().rows.forEach(r=>{$o(o,r.id,l,e)}),o}),getPreSelectedRowModel:()=>e.getCoreRowModel(),getSelectedRowModel:oe(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Kl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getFilteredSelectedRowModel:oe(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Kl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getFilteredSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getGroupedSelectedRowModel:oe(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Kl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getGroupedSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getIsAllRowsSelected:()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let l=!!(t.length&&Object.keys(n).length);return l&&t.some(o=>o.getCanSelect()&&!n[o.id])&&(l=!1),l},getIsAllPageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows.filter(o=>o.getCanSelect()),{rowSelection:n}=e.getState();let l=!!t.length;return l&&t.some(o=>!n[o.id])&&(l=!1),l},getIsSomeRowsSelected:()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},getIsSomePageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},getToggleAllRowsSelectedHandler:()=>t=>{e.toggleAllRowsSelected(t.target.checked)},getToggleAllPageRowsSelectedHandler:()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}}),createRow:(e,t)=>({toggleSelected:n=>{const l=e.getIsSelected();t.setRowSelection(o=>{if(n=typeof n<"u"?n:!l,l===n)return o;const r={...o};return $o(r,e.id,n,t),r})},getIsSelected:()=>{const{rowSelection:n}=t.getState();return Bo(e,n)},getIsSomeSelected:()=>{const{rowSelection:n}=t.getState();return Cs(e,n)==="some"},getIsAllSubRowsSelected:()=>{const{rowSelection:n}=t.getState();return Cs(e,n)==="all"},getCanSelect:()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},getCanSelectSubRows:()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},getCanMultiSelect:()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},getToggleSelectedHandler:()=>{const n=e.getCanSelect();return l=>{var o;n&&e.toggleSelected((o=l.target)==null?void 0:o.checked)}}})},$o=(e,t,n,l)=>{var o;const r=l.getRow(t);n?(r.getCanMultiSelect()||Object.keys(e).forEach(s=>delete e[s]),r.getCanSelect()&&(e[t]=!0)):delete e[t],(o=r.subRows)!=null&&o.length&&r.getCanSelectSubRows()&&r.subRows.forEach(s=>$o(e,s.id,n,l))};function Kl(e,t){const n=e.getState().rowSelection,l=[],o={},r=function(s,u){return s.map(a=>{var f;const c=Bo(a,n);if(c&&(l.push(a),o[a.id]=a),(f=a.subRows)!=null&&f.length&&(a={...a,subRows:r(a.subRows)}),c)return a}).filter(Boolean)};return{rows:r(t.rows),flatRows:l,rowsById:o}}function Bo(e,t){var n;return(n=t[e.id])!=null?n:!1}function Cs(e,t,n){if(e.subRows&&e.subRows.length){let l=!0,o=!1;return e.subRows.forEach(r=>{o&&!l||(Bo(r,t)?o=!0:l=!1)}),l?"all":o?"some":!1}return!1}const Ro=/([0-9]+)/gm,Xm=(e,t,n)=>Ru(At(e.getValue(n)).toLowerCase(),At(t.getValue(n)).toLowerCase()),Ym=(e,t,n)=>Ru(At(e.getValue(n)),At(t.getValue(n))),Qm=(e,t,n)=>jo(At(e.getValue(n)).toLowerCase(),At(t.getValue(n)).toLowerCase()),Km=(e,t,n)=>jo(At(e.getValue(n)),At(t.getValue(n))),Jm=(e,t,n)=>{const l=e.getValue(n),o=t.getValue(n);return l>o?1:l<o?-1:0},Zm=(e,t,n)=>jo(e.getValue(n),t.getValue(n));function jo(e,t){return e===t?0:e>t?1:-1}function At(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Ru(e,t){const n=e.split(Ro).filter(Boolean),l=t.split(Ro).filter(Boolean);for(;n.length&&l.length;){const o=n.shift(),r=l.shift(),s=parseInt(o,10),u=parseInt(r,10),a=[s,u].sort();if(isNaN(a[0])){if(o>r)return 1;if(r>o)return-1;continue}if(isNaN(a[1]))return isNaN(s)?-1:1;if(s>u)return 1;if(u>s)return-1}return n.length-l.length}const cn={alphanumeric:Xm,alphanumericCaseSensitive:Ym,text:Qm,textCaseSensitive:Km,datetime:Jm,basic:Zm},e_={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:Qe("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>({getAutoSortingFn:()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let l=!1;for(const o of n){const r=o==null?void 0:o.getValue(e.id);if(Object.prototype.toString.call(r)==="[object Date]")return cn.datetime;if(typeof r=="string"&&(l=!0,r.split(Ro).length>1))return cn.alphanumeric}return l?cn.text:cn.basic},getAutoSortDir:()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},getSortingFn:()=>{var n,l;if(!e)throw new Error;return Sl(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(l=t.options.sortingFns)==null?void 0:l[e.columnDef.sortingFn])!=null?n:cn[e.columnDef.sortingFn]},toggleSorting:(n,l)=>{const o=e.getNextSortingOrder(),r=typeof n<"u"&&n!==null;t.setSorting(s=>{const u=s==null?void 0:s.find(p=>p.id===e.id),a=s==null?void 0:s.findIndex(p=>p.id===e.id);let f=[],c,d=r?n:o==="desc";if(s!=null&&s.length&&e.getCanMultiSort()&&l?u?c="toggle":c="add":s!=null&&s.length&&a!==s.length-1?c="replace":u?c="toggle":c="replace",c==="toggle"&&(r||o||(c="remove")),c==="add"){var g;f=[...s,{id:e.id,desc:d}],f.splice(0,f.length-((g=t.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else c==="toggle"?f=s.map(p=>p.id===e.id?{...p,desc:d}:p):c==="remove"?f=s.filter(p=>p.id!==e.id):f=[{id:e.id,desc:d}];return f})},getFirstSortDir:()=>{var n,l;return((n=(l=e.columnDef.sortDescFirst)!=null?l:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},getNextSortingOrder:n=>{var l,o;const r=e.getFirstSortDir(),s=e.getIsSorted();return s?s!==r&&((l=t.options.enableSortingRemoval)==null||l)&&(!(n&&(o=t.options.enableMultiRemove)!=null)||o)?!1:s==="desc"?"asc":"desc":r},getCanSort:()=>{var n,l;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((l=t.options.enableSorting)!=null?l:!0)&&!!e.accessorFn},getCanMultiSort:()=>{var n,l;return(n=(l=e.columnDef.enableMultiSort)!=null?l:t.options.enableMultiSort)!=null?n:!!e.accessorFn},getIsSorted:()=>{var n;const l=(n=t.getState().sorting)==null?void 0:n.find(o=>o.id===e.id);return l?l.desc?"desc":"asc":!1},getSortIndex:()=>{var n,l;return(n=(l=t.getState().sorting)==null?void 0:l.findIndex(o=>o.id===e.id))!=null?n:-1},clearSorting:()=>{t.setSorting(n=>n!=null&&n.length?n.filter(l=>l.id!==e.id):[])},getToggleSortingHandler:()=>{const n=e.getCanSort();return l=>{n&&(l.persist==null||l.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(l):!1))}}}),createTable:e=>({setSorting:t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),resetSorting:t=>{var n,l;e.setSorting(t?[]:(n=(l=e.initialState)==null?void 0:l.sorting)!=null?n:[])},getPreSortedRowModel:()=>e.getGroupedRowModel(),getSortedRowModel:()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())})},t_={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Qe("columnVisibility",e)}),createColumn:(e,t)=>({toggleVisibility:n=>{e.getCanHide()&&t.setColumnVisibility(l=>({...l,[e.id]:n??!e.getIsVisible()}))},getIsVisible:()=>{var n,l;return(n=(l=t.getState().columnVisibility)==null?void 0:l[e.id])!=null?n:!0},getCanHide:()=>{var n,l;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((l=t.options.enableHiding)!=null?l:!0)},getToggleVisibilityHandler:()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}}),createRow:(e,t)=>({_getAllVisibleCells:oe(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(l=>l.column.getIsVisible()),{key:"row._getAllVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getVisibleCells:oe(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,l,o)=>[...n,...l,...o],{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>{const t=(n,l)=>oe(()=>[l(),l().filter(o=>o.getIsVisible()).map(o=>o.id).join("_")],o=>o.filter(r=>r.getIsVisible==null?void 0:r.getIsVisible()),{key:n,debug:()=>{var o;return(o=e.options.debugAll)!=null?o:e.options.debugColumns}});return{getVisibleFlatColumns:t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),getVisibleLeafColumns:t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),getLeftVisibleLeafColumns:t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),getRightVisibleLeafColumns:t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),getCenterVisibleLeafColumns:t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),setColumnVisibility:n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),resetColumnVisibility:n=>{var l;e.setColumnVisibility(n?{}:(l=e.initialState.columnVisibility)!=null?l:{})},toggleAllColumnsVisible:n=>{var l;n=(l=n)!=null?l:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((o,r)=>({...o,[r.id]:n||!(r.getCanHide!=null&&r.getCanHide())}),{}))},getIsAllColumnsVisible:()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),getIsSomeColumnsVisible:()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),getToggleAllColumnsVisibilityHandler:()=>n=>{var l;e.toggleAllColumnsVisible((l=n.target)==null?void 0:l.checked)}}}},$s=[Mm,t_,jm,Um,Im,e_,Gm,Dm,xm,Wm,Em];function n_(e){var t;(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");let n={_features:$s};const l=n._features.reduce((c,d)=>Object.assign(c,d.getDefaultOptions==null?void 0:d.getDefaultOptions(n)),{}),o=c=>n.options.mergeOptions?n.options.mergeOptions(l,c):{...l,...c};let s={...{},...(t=e.initialState)!=null?t:{}};n._features.forEach(c=>{var d;s=(d=c.getInitialState==null?void 0:c.getInitialState(s))!=null?d:s});const u=[];let a=!1;const f={_features:$s,options:{...l,...e},initialState:s,_queue:c=>{u.push(c),a||(a=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();a=!1}).catch(d=>setTimeout(()=>{throw d})))},reset:()=>{n.setState(n.initialState)},setOptions:c=>{const d=$t(c,n.options);n.options=o(d)},getState:()=>n.options.state,setState:c=>{n.options.onStateChange==null||n.options.onStateChange(c)},_getRowId:(c,d,g)=>{var p;return(p=n.options.getRowId==null?void 0:n.options.getRowId(c,d,g))!=null?p:`${g?[g.id,d].join("."):d}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:c=>{const d=n.getRowModel().rowsById[c];if(!d)throw new Error;return d},_getDefaultColumnDef:oe(()=>[n.options.defaultColumn],c=>{var d;return c=(d=c)!=null?d:{},{header:g=>{const p=g.header.column.columnDef;return p.accessorKey?p.accessorKey:p.accessorFn?p.id:null},cell:g=>{var p,m;return(p=(m=g.renderValue())==null||m.toString==null?void 0:m.toString())!=null?p:null},...n._features.reduce((g,p)=>Object.assign(g,p.getDefaultColumnDef==null?void 0:p.getDefaultColumnDef()),{}),...c}},{debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns},key:!1}),_getColumnDefs:()=>n.options.columns,getAllColumns:oe(()=>[n._getColumnDefs()],c=>{const d=function(g,p,m){return m===void 0&&(m=0),g.map(_=>{const v=Am(n,_,m,p),y=_;return v.columns=y.columns?d(y.columns,v,m+1):[],v})};return d(c)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllFlatColumns:oe(()=>[n.getAllColumns()],c=>c.flatMap(d=>d.getFlatColumns()),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),_getAllFlatColumnsById:oe(()=>[n.getAllFlatColumns()],c=>c.reduce((d,g)=>(d[g.id]=g,d),{}),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllLeafColumns:oe(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(c,d)=>{let g=c.flatMap(p=>p.getLeafColumns());return d(g)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getColumn:c=>n._getAllFlatColumnsById()[c]};return Object.assign(n,f),n._features.forEach(c=>Object.assign(n,c.createTable==null?void 0:c.createTable(n))),n}function l_(e,t,n,l){const o=()=>{var s;return(s=r.getValue())!=null?s:e.options.renderFallbackValue},r={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(l),renderValue:o,getContext:oe(()=>[e,n,t,r],(s,u,a,f)=>({table:s,column:u,row:a,cell:f,getValue:f.getValue,renderValue:f.renderValue}),{key:!1,debug:()=>e.options.debugAll})};return e._features.forEach(s=>{Object.assign(r,s.createCell==null?void 0:s.createCell(r,n,t,e))},{}),r}const xo=(e,t,n,l,o,r,s)=>{let u={id:t,index:l,original:n,depth:o,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:a=>{if(u._valuesCache.hasOwnProperty(a))return u._valuesCache[a];const f=e.getColumn(a);if(f!=null&&f.accessorFn)return u._valuesCache[a]=f.accessorFn(u.original,l),u._valuesCache[a]},getUniqueValues:a=>{if(u._uniqueValuesCache.hasOwnProperty(a))return u._uniqueValuesCache[a];const f=e.getColumn(a);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(u._uniqueValuesCache[a]=f.columnDef.getUniqueValues(u.original,l),u._uniqueValuesCache[a]):(u._uniqueValuesCache[a]=[u.getValue(a)],u._uniqueValuesCache[a])},renderValue:a=>{var f;return(f=u.getValue(a))!=null?f:e.options.renderFallbackValue},subRows:r??[],getLeafRows:()=>Rm(u.subRows,a=>a.subRows),getParentRow:()=>u.parentId?e.getRow(u.parentId):void 0,getParentRows:()=>{let a=[],f=u;for(;;){const c=f.getParentRow();if(!c)break;a.push(c),f=c}return a.reverse()},getAllCells:oe(()=>[e.getAllLeafColumns()],a=>a.map(f=>l_(e,u,f,f.id)),{key:!1,debug:()=>{var a;return(a=e.options.debugAll)!=null?a:e.options.debugRows}}),_getAllCellsByColumnId:oe(()=>[u.getAllCells()],a=>a.reduce((f,c)=>(f[c.column.id]=c,f),{}),{key:"row.getAllCellsByColumnId",debug:()=>{var a;return(a=e.options.debugAll)!=null?a:e.options.debugRows}})};for(let a=0;a<e._features.length;a++){const f=e._features[a];Object.assign(u,f==null||f.createRow==null?void 0:f.createRow(u,e))}return u};function o_(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function Rs(){return e=>oe(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},l=function(o,r,s){r===void 0&&(r=0);const u=[];for(let f=0;f<o.length;f++){const c=xo(e,e._getRowId(o[f],f,s),o[f],f,r,void 0,s==null?void 0:s.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,u.push(c),e.options.getSubRows){var a;c.originalSubRows=e.options.getSubRows(o[f],f),(a=c.originalSubRows)!=null&&a.length&&(c.subRows=l(c.originalSubRows,r+1,c))}}return u};return n.rows=l(t),n},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function Au(e,t,n){return n.options.filterFromLeafRows?i_(e,t,n):r_(e,t,n)}function i_(e,t,n){var l;const o=[],r={},s=(l=n.options.maxLeafRowFilterDepth)!=null?l:100,u=function(a,f){f===void 0&&(f=0);const c=[];for(let g=0;g<a.length;g++){var d;let p=a[g];const m=xo(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);if(m.columnFilters=p.columnFilters,(d=p.subRows)!=null&&d.length&&f<s){if(m.subRows=u(p.subRows,f+1),p=m,t(p)&&!m.subRows.length){c.push(p),r[p.id]=p,r[g]=p;continue}if(t(p)||m.subRows.length){c.push(p),r[p.id]=p,r[g]=p;continue}}else p=m,t(p)&&(c.push(p),r[p.id]=p,r[g]=p)}return c};return{rows:u(e),flatRows:o,rowsById:r}}function r_(e,t,n){var l;const o=[],r={},s=(l=n.options.maxLeafRowFilterDepth)!=null?l:100,u=function(a,f){f===void 0&&(f=0);const c=[];for(let g=0;g<a.length;g++){let p=a[g];if(t(p)){var d;if((d=p.subRows)!=null&&d.length&&f<s){const _=xo(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);_.subRows=u(p.subRows,f+1),p=_}c.push(p),o.push(p),r[p.id]=p}}return c};return{rows:u(e),flatRows:o,rowsById:r}}function As(){return e=>oe(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,l)=>{if(!t.rows.length||!(n!=null&&n.length)&&!l){for(let g=0;g<t.flatRows.length;g++)t.flatRows[g].columnFilters={},t.flatRows[g].columnFiltersMeta={};return t}const o=[],r=[];(n??[]).forEach(g=>{var p;const m=e.getColumn(g.id);if(!m)return;const _=m.getFilterFn();_&&o.push({id:g.id,filterFn:_,resolvedValue:(p=_.resolveFilterValue==null?void 0:_.resolveFilterValue(g.value))!=null?p:g.value})});const s=n.map(g=>g.id),u=e.getGlobalFilterFn(),a=e.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());l&&u&&a.length&&(s.push("__global__"),a.forEach(g=>{var p;r.push({id:g.id,filterFn:u,resolvedValue:(p=u.resolveFilterValue==null?void 0:u.resolveFilterValue(l))!=null?p:l})}));let f,c;for(let g=0;g<t.flatRows.length;g++){const p=t.flatRows[g];if(p.columnFilters={},o.length)for(let m=0;m<o.length;m++){f=o[m];const _=f.id;p.columnFilters[_]=f.filterFn(p,_,f.resolvedValue,v=>{p.columnFiltersMeta[_]=v})}if(r.length){for(let m=0;m<r.length;m++){c=r[m];const _=c.id;if(c.filterFn(p,_,c.resolvedValue,v=>{p.columnFiltersMeta[_]=v})){p.columnFilters.__global__=!0;break}}p.columnFilters.__global__!==!0&&(p.columnFilters.__global__=!1)}}const d=g=>{for(let p=0;p<s.length;p++)if(g.columnFilters[s[p]]===!1)return!1;return!0};return Au(t.rows,d,e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function Ms(){return(e,t)=>oe(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,l,o)=>{if(!n.rows.length||!(l!=null&&l.length)&&!o)return n;const r=[...l.map(u=>u.id).filter(u=>u!==t),o?"__global__":void 0].filter(Boolean),s=u=>{for(let a=0;a<r.length;a++)if(u.columnFilters[r[a]]===!1)return!1;return!0};return Au(n.rows,s,e)},{key:!1,debug:()=>{var n;return(n=e.options.debugAll)!=null?n:e.options.debugTable},onChange:()=>{}})}function Es(){return e=>oe(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const l=e.getState().sorting,o=[],r=l.filter(a=>{var f;return(f=e.getColumn(a.id))==null?void 0:f.getCanSort()}),s={};r.forEach(a=>{const f=e.getColumn(a.id);f&&(s[a.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const u=a=>{const f=[...a];return f.sort((c,d)=>{for(let p=0;p<r.length;p+=1){var g;const m=r[p],_=s[m.id],v=(g=m==null?void 0:m.desc)!=null?g:!1;let y=0;if(_.sortUndefined){const w=c.getValue(m.id),S=d.getValue(m.id),M=w===void 0,$=S===void 0;(M||$)&&(y=M&&$?0:M?_.sortUndefined:-_.sortUndefined)}if(y===0&&(y=_.sortingFn(c,d,m.id)),y!==0)return v&&(y*=-1),_.invertSorting&&(y*=-1),y}return c.index-d.index}),f.forEach(c=>{var d;o.push(c),(d=c.subRows)!=null&&d.length&&(c.subRows=u(c.subRows))}),f};return{rows:u(n.rows),flatRows:o,rowsById:n.rowsById}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function s_(e){const t=[],n=l=>{var o;t.push(l),(o=l.subRows)!=null&&o.length&&l.getIsExpanded()&&l.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function Fs(e){return t=>oe(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,l)=>{if(!l.rows.length)return l;const{pageSize:o,pageIndex:r}=n;let{rows:s,flatRows:u,rowsById:a}=l;const f=o*r,c=f+o;s=s.slice(f,c);let d;t.options.paginateExpandedRows?d={rows:s,flatRows:u,rowsById:a}:d=s_({rows:s,flatRows:u,rowsById:a}),d.flatRows=[];const g=p=>{d.flatRows.push(p),p.subRows.length&&p.subRows.forEach(g)};return d.rows.forEach(g),d},{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugTable}})}/**
 * svelte-table
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function a_(e){let t;return{c(){t=q(e[0])},l(n){t=xu(n,e[0])},m(n,l){Lu(n,t,l)},p(n,[l]){l&1&&K(t,n[0])},i:U,o:U,d(n){n&&P(t)}}}function u_(e,t,n){let{content:l}=t;return e.$$set=o=>{"content"in o&&n(0,l=o.content)},[l]}class f_ extends ce{constructor(t){super(),de(this,t,u_,a_,fe,{content:0})}}const c_=ca((e,t,n,l)=>`${uf(t.content)}`);var d_=typeof document>"u"?c_:f_;function h_(e,t,n){let l,o;return l=new t({props:n,$$inline:!0}),{c(){ne(l.$$.fragment)},l(r){cf(l.$$.fragment,r)},m(r,s){ee(l,r,s),o=!0},p:U,i(r){o||(V(l.$$.fragment,r),o=!0)},o(r){z(l.$$.fragment,r),o=!1},d(r){te(l,r)}}}function g_(e,t){return class extends ce{constructor(l){super(),de(this,l,null,o=>h_(o,e,t),fe,{},void 0)}}}function p_(e,t){return ca((l,o,r,s)=>`${ff(e,"TableComponent").$$render(l,t,{},{})}`)}const Ao=typeof window>"u"?p_:g_;function m_(e){return typeof e=="object"&&typeof e.$$render=="function"&&typeof e.render=="function"}function __(e){var t,n;let l="__SVELTE_HMR"in window;return e.prototype instanceof ce||l&&((t=e.name)==null?void 0:t.startsWith("Proxy<"))&&((n=e.name)==null?void 0:n.endsWith(">"))}function Ds(e){return typeof document>"u"?m_(e):__(e)}function Is(e){return Ao(d_,{content:e})}function Cl(e,t){if(!e)return null;if(Ds(e))return Ao(e,t);if(typeof e=="function"){const n=e(t);return n==null?null:Ds(n)?Ao(n,t):Is(n)}return Is(e)}function Ns(e){let t;"subscribe"in e?t=e:t=to(e);let n={state:{},onStateChange:()=>{},renderFallbackValue:null,...Du(t)},l=n_(n),o=De(l.initialState),r=hf([o,t],u=>u);return to(l,function(a){const f=r.subscribe(c=>{let[d,g]=c;l.setOptions(p=>({...p,...g,state:{...d,...g.state},onStateChange:m=>{m instanceof Function?o.update(m):o.set(m),n.onStateChange==null||n.onStateChange(m)}})),a(l)});return function(){f()}})}/**
 * match-sorter-utils
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Mu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},v_=Object.keys(Mu).join("|"),b_=new RegExp(v_,"g");function w_(e){return e.replace(b_,t=>Mu[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const Le={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function y_(e,t,n){var l;if(n=n||{},n.threshold=(l=n.threshold)!=null?l:Le.MATCHES,!n.accessors){const s=Ps(e,t,n);return{rankedValue:e,rank:s,accessorIndex:-1,accessorThreshold:n.threshold,passed:s>=n.threshold}}const o=$_(e,n.accessors),r={rankedValue:e,rank:Le.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let s=0;s<o.length;s++){const u=o[s];let a=Ps(u.itemValue,t,n);const{minRanking:f,maxRanking:c,threshold:d=n.threshold}=u.attributes;a<f&&a>=Le.MATCHES?a=f:a>c&&(a=c),a=Math.min(a,c),a>=d&&a>r.rank&&(r.rank=a,r.passed=!0,r.accessorIndex=s,r.accessorThreshold=d,r.rankedValue=u.itemValue)}return r}function Ps(e,t,n){return e=Ts(e,n),t=Ts(t,n),t.length>e.length?Le.NO_MATCH:e===t?Le.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?Le.EQUAL:e.startsWith(t)?Le.STARTS_WITH:e.includes(` ${t}`)?Le.WORD_STARTS_WITH:e.includes(t)?Le.CONTAINS:t.length===1?Le.NO_MATCH:k_(e).includes(t)?Le.ACRONYM:S_(e,t))}function k_(e){let t="";return e.split(" ").forEach(l=>{l.split("-").forEach(r=>{t+=r.substr(0,1)})}),t}function S_(e,t){let n=0,l=0;function o(a,f,c){for(let d=c,g=f.length;d<g;d++)if(f[d]===a)return n+=1,d+1;return-1}function r(a){const f=1/a,c=n/t.length;return Le.MATCHES+c*f}const s=o(t[0],e,0);if(s<0)return Le.NO_MATCH;l=s;for(let a=1,f=t.length;a<f;a++){const c=t[a];if(l=o(c,e,l),!(l>-1))return Le.NO_MATCH}const u=l-s;return r(u)}function Ts(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=w_(e)),e}function C_(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const l=n(e);return l==null?[]:Array.isArray(l)?l:[String(l)]}function $_(e,t){const n=[];for(let l=0,o=t.length;l<o;l++){const r=t[l],s=R_(r),u=C_(e,r);for(let a=0,f=u.length;a<f;a++)n.push({itemValue:u[a],attributes:s})}return n}const Os={maxRanking:1/0,minRanking:-1/0};function R_(e){return typeof e=="function"?Os:{...Os,...e}}function Vs(e,t,n){const l=e.slice();return l[17]=t[n],l}function zs(e,t,n){const l=e.slice();return l[20]=t[n],l}function Ls(e,t,n){const l=e.slice();return l[23]=t[n],l}function qs(e,t,n){const l=e.slice();return l[26]=t[n],l}function A_(e){let t,n,l,o,r=E_(e[26].column.getIsSorted())+"",s,u,a,f;var c=Cl(e[26].column.columnDef.header,e[26].getContext());function d(g){return{}}return c&&(n=Rt(c,d())),{c(){t=A("button"),n&&ne(n.$$.fragment),l=N(),o=A("span"),s=q(r),t.disabled=!e[26].column.getCanSort(),Pt(t,"is-disabled",!e[26].column.getCanSort())},m(g,p){T(g,t,p),n&&ee(n,t,null),b(t,l),b(t,o),b(o,s),u=!0,a||(f=x(t,"click",e[26].column.getToggleSortingHandler()),a=!0)},p(g,p){if(e=g,c!==(c=Cl(e[26].column.columnDef.header,e[26].getContext()))){if(n){we();const m=n;z(m.$$.fragment,1,0,()=>{te(m,1)}),ye()}c?(n=Rt(c,d()),ne(n.$$.fragment),V(n.$$.fragment,1),ee(n,t,l)):n=null}},i(g){u||(n&&V(n.$$.fragment,g),u=!0)},o(g){n&&z(n.$$.fragment,g),u=!1},d(g){g&&P(t),n&&te(n),a=!1,f()}}}function Hs(e){let t,n,l=!e[26].isPlaceholder&&A_(e);return{c(){t=A("th"),l&&l.c(),h(t,"colspan",e[26].colSpan),h(t,"class","svelte-16fb3tv")},m(o,r){T(o,t,r),l&&l.m(t,null),n=!0},p(o,r){o[26].isPlaceholder||l.p(o,r)},i(o){n||(V(l),n=!0)},o(o){z(l),n=!1},d(o){o&&P(t),l&&l.d()}}}function Gs(e){let t,n,l,o=e[23].headers,r=[];for(let u=0;u<o.length;u+=1)r[u]=Hs(qs(e,o,u));const s=u=>z(r[u],1,1,()=>{r[u]=null});return{c(){t=A("tr");for(let u=0;u<r.length;u+=1)r[u].c();n=N()},m(u,a){T(u,t,a);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(t,null);b(t,n),l=!0},p(u,a){if(a&32){o=u[23].headers;let f;for(f=0;f<o.length;f+=1){const c=qs(u,o,f);r[f]?(r[f].p(c,a),V(r[f],1)):(r[f]=Hs(c),r[f].c(),V(r[f],1),r[f].m(t,n))}for(we(),f=o.length;f<r.length;f+=1)s(f);ye()}},i(u){if(!l){for(let a=0;a<o.length;a+=1)V(r[a]);l=!0}},o(u){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)z(r[a]);l=!1},d(u){u&&P(t),_e(r,u)}}}function Bs(e,t){let n,l,o;var r=Cl(t[20].column.columnDef.cell,t[20].getContext());function s(u){return{}}return r&&(l=Rt(r,s())),{key:e,first:null,c(){n=A("td"),l&&ne(l.$$.fragment),h(n,"class","svelte-16fb3tv"),this.first=n},m(u,a){T(u,n,a),l&&ee(l,n,null),o=!0},p(u,a){if(t=u,a&2&&r!==(r=Cl(t[20].column.columnDef.cell,t[20].getContext()))){if(l){we();const f=l;z(f.$$.fragment,1,0,()=>{te(f,1)}),ye()}r?(l=Rt(r,s()),ne(l.$$.fragment),V(l.$$.fragment,1),ee(l,n,null)):l=null}},i(u){o||(l&&V(l.$$.fragment,u),o=!0)},o(u){l&&z(l.$$.fragment,u),o=!1},d(u){u&&P(n),l&&te(l)}}}function js(e){let t,n=[],l=new Map,o,r,s=e[17].getVisibleCells();const u=a=>a[20].id;for(let a=0;a<s.length;a+=1){let f=zs(e,s,a),c=u(f);l.set(c,n[a]=Bs(c,f))}return{c(){t=A("tr");for(let a=0;a<n.length;a+=1)n[a].c();o=N(),h(t,"class","svelte-16fb3tv")},m(a,f){T(a,t,f);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);b(t,o),r=!0},p(a,f){f&2&&(s=a[17].getVisibleCells(),we(),n=gt(n,f,u,1,a,s,l,t,aa,Bs,o,zs),ye())},i(a){if(!r){for(let f=0;f<s.length;f+=1)V(n[f]);r=!0}},o(a){for(let f=0;f<n.length;f+=1)z(n[f]);r=!1},d(a){a&&P(t);for(let f=0;f<n.length;f+=1)n[f].d()}}}function M_(e){let t,n,l,o,r,s,u,a,f,c,d,g="<",p,m,_,v,y,w,S,M,$,F,C=" ",R,k,E=" ",I,D,L=e[1].getPageCount()+"",O,B,j,ae=">",pe,W,Q,X,Y,le=e[5],he=[];for(let ie=0;ie<le.length;ie+=1)he[ie]=Gs(Ls(e,le,ie));const Vn=ie=>z(he[ie],1,1,()=>{he[ie]=null});let Et=e[1].getRowModel().rows,$e=[];for(let ie=0;ie<Et.length;ie+=1)$e[ie]=js(Vs(e,Et,ie));const Eu=ie=>z($e[ie],1,1,()=>{$e[ie]=null});return{c(){t=A("div"),n=A("input"),l=N(),o=A("div"),r=A("table"),s=A("thead");for(let ie=0;ie<he.length;ie+=1)he[ie].c();u=N(),a=A("tbody");for(let ie=0;ie<$e.length;ie+=1)$e[ie].c();f=N(),c=A("div"),d=A("button"),p=q(g),_=N(),v=A("span"),v.textContent="Page",y=N(),w=A("input"),$=N(),F=A("span"),R=q(C),k=q("of"),I=q(E),D=N(),O=q(L),B=N(),j=A("button"),pe=q(ae),h(n,"type","search"),h(n,"class","input"),h(n,"placeholder","Search..."),h(s,"class","svelte-16fb3tv"),h(a,"class","svelte-16fb3tv"),h(d,"class","button is-white svelte-16fb3tv"),d.disabled=m=!e[1].getCanPreviousPage(),Pt(d,"is-disabled",!e[1].getCanPreviousPage()),h(w,"type","number"),w.value=S=e[1].getState().pagination.pageIndex+1,h(w,"min",0),h(w,"max",M=e[1].getPageCount()-1),h(w,"class","mx-1 svelte-16fb3tv"),h(j,"class","button is-white svelte-16fb3tv"),j.disabled=W=!e[1].getCanNextPage(),Pt(j,"is-disabled",!e[1].getCanNextPage()),h(c,"class","is-flex is-align-items-center svelte-16fb3tv"),h(r,"class","table svelte-16fb3tv"),h(o,"class","table-container svelte-16fb3tv")},m(ie,ve){T(ie,t,ve),b(t,n),b(t,l),b(t,o),b(o,r),b(r,s);for(let se=0;se<he.length;se+=1)he[se]&&he[se].m(s,null);b(r,u),b(r,a);for(let se=0;se<$e.length;se+=1)$e[se]&&$e[se].m(a,null);b(r,f),b(r,c),b(c,d),b(d,p),b(c,_),b(c,v),b(c,y),b(c,w),b(c,$),b(c,F),b(F,R),b(F,k),b(F,I),b(F,D),b(F,O),b(c,B),b(c,j),b(j,pe),Q=!0,X||(Y=[x(n,"keyup",e[3]),x(n,"search",e[3]),x(d,"click",e[9]),x(w,"change",e[4]),x(j,"click",e[10])],X=!0)},p(ie,[ve]){if(ve&32){le=ie[5];let se;for(se=0;se<le.length;se+=1){const rn=Ls(ie,le,se);he[se]?(he[se].p(rn,ve),V(he[se],1)):(he[se]=Gs(rn),he[se].c(),V(he[se],1),he[se].m(s,null))}for(we(),se=le.length;se<he.length;se+=1)Vn(se);ye()}if(ve&2){Et=ie[1].getRowModel().rows;let se;for(se=0;se<Et.length;se+=1){const rn=Vs(ie,Et,se);$e[se]?($e[se].p(rn,ve),V($e[se],1)):($e[se]=js(rn),$e[se].c(),V($e[se],1),$e[se].m(a,null))}for(we(),se=Et.length;se<$e.length;se+=1)Eu(se);ye()}(!Q||ve&2&&m!==(m=!ie[1].getCanPreviousPage()))&&(d.disabled=m),(!Q||ve&2)&&Pt(d,"is-disabled",!ie[1].getCanPreviousPage()),(!Q||ve&2&&S!==(S=ie[1].getState().pagination.pageIndex+1)&&w.value!==S)&&(w.value=S),(!Q||ve&2&&M!==(M=ie[1].getPageCount()-1))&&h(w,"max",M),(!Q||ve&2)&&L!==(L=ie[1].getPageCount()+"")&&K(O,L),(!Q||ve&2&&W!==(W=!ie[1].getCanNextPage()))&&(j.disabled=W),(!Q||ve&2)&&Pt(j,"is-disabled",!ie[1].getCanNextPage())},i(ie){if(!Q){for(let ve=0;ve<le.length;ve+=1)V(he[ve]);for(let ve=0;ve<Et.length;ve+=1)V($e[ve]);Q=!0}},o(ie){he=he.filter(Boolean);for(let ve=0;ve<he.length;ve+=1)z(he[ve]);$e=$e.filter(Boolean);for(let ve=0;ve<$e.length;ve+=1)z($e[ve]);Q=!1},d(ie){ie&&P(t),_e(he,ie),_e($e,ie),X=!1,be(Y)}}}function E_(e){return e?e==="asc"?"🔼":"🔽":""}function F_(e,t,n){let l,o,r=U,s=()=>(r(),r=$l(y,$=>n(1,o=$)),y);ue(e,kl,$=>n(8,l=$)),e.$$.on_destroy.push(()=>r());const u=($,F,C,R)=>{if(console.log("yessir"),Array.isArray(C))return C.length===0?!0:C.includes($.getValue(F));typeof C=="number"&&(C=String(C));const k=y_($.getValue(F),C);return R({itemRank:k}),k.passed},a=o_(),f=[a.accessor("file",{header:"File",cell:$=>$.getValue(),footer:$=>$.column.id}),a.accessor("size",{header:"Size",cell:$=>ro($.getValue()),footer:$=>$.column.id}),a.accessor("type",{header:"Type",cell:$=>$.getValue(),footer:$=>$.column.id})];let c="",d=De({data:l,columns:f,getCoreRowModel:Rs(),getSortedRowModel:Es(),getFilteredRowModel:As(),globalFilterFn:u,getFacetedRowModel:Ms(),getPaginationRowModel:Fs(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0});function g($){n(6,c=$),d.update(F=>({...F,state:{...F.state,globalFilter:$}}))}function p($){d.update(F=>{var C;return{...F,state:{...F.state,pagination:{...(C=F.state)==null?void 0:C.pagination,pageIndex:$}}}})}let m;function _($){clearTimeout(m),m=setTimeout(()=>{const F=$.target;g(F.value)},100)}function v($){const F=$.target;p(parseInt(F.value)-1)}let y=Ns(d);s();let w=o.getHeaderGroups();const S=()=>p(o.getState().pagination.pageIndex-1),M=()=>p(o.getState().pagination.pageIndex+1);return e.$$.update=()=>{e.$$.dirty&448&&(n(7,d={data:l,columns:f,getCoreRowModel:Rs(),getSortedRowModel:Es(),getFilteredRowModel:As(),globalFilterFn:u,getFacetedRowModel:Ms(),getPaginationRowModel:Fs(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0}),s(n(0,y=Ns(De(d)))))},[y,o,p,_,v,w,c,d,l,S,M]}class D_ extends ce{constructor(t){super(),de(this,t,F_,M_,fe,{})}}function xs(e){let t,n;return{c(){t=A("p"),n=q(e[3])},m(l,o){T(l,t,o),b(t,n)},p(l,o){o&8&&K(n,l[3])},d(l){l&&P(t)}}}function Us(e){let t;return{c(){t=A("p"),t.textContent="Data Successfully indexed!"},m(n,l){T(n,t,l)},d(n){n&&P(t)}}}function Ws(e){let t,n;return t=new D_({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function I_(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,y,w,S,M,$,F,C,R=e[2]&&!e[1]&&xs(e),k=e[1]&&Us();S=new Cm({});let E=e[0]&&Ws();return{c(){t=A("div"),n=A("div"),l=A("div"),o=A("div"),r=A("h4"),r.textContent="Upload Data",s=N(),u=A("br"),a=N(),f=A("form"),c=A("input"),d=N(),R&&R.c(),g=N(),k&&k.c(),p=N(),m=A("p"),m.textContent="These are the files your model will use as context.",_=N(),v=A("p"),v.innerHTML="Currently <strong>pdf</strong>, txt, and md are supported.",y=N(),w=A("div"),ne(S.$$.fragment),M=N(),E&&E.c(),h(c,"type","file"),c.multiple=!0,h(o,"class","upload-box svelte-1lu6hos"),h(l,"class","upload-container svelte-1lu6hos"),h(n,"class","file-container svelte-1lu6hos"),h(w,"class","charts-container svelte-1lu6hos"),h(t,"class","data-grid svelte-1lu6hos")},m(I,D){T(I,t,D),b(t,n),b(n,l),b(l,o),b(o,r),b(o,s),b(o,u),b(o,a),b(o,f),b(f,c),b(o,d),R&&R.m(o,null),b(o,g),k&&k.m(o,null),b(o,p),b(o,m),b(o,_),b(o,v),b(t,y),b(t,w),ee(S,w,null),b(w,M),E&&E.m(w,null),$=!0,F||(C=x(c,"change",e[4]),F=!0)},p(I,[D]){I[2]&&!I[1]?R?R.p(I,D):(R=xs(I),R.c(),R.m(o,g)):R&&(R.d(1),R=null),I[1]?k||(k=Us(),k.c(),k.m(o,p)):k&&(k.d(1),k=null),I[0]?E?D&1&&V(E,1):(E=Ws(),E.c(),V(E,1),E.m(w,null)):E&&(we(),z(E,1,1,()=>{E=null}),ye())},i(I){$||(V(S.$$.fragment,I),V(E),$=!0)},o(I){z(S.$$.fragment,I),z(E),$=!1},d(I){I&&P(t),R&&R.d(),k&&k.d(),te(S),E&&E.d(),F=!1,C()}}}function N_(e,t,n){let l,o,r;ue(e,bs,m=>n(6,o=m)),ue(e,kl,m=>n(7,r=m));let s=[],u=!1,a=!1;async function f(m){n(0,s=m.target.files);const _=new FormData;for(let v=0;v<s.length;v++)_.append("files",s[v]);await fetch("/retrieval/file/upload",{method:"POST",body:_}),d(),c(),g()}async function c(){const v=(await(await fetch("/retrieval/file/get")).json()).files.map(y=>({file:y.name,size:y.size,type:y.type}));Pe(kl,r=[...v],r)}async function d(){console.log("index!"),n(2,a=!0),await(await fetch("/retrieval/vector_db/index",{method:"POST"})).json(),n(1,u=!0),n(2,a=!1)}async function g(){console.log("getting embeddings...");const _=await(await fetch("/retrieval/vector_db/get")).json();console.log("embeddingData",_),Pe(bs,o=_,o)}ft(()=>{c()});let p=0;return setInterval(()=>{n(5,p=(p+1)%4)},200),e.$$.update=()=>{e.$$.dirty&32&&n(3,l="Indexing"+".".repeat(p))},[s,u,a,l,f,p]}class P_ extends ce{constructor(t){super(),de(this,t,N_,I_,fe,{})}}function T_(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,y,w,S,M,$,F,C,R,k,E,I;return r=new Ya({}),a=new Qa({}),d=new ja({}),m=new Ua({props:{feedback:"Bad"}}),y=new Xa({}),M=new Wa({}),E=new xa({}),{c(){t=A("div"),n=A("div"),l=A("div"),o=A("div"),ne(r.$$.fragment),s=N(),u=A("div"),ne(a.$$.fragment),f=N(),c=A("div"),ne(d.$$.fragment),g=N(),p=A("div"),ne(m.$$.fragment),_=N(),v=A("div"),ne(y.$$.fragment),w=N(),S=A("div"),ne(M.$$.fragment),$=N(),F=A("div"),C=A("div"),C.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,R=N(),k=A("div"),ne(E.$$.fragment),h(o,"class","card-1 svelte-14znspc"),h(u,"class","card-2"),h(l,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(p,"class","left-question svelte-14znspc"),h(v,"class","left-filter svelte-14znspc"),h(S,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h(C,"class","right-chart svelte-14znspc"),h(k,"class","right-table svelte-14znspc"),h(F,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(D,L){T(D,t,L),b(t,n),b(n,l),b(l,o),ee(r,o,null),b(l,s),b(l,u),ee(a,u,null),b(n,f),b(n,c),ee(d,c,null),b(n,g),b(n,p),ee(m,p,null),b(n,_),b(n,v),ee(y,v,null),b(n,w),b(n,S),ee(M,S,null),b(t,$),b(t,F),b(F,C),b(F,R),b(F,k),ee(E,k,null),I=!0},p:U,i(D){I||(V(r.$$.fragment,D),V(a.$$.fragment,D),V(d.$$.fragment,D),V(m.$$.fragment,D),V(y.$$.fragment,D),V(M.$$.fragment,D),V(E.$$.fragment,D),I=!0)},o(D){z(r.$$.fragment,D),z(a.$$.fragment,D),z(d.$$.fragment,D),z(m.$$.fragment,D),z(y.$$.fragment,D),z(M.$$.fragment,D),z(E.$$.fragment,D),I=!1},d(D){D&&P(t),te(r),te(a),te(d),te(m),te(y),te(M),te(E)}}}function O_(e,t,n){let l;ue(e,An,r=>n(0,l=r)),ft(()=>{console.log("FEEDBACK on mount"),o()});async function o(){const a=(await(await fetch("/chat/rag_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[4]}));Pe(An,l=[...a],l)}return[]}class V_ extends ce{constructor(t){super(),de(this,t,O_,T_,fe,{})}}function z_(e){let t,n;return t=new Ka({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function L_(e){let t,n;return t=new V_({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function q_(e){let t,n;return t=new Ka({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function H_(e){let t,n,l,o;const r=[q_,L_,z_],s=[];function u(a,f){return a[0]==="vote"?0:a[0]==="rag"?1:2}return t=u(e),n=s[t]=r[t](e),{c(){n.c(),l=Se()},m(a,f){s[t].m(a,f),T(a,l,f),o=!0},p(a,[f]){let c=t;t=u(a),t!==c&&(we(),z(s[c],1,1,()=>{s[c]=null}),ye(),n=s[t],n||(n=s[t]=r[t](a),n.c()),V(n,1),n.m(l.parentNode,l))},i(a){o||(V(n),o=!0)},o(a){z(n),o=!1},d(a){s[t].d(a),a&&P(l)}}}function G_(e,t,n){let{feedback:l}=t;return e.$$set=o=>{"feedback"in o&&n(0,l=o.feedback)},[l]}class B_ extends ce{constructor(t){super(),de(this,t,G_,H_,fe,{feedback:0})}}function Xs(e,t,n){const l=e.slice();return l[7]=t[n],l}function Ys(e){let t,n=e[0],l=[];for(let o=0;o<n.length;o+=1)l[o]=Qs(Xs(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=Se()},m(o,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(o,r);T(o,t,r)},p(o,r){if(r&33){n=o[0];let s;for(s=0;s<n.length;s+=1){const u=Xs(o,n,s);l[s]?l[s].p(u,r):(l[s]=Qs(u),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(o){_e(l,o),o&&P(t)}}}function Qs(e){let t,n=e[7].svelte_component+"",l,o,r,s;function u(){return e[6](e[7])}return{c(){t=A("button"),l=q(n),h(t,"aria-label",o=`Load ${e[7].svelte_component} component`)},m(a,f){T(a,t,f),b(t,l),r||(s=x(t,"click",u),r=!0)},p(a,f){e=a,f&1&&n!==(n=e[7].svelte_component+"")&&K(l,n),f&1&&o!==(o=`Load ${e[7].svelte_component} component`)&&h(t,"aria-label",o)},d(a){a&&P(t),r=!1,s()}}}function Ks(e){let t,n,l;const o=[e[1].props];var r=e[4][e[1].svelte_component];function s(u){let a={};for(let f=0;f<o.length;f+=1)a=Sn(a,o[f]);return{props:a}}return r&&(t=Rt(r,s())),{c(){t&&ne(t.$$.fragment),n=Se()},m(u,a){t&&ee(t,u,a),T(u,n,a),l=!0},p(u,a){const f=a&2?ua(o,[fa(u[1].props)]):{};if(a&2&&r!==(r=u[4][u[1].svelte_component])){if(t){we();const c=t;z(c.$$.fragment,1,0,()=>{te(c,1)}),ye()}r?(t=Rt(r,s()),ne(t.$$.fragment),V(t.$$.fragment,1),ee(t,n.parentNode,n)):t=null}else r&&t.$set(f)},i(u){l||(t&&V(t.$$.fragment,u),l=!0)},o(u){t&&z(t.$$.fragment,u),l=!1},d(u){u&&P(n),t&&te(t,u)}}}function j_(e){let t,n,l,o=e[0].length>1&&Ys(e),r=e[1]&&Ks(e);return{c(){o&&o.c(),t=N(),r&&r.c(),n=Se()},m(s,u){o&&o.m(s,u),T(s,t,u),r&&r.m(s,u),T(s,n,u),l=!0},p(s,[u]){s[0].length>1?o?o.p(s,u):(o=Ys(s),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),s[1]?r?(r.p(s,u),u&2&&V(r,1)):(r=Ks(s),r.c(),V(r,1),r.m(n.parentNode,n)):r&&(we(),z(r,1,1,()=>{r=null}),ye())},i(s){l||(V(r),l=!0)},o(s){z(r),l=!1},d(s){o&&o.d(s),s&&P(t),r&&r.d(s),s&&P(n)}}}function x_(e,t,n){let l,o;const r=De([]);ue(e,r,c=>n(0,l=c));const s=De(null);ue(e,s,c=>n(1,o=c));const u={Chatbot:Yd,Dropdown:Jd,Feedback:B_,Compare:Sp,CompareDashboard:Hp,RetrievalQA:P_},a=c=>{s.set(c)};return fetch("/components").then(c=>{if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return c.json()}).then(c=>{r.set(c),s.set(c[0])}).catch(c=>{console.log("Fetch request failed",c)}),[l,o,r,s,u,a,c=>a(c)]}class U_ extends ce{constructor(t){super(),de(this,t,x_,j_,fe,{})}}new U_({target:document.getElementById("app")});
