(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function X(){}const Zs=e=>e;function An(e,t){for(const n in t)e[n]=t[n];return e}function ea(e){return e()}function Zl(){return Object.create(null)}function he(e){e.forEach(ea)}function Ve(e){return typeof e=="function"}function ue(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Nu(e){return Object.keys(e).length===0}function Al(e,...t){if(e==null)return X;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Pu(e){let t;return Al(e,n=>t=n)(),t}function ae(e,t,n){e.$$.on_destroy.push(Al(t,n))}function Uo(e,t,n,l){if(e){const o=ta(e,t,n,l);return e[0](o)}}function ta(e,t,n,l){return e[1]&&l?An(n.ctx.slice(),e[1](l(t))):n.ctx}function Xo(e,t,n,l){if(e[2]&&l){const o=e[2](l(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const r=[],s=Math.max(t.dirty.length,o.length);for(let u=0;u<s;u+=1)r[u]=t.dirty[u]|o[u];return r}return t.dirty|o}return t.dirty}function Yo(e,t,n,l,o,r){if(o){const s=ta(t,n,l,r);e.p(s,o)}}function Qo(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let l=0;l<n;l++)t[l]=-1;return t}return-1}function lt(e){return e??""}function Fe(e,t,n){return e.set(n),t}function Lt(e){return e&&Ve(e.destroy)?e.destroy:X}const na=typeof window<"u";let la=na?()=>window.performance.now():()=>Date.now(),Eo=na?e=>requestAnimationFrame(e):X;const Qt=new Set;function oa(e){Qt.forEach(t=>{t.c(e)||(Qt.delete(t),t.f())}),Qt.size!==0&&Eo(oa)}function ia(e){let t;return Qt.size===0&&Eo(oa),{promise:new Promise(n=>{Qt.add(t={c:e,f:n})}),abort(){Qt.delete(t)}}}let Rl=!1;function Ou(){Rl=!0}function Tu(){Rl=!1}function zu(e,t,n,l){for(;e<t;){const o=e+(t-e>>1);n(o)<=l?e=o+1:t=o}return e}function Vu(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const a=[];for(let f=0;f<t.length;f++){const c=t[f];c.claim_order!==void 0&&a.push(c)}t=a}const n=new Int32Array(t.length+1),l=new Int32Array(t.length);n[0]=-1;let o=0;for(let a=0;a<t.length;a++){const f=t[a].claim_order,c=(o>0&&t[n[o]].claim_order<=f?o+1:zu(1,o,g=>t[n[g]].claim_order,f))-1;l[a]=n[c]+1;const d=c+1;n[d]=a,o=Math.max(d,o)}const r=[],s=[];let u=t.length-1;for(let a=n[o]+1;a!=0;a=l[a-1]){for(r.push(t[a-1]);u>=a;u--)s.push(t[u]);u--}for(;u>=0;u--)s.push(t[u]);r.reverse(),s.sort((a,f)=>a.claim_order-f.claim_order);for(let a=0,f=0;a<s.length;a++){for(;f<r.length&&s[a].claim_order>=r[f].claim_order;)f++;const c=f<r.length?r[f]:null;e.insertBefore(s[a],c)}}function b(e,t){e.appendChild(t)}function ra(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function qu(e){const t=A("style");return Lu(ra(e),t),t.sheet}function Lu(e,t){return b(e.head||e,t),t.sheet}function Hu(e,t){if(Rl){for(Vu(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function Gu(e,t,n){Rl&&!n?Hu(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function P(e){e.parentNode&&e.parentNode.removeChild(e)}function pe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function A(e){return document.createElement(e)}function j(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function L(e){return document.createTextNode(e)}function N(){return L(" ")}function ke(){return L("")}function B(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function ju(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Bu(e){return function(t){t.target===this&&e.call(this,t)}}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function xu(e){return Array.from(e.childNodes)}function Wu(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function Uu(e,t,n,l,o=!1){Wu(e);const r=(()=>{for(let s=e.claim_info.last_index;s<e.length;s++){const u=e[s];if(t(u)){const a=n(u);return a===void 0?e.splice(s,1):e[s]=a,o||(e.claim_info.last_index=s),u}}for(let s=e.claim_info.last_index-1;s>=0;s--){const u=e[s];if(t(u)){const a=n(u);return a===void 0?e.splice(s,1):e[s]=a,o?a===void 0&&e.claim_info.last_index--:e.claim_info.last_index=s,u}}return l()})();return r.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,r}function Xu(e,t){return Uu(e,n=>n.nodeType===3,n=>{const l=""+t;if(n.data.startsWith(l)){if(n.data.length!==l.length)return n.splitText(l.length)}else n.data=l},()=>L(t),!0)}function J(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ke(e,t){e.value=t??""}function ye(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function ol(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function sa(e){const t=e.querySelector(":checked");return t&&t.__value}let qn;function Yu(){if(qn===void 0){qn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{qn=!0}}return qn}function ct(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const l=A("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const o=Yu();let r;return o?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=B(window,"message",s=>{s.source===l.contentWindow&&t()})):(l.src="about:blank",l.onload=()=>{r=B(l.contentWindow,"resize",t),t()}),b(e,l),()=>{(o||r&&l.contentWindow)&&r(),P(l)}}function Te(e,t,n){e.classList[n?"add":"remove"](t)}function Qu(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,l,t),o}function Mt(e,t){return new e(t)}const il=new Map;let rl=0;function Ku(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ju(e,t){const n={stylesheet:qu(t),rules:{}};return il.set(e,n),n}function Ko(e,t,n,l,o,r,s,u=0){const a=16.666/l;let f=`{
`;for(let v=0;v<=1;v+=a){const w=t+(n-t)*r(v);f+=v*100+`%{${s(w,1-w)}}
`}const c=f+`100% {${s(n,1-n)}}
}`,d=`__svelte_${Ku(c)}_${u}`,g=ra(e),{stylesheet:p,rules:m}=il.get(g)||Ju(g,e);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${c}`,p.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${d} ${l}ms linear ${o}ms 1 both`,rl+=1,d}function Zu(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),o=n.length-l.length;o&&(e.style.animation=l.join(", "),rl-=o,rl||ef())}function ef(){Eo(()=>{rl||(il.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&P(t)}),il.clear())})}let tn;function Vt(e){tn=e}function tf(){if(!tn)throw new Error("Function called outside component initialization");return tn}function dt(e){tf().$$.on_mount.push(e)}function nf(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const Ut=[],nt=[];let Kt=[];const eo=[],lf=Promise.resolve();let to=!1;function of(){to||(to=!0,lf.then(aa))}function Se(e){Kt.push(e)}function Rn(e){eo.push(e)}const Fl=new Set;let jt=0;function aa(){if(jt!==0)return;const e=tn;do{try{for(;jt<Ut.length;){const t=Ut[jt];jt++,Vt(t),rf(t.$$)}}catch(t){throw Ut.length=0,jt=0,t}for(Vt(null),Ut.length=0,jt=0;nt.length;)nt.pop()();for(let t=0;t<Kt.length;t+=1){const n=Kt[t];Fl.has(n)||(Fl.add(n),n())}Kt.length=0}while(Ut.length);for(;eo.length;)eo.pop()();to=!1,Fl.clear(),Vt(e)}function rf(e){if(e.fragment!==null){e.update(),he(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Se)}}function sf(e){const t=[],n=[];Kt.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),Kt=t}let fn;function af(){return fn||(fn=Promise.resolve(),fn.then(()=>{fn=null})),fn}function Dl(e,t,n){e.dispatchEvent(Qu(`${t?"intro":"outro"}${n}`))}const Kn=new Set;let pt;function _e(){pt={r:0,c:[],p:pt}}function ve(){pt.r||he(pt.c),pt=pt.p}function z(e,t){e&&e.i&&(Kn.delete(e),e.i(t))}function q(e,t,n,l){if(e&&e.o){if(Kn.has(e))return;Kn.add(e),pt.c.push(()=>{Kn.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const uf={duration:0};function Ge(e,t,n,l){const o={direction:"both"};let r=t(e,n,o),s=l?0:1,u=null,a=null,f=null;function c(){f&&Zu(e,f)}function d(p,m){const _=p.b-s;return m*=Math.abs(_),{a:s,b:p.b,d:_,duration:m,start:p.start,end:p.start+m,group:p.group}}function g(p){const{delay:m=0,duration:_=300,easing:v=Zs,tick:w=X,css:y}=r||uf,C={start:la()+m,b:p};p||(C.group=pt,pt.r+=1),u||a?a=C:(y&&(c(),f=Ko(e,s,p,_,m,v,y)),p&&w(0,1),u=d(C,_),Se(()=>Dl(e,p,"start")),ia(E=>{if(a&&E>a.start&&(u=d(a,_),a=null,Dl(e,u.b,"start"),y&&(c(),f=Ko(e,s,u.b,u.duration,0,v,r.css))),u){if(E>=u.end)w(s=u.b,1-s),Dl(e,u.b,"end"),a||(u.b?c():--u.group.r||he(u.group.c)),u=null;else if(E>=u.start){const S=E-u.start;s=u.a+u.d*v(S/u.duration),w(s,1-s)}}return!!(u||a)}))}return{run(p){Ve(r)?af().then(()=>{r=r(o),g(p)}):g(p)},end(){c(),u=a=null}}}function nn(e,t){e.d(1),t.delete(e.key)}function Mo(e,t){q(e,1,1,()=>{t.delete(e.key)})}function vt(e,t,n,l,o,r,s,u,a,f,c,d){let g=e.length,p=r.length,m=g;const _={};for(;m--;)_[e[m].key]=m;const v=[],w=new Map,y=new Map,C=[];for(m=p;m--;){const $=d(o,r,m),R=n($);let k=s.get(R);k?l&&C.push(()=>k.p($,t)):(k=f(R,$),k.c()),w.set(R,v[m]=k),R in _&&y.set(R,Math.abs(m-_[R]))}const E=new Set,S=new Set;function F($){z($,1),$.m(u,c),s.set($.key,$),c=$.first,p--}for(;g&&p;){const $=v[p-1],R=e[g-1],k=$.key,M=R.key;$===R?(c=$.first,g--,p--):w.has(M)?!s.has(k)||E.has(k)?F($):S.has(M)?g--:y.get(k)>y.get(M)?(S.add(k),F($)):(E.add(M),g--):(a(R,s),g--)}for(;g--;){const $=e[g];w.has($.key)||a($,s)}for(;p;)F(v[p-1]);return he(C),v}function ua(e,t){const n={},l={},o={$$scope:1};let r=e.length;for(;r--;){const s=e[r],u=t[r];if(u){for(const a in s)a in u||(l[a]=1);for(const a in u)o[a]||(n[a]=u[a],o[a]=1);e[r]=u}else for(const a in s)o[a]=1}for(const s in l)s in n||(n[s]=void 0);return n}function fa(e){return typeof e=="object"&&e!==null?e:{}}const ff=/[&"]/g,cf=/[&<]/g;function df(e,t=!1){const n=String(e),l=t?ff:cf;l.lastIndex=0;let o="",r=0;for(;l.test(n);){const s=l.lastIndex-1,u=n[s];o+=n.substring(r,s)+(u==="&"?"&amp;":u==='"'?"&quot;":"&lt;"),r=s+1}return o+n.substring(r)}function hf(e,t){if(!e||!e.$$render)throw t==="svelte:component"&&(t+=" this={...}"),new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${t}>.`);return e}let Il;function ca(e){function t(n,l,o,r,s){const u=tn,a={on_destroy:Il,context:new Map(s||(u?u.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:Zl()};Vt({$$:a});const f=e(n,l,o,r);return Vt(u),f}return{render:(n={},{$$slots:l={},context:o=new Map}={})=>{Il=[];const r={title:"",head:"",css:new Set},s=t(r,n,{},l,o);return he(Il),{html:s,css:{code:Array.from(r.css).map(u=>u.code).join(`
`),map:null},head:r.title+r.head}},$$render:t}}function En(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function le(e){e&&e.c()}function gf(e,t){e&&e.l(t)}function ee(e,t,n,l){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),l||Se(()=>{const s=e.$$.on_mount.map(ea).filter(Ve);e.$$.on_destroy?e.$$.on_destroy.push(...s):he(s),e.$$.on_mount=[]}),r.forEach(Se)}function te(e,t){const n=e.$$;n.fragment!==null&&(sf(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function pf(e,t){e.$$.dirty[0]===-1&&(Ut.push(e),of(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ce(e,t,n,l,o,r,s,u=[-1]){const a=tn;Vt(e);const f=e.$$={fragment:null,ctx:[],props:r,update:X,not_equal:o,bound:Zl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Zl(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};s&&s(f.root);let c=!1;if(f.ctx=n?n(e,t.props||{},(d,g,...p)=>{const m=p.length?p[0]:g;return f.ctx&&o(f.ctx[d],f.ctx[d]=m)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](m),c&&pf(e,d)),g}):[],f.update(),c=!0,he(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){Ou();const d=xu(t.target);f.fragment&&f.fragment.l(d),d.forEach(P)}else f.fragment&&f.fragment.c();t.intro&&z(e.$$.fragment),ee(e,t.target,t.anchor,t.customElement),Tu(),aa()}Vt(a)}class fe{$destroy(){te(this,1),this.$destroy=X}$on(t,n){if(!Ve(n))return X;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!Nu(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Bt=[];function no(e,t){return{subscribe:Ie(e,t).subscribe}}function Ie(e,t=X){let n;const l=new Set;function o(u){if(ue(e,u)&&(e=u,n)){const a=!Bt.length;for(const f of l)f[1](),Bt.push(f,e);if(a){for(let f=0;f<Bt.length;f+=2)Bt[f][0](Bt[f+1]);Bt.length=0}}}function r(u){o(u(e))}function s(u,a=X){const f=[u,a];return l.add(f),l.size===1&&(n=t(o)||X),u(e),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:s}}function mf(e,t,n){const l=!Array.isArray(e),o=l?[e]:e,r=t.length<2;return no(n,s=>{let u=!1;const a=[];let f=0,c=X;const d=()=>{if(f)return;c();const p=t(l?a[0]:a,s);r?s(p):c=Ve(p)?p:X},g=o.map((p,m)=>Al(p,_=>{a[m]=_,f&=~(1<<m),u&&d()},()=>{f|=1<<m}));return u=!0,d(),function(){he(g),c(),u=!1}})}function Fo(e){const t=e-1;return t*t*t+1}function Jo(e){return Object.prototype.toString.call(e)==="[object Date]"}function lo(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const l=t.map((o,r)=>lo(e[r],o));return o=>l.map(r=>r(o))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Jo(e)&&Jo(t)){e=e.getTime(),t=t.getTime();const r=t-e;return s=>new Date(e+s*r)}const l=Object.keys(t),o={};return l.forEach(r=>{o[r]=lo(e[r],t[r])}),r=>{const s={};return l.forEach(u=>{s[u]=o[u](r)}),s}}if(n==="number"){const l=t-e;return o=>e+o*l}throw new Error(`Cannot interpolate ${n} values`)}function Do(e,t={}){const n=Ie(e);let l,o=e;function r(s,u){if(e==null)return n.set(e=s),Promise.resolve();o=s;let a=l,f=!1,{delay:c=0,duration:d=400,easing:g=Zs,interpolate:p=lo}=An(An({},t),u);if(d===0)return a&&(a.abort(),a=null),n.set(e=o),Promise.resolve();const m=la()+c;let _;return l=ia(v=>{if(v<m)return!0;f||(_=p(e,s),typeof d=="function"&&(d=d(e,s)),f=!0),a&&(a.abort(),a=null);const w=v-m;return w>d?(n.set(e=s),!1):(n.set(e=_(g(w/d))),!0)}),l.promise}return{set:r,update:(s,u)=>r(s(o,e),u),subscribe:n.subscribe}}const je=Ie([]),Nl=Ie([]),cn=Ie([]),Mn=Ie([]),ut=Ie("all"),Zo=Ie({"n/a":1,up:1,down:1}),_f=["who","what","how","why","where","does","can","n/a"],oo=Do(_f.map(e=>({question:e,count:0}))),gt=Ie(new Set);var io="http://www.w3.org/1999/xhtml";const ei={svg:"http://www.w3.org/2000/svg",xhtml:io,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function da(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ei.hasOwnProperty(t)?{space:ei[t],local:e}:e}function vf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===io&&t.documentElement.namespaceURI===io?t.createElement(e):t.createElementNS(n,e)}}function bf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ha(e){var t=da(e);return(t.local?bf:vf)(t)}function wf(){}function ga(e){return e==null?wf:function(){return this.querySelector(e)}}function yf(e){typeof e!="function"&&(e=ga(e));for(var t=this._groups,n=t.length,l=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,u=l[o]=new Array(s),a,f,c=0;c<s;++c)(a=r[c])&&(f=e.call(a,a.__data__,c,r))&&("__data__"in a&&(f.__data__=a.__data__),u[c]=f);return new xe(l,this._parents)}function pa(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function kf(){return[]}function Sf(e){return e==null?kf:function(){return this.querySelectorAll(e)}}function Cf(e){return function(){return pa(e.apply(this,arguments))}}function $f(e){typeof e=="function"?e=Cf(e):e=Sf(e);for(var t=this._groups,n=t.length,l=[],o=[],r=0;r<n;++r)for(var s=t[r],u=s.length,a,f=0;f<u;++f)(a=s[f])&&(l.push(e.call(a,a.__data__,f,s)),o.push(a));return new xe(l,o)}function Af(e){return function(){return this.matches(e)}}function ma(e){return function(t){return t.matches(e)}}var Rf=Array.prototype.find;function Ef(e){return function(){return Rf.call(this.children,e)}}function Mf(){return this.firstElementChild}function Ff(e){return this.select(e==null?Mf:Ef(typeof e=="function"?e:ma(e)))}var Df=Array.prototype.filter;function If(){return Array.from(this.children)}function Nf(e){return function(){return Df.call(this.children,e)}}function Pf(e){return this.selectAll(e==null?If:Nf(typeof e=="function"?e:ma(e)))}function Of(e){typeof e!="function"&&(e=Af(e));for(var t=this._groups,n=t.length,l=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,u=l[o]=[],a,f=0;f<s;++f)(a=r[f])&&e.call(a,a.__data__,f,r)&&u.push(a);return new xe(l,this._parents)}function _a(e){return new Array(e.length)}function Tf(){return new xe(this._enter||this._groups.map(_a),this._parents)}function sl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sl.prototype={constructor:sl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function zf(e){return function(){return e}}function Vf(e,t,n,l,o,r){for(var s=0,u,a=t.length,f=r.length;s<f;++s)(u=t[s])?(u.__data__=r[s],l[s]=u):n[s]=new sl(e,r[s]);for(;s<a;++s)(u=t[s])&&(o[s]=u)}function qf(e,t,n,l,o,r,s){var u,a,f=new Map,c=t.length,d=r.length,g=new Array(c),p;for(u=0;u<c;++u)(a=t[u])&&(g[u]=p=s.call(a,a.__data__,u,t)+"",f.has(p)?o[u]=a:f.set(p,a));for(u=0;u<d;++u)p=s.call(e,r[u],u,r)+"",(a=f.get(p))?(l[u]=a,a.__data__=r[u],f.delete(p)):n[u]=new sl(e,r[u]);for(u=0;u<c;++u)(a=t[u])&&f.get(g[u])===a&&(o[u]=a)}function Lf(e){return e.__data__}function Hf(e,t){if(!arguments.length)return Array.from(this,Lf);var n=t?qf:Vf,l=this._parents,o=this._groups;typeof e!="function"&&(e=zf(e));for(var r=o.length,s=new Array(r),u=new Array(r),a=new Array(r),f=0;f<r;++f){var c=l[f],d=o[f],g=d.length,p=Gf(e.call(c,c&&c.__data__,f,l)),m=p.length,_=u[f]=new Array(m),v=s[f]=new Array(m),w=a[f]=new Array(g);n(c,d,_,v,w,p,t);for(var y=0,C=0,E,S;y<m;++y)if(E=_[y]){for(y>=C&&(C=y+1);!(S=v[C])&&++C<m;);E._next=S||null}}return s=new xe(s,l),s._enter=u,s._exit=a,s}function Gf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jf(){return new xe(this._exit||this._groups.map(_a),this._parents)}function Bf(e,t,n){var l=this.enter(),o=this,r=this.exit();return typeof e=="function"?(l=e(l),l&&(l=l.selection())):l=l.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?r.remove():n(r),l&&o?l.merge(o).order():o}function xf(e){for(var t=e.selection?e.selection():e,n=this._groups,l=t._groups,o=n.length,r=l.length,s=Math.min(o,r),u=new Array(o),a=0;a<s;++a)for(var f=n[a],c=l[a],d=f.length,g=u[a]=new Array(d),p,m=0;m<d;++m)(p=f[m]||c[m])&&(g[m]=p);for(;a<o;++a)u[a]=n[a];return new xe(u,this._parents)}function Wf(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var l=e[t],o=l.length-1,r=l[o],s;--o>=0;)(s=l[o])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function Uf(e){e||(e=Xf);function t(d,g){return d&&g?e(d.__data__,g.__data__):!d-!g}for(var n=this._groups,l=n.length,o=new Array(l),r=0;r<l;++r){for(var s=n[r],u=s.length,a=o[r]=new Array(u),f,c=0;c<u;++c)(f=s[c])&&(a[c]=f);a.sort(t)}return new xe(o,this._parents).order()}function Xf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Yf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qf(){return Array.from(this)}function Kf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],o=0,r=l.length;o<r;++o){var s=l[o];if(s)return s}return null}function Jf(){let e=0;for(const t of this)++e;return e}function Zf(){return!this.node()}function ec(e){for(var t=this._groups,n=0,l=t.length;n<l;++n)for(var o=t[n],r=0,s=o.length,u;r<s;++r)(u=o[r])&&e.call(u,u.__data__,r,o);return this}function tc(e){return function(){this.removeAttribute(e)}}function nc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lc(e,t){return function(){this.setAttribute(e,t)}}function oc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ic(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sc(e,t){var n=da(e);if(arguments.length<2){var l=this.node();return n.local?l.getAttributeNS(n.space,n.local):l.getAttribute(n)}return this.each((t==null?n.local?nc:tc:typeof t=="function"?n.local?rc:ic:n.local?oc:lc)(n,t))}function va(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ac(e){return function(){this.style.removeProperty(e)}}function uc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fc(e,t,n){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,n)}}function cc(e,t,n){return arguments.length>1?this.each((t==null?ac:typeof t=="function"?fc:uc)(e,t,n??"")):dc(this.node(),e)}function dc(e,t){return e.style.getPropertyValue(t)||va(e).getComputedStyle(e,null).getPropertyValue(t)}function hc(e){return function(){delete this[e]}}function gc(e,t){return function(){this[e]=t}}function pc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mc(e,t){return arguments.length>1?this.each((t==null?hc:typeof t=="function"?pc:gc)(e,t)):this.node()[e]}function ba(e){return e.trim().split(/^|\s+/)}function Io(e){return e.classList||new wa(e)}function wa(e){this._node=e,this._names=ba(e.getAttribute("class")||"")}wa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ya(e,t){for(var n=Io(e),l=-1,o=t.length;++l<o;)n.add(t[l])}function ka(e,t){for(var n=Io(e),l=-1,o=t.length;++l<o;)n.remove(t[l])}function _c(e){return function(){ya(this,e)}}function vc(e){return function(){ka(this,e)}}function bc(e,t){return function(){(t.apply(this,arguments)?ya:ka)(this,e)}}function wc(e,t){var n=ba(e+"");if(arguments.length<2){for(var l=Io(this.node()),o=-1,r=n.length;++o<r;)if(!l.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?bc:t?_c:vc)(n,t))}function yc(){this.textContent=""}function kc(e){return function(){this.textContent=e}}function Sc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cc(e){return arguments.length?this.each(e==null?yc:(typeof e=="function"?Sc:kc)(e)):this.node().textContent}function $c(){this.innerHTML=""}function Ac(e){return function(){this.innerHTML=e}}function Rc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ec(e){return arguments.length?this.each(e==null?$c:(typeof e=="function"?Rc:Ac)(e)):this.node().innerHTML}function Mc(){this.nextSibling&&this.parentNode.appendChild(this)}function Fc(){return this.each(Mc)}function Dc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ic(){return this.each(Dc)}function Nc(e){var t=typeof e=="function"?e:ha(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Pc(){return null}function Oc(e,t){var n=typeof e=="function"?e:ha(e),l=t==null?Pc:typeof t=="function"?t:ga(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),l.apply(this,arguments)||null)})}function Tc(){var e=this.parentNode;e&&e.removeChild(this)}function zc(){return this.each(Tc)}function Vc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lc(e){return this.select(e?qc:Vc)}function Hc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Gc(e){return function(t){e.call(this,t,this.__data__)}}function jc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",l=t.indexOf(".");return l>=0&&(n=t.slice(l+1),t=t.slice(0,l)),{type:t,name:n}})}function Bc(e){return function(){var t=this.__on;if(t){for(var n=0,l=-1,o=t.length,r;n<o;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++l]=r;++l?t.length=l:delete this.__on}}}function xc(e,t,n){return function(){var l=this.__on,o,r=Gc(t);if(l){for(var s=0,u=l.length;s<u;++s)if((o=l[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),o.value=t;return}}this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},l?l.push(o):this.__on=[o]}}function Wc(e,t,n){var l=jc(e+""),o,r=l.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var a=0,f=u.length,c;a<f;++a)for(o=0,c=u[a];o<r;++o)if((s=l[o]).type===c.type&&s.name===c.name)return c.value}return}for(u=t?xc:Bc,o=0;o<r;++o)this.each(u(l[o],t,n));return this}function Sa(e,t,n){var l=va(e),o=l.CustomEvent;typeof o=="function"?o=new o(t,n):(o=l.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Uc(e,t){return function(){return Sa(this,e,t)}}function Xc(e,t){return function(){return Sa(this,e,t.apply(this,arguments))}}function Yc(e,t){return this.each((typeof t=="function"?Xc:Uc)(e,t))}function*Qc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],o=0,r=l.length,s;o<r;++o)(s=l[o])&&(yield s)}var Ca=[null];function xe(e,t){this._groups=e,this._parents=t}function Kc(){return this}xe.prototype={constructor:xe,select:yf,selectAll:$f,selectChild:Ff,selectChildren:Pf,filter:Of,data:Hf,enter:Tf,exit:jf,join:Bf,merge:xf,selection:Kc,order:Wf,sort:Uf,call:Yf,nodes:Qf,node:Kf,size:Jf,empty:Zf,each:ec,attr:sc,style:cc,property:mc,classed:wc,text:Cc,html:Ec,raise:Fc,lower:Ic,append:Nc,insert:Oc,remove:zc,clone:Lc,datum:Hc,on:Wc,dispatch:Yc,[Symbol.iterator]:Qc};function Fn(e){return typeof e=="string"?new xe([[document.querySelector(e)]],[document.documentElement]):new xe([[e]],Ca)}function Pl(e){return typeof e=="string"?new xe([document.querySelectorAll(e)],[document.documentElement]):new xe([pa(e)],Ca)}const Jc=e=>({}),ti=e=>({});function Zc(e){let t,n,l,o,r,s,u,a,f;const c=e[4].header,d=Uo(c,e,e[3],ti),g=e[4].default,p=Uo(g,e,e[3],null);return{c(){t=A("dialog"),n=A("div"),l=A("div"),o=A("button"),o.textContent="X",r=N(),d&&d.c(),s=N(),p&&p.c(),h(o,"class","close-button svelte-g384pz"),h(l,"class","btn-container svelte-g384pz"),h(n,"class","svelte-g384pz"),h(t,"class","svelte-g384pz")},m(m,_){O(m,t,_),b(t,n),b(n,l),b(l,o),b(n,r),d&&d.m(n,null),b(n,s),p&&p.m(n,null),e[6](t),u=!0,a||(f=[B(o,"click",function(){Ve(e[1])&&e[1].apply(this,arguments)}),B(n,"click",ju(e[5])),B(t,"close",function(){Ve(e[1])&&e[1].apply(this,arguments)}),B(t,"click",Bu(function(){Ve(e[1])&&e[1].apply(this,arguments)}))],a=!0)},p(m,[_]){e=m,d&&d.p&&(!u||_&8)&&Yo(d,c,e,e[3],u?Xo(c,e[3],_,Jc):Qo(e[3]),ti),p&&p.p&&(!u||_&8)&&Yo(p,g,e,e[3],u?Xo(g,e[3],_,null):Qo(e[3]),null)},i(m){u||(z(d,m),z(p,m),u=!0)},o(m){q(d,m),q(p,m),u=!1},d(m){m&&P(t),d&&d.d(m),p&&p.d(m),e[6](null),a=!1,he(f)}}}function ed(e,t,n){let{$$slots:l={},$$scope:o}=t,{showModal:r}=t,{dialog:s}=t,{handleClose:u}=t;function a(c){nf.call(this,e,c)}function f(c){nt[c?"unshift":"push"](()=>{s=c,n(0,s)})}return e.$$set=c=>{"showModal"in c&&n(2,r=c.showModal),"dialog"in c&&n(0,s=c.dialog),"handleClose"in c&&n(1,u=c.handleClose),"$$scope"in c&&n(3,o=c.$$scope)},e.$$.update=()=>{e.$$.dirty&5&&s&&r&&s.showModal()},[s,u,r,o,l,a,f]}class td extends fe{constructor(t){super(),ce(this,t,ed,Zc,ue,{showModal:2,dialog:0,handleClose:1})}}function ni(e){let t,n,l,o,r,s,u,a,f;return{c(){t=A("form"),n=A("div"),l=A("label"),l.textContent="Filename",o=N(),r=A("input"),s=N(),u=A("div"),u.innerHTML='<button type="submit">Download</button>',h(l,"for","file_name"),h(l,"class","svelte-sy2m0x"),h(r,"type","text"),h(r,"placeholder","Please enter filename"),h(r,"name","file_name"),r.required=!0,h(n,"class","inputs svelte-sy2m0x"),h(u,"class","btn-container svelte-sy2m0x")},m(c,d){O(c,t,d),b(t,n),b(n,l),b(n,o),b(n,r),Ke(r,e[2]),b(t,s),b(t,u),a||(f=[B(r,"input",e[9]),B(t,"submit",e[6])],a=!0)},p(c,d){d&4&&r.value!==c[2]&&Ke(r,c[2])},d(c){c&&P(t),a=!1,he(f)}}}function li(e){let t,n,l,o,r,s,u,a,f;return{c(){t=A("div"),n=L("✅ Data downloaded to /pykoi/"),l=L(e[2]),o=L(".csv"),r=N(),s=A("div"),u=A("button"),u.textContent="Close",h(s,"class","btn-container svelte-sy2m0x")},m(c,d){O(c,t,d),b(t,n),b(t,l),b(t,o),O(c,r,d),O(c,s,d),b(s,u),a||(f=B(u,"click",e[7]),a=!0)},p(c,d){d&4&&J(l,c[2])},d(c){c&&P(t),c&&P(r),c&&P(s),a=!1,f()}}}function oi(e){let t,n,l,o,r,s,u,a;return{c(){t=A("div"),t.textContent="⚠️ Download failed. Please try again.",n=N(),l=A("div"),o=A("button"),o.textContent="Retry",r=N(),s=A("button"),s.textContent="Close",h(l,"class","btn-container svelte-sy2m0x")},m(f,c){O(f,t,c),O(f,n,c),O(f,l,c),b(l,o),b(l,r),b(l,s),u||(a=[B(o,"click",e[10]),B(s,"click",e[7])],u=!0)},p:X,d(f){f&&P(t),f&&P(n),f&&P(l),u=!1,he(a)}}}function ii(e){let t,n,l,o,r,s,u,a,f,c,d;return{c(){t=A("div"),n=L("⚠️ "),l=L(e[2]),o=L(".csv already exists. Do you wish to overwrite it?"),r=N(),s=A("div"),u=A("button"),u.textContent="Back",a=N(),f=A("button"),f.textContent="Overwrite",h(s,"class","btn-container svelte-sy2m0x")},m(g,p){O(g,t,p),b(t,n),b(t,l),b(t,o),O(g,r,p),O(g,s,p),b(s,u),b(s,a),b(s,f),c||(d=[B(u,"click",e[11]),B(f,"click",e[12])],c=!0)},p(g,p){p&4&&J(l,g[2])},d(g){g&&P(t),g&&P(r),g&&P(s),c=!1,he(d)}}}function nd(e){let t,n,l,o,r=e[3]===e[4].FILE_INPUT&&ni(e),s=e[3]===e[4].DOWNLOADED&&li(e),u=e[3]===e[4].FAILED_DOWNLOAD&&oi(e),a=e[3]===e[4].OVERWRITE&&ii(e);return{c(){r&&r.c(),t=N(),s&&s.c(),n=N(),u&&u.c(),l=N(),a&&a.c(),o=ke()},m(f,c){r&&r.m(f,c),O(f,t,c),s&&s.m(f,c),O(f,n,c),u&&u.m(f,c),O(f,l,c),a&&a.m(f,c),O(f,o,c)},p(f,c){f[3]===f[4].FILE_INPUT?r?r.p(f,c):(r=ni(f),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),f[3]===f[4].DOWNLOADED?s?s.p(f,c):(s=li(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),f[3]===f[4].FAILED_DOWNLOAD?u?u.p(f,c):(u=oi(f),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),f[3]===f[4].OVERWRITE?a?a.p(f,c):(a=ii(f),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},d(f){r&&r.d(f),f&&P(t),s&&s.d(f),f&&P(n),u&&u.d(f),f&&P(l),a&&a.d(f),f&&P(o)}}}function ld(e){let t;return{c(){t=A("h4"),t.textContent="Download Data",h(t,"slot","header"),h(t,"class","svelte-sy2m0x")},m(n,l){O(n,t,l)},p:X,d(n){n&&P(t)}}}function od(e){let t,n,l,o;function r(a){e[13](a)}function s(a){e[14](a)}let u={handleClose:e[7],$$slots:{header:[ld],default:[nd]},$$scope:{ctx:e}};return e[0]!==void 0&&(u.showModal=e[0]),e[1]!==void 0&&(u.dialog=e[1]),t=new td({props:u}),nt.push(()=>En(t,"showModal",r)),nt.push(()=>En(t,"dialog",s)),{c(){le(t.$$.fragment)},m(a,f){ee(t,a,f),o=!0},p(a,[f]){const c={};f&32780&&(c.$$scope={dirty:f,ctx:a}),!n&&f&1&&(n=!0,c.showModal=a[0],Rn(()=>n=!1)),!l&&f&2&&(l=!0,c.dialog=a[1],Rn(()=>l=!1)),t.$set(c)},i(a){o||(z(t.$$.fragment,a),o=!0)},o(a){q(t.$$.fragment,a),o=!1},d(a){te(t,a)}}}function id(e,t,n){let{showModal:l,table:o}=t,r,s="";const u={FILE_INPUT:0,DOWNLOADED:1,FAILED_DOWNLOAD:2,OVERWRITE:3};let a=u.FILE_INPUT;const f=async y=>{const C={file_name:y},S=await(await fetch(`/chat/${o}/save_to_csv`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();console.log("Download Complete: ",S),S.status==="200"?(console.log("success"),n(3,a=u.DOWNLOADED)):(console.log("failed"),n(3,a=u.FAILED_DOWNLOAD))},c=async y=>{y.preventDefault();const C=await fetch(`/file_exists/?file_name=${s}.csv`),{file_exists:E}=await C.json();E===!0?n(3,a=u.OVERWRITE):f(s)};function d(){n(0,l=!1),n(3,a=u.FILE_INPUT),r.close()}function g(){s=this.value,n(2,s)}const p=()=>n(3,a=u.FILE_INPUT),m=()=>n(3,a=u.FILE_INPUT),_=()=>f(s);function v(y){l=y,n(0,l)}function w(y){r=y,n(1,r)}return e.$$set=y=>{"showModal"in y&&n(0,l=y.showModal),"table"in y&&n(8,o=y.table)},[l,r,s,a,u,f,c,d,o,g,p,m,_,v,w]}class No extends fe{constructor(t){super(),ce(this,t,id,od,ue,{showModal:0,table:8})}}function ri(e){let t;return{c(){t=A("h5"),t.textContent="Response:",h(t,"class","bold")},m(n,l){O(n,t,l)},d(n){n&&P(t)}}}function si(e){let t,n,l,o,r,s;return{c(){t=A("div"),n=A("button"),n.textContent="👍",l=N(),o=A("button"),o.textContent="👎",h(n,"class","small-button thumbs-up svelte-1cug6ja"),Te(n,"vote-selected",e[0].vote_status==="up"),Te(n,"vote-not-selected",e[0].vote_status==="down"),h(o,"class","small-button thumbs-down svelte-1cug6ja"),Te(o,"vote-selected",e[0].vote_status==="down"),Te(o,"vote-not-selected",e[0].vote_status==="up"),h(t,"class","feedback-buttons svelte-1cug6ja")},m(u,a){O(u,t,a),b(t,n),b(t,l),b(t,o),r||(s=[B(n,"click",e[5]),B(o,"click",e[6])],r=!0)},p(u,a){a&1&&Te(n,"vote-selected",u[0].vote_status==="up"),a&1&&Te(n,"vote-not-selected",u[0].vote_status==="down"),a&1&&Te(o,"vote-selected",u[0].vote_status==="down"),a&1&&Te(o,"vote-not-selected",u[0].vote_status==="up")},d(u){u&&P(t),r=!1,he(s)}}}function rd(e){let t,n,l,o=e[0].answer+"",r,s,u=e[3]&&ri(),a=e[1]&&si(e);return{c(){t=A("div"),u&&u.c(),n=N(),l=A("p"),r=L(o),s=N(),a&&a.c(),h(t,"class","answer svelte-1cug6ja")},m(f,c){O(f,t,c),u&&u.m(t,null),b(t,n),b(t,l),b(l,r),b(t,s),a&&a.m(t,null)},p(f,[c]){f[3]?u||(u=ri(),u.c(),u.m(t,n)):u&&(u.d(1),u=null),c&1&&o!==(o=f[0].answer+"")&&J(r,o),f[1]?a?a.p(f,c):(a=si(f),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i:X,o:X,d(f){f&&P(t),u&&u.d(),a&&a.d()}}}function sd(e,t,n){let l;ae(e,je,g=>n(7,l=g));let{message:o={}}=t,{feedback:r=!1}=t,{index:s=0}=t,{title:u=!1}=t;async function a(g){const p=await fetch("/chat/rag_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(p.ok)console.log("response",p),n(0,o.vote_status=g.vote_status,o);else{const m=await p.text();alert(m)}}function f(g,p,m){const _=l[m];_.vote=p;const v={id:m+1,vote_status:p};a(v)}console.log("Answer",o.vote_status);const c=g=>f(g,"up",s),d=g=>f(g,"down",s);return e.$$set=g=>{"message"in g&&n(0,o=g.message),"feedback"in g&&n(1,r=g.feedback),"index"in g&&n(2,s=g.index),"title"in g&&n(3,u=g.title)},[o,r,s,u,f,c,d]}class $a extends fe{constructor(t){super(),ce(this,t,sd,rd,ue,{message:0,feedback:1,index:2,title:3})}}function ai(e,t,n){const l=e.slice();return l[17]=t[n],l[19]=n,l}function ui(e,t){let n,l,o,r,s,u,a,f,c,d=t[17].question+"",g,p,m,_,v,w,y,C,E;return _=new $a({props:{feedback:t[0],message:t[17],index:t[19],title:!0}}),{key:e,first:null,c(){n=A("div"),l=A("div"),o=A("div"),r=N(),s=A("div"),u=A("div"),a=A("h5"),a.textContent="Question:",f=N(),c=A("p"),g=L(d),p=N(),m=A("div"),le(_.$$.fragment),v=N(),h(o,"class","avatar"),h(a,"class","bold svelte-yzyd3k"),h(u,"class","question svelte-yzyd3k"),h(m,"class","answers svelte-yzyd3k"),h(s,"class","message-content svelte-yzyd3k"),h(l,"class","chat-message-center svelte-yzyd3k"),h(n,"class","chat-message svelte-yzyd3k"),this.first=n},m(S,F){O(S,n,F),b(n,l),b(l,o),b(l,r),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,g),b(s,p),b(s,m),ee(_,m,null),b(n,v),y=!0,C||(E=Lt(w=ud.call(null,n,t[19]===t[5].length-1)),C=!0)},p(S,F){t=S,(!y||F&32)&&d!==(d=t[17].question+"")&&J(g,d);const $={};F&1&&($.feedback=t[0]),F&32&&($.message=t[17]),F&32&&($.index=t[19]),_.$set($),w&&Ve(w.update)&&F&32&&w.update.call(null,t[19]===t[5].length-1)},i(S){y||(z(_.$$.fragment,S),y=!0)},o(S){q(_.$$.fragment,S),y=!1},d(S){S&&P(n),te(_),C=!1,E()}}}function ad(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_=[],v=new Map,w,y,C,E,S,F,$=(e[3]?e[4]:"Send")+"",R,k,M,I,D,V,T;function x(U){e[10](U)}let W={table:"qa_table"};e[1]!==void 0&&(W.showModal=e[1]),t=new No({props:W}),nt.push(()=>En(t,"showModal",x));let G=e[5];const K=U=>U[19];for(let U=0;U<G.length;U+=1){let Y=ai(e,G,U),Q=K(Y);v.set(Q,_[U]=ui(Q,Y))}return{c(){le(t.$$.fragment),l=N(),o=A("div"),r=A("div"),s=A("h5"),s.textContent="Vote Feedback Instructions",u=N(),a=A("p"),a.innerHTML=`Ask a question to receive an answer from the chatbot. If the response is
      satisfactory, click on the <span class="inline-button green svelte-yzyd3k">👍</span>
      button. If the repsonse is not satisfactory, click on the
      <span class="inline-button red svelte-yzyd3k">👎</span> button.`,f=N(),c=A("button"),c.textContent="Download Data",d=N(),g=A("div"),p=A("section"),m=A("div");for(let U=0;U<_.length;U+=1)_[U].c();w=N(),y=A("div"),C=A("form"),E=A("input"),S=N(),F=A("button"),R=L($),M=N(),I=A("p"),I.textContent="Note - may produce inaccurate information.",h(s,"class","underline bold svelte-yzyd3k"),h(a,"class","svelte-yzyd3k"),h(c,"class","svelte-yzyd3k"),h(r,"class","instructions svelte-yzyd3k"),h(m,"class","chat-log svelte-yzyd3k"),h(p,"class","chatbox svelte-yzyd3k"),h(E,"class","chat-input-textarea svelte-yzyd3k"),h(E,"placeholder","Type Question Here"),h(F,"class",k="btnyousend "+(e[2]===""?"":"active")+" svelte-yzyd3k"),h(F,"type","submit"),h(C,"class","chat-input-form svelte-yzyd3k"),h(I,"class","message svelte-yzyd3k"),h(y,"class","chat-input-holder svelte-yzyd3k"),h(g,"class","ranked-chat svelte-yzyd3k"),h(o,"class","ranked-feedback-container svelte-yzyd3k")},m(U,Y){ee(t,U,Y),O(U,l,Y),O(U,o,Y),b(o,r),b(r,s),b(r,u),b(r,a),b(r,f),b(r,c),b(o,d),b(o,g),b(g,p),b(p,m);for(let Q=0;Q<_.length;Q+=1)_[Q]&&_[Q].m(m,null);b(g,w),b(g,y),b(y,C),b(C,E),Ke(E,e[2]),b(C,S),b(C,F),b(F,R),b(y,M),b(y,I),D=!0,V||(T=[B(c,"click",e[7]),B(E,"input",e[11]),B(C,"submit",e[6])],V=!0)},p(U,[Y]){const Q={};!n&&Y&2&&(n=!0,Q.showModal=U[1],Rn(()=>n=!1)),t.$set(Q),Y&33&&(G=U[5],_e(),_=vt(_,Y,K,1,U,G,v,m,Mo,ui,null,ai),ve()),Y&4&&E.value!==U[2]&&Ke(E,U[2]),(!D||Y&24)&&$!==($=(U[3]?U[4]:"Send")+"")&&J(R,$),(!D||Y&4&&k!==(k="btnyousend "+(U[2]===""?"":"active")+" svelte-yzyd3k"))&&h(F,"class",k)},i(U){if(!D){z(t.$$.fragment,U);for(let Y=0;Y<G.length;Y+=1)z(_[Y]);D=!0}},o(U){q(t.$$.fragment,U);for(let Y=0;Y<_.length;Y+=1)q(_[Y]);D=!1},d(U){te(t,U),U&&P(l),U&&P(o);for(let Y=0;Y<_.length;Y+=1)_[Y].d();V=!1,he(T)}}}function ud(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function fd(e,t,n){let l,o;ae(e,je,w=>n(5,o=w));let r=!1,{feedback:s=!1}=t,{is_retrieval:u=!1}=t,a="",f="",c=!1;dt(()=>{d()});async function d(){const E=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map(S=>({id:S[0],question:S[1],answer:S[2],vote_status:S[3]}));Fe(je,o=[...E],o)}const g=async w=>{w.preventDefault(),a=f,n(2,f=""),n(3,c=!0);let y={id:o.length+1,question:a,answer:"Loading...",vote_status:"na"};Fe(je,o=[...o,y],o);const C=u?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})}):await fetch(`/chat/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})});if(C.ok){const E=await C.json();console.log("response data",E),y.answer=E.answer,je.update(S=>(S[S.length-1]=y,S))}else{const E=await C.text();alert(E)}n(3,c=!1)};let p=0;setInterval(()=>{n(9,p=(p+1)%4)},200);function m(){n(1,r=!0)}[...Array(10).keys()].map(w=>String.fromCharCode(65+w));function _(w){r=w,n(1,r)}function v(){f=this.value,n(2,f)}return e.$$set=w=>{"feedback"in w&&n(0,s=w.feedback),"is_retrieval"in w&&n(8,u=w.is_retrieval)},e.$$.update=()=>{e.$$.dirty&512&&n(4,l=".".repeat(p).padEnd(3))},[s,r,f,c,l,o,g,m,u,p,_,v]}class Po extends fe{constructor(t){super(),ce(this,t,fd,ad,ue,{feedback:0,is_retrieval:8})}}function fi(e,t,n){const l=e.slice();return l[14]=t[n],l[16]=n,l}function ci(e,t){let n,l,o,r,s,u,a,f,c,d=t[14].question+"",g,p,m,_,v,w,y,C=t[14].up_ranking_answer+"",E,S,F,$,R,k,M=t[14].low_ranking_answer+"",I,D,V,T,x;function W(...Y){return t[7](t[14],t[16],...Y)}function G(...Y){return t[8](t[14],t[16],...Y)}function K(...Y){return t[9](t[14],t[16],...Y)}function U(...Y){return t[10](t[14],t[16],...Y)}return{key:e,first:null,c(){n=A("div"),l=A("div"),o=A("div"),r=N(),s=A("div"),u=A("div"),a=A("h5"),a.textContent="Question:",f=N(),c=A("p"),g=L(d),p=N(),m=A("div"),_=A("div"),v=A("h5"),v.textContent="Response 1:",w=N(),y=A("p"),E=L(C),S=N(),F=A("div"),$=A("h5"),$.textContent="Response 2:",R=N(),k=A("p"),I=L(M),D=N(),h(o,"class","avatar"),h(a,"class","bold svelte-au920n"),h(u,"class","question svelte-au920n"),h(v,"class","bold underline svelte-au920n"),h(_,"class","answer svelte-au920n"),h($,"class","bold underline svelte-au920n"),h(F,"class","answer svelte-au920n"),h(m,"class","answers svelte-au920n"),h(s,"class","message-content svelte-au920n"),h(l,"class","chat-message-center svelte-au920n"),h(n,"class","chat-message svelte-au920n"),this.first=n},m(Y,Q){O(Y,n,Q),b(n,l),b(l,o),b(l,r),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,g),b(s,p),b(s,m),b(m,_),b(_,v),b(_,w),b(_,y),b(y,E),b(m,S),b(m,F),b(F,$),b(F,R),b(F,k),b(k,I),b(n,D),T||(x=[B(_,"click",W),B(_,"keydown",G),B(F,"click",K),B(F,"keydown",U),Lt(V=dd.call(null,n,t[16]===t[3].length-1))],T=!0)},p(Y,Q){t=Y,Q&8&&d!==(d=t[14].question+"")&&J(g,d),Q&8&&C!==(C=t[14].up_ranking_answer+"")&&J(E,C),Q&8&&M!==(M=t[14].low_ranking_answer+"")&&J(I,M),V&&Ve(V.update)&&Q&8&&V.update.call(null,t[16]===t[3].length-1)},d(Y){Y&&P(n),T=!1,he(x)}}}function cd(e){let t,n,l,o,r,s,u=[],a=new Map,f,c,d,g,p,m,_=(e[1]?e[2]:"Send")+"",v,w,y,C,E,S,F=e[3];const $=R=>R[16];for(let R=0;R<F.length;R+=1){let k=fi(e,F,R),M=$(k);a.set(M,u[R]=ci(M,k))}return{c(){t=A("div"),n=A("div"),n.innerHTML=`<h5 class="underline bold svelte-au920n">Ranked Feedback Instructions</h5> 
    <p class="svelte-au920n">Ask a question and click on the better of the two responses. The better
      response will be outlined in <span class="green svelte-au920n">green</span>, the worse
      response outlined in <span class="red svelte-au920n">red</span>. This data will be
      automatically fed to RLHF.</p> 
    <button class="svelte-au920n">Download Data</button>`,l=N(),o=A("div"),r=A("section"),s=A("div");for(let R=0;R<u.length;R+=1)u[R].c();f=N(),c=A("div"),d=A("form"),g=A("input"),p=N(),m=A("button"),v=L(_),y=N(),C=A("p"),C.textContent="Note - may produce inaccurate information.",h(n,"class","instructions svelte-au920n"),h(s,"class","chat-log svelte-au920n"),h(r,"class","chatbox svelte-au920n"),h(g,"class","chat-input-textarea svelte-au920n"),h(g,"placeholder","Type Message Here"),h(m,"class",w="btnyousend "+(e[0]===""?"":"active")+" svelte-au920n"),h(m,"type","submit"),h(d,"class","chat-input-form svelte-au920n"),h(C,"class","message svelte-au920n"),h(c,"class","chat-input-holder svelte-au920n"),h(o,"class","ranked-chat svelte-au920n"),h(t,"class","ranked-feedback-container svelte-au920n")},m(R,k){O(R,t,k),b(t,n),b(t,l),b(t,o),b(o,r),b(r,s);for(let M=0;M<u.length;M+=1)u[M]&&u[M].m(s,null);b(o,f),b(o,c),b(c,d),b(d,g),Ke(g,e[0]),b(d,p),b(d,m),b(m,v),b(c,y),b(c,C),E||(S=[B(g,"input",e[11]),B(d,"submit",e[4])],E=!0)},p(R,[k]){k&40&&(F=R[3],u=vt(u,k,$,1,R,F,a,s,nn,ci,null,fi)),k&1&&g.value!==R[0]&&Ke(g,R[0]),k&6&&_!==(_=(R[1]?R[2]:"Send")+"")&&J(v,_),k&1&&w!==(w="btnyousend "+(R[0]===""?"":"active")+" svelte-au920n")&&h(m,"class",w)},i:X,o:X,d(R){R&&P(t);for(let k=0;k<u.length;k+=1)u[k].d();E=!1,he(S)}}}function dd(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function hd(e){const t=await fetch("/chat/ranking_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function gd(e,t,n){let l,o;ae(e,Nl,v=>n(3,o=v));let r="",s="",u=!1;dt(()=>{});const a=async v=>{v.preventDefault(),r=s,n(0,s=""),n(1,u=!0);let w={question:r,up_ranking_answer:"Loading...",low_ranking_answer:"Loading..."};Fe(Nl,o=[...o,w],o);const y=await fetch(`/chat/multi_responses/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r})});if(y.ok){const C=await y.json();w.up_ranking_answer=C.answer[0],w.low_ranking_answer=C.answer[1],Nl.update(E=>(E[E.length-1]=w,E))}else{const C=await y.text();alert(C)}n(1,u=!1)};let f=0;setInterval(()=>{n(6,f=(f+1)%4)},200);function c(v,w,y,C){const E=o[y],S={1:"up_ranking_answer",2:"low_ranking_answer"},F={question:E.question,up_ranking_answer:E[S[C]],low_ranking_answer:E[S[C%2+1]]};hd(F),Fn(v.currentTarget.parentNode).selectAll("div").style("outline","2px solid var(--red)").style("border","1px solid var(--red)"),Fn(v.currentTarget).style("outline","2px solid var(--green)").style("border","1px solid var(--green)")}const d=(v,w,y)=>c(y,v,w,1),g=(v,w,y)=>c(y,v,w,1),p=(v,w,y)=>c(y,v,w,2),m=(v,w,y)=>c(y,v,w,2);function _(){s=this.value,n(0,s)}return e.$$.update=()=>{e.$$.dirty&64&&n(2,l=".".repeat(f).padEnd(3))},[s,u,l,o,a,c,f,d,g,p,m,_]}class pd extends fe{constructor(t){super(),ce(this,t,gd,cd,ue,{})}}function ro(e,t=2){if(e===0)return"0 Bytes";const n=1024,l=t<0?0:t,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(l))+" "+o[r]}function md(e){let t={who:0,what:0,how:0,why:0,where:0,does:0,can:0,"n/a":0};for(let l=0;l<e.length;l++){let o=e[l].question.split(" ")[0].toLowerCase();o in t?t[o]++:t["n/a"]++}return Object.keys(t).map(l=>({question:l,count:t[l]}))}function Aa(e){return e.map(t=>{const n=t.question.split(" ").length,l=t.answer.split(" ").length;return{index:t.index,question:+n,answer:+l,vote:t.vote}})}function Ra(e,t){e.classList.add("tooltip"),e.setAttribute("tabindex",0);function n(){const o=document.createElement("span");o.textContent=t,o.setAttribute("id","tooltip"),e.appendChild(o),e.addEventListener("mouseleave",l),e.addEventListener("blur",l),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}function l(){e.removeChild(e.querySelector("#tooltip")),e.removeEventListener("mouseleave",l),e.removeEventListener("blur",l),e.addEventListener("mouseenter",n),e.addEventListener("focus",n)}return e.addEventListener("mouseenter",n),e.addEventListener("focus",n),{onDestroy(){e.classList.remove("tooltip"),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}}}function _d(e){const t=n=>{e&&!e.contains(n.target)&&!n.defaultPrevented&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function di(e,t,n){const l=e.slice();return l[11]=t[n],l[13]=n,l}function vd(e){let t,n,l,o,r,s,u,a,f=e[0],c=[];for(let d=0;d<f.length;d+=1)c[d]=hi(di(e,f,d));return{c(){t=A("div"),n=A("button"),n.textContent="Select All",l=N(),o=A("button"),o.textContent="Deselect All",r=N(),s=A("div");for(let d=0;d<c.length;d+=1)c[d].c();h(n,"class","svelte-1wrkg2k"),h(o,"class","svelte-1wrkg2k"),h(t,"class","select-button-container svelte-1wrkg2k"),h(s,"class","checkbox-container svelte-1wrkg2k")},m(d,g){O(d,t,g),b(t,n),b(t,l),b(t,o),O(d,r,g),O(d,s,g);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(s,null);u||(a=[B(n,"click",e[6]),B(o,"click",e[7])],u=!0)},p(d,g){if(g&35){f=d[0];let p;for(p=0;p<f.length;p+=1){const m=di(d,f,p);c[p]?c[p].p(m,g):(c[p]=hi(m),c[p].c(),c[p].m(s,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=f.length}},d(d){d&&P(t),d&&P(r),d&&P(s),pe(c,d),u=!1,he(a)}}}function bd(e){let t;return{c(){t=A("div"),t.textContent="No documents found. Please upload via the RetrievalQA component."},m(n,l){O(n,t,l)},p:X,d(n){n&&P(t)}}}function hi(e){let t,n,l,o,r,s,u=gi(e[11].name)+"",a,f,c,d,g,p;function m(..._){return e[9](e[11],..._)}return{c(){t=A("label"),n=A("input"),r=N(),s=A("span"),a=L(u),c=N(),h(n,"type","checkbox"),h(n,"id",l=e[11].id),n.checked=o=e[1].has(e[11].name),h(n,"class","svelte-1wrkg2k"),h(s,"class","svelte-1wrkg2k"),h(t,"for",d=e[11].id),h(t,"class","svelte-1wrkg2k")},m(_,v){O(_,t,v),b(t,n),b(t,r),b(t,s),b(s,a),b(t,c),g||(p=[B(n,"change",m),Lt(f=Ra.call(null,s,e[11].name))],g=!0)},p(_,v){e=_,v&1&&l!==(l=e[11].id)&&h(n,"id",l),v&3&&o!==(o=e[1].has(e[11].name))&&(n.checked=o),v&1&&u!==(u=gi(e[11].name)+"")&&J(a,u),f&&Ve(f.update)&&v&1&&f.update.call(null,e[11].name),v&1&&d!==(d=e[11].id)&&h(t,"for",d)},d(_){_&&P(t),g=!1,he(p)}}}function wd(e){let t,n,l,o,r,s,u,a,f,c,d;function g(_,v){return _[0].length===0?bd:vd}let p=g(e),m=p(e);return{c(){t=A("form"),n=A("div"),l=A("div"),o=A("select"),r=A("option"),r.textContent="Documents",s=N(),u=A("div"),a=N(),f=A("div"),m.c(),r.__value="Documents",r.value=r.__value,h(o,"class","svelte-1wrkg2k"),h(u,"class","overSelect svelte-1wrkg2k"),h(l,"class","selectBox svelte-1wrkg2k"),h(f,"class","dropdown-content svelte-1wrkg2k"),ye(f,"display",e[2]?"block":"none"),h(n,"class","multiselect svelte-1wrkg2k")},m(_,v){O(_,t,v),b(t,n),b(n,l),b(l,o),b(o,r),b(l,s),b(l,u),b(n,a),b(n,f),m.m(f,null),e[10](f),c||(d=[B(l,"click",e[4]),Lt(_d.call(null,n)),B(n,"click_outside",e[8])],c=!0)},p(_,[v]){p===(p=g(_))&&m?m.p(_,v):(m.d(1),m=p(_),m&&(m.c(),m.m(f,null))),v&4&&ye(f,"display",_[2]?"block":"none")},i:X,o:X,d(_){_&&P(t),m.d(),e[10](null),c=!1,he(d)}}}function gi(e){const n=Math.floor(8);return e.length>16?e.slice(0,n)+"..."+e.slice(-n):e}function yd(e,t,n){let l;ae(e,gt,m=>n(1,l=m));let{documents:o=[]}=t,r=!1,s;function u(m){m.preventDefault(),n(2,r=!r)}function a(m,_){_.target.checked?l.add(m):l.delete(m),gt.set(new Set(l))}function f(m){m.preventDefault(),Fe(gt,l=new Set(o.map(_=>_.name)),l),gt.set(new Set(l))}function c(m){m.preventDefault(),Fe(gt,l=new Set,l),gt.set(new Set(l))}function d(m){m.preventDefault(),n(2,r=!1)}const g=(m,_)=>a(m.name,_);function p(m){nt[m?"unshift":"push"](()=>{s=m,n(3,s)})}return e.$$set=m=>{"documents"in m&&n(0,o=m.documents)},e.$$.update=()=>{e.$$.dirty&2&&console.log(l)},[o,l,r,s,u,a,f,c,d,g,p]}let kd=class extends fe{constructor(t){super(),ce(this,t,yd,wd,ue,{documents:0})}};function mt(e,{delay:t=0,duration:n=400,easing:l=Fo,axis:o="y"}={}){const r=getComputedStyle(e),s=+r.opacity,u=o==="y"?"height":"width",a=parseFloat(r[u]),f=o==="y"?["top","bottom"]:["left","right"],c=f.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),d=parseFloat(r[`padding${c[0]}`]),g=parseFloat(r[`padding${c[1]}`]),p=parseFloat(r[`margin${c[0]}`]),m=parseFloat(r[`margin${c[1]}`]),_=parseFloat(r[`border${c[0]}Width`]),v=parseFloat(r[`border${c[1]}Width`]);return{delay:t,duration:n,easing:l,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*s};${u}: ${w*a}px;padding-${f[0]}: ${w*d}px;padding-${f[1]}: ${w*g}px;margin-${f[0]}: ${w*p}px;margin-${f[1]}: ${w*m}px;border-${f[0]}-width: ${w*_}px;border-${f[1]}-width: ${w*v}px;`}}function Ln(e,{delay:t=0,duration:n=400,easing:l=Fo,start:o=0,opacity:r=0}={}){const s=getComputedStyle(e),u=+s.opacity,a=s.transform==="none"?"":s.transform,f=1-o,c=u*(1-r);return{delay:t,duration:n,easing:l,css:(d,g)=>`
			transform: ${a} scale(${1-f*g});
			opacity: ${u-c*g}
		`}}function Sd(e){let t;return{c(){t=A("p"),t.textContent="⌄",h(t,"class","svelte-1pk2e1k")},m(n,l){O(n,t,l)},d(n){n&&P(t)}}}function Cd(e){let t;return{c(){t=A("p"),t.textContent="⌃",h(t,"class","svelte-1pk2e1k")},m(n,l){O(n,t,l)},d(n){n&&P(t)}}}function pi(e){let t,n,l,o,r;return{c(){t=A("div"),n=A("p"),l=L(e[1]),h(n,"class","bold svelte-1pk2e1k"),h(t,"class","source_content svelte-1pk2e1k")},m(s,u){O(s,t,u),b(t,n),b(n,l),r=!0},p(s,u){(!r||u&2)&&J(l,s[1])},i(s){r||(Se(()=>{r&&(o||(o=Ge(t,mt,{},!0)),o.run(1))}),r=!0)},o(s){o||(o=Ge(t,mt,{},!1)),o.run(0),r=!1},d(s){s&&P(t),s&&o&&o.end()}}}function $d(e){let t,n,l,o=e[2]+1+"",r,s,u,a,f,c,d,g,p;function m(y,C){return y[3]?Cd:Sd}let _=m(e),v=_(e),w=e[3]&&pi(e);return{c(){t=A("div"),n=A("div"),l=A("p"),r=L(o),s=L(": "),u=L(e[0]),a=N(),v.c(),c=N(),w&&w.c(),h(l,"class","bold svelte-1pk2e1k"),h(n,"class","source_tab svelte-1pk2e1k"),h(t,"class","source svelte-1pk2e1k")},m(y,C){O(y,t,C),b(t,n),b(n,l),b(l,r),b(l,s),b(l,u),b(n,a),v.m(n,null),b(t,c),w&&w.m(t,null),d=!0,g||(p=B(n,"click",e[4]),g=!0)},p(y,[C]){(!d||C&4)&&o!==(o=y[2]+1+"")&&J(r,o),(!d||C&1)&&J(u,y[0]),_!==(_=m(y))&&(v.d(1),v=_(y),v&&(v.c(),v.m(n,null))),y[3]?w?(w.p(y,C),C&8&&z(w,1)):(w=pi(y),w.c(),z(w,1),w.m(t,null)):w&&(_e(),q(w,1,1,()=>{w=null}),ve())},i(y){d||(Se(()=>{d&&(f||(f=Ge(n,mt,{},!0)),f.run(1))}),z(w),d=!0)},o(y){f||(f=Ge(n,mt,{},!1)),f.run(0),q(w),d=!1},d(y){y&&P(t),v.d(),y&&f&&f.end(),w&&w.d(),g=!1,p()}}}function Ad(e,t,n){let{source:l=""}=t,{source_content:o=""}=t,{i:r=0}=t,s=r===0;const u=()=>n(3,s=!s);return e.$$set=a=>{"source"in a&&n(0,l=a.source),"source_content"in a&&n(1,o=a.source_content),"i"in a&&n(2,r=a.i)},[l,o,r,s,u]}class Rd extends fe{constructor(t){super(),ce(this,t,Ad,$d,ue,{source:0,source_content:1,i:2})}}function mi(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function _i(e){let t,n,l,o;const r=[Dd,Fd,Md,Ed],s=[];function u(a,f){return a[0][0]==="N/A"?0:a[0][0]==="Loading..."?1:a[0][0]==="Not loaded"?2:3}return t=u(e),n=s[t]=r[t](e),{c(){n.c(),l=ke()},m(a,f){s[t].m(a,f),O(a,l,f),o=!0},p(a,f){let c=t;t=u(a),t===c?s[t].p(a,f):(_e(),q(s[c],1,1,()=>{s[c]=null}),ve(),n=s[t],n?n.p(a,f):(n=s[t]=r[t](a),n.c()),z(n,1),n.m(l.parentNode,l))},i(a){o||(z(n),o=!0)},o(a){q(n),o=!1},d(a){s[t].d(a),a&&P(l)}}}function Ed(e){let t,n,l,o=e[0].length+"",r,s,u,a,f,c,d,g;function p(w,y){return w[2]?Nd:Id}let m=p(e),_=m(e),v=e[2]&&vi(e);return{c(){t=A("div"),n=A("h5"),l=L("📖 Response Sources ("),r=L(o),s=L(")"),u=N(),_.c(),a=N(),v&&v.c(),f=ke(),h(n,"class","bold"),h(t,"class","sources-header svelte-1r759df")},m(w,y){O(w,t,y),b(t,n),b(n,l),b(n,r),b(n,s),b(t,u),_.m(t,null),O(w,a,y),v&&v.m(w,y),O(w,f,y),c=!0,d||(g=B(t,"click",e[3]),d=!0)},p(w,y){(!c||y&1)&&o!==(o=w[0].length+"")&&J(r,o),m!==(m=p(w))&&(_.d(1),_=m(w),_&&(_.c(),_.m(t,null))),w[2]?v?(v.p(w,y),y&4&&z(v,1)):(v=vi(w),v.c(),z(v,1),v.m(f.parentNode,f)):v&&(_e(),q(v,1,1,()=>{v=null}),ve())},i(w){c||(z(v),c=!0)},o(w){q(v),c=!1},d(w){w&&P(t),_.d(),w&&P(a),v&&v.d(w),w&&P(f),d=!1,g()}}}function Md(e){let t;return{c(){t=A("h5"),t.textContent="⚠️ No sources loaded",h(t,"class","bold")},m(n,l){O(n,t,l)},p:X,i:X,o:X,d(n){n&&P(t)}}}function Fd(e){let t;return{c(){t=A("h5"),t.textContent="📖 Loading...",h(t,"class","bold")},m(n,l){O(n,t,l)},p:X,i:X,o:X,d(n){n&&P(t)}}}function Dd(e){let t;return{c(){t=A("h5"),t.textContent="⚠️ No Retrieval Sources selected or received",h(t,"class","bold")},m(n,l){O(n,t,l)},p:X,i:X,o:X,d(n){n&&P(t)}}}function Id(e){let t;return{c(){t=A("span"),t.textContent="⌄"},m(n,l){O(n,t,l)},d(n){n&&P(t)}}}function Nd(e){let t;return{c(){t=A("span"),t.textContent="⌃"},m(n,l){O(n,t,l)},d(n){n&&P(t)}}}function vi(e){let t,n,l=e[0],o=[];for(let s=0;s<l.length;s+=1)o[s]=bi(mi(e,l,s));const r=s=>q(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=ke()},m(s,u){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,u);O(s,t,u),n=!0},p(s,u){if(u&3){l=s[0];let a;for(a=0;a<l.length;a+=1){const f=mi(s,l,a);o[a]?(o[a].p(f,u),z(o[a],1)):(o[a]=bi(f),o[a].c(),z(o[a],1),o[a].m(t.parentNode,t))}for(_e(),a=l.length;a<o.length;a+=1)r(a);ve()}},i(s){if(!n){for(let u=0;u<l.length;u+=1)z(o[u]);n=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)q(o[u]);n=!1},d(s){pe(o,s),s&&P(t)}}}function bi(e){let t,n;return t=new Rd({props:{source:e[4],source_content:e[1][e[6]],i:e[6]}}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&1&&(r.source=l[4]),o&2&&(r.source_content=l[1][l[6]]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Pd(e){let t,n,l=e[0]!==void 0&&_i(e);return{c(){t=A("div"),l&&l.c(),h(t,"class","sources svelte-1r759df")},m(o,r){O(o,t,r),l&&l.m(t,null),n=!0},p(o,[r]){o[0]!==void 0?l?(l.p(o,r),r&1&&z(l,1)):(l=_i(o),l.c(),z(l,1),l.m(t,null)):l&&(_e(),q(l,1,1,()=>{l=null}),ve())},i(o){n||(z(l),n=!0)},o(o){q(l),n=!1},d(o){o&&P(t),l&&l.d()}}}function Od(e,t,n){let{sources:l=[]}=t,{source_content:o=[]}=t,r=!1;const s=()=>n(2,r=!r);return e.$$set=u=>{"sources"in u&&n(0,l=u.sources),"source_content"in u&&n(1,o=u.source_content)},[l,o,r,s]}class Td extends fe{constructor(t){super(),ce(this,t,Od,Pd,ue,{sources:0,source_content:1})}}function wi(e,t,n){const l=e.slice();return l[4]=t[n],l}function yi(e,t,n){const l=e.slice();return l[4]=t[n],l}function ki(e){let t,n,l,o=e[4].label+"",r,s,u,a,f;return{c(){t=A("li"),n=A("span"),l=A("h5"),r=L(o),s=N(),h(l,"class","bold"),h(n,"class","svelte-iwm583"),h(t,"class",u=lt(e[0]===e[4].value?"active":"")+" svelte-iwm583")},m(c,d){O(c,t,d),b(t,n),b(n,l),b(l,r),b(t,s),a||(f=B(n,"click",function(){Ve(e[3](e[4].value))&&e[3](e[4].value).apply(this,arguments)}),a=!0)},p(c,d){e=c,d&2&&o!==(o=e[4].label+"")&&J(r,o),d&3&&u!==(u=lt(e[0]===e[4].value?"active":"")+" svelte-iwm583")&&h(t,"class",u)},d(c){c&&P(t),a=!1,f()}}}function Si(e){let t,n,l,o;const r=[e[2]];var s=e[4].component;function u(a){let f={};for(let c=0;c<r.length;c+=1)f=An(f,r[c]);return{props:f}}return s&&(n=Mt(s,u())),{c(){t=A("div"),n&&le(n.$$.fragment),l=N(),h(t,"class","box svelte-iwm583")},m(a,f){O(a,t,f),n&&ee(n,t,null),b(t,l),o=!0},p(a,f){const c=f&4?ua(r,[fa(a[2])]):{};if(f&2&&s!==(s=a[4].component)){if(n){_e();const d=n;q(d.$$.fragment,1,0,()=>{te(d,1)}),ve()}s?(n=Mt(s,u()),le(n.$$.fragment),z(n.$$.fragment,1),ee(n,t,l)):n=null}else s&&n.$set(c)},i(a){o||(n&&z(n.$$.fragment,a),o=!0)},o(a){n&&q(n.$$.fragment,a),o=!1},d(a){a&&P(t),n&&te(n)}}}function Ci(e){let t,n,l=e[0]==e[4].value&&Si(e);return{c(){l&&l.c(),t=ke()},m(o,r){l&&l.m(o,r),O(o,t,r),n=!0},p(o,r){o[0]==o[4].value?l?(l.p(o,r),r&3&&z(l,1)):(l=Si(o),l.c(),z(l,1),l.m(t.parentNode,t)):l&&(_e(),q(l,1,1,()=>{l=null}),ve())},i(o){n||(z(l),n=!0)},o(o){q(l),n=!1},d(o){l&&l.d(o),o&&P(t)}}}function zd(e){let t,n,l,o,r=e[1],s=[];for(let c=0;c<r.length;c+=1)s[c]=ki(yi(e,r,c));let u=e[1],a=[];for(let c=0;c<u.length;c+=1)a[c]=Ci(wi(e,u,c));const f=c=>q(a[c],1,1,()=>{a[c]=null});return{c(){t=A("ul");for(let c=0;c<s.length;c+=1)s[c].c();n=N();for(let c=0;c<a.length;c+=1)a[c].c();l=ke(),h(t,"class","svelte-iwm583")},m(c,d){O(c,t,d);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(t,null);O(c,n,d);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(c,d);O(c,l,d),o=!0},p(c,[d]){if(d&11){r=c[1];let g;for(g=0;g<r.length;g+=1){const p=yi(c,r,g);s[g]?s[g].p(p,d):(s[g]=ki(p),s[g].c(),s[g].m(t,null))}for(;g<s.length;g+=1)s[g].d(1);s.length=r.length}if(d&7){u=c[1];let g;for(g=0;g<u.length;g+=1){const p=wi(c,u,g);a[g]?(a[g].p(p,d),z(a[g],1)):(a[g]=Ci(p),a[g].c(),z(a[g],1),a[g].m(l.parentNode,l))}for(_e(),g=u.length;g<a.length;g+=1)f(g);ve()}},i(c){if(!o){for(let d=0;d<u.length;d+=1)z(a[d]);o=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)q(a[d]);o=!1},d(c){c&&P(t),pe(s,c),c&&P(n),pe(a,c),c&&P(l)}}}function Vd(e,t,n){let{items:l=[]}=t,{activeTabValue:o=1}=t,{tabProps:r={}}=t;const s=u=>()=>n(0,o=u);return e.$$set=u=>{"items"in u&&n(1,l=u.items),"activeTabValue"in u&&n(0,o=u.activeTabValue),"tabProps"in u&&n(2,r=u.tabProps)},[o,l,r,s]}class qd extends fe{constructor(t){super(),ce(this,t,Vd,zd,ue,{items:1,activeTabValue:0,tabProps:2})}}function $i(e){let t;return{c(){t=L("Press ENTER to autofill with the RAG answer.")},m(n,l){O(n,t,l)},d(n){n&&P(t)}}}function Ld(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m=e[0].edited_answer===al&&$i();return{c(){t=A("form"),n=A("textarea"),o=N(),r=A("div"),s=A("div"),m&&m.c(),u=N(),a=A("div"),f=A("button"),f.textContent="Update",c=N(),d=A("button"),d.textContent="Reset",h(n,"placeholder",l=e[0].answer),h(s,"class","note svelte-i9wciy"),h(r,"class","button-container svelte-i9wciy")},m(_,v){O(_,t,v),b(t,n),Ke(n,e[0].edited_answer),e[6](n),b(t,o),b(t,r),b(r,s),m&&m.m(s,null),b(r,u),b(r,a),b(a,f),b(a,c),b(a,d),g||(p=[B(n,"input",e[5]),B(n,"keydown",e[4]),B(f,"click",e[2]),B(d,"click",e[3])],g=!0)},p(_,[v]){v&1&&l!==(l=_[0].answer)&&h(n,"placeholder",l),v&1&&Ke(n,_[0].edited_answer),_[0].edited_answer===al?m||(m=$i(),m.c(),m.m(s,null)):m&&(m.d(1),m=null)},i:X,o:X,d(_){_&&P(t),e[6](null),m&&m.d(),g=!1,he(p)}}}const al="";function Hd(e,t,n){let{message:l={}}=t,o;const r=async d=>{const g={id:l.id,new_answer:d},p=await fetch("/chat/rag_table/update_answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(p.ok)console.log("Answer updated successfully",p),n(0,l.edited_answer=d,l);else{const m=await p.text();alert(m)}},s=d=>{d.preventDefault(),r(l.edited_answer)},u=d=>{d.preventDefault(),r(al)},a=d=>{d.key=="Enter"&&l.edited_answer===al&&(d.preventDefault(),console.log("ENTER"),n(0,l.edited_answer=l.answer,l))};dt(function(){o.focus()});function f(){l.edited_answer=this.value,n(0,l)}function c(d){nt[d?"unshift":"push"](()=>{o=d,n(1,o)})}return e.$$set=d=>{"message"in d&&n(0,l=d.message)},[l,o,s,u,a,f,c]}class Gd extends fe{constructor(t){super(),ce(this,t,Hd,Ld,ue,{message:0})}}function Ai(e,t,n){const l=e.slice();return l[20]=t[n],l[22]=n,l}function Ri(e){let t,n,l,o,r,s,u,a;return{c(){t=A("div"),n=A("h5"),n.textContent="Vote Feedback Instructions",l=N(),o=A("p"),o.innerHTML=`Ask a question to receive an answer from the chatbot. If the response is
        satisfactory, click on the <span class="inline-button green svelte-vgv4ev">👍</span>
        button. If the response is not satisfactory, click on the
        <span class="inline-button red svelte-vgv4ev">👎</span> button.`,r=N(),s=A("button"),s.textContent="Download Data",h(n,"class","underline bold svelte-vgv4ev"),h(o,"class","svelte-vgv4ev"),h(s,"class","svelte-vgv4ev"),h(t,"class","instructions svelte-vgv4ev")},m(f,c){O(f,t,c),b(t,n),b(t,l),b(t,o),b(t,r),b(t,s),u||(a=B(s,"click",e[10]),u=!0)},p:X,d(f){f&&P(t),u=!1,a()}}}function Ei(e,t){let n,l,o,r,s,u,a,f,c,d=t[20].question+"",g,p,m,_,v,w,y,C,E,S,F,$,R,k,M,I;return E=new qd({props:{items:t[8],tabProps:{message:t[20],feedback:t[0],index:t[22]}}}),F=new Td({props:{sources:t[20].source,source_content:t[20].source_content}}),{key:e,first:null,c(){n=A("div"),l=A("div"),o=A("div"),r=N(),s=A("div"),u=A("div"),a=A("h5"),a.textContent="Question:",f=N(),c=A("p"),g=L(d),p=N(),m=A("div"),_=A("p"),_.textContent="ℹ️ Retrieval Sources",w=N(),y=A("div"),C=A("div"),le(E.$$.fragment),S=N(),le(F.$$.fragment),$=N(),h(o,"class","avatar"),h(a,"class","bold"),h(_,"class","bold"),h(m,"class","rag-sources svelte-vgv4ev"),h(u,"class","question svelte-vgv4ev"),h(C,"class","answer svelte-vgv4ev"),h(y,"class","answers svelte-vgv4ev"),h(s,"class","message-content svelte-vgv4ev"),h(l,"class","chat-message-center svelte-vgv4ev"),h(n,"class","chat-message svelte-vgv4ev"),this.first=n},m(D,V){O(D,n,V),b(n,l),b(l,o),b(l,r),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,g),b(u,p),b(u,m),b(m,_),b(s,w),b(s,y),b(y,C),ee(E,C,null),b(s,S),ee(F,s,null),b(n,$),k=!0,M||(I=[Lt(v=Ra.call(null,_,Mi(t[20]))),Lt(R=Bd.call(null,n,t[22]===t[5].length-1))],M=!0)},p(D,V){t=D,(!k||V&32)&&d!==(d=t[20].question+"")&&J(g,d),v&&Ve(v.update)&&V&32&&v.update.call(null,Mi(t[20]));const T={};V&33&&(T.tabProps={message:t[20],feedback:t[0],index:t[22]}),E.$set(T);const x={};V&32&&(x.sources=t[20].source),V&32&&(x.source_content=t[20].source_content),F.$set(x),R&&Ve(R.update)&&V&32&&R.update.call(null,t[22]===t[5].length-1)},i(D){k||(z(E.$$.fragment,D),z(F.$$.fragment,D),k=!0)},o(D){q(E.$$.fragment,D),q(F.$$.fragment,D),k=!1},d(D){D&&P(n),te(E),te(F),M=!1,he(I)}}}function jd(e){let t,n,l,o,r,s,u,a,f=[],c=new Map,d,g,p,m,_,v,w,y,C,E=(e[2]?e[4]:"Send")+"",S,F,$,R,k,M,I;function D(G){e[13](G)}let V={table:"rag_table"};e[3]!==void 0&&(V.showModal=e[3]),t=new No({props:V}),nt.push(()=>En(t,"showModal",D));let T=e[0]&&Ri(e),x=e[5];const W=G=>G[22];for(let G=0;G<x.length;G+=1){let K=Ai(e,x,G),U=W(K);c.set(U,f[G]=Ei(U,K))}return m=new kd({props:{documents:e[6]}}),{c(){le(t.$$.fragment),l=N(),o=A("div"),T&&T.c(),r=N(),s=A("div"),u=A("section"),a=A("div");for(let G=0;G<f.length;G+=1)f[G].c();d=N(),g=A("div"),p=A("div"),le(m.$$.fragment),_=N(),v=A("form"),w=A("input"),y=N(),C=A("button"),S=L(E),$=N(),R=A("p"),R.textContent="Note - may produce inaccurate information.",h(a,"class","chat-log svelte-vgv4ev"),h(u,"class","chatbox svelte-vgv4ev"),h(w,"class","chat-input-textarea svelte-vgv4ev"),h(w,"placeholder","Type Question Here"),h(C,"class",F="btnyousend "+(e[1]===""?"":"active")+" svelte-vgv4ev"),h(C,"type","submit"),h(v,"class","chat-input-form svelte-vgv4ev"),h(p,"class","chat-and-question svelte-vgv4ev"),h(R,"class","message svelte-vgv4ev"),h(g,"class","chat-input-holder svelte-vgv4ev"),h(s,"class","ranked-chat svelte-vgv4ev"),ye(s,"grid-column",e[0]?"span 1":"span 2"),h(o,"class","ranked-feedback-container svelte-vgv4ev")},m(G,K){ee(t,G,K),O(G,l,K),O(G,o,K),T&&T.m(o,null),b(o,r),b(o,s),b(s,u),b(u,a);for(let U=0;U<f.length;U+=1)f[U]&&f[U].m(a,null);b(s,d),b(s,g),b(g,p),ee(m,p,null),b(p,_),b(p,v),b(v,w),Ke(w,e[1]),b(v,y),b(v,C),b(C,S),b(g,$),b(g,R),k=!0,M||(I=[B(w,"input",e[14]),B(v,"submit",e[9])],M=!0)},p(G,[K]){const U={};!n&&K&8&&(n=!0,U.showModal=G[3],Rn(()=>n=!1)),t.$set(U),G[0]?T?T.p(G,K):(T=Ri(G),T.c(),T.m(o,r)):T&&(T.d(1),T=null),K&289&&(x=G[5],_e(),f=vt(f,K,W,1,G,x,c,a,Mo,Ei,null,Ai),ve());const Y={};K&64&&(Y.documents=G[6]),m.$set(Y),K&2&&w.value!==G[1]&&Ke(w,G[1]),(!k||K&20)&&E!==(E=(G[2]?G[4]:"Send")+"")&&J(S,E),(!k||K&2&&F!==(F="btnyousend "+(G[1]===""?"":"active")+" svelte-vgv4ev"))&&h(C,"class",F),K&1&&ye(s,"grid-column",G[0]?"span 1":"span 2")},i(G){if(!k){z(t.$$.fragment,G);for(let K=0;K<x.length;K+=1)z(f[K]);z(m.$$.fragment,G),k=!0}},o(G){q(t.$$.fragment,G);for(let K=0;K<f.length;K+=1)q(f[K]);q(m.$$.fragment,G),k=!1},d(G){te(t,G),G&&P(l),G&&P(o),T&&T.d();for(let K=0;K<f.length;K+=1)f[K].d();te(m),M=!1,he(I)}}}function Bd(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function Mi(e){return e.rag_sources.length===0?"No Sources":e.rag_sources.join(", ")}function xd(e,t,n){let l,o,r,s;ae(e,je,$=>n(5,o=$)),ae(e,gt,$=>n(16,r=$));let{feedback:u=!1}=t,{is_retrieval:a=!1}=t;const f=Ie([]);ae(e,f,$=>n(6,s=$));let c="",d="",g=!1,p=!1,m=[{label:"Answer",value:1,component:$a},{label:"Modified Answer",value:2,component:Gd}];async function _(){await v(),Fe(gt,r=new Set(s.map($=>$.name)),r),gt.set(new Set(r))}dt(()=>{w(),_()});async function v(){const R=await(await fetch("/retrieval/file/get")).json();console.log("data",R.files);const M=R.files.map((I,D)=>({id:String(D),name:I.name}));console.log("files",M),Fe(f,s=[...M],s)}async function w(){const k=(await(await fetch("/chat/rag_table/retrieve")).json()).rows;console.log("Got data from db",k);const M=k.map(I=>({id:I[0],question:I[1],answer:I[2],edited_answer:I[3],vote_status:I[4],rag_sources:I[5],source:I[6],source_content:I[7]}));Fe(je,o=[...M],o)}const y=async $=>{$.preventDefault(),c=d,n(1,d=""),n(2,g=!0);const R=[...r];let k={id:o.length+1,question:c,answer:"Loading...",rag_sources:R,vote_status:"na",source:["Loading..."],source_content:["Loading..."]};Fe(je,o=[...o,k],o);const M=a?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c,file_names:R})}):await fetch(`/chat/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c})});if(M.ok){const I=await M.json();console.log("response data",I),k.answer=I.answer,k.source=I.source,k.source_content=I.source_content,je.update(D=>(D[D.length-1]=k,D))}else{const I=await M.text();alert(I)}n(2,g=!1)};let C=0;setInterval(()=>{n(12,C=(C+1)%4)},200);function E(){n(3,p=!0)}function S($){p=$,n(3,p)}function F(){d=this.value,n(1,d)}return e.$$set=$=>{"feedback"in $&&n(0,u=$.feedback),"is_retrieval"in $&&n(11,a=$.is_retrieval)},e.$$.update=()=>{e.$$.dirty&4096&&n(4,l=".".repeat(C).padEnd(3))},[u,d,g,p,l,o,s,f,m,y,E,a,C,S,F]}class Wd extends fe{constructor(t){super(),ce(this,t,xd,jd,ue,{feedback:0,is_retrieval:11})}}function Fi(e){let t,n;return t=new Po({props:{is_retrieval:e[1]}}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Di(e){let t,n;return t=new Po({props:{feedback:!0,is_retrieval:e[1]}}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Ii(e){let t,n;return t=new Wd({props:{feedback:!1,is_retrieval:e[1]}}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Ni(e){let t,n,l,o;const r=[Xd,Ud],s=[];function u(a,f){return a[1]?0:1}return t=u(e),n=s[t]=r[t](e),{c(){n.c(),l=ke()},m(a,f){s[t].m(a,f),O(a,l,f),o=!0},p(a,f){let c=t;t=u(a),t===c?s[t].p(a,f):(_e(),q(s[c],1,1,()=>{s[c]=null}),ve(),n=s[t],n?n.p(a,f):(n=s[t]=r[t](a),n.c()),z(n,1),n.m(l.parentNode,l))},i(a){o||(z(n),o=!0)},o(a){q(n),o=!1},d(a){s[t].d(a),a&&P(l)}}}function Ud(e){let t,n;return t=new pd({}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p:X,i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Xd(e){let t,n;return t=new Po({props:{feedback:!0,is_retrieval:e[1]}}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Yd(e){let t,n,l,o,r,s=!e[0]&&Fi(e),u=e[0]==="vote"&&Di(e),a=e[0]==="rag"&&Ii(e),f=e[0]==="rank"&&Ni(e);return{c(){s&&s.c(),t=N(),u&&u.c(),n=N(),a&&a.c(),l=N(),f&&f.c(),o=ke()},m(c,d){s&&s.m(c,d),O(c,t,d),u&&u.m(c,d),O(c,n,d),a&&a.m(c,d),O(c,l,d),f&&f.m(c,d),O(c,o,d),r=!0},p(c,[d]){c[0]?s&&(_e(),q(s,1,1,()=>{s=null}),ve()):s?(s.p(c,d),d&1&&z(s,1)):(s=Fi(c),s.c(),z(s,1),s.m(t.parentNode,t)),c[0]==="vote"?u?(u.p(c,d),d&1&&z(u,1)):(u=Di(c),u.c(),z(u,1),u.m(n.parentNode,n)):u&&(_e(),q(u,1,1,()=>{u=null}),ve()),c[0]==="rag"?a?(a.p(c,d),d&1&&z(a,1)):(a=Ii(c),a.c(),z(a,1),a.m(l.parentNode,l)):a&&(_e(),q(a,1,1,()=>{a=null}),ve()),c[0]==="rank"?f?(f.p(c,d),d&1&&z(f,1)):(f=Ni(c),f.c(),z(f,1),f.m(o.parentNode,o)):f&&(_e(),q(f,1,1,()=>{f=null}),ve())},i(c){r||(z(s),z(u),z(a),z(f),r=!0)},o(c){q(s),q(u),q(a),q(f),r=!1},d(c){s&&s.d(c),c&&P(t),u&&u.d(c),c&&P(n),a&&a.d(c),c&&P(l),f&&f.d(c),c&&P(o)}}}function Qd(e,t,n){let{feedback:l}=t,{is_retrieval:o}=t;return e.$$set=r=>{"feedback"in r&&n(0,l=r.feedback),"is_retrieval"in r&&n(1,o=r.is_retrieval)},[l,o]}class Kd extends fe{constructor(t){super(),ce(this,t,Qd,Yd,ue,{feedback:0,is_retrieval:1})}}function Pi(e,t,n){const l=e.slice();return l[2]=t[n],l}function Oi(e){let t,n=e[2]+"",l,o;return{c(){t=A("option"),l=L(n),t.__value=o=e[2],t.value=t.__value},m(r,s){O(r,t,s),b(t,l)},p(r,s){s&1&&n!==(n=r[2]+"")&&J(l,n),s&1&&o!==(o=r[2])&&(t.__value=o,t.value=t.__value)},d(r){r&&P(t)}}}function Jd(e){let t,n=e[0],l=[];for(let o=0;o<n.length;o+=1)l[o]=Oi(Pi(e,n,o));return{c(){t=A("select");for(let o=0;o<l.length;o+=1)l[o].c()},m(o,r){O(o,t,r);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null)},p(o,[r]){if(r&1){n=o[0];let s;for(s=0;s<n.length;s+=1){const u=Pi(o,n,s);l[s]?l[s].p(u,r):(l[s]=Oi(u),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},i:X,o:X,d(o){o&&P(t),pe(l,o)}}}function Zd(e,t,n){let{data_endpoint:l}=t,o=[];return dt(async()=>{const r=await fetch(`/data/${l}`);n(0,o=await r.json())}),e.$$set=r=>{"data_endpoint"in r&&n(1,l=r.data_endpoint)},[o,l]}class eh extends fe{constructor(t){super(),ce(this,t,Zd,Jd,ue,{data_endpoint:1})}}function Jt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function th(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ea(e){let t,n,l;e.length!==2?(t=Jt,n=(u,a)=>Jt(e(u),a),l=(u,a)=>e(u)-a):(t=e===Jt||e===th?e:nh,n=e,l=e);function o(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(u[d],a)<0?f=d+1:c=d}while(f<c)}return f}function r(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(u[d],a)<=0?f=d+1:c=d}while(f<c)}return f}function s(u,a,f=0,c=u.length){const d=o(u,a,f,c-1);return d>f&&l(u[d-1],a)>-l(u[d],a)?d-1:d}return{left:o,center:s,right:r}}function nh(){return 0}function lh(e){return e===null?NaN:+e}function*oh(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let l of e)(l=t(l,++n,e))!=null&&(l=+l)>=l&&(yield l)}}const ih=Ea(Jt),rh=ih.right;Ea(lh).center;const Ma=rh;function sh(e,t){let n=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&++n;else{let l=-1;for(let o of e)(o=t(o,++l,e))!=null&&(o=+o)>=o&&++n}return n}function ah(e,t){let n=0,l,o=0,r=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(l=s-o,o+=l/++n,r+=l*(s-o));else{let s=-1;for(let u of e)(u=t(u,++s,e))!=null&&(u=+u)>=u&&(l=u-o,o+=l/++n,r+=l*(u-o))}if(n>1)return r/(n-1)}function uh(e,t){const n=ah(e,t);return n&&Math.sqrt(n)}function wn(e,t){let n,l;if(t===void 0)for(const o of e)o!=null&&(n===void 0?o>=o&&(n=l=o):(n>o&&(n=o),l<o&&(l=o)));else{let o=-1;for(let r of e)(r=t(r,++o,e))!=null&&(n===void 0?r>=r&&(n=l=r):(n>r&&(n=r),l<r&&(l=r)))}return[n,l]}class Ti extends Map{constructor(t,n=dh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[l,o]of t)this.set(l,o)}get(t){return super.get(zi(this,t))}has(t){return super.has(zi(this,t))}set(t,n){return super.set(fh(this,t),n)}delete(t){return super.delete(ch(this,t))}}function zi({_intern:e,_key:t},n){const l=t(n);return e.has(l)?e.get(l):n}function fh({_intern:e,_key:t},n){const l=t(n);return e.has(l)?e.get(l):(e.set(l,n),n)}function ch({_intern:e,_key:t},n){const l=t(n);return e.has(l)&&(n=e.get(l),e.delete(l)),n}function dh(e){return e!==null&&typeof e=="object"?e.valueOf():e}function hh(e){return e}function gh(e=Jt){if(e===Jt)return Fa;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const l=e(t,n);return l||l===0?l:(e(n,n)===0)-(e(t,t)===0)}}function Fa(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var ph=Array.prototype,mh=ph.slice;function Ol(e){return()=>e}const _h=Math.sqrt(50),vh=Math.sqrt(10),bh=Math.sqrt(2);function ul(e,t,n){const l=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(l)),r=l/Math.pow(10,o),s=r>=_h?10:r>=vh?5:r>=bh?2:1;let u,a,f;return o<0?(f=Math.pow(10,-o)/s,u=Math.round(e*f),a=Math.round(t*f),u/f<e&&++u,a/f>t&&--a,f=-f):(f=Math.pow(10,o)*s,u=Math.round(e/f),a=Math.round(t/f),u*f<e&&++u,a*f>t&&--a),a<u&&.5<=n&&n<2?ul(e,t,n*2):[u,a,f]}function Da(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const l=t<e,[o,r,s]=l?ul(t,e,n):ul(e,t,n);if(!(r>=o))return[];const u=r-o+1,a=new Array(u);if(l)if(s<0)for(let f=0;f<u;++f)a[f]=(r-f)/-s;else for(let f=0;f<u;++f)a[f]=(r-f)*s;else if(s<0)for(let f=0;f<u;++f)a[f]=(o+f)/-s;else for(let f=0;f<u;++f)a[f]=(o+f)*s;return a}function ln(e,t,n){return t=+t,e=+e,n=+n,ul(e,t,n)[2]}function wh(e,t,n){t=+t,e=+e,n=+n;const l=t<e,o=l?ln(t,e,n):ln(e,t,n);return(l?-1:1)*(o<0?1/-o:o)}function yh(e,t,n){let l;for(;;){const o=ln(e,t,n);if(o===l||o===0||!isFinite(o))return[e,t];o>0?(e=Math.floor(e/o)*o,t=Math.ceil(t/o)*o):o<0&&(e=Math.ceil(e*o)/o,t=Math.floor(t*o)/o),l=o}}function kh(e){return Math.max(1,Math.ceil(Math.log(sh(e))/Math.LN2)+1)}function Ia(){var e=hh,t=wn,n=kh;function l(o){Array.isArray(o)||(o=Array.from(o));var r,s=o.length,u,a,f=new Array(s);for(r=0;r<s;++r)f[r]=e(o[r],r,o);var c=t(f),d=c[0],g=c[1],p=n(f,d,g);if(!Array.isArray(p)){const C=g,E=+p;if(t===wn&&([d,g]=yh(d,g,E)),p=Da(d,g,E),p[0]<=d&&(a=ln(d,g,E)),p[p.length-1]>=g)if(C>=g&&t===wn){const S=ln(d,g,E);isFinite(S)&&(S>0?g=(Math.floor(g/S)+1)*S:S<0&&(g=(Math.ceil(g*-S)+1)/-S))}else p.pop()}for(var m=p.length,_=0,v=m;p[_]<=d;)++_;for(;p[v-1]>g;)--v;(_||v<m)&&(p=p.slice(_,v),m=v-_);var w=new Array(m+1),y;for(r=0;r<=m;++r)y=w[r]=[],y.x0=r>0?p[r-1]:d,y.x1=r<m?p[r]:g;if(isFinite(a)){if(a>0)for(r=0;r<s;++r)(u=f[r])!=null&&d<=u&&u<=g&&w[Math.min(m,Math.floor((u-d)/a))].push(o[r]);else if(a<0){for(r=0;r<s;++r)if((u=f[r])!=null&&d<=u&&u<=g){const C=Math.floor((d-u)*a);w[Math.min(m,C+(p[C]<=u))].push(o[r])}}}else for(r=0;r<s;++r)(u=f[r])!=null&&d<=u&&u<=g&&w[Ma(p,u,0,m)].push(o[r]);return w}return l.value=function(o){return arguments.length?(e=typeof o=="function"?o:Ol(o),l):e},l.domain=function(o){return arguments.length?(t=typeof o=="function"?o:Ol([o[0],o[1]]),l):t},l.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:Ol(Array.isArray(o)?mh.call(o):o),l):n},l}function bt(e,t){let n;if(t===void 0)for(const l of e)l!=null&&(n<l||n===void 0&&l>=l)&&(n=l);else{let l=-1;for(let o of e)(o=t(o,++l,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function so(e,t){let n;if(t===void 0)for(const l of e)l!=null&&(n>l||n===void 0&&l>=l)&&(n=l);else{let l=-1;for(let o of e)(o=t(o,++l,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function Na(e,t,n=0,l=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),l=Math.floor(Math.min(e.length-1,l)),!(n<=t&&t<=l))return e;for(o=o===void 0?Fa:gh(o);l>n;){if(l-n>600){const a=l-n+1,f=t-n+1,c=Math.log(a),d=.5*Math.exp(2*c/3),g=.5*Math.sqrt(c*d*(a-d)/a)*(f-a/2<0?-1:1),p=Math.max(n,Math.floor(t-f*d/a+g)),m=Math.min(l,Math.floor(t+(a-f)*d/a+g));Na(e,t,p,m,o)}const r=e[t];let s=n,u=l;for(dn(e,n,t),o(e[l],r)>0&&dn(e,n,l);s<u;){for(dn(e,s,u),++s,--u;o(e[s],r)<0;)++s;for(;o(e[u],r)>0;)--u}o(e[n],r)===0?dn(e,n,u):(++u,dn(e,u,l)),u<=t&&(n=u+1),t<=u&&(l=u-1)}return e}function dn(e,t,n){const l=e[t];e[t]=e[n],e[n]=l}function Sh(e,t,n){if(e=Float64Array.from(oh(e,n)),!(!(l=e.length)||isNaN(t=+t))){if(t<=0||l<2)return so(e);if(t>=1)return bt(e);var l,o=(l-1)*t,r=Math.floor(o),s=bt(Na(e,r).subarray(0,r+1)),u=so(e.subarray(r+1));return s+(u-s)*(o-r)}}function Ch(e,t){let n=0,l=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(++n,l+=o);else{let o=-1;for(let r of e)(r=t(r,++o,e))!=null&&(r=+r)>=r&&(++n,l+=r)}if(n)return l/n}function $h(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var l=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,r=new Array(o);++l<o;)r[l]=e+l*n;return r}function Ah(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}function on(e){return e=fl(Math.abs(e)),e?e[1]:NaN}function Rh(e,t){return function(n,l){for(var o=n.length,r=[],s=0,u=e[0],a=0;o>0&&u>0&&(a+u+1>l&&(u=Math.max(1,l-a)),r.push(n.substring(o-=u,o+u)),!((a+=u+1)>l));)u=e[s=(s+1)%e.length];return r.reverse().join(t)}}function Eh(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Mh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cl(e){if(!(t=Mh.exec(e)))throw new Error("invalid format: "+e);var t;return new Oo({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}cl.prototype=Oo.prototype;function Oo(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Oo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fh(e){e:for(var t=e.length,n=1,l=-1,o;n<t;++n)switch(e[n]){case".":l=o=n;break;case"0":l===0&&(l=n),o=n;break;default:if(!+e[n])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(o+1):e}var Pa;function Dh(e,t){var n=fl(e,t);if(!n)return e+"";var l=n[0],o=n[1],r=o-(Pa=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,s=l.length;return r===s?l:r>s?l+new Array(r-s+1).join("0"):r>0?l.slice(0,r)+"."+l.slice(r):"0."+new Array(1-r).join("0")+fl(e,Math.max(0,t+r-1))[0]}function Vi(e,t){var n=fl(e,t);if(!n)return e+"";var l=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+l:l.length>o+1?l.slice(0,o+1)+"."+l.slice(o+1):l+new Array(o-l.length+2).join("0")}const qi={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ah,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Vi(e*100,t),r:Vi,s:Dh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Li(e){return e}var Hi=Array.prototype.map,Gi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ih(e){var t=e.grouping===void 0||e.thousands===void 0?Li:Rh(Hi.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?Li:Eh(Hi.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function f(d){d=cl(d);var g=d.fill,p=d.align,m=d.sign,_=d.symbol,v=d.zero,w=d.width,y=d.comma,C=d.precision,E=d.trim,S=d.type;S==="n"?(y=!0,S="g"):qi[S]||(C===void 0&&(C=12),E=!0,S="g"),(v||g==="0"&&p==="=")&&(v=!0,g="0",p="=");var F=_==="$"?n:_==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",$=_==="$"?l:/[%p]/.test(S)?s:"",R=qi[S],k=/[defgprs%]/.test(S);C=C===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function M(I){var D=F,V=$,T,x,W;if(S==="c")V=R(I)+V,I="";else{I=+I;var G=I<0||1/I<0;if(I=isNaN(I)?a:R(Math.abs(I),C),E&&(I=Fh(I)),G&&+I==0&&m!=="+"&&(G=!1),D=(G?m==="("?m:u:m==="-"||m==="("?"":m)+D,V=(S==="s"?Gi[8+Pa/3]:"")+V+(G&&m==="("?")":""),k){for(T=-1,x=I.length;++T<x;)if(W=I.charCodeAt(T),48>W||W>57){V=(W===46?o+I.slice(T+1):I.slice(T))+V,I=I.slice(0,T);break}}}y&&!v&&(I=t(I,1/0));var K=D.length+I.length+V.length,U=K<w?new Array(w-K+1).join(g):"";switch(y&&v&&(I=t(U+I,U.length?w-V.length:1/0),U=""),p){case"<":I=D+I+V+U;break;case"=":I=D+U+I+V;break;case"^":I=U.slice(0,K=U.length>>1)+D+I+V+U.slice(K);break;default:I=U+D+I+V;break}return r(I)}return M.toString=function(){return d+""},M}function c(d,g){var p=f((d=cl(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(on(g)/3)))*3,_=Math.pow(10,-m),v=Gi[8+m/3];return function(w){return p(_*w)+v}}return{format:f,formatPrefix:c}}var Hn,yt,Oa;Nh({thousands:",",grouping:[3],currency:["$",""]});function Nh(e){return Hn=Ih(e),yt=Hn.format,Oa=Hn.formatPrefix,Hn}function Ph(e){return Math.max(0,-on(Math.abs(e)))}function Oh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(on(t)/3)))*3-on(Math.abs(e)))}function Th(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,on(t)-on(e))+1}function To(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function zh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ji=Symbol("implicit");function Dt(){var e=new Ti,t=[],n=[],l=ji;function o(r){let s=e.get(r);if(s===void 0){if(l!==ji)return l;e.set(r,s=t.push(r)-1)}return n[s%n.length]}return o.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new Ti;for(const s of r)e.has(s)||e.set(s,t.push(s)-1);return o},o.range=function(r){return arguments.length?(n=Array.from(r),o):n.slice()},o.unknown=function(r){return arguments.length?(l=r,o):l},o.copy=function(){return Dt(t,n).unknown(l)},To.apply(o,arguments),o}function Ht(){var e=Dt().unknown(void 0),t=e.domain,n=e.range,l=0,o=1,r,s,u=!1,a=0,f=0,c=.5;delete e.unknown;function d(){var g=t().length,p=o<l,m=p?o:l,_=p?l:o;r=(_-m)/Math.max(1,g-a+f*2),u&&(r=Math.floor(r)),m+=(_-m-r*(g-a))*c,s=r*(1-a),u&&(m=Math.round(m),s=Math.round(s));var v=$h(g).map(function(w){return m+r*w});return n(p?v.reverse():v)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?([l,o]=g,l=+l,o=+o,d()):[l,o]},e.rangeRound=function(g){return[l,o]=g,l=+l,o=+o,u=!0,d()},e.bandwidth=function(){return s},e.step=function(){return r},e.round=function(g){return arguments.length?(u=!!g,d()):u},e.padding=function(g){return arguments.length?(a=Math.min(1,f=+g),d()):a},e.paddingInner=function(g){return arguments.length?(a=Math.min(1,g),d()):a},e.paddingOuter=function(g){return arguments.length?(f=+g,d()):f},e.align=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),d()):c},e.copy=function(){return Ht(t(),[l,o]).round(u).paddingInner(a).paddingOuter(f).align(c)},To.apply(d(),arguments)}function Ta(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Ta(t())},e}function Bi(){return Ta(Ht.apply(null,arguments).paddingInner(1))}function zo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function za(e,t){var n=Object.create(e.prototype);for(var l in t)n[l]=t[l];return n}function On(){}var Dn=.7,dl=1/Dn,Zt="\\s*([+-]?\\d+)\\s*",In="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",st="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vh=/^#([0-9a-f]{3,8})$/,qh=new RegExp(`^rgb\\(${Zt},${Zt},${Zt}\\)$`),Lh=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),Hh=new RegExp(`^rgba\\(${Zt},${Zt},${Zt},${In}\\)$`),Gh=new RegExp(`^rgba\\(${st},${st},${st},${In}\\)$`),jh=new RegExp(`^hsl\\(${In},${st},${st}\\)$`),Bh=new RegExp(`^hsla\\(${In},${st},${st},${In}\\)$`),xi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zo(On,Nn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wi,formatHex:Wi,formatHex8:xh,formatHsl:Wh,formatRgb:Ui,toString:Ui});function Wi(){return this.rgb().formatHex()}function xh(){return this.rgb().formatHex8()}function Wh(){return Va(this).formatHsl()}function Ui(){return this.rgb().formatRgb()}function Nn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Xi(t):n===3?new Be(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qh.exec(e))?new Be(t[1],t[2],t[3],1):(t=Lh.exec(e))?new Be(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hh.exec(e))?Gn(t[1],t[2],t[3],t[4]):(t=Gh.exec(e))?Gn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=jh.exec(e))?Ki(t[1],t[2]/100,t[3]/100,1):(t=Bh.exec(e))?Ki(t[1],t[2]/100,t[3]/100,t[4]):xi.hasOwnProperty(e)?Xi(xi[e]):e==="transparent"?new Be(NaN,NaN,NaN,0):null}function Xi(e){return new Be(e>>16&255,e>>8&255,e&255,1)}function Gn(e,t,n,l){return l<=0&&(e=t=n=NaN),new Be(e,t,n,l)}function Uh(e){return e instanceof On||(e=Nn(e)),e?(e=e.rgb(),new Be(e.r,e.g,e.b,e.opacity)):new Be}function ao(e,t,n,l){return arguments.length===1?Uh(e):new Be(e,t,n,l??1)}function Be(e,t,n,l){this.r=+e,this.g=+t,this.b=+n,this.opacity=+l}zo(Be,ao,za(On,{brighter(e){return e=e==null?dl:Math.pow(dl,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Dn:Math.pow(Dn,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Be(qt(this.r),qt(this.g),qt(this.b),hl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yi,formatHex:Yi,formatHex8:Xh,formatRgb:Qi,toString:Qi}));function Yi(){return`#${zt(this.r)}${zt(this.g)}${zt(this.b)}`}function Xh(){return`#${zt(this.r)}${zt(this.g)}${zt(this.b)}${zt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qi(){const e=hl(this.opacity);return`${e===1?"rgb(":"rgba("}${qt(this.r)}, ${qt(this.g)}, ${qt(this.b)}${e===1?")":`, ${e})`}`}function hl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zt(e){return e=qt(e),(e<16?"0":"")+e.toString(16)}function Ki(e,t,n,l){return l<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new et(e,t,n,l)}function Va(e){if(e instanceof et)return new et(e.h,e.s,e.l,e.opacity);if(e instanceof On||(e=Nn(e)),!e)return new et;if(e instanceof et)return e;e=e.rgb();var t=e.r/255,n=e.g/255,l=e.b/255,o=Math.min(t,n,l),r=Math.max(t,n,l),s=NaN,u=r-o,a=(r+o)/2;return u?(t===r?s=(n-l)/u+(n<l)*6:n===r?s=(l-t)/u+2:s=(t-n)/u+4,u/=a<.5?r+o:2-r-o,s*=60):u=a>0&&a<1?0:s,new et(s,u,a,e.opacity)}function Yh(e,t,n,l){return arguments.length===1?Va(e):new et(e,t,n,l??1)}function et(e,t,n,l){this.h=+e,this.s=+t,this.l=+n,this.opacity=+l}zo(et,Yh,za(On,{brighter(e){return e=e==null?dl:Math.pow(dl,e),new et(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Dn:Math.pow(Dn,e),new et(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,l=n+(n<.5?n:1-n)*t,o=2*n-l;return new Be(Tl(e>=240?e-240:e+120,o,l),Tl(e,o,l),Tl(e<120?e+240:e-120,o,l),this.opacity)},clamp(){return new et(Ji(this.h),jn(this.s),jn(this.l),hl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hl(this.opacity);return`${e===1?"hsl(":"hsla("}${Ji(this.h)}, ${jn(this.s)*100}%, ${jn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ji(e){return e=(e||0)%360,e<0?e+360:e}function jn(e){return Math.max(0,Math.min(1,e||0))}function Tl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Vo=e=>()=>e;function Qh(e,t){return function(n){return e+n*t}}function Kh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(l){return Math.pow(e+l*t,n)}}function Jh(e){return(e=+e)==1?qa:function(t,n){return n-t?Kh(t,n,e):Vo(isNaN(t)?n:t)}}function qa(e,t){var n=t-e;return n?Qh(e,n):Vo(isNaN(e)?t:e)}const uo=function e(t){var n=Jh(t);function l(o,r){var s=n((o=ao(o)).r,(r=ao(r)).r),u=n(o.g,r.g),a=n(o.b,r.b),f=qa(o.opacity,r.opacity);return function(c){return o.r=s(c),o.g=u(c),o.b=a(c),o.opacity=f(c),o+""}}return l.gamma=e,l}(1);function Zh(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,l=t.slice(),o;return function(r){for(o=0;o<n;++o)l[o]=e[o]*(1-r)+t[o]*r;return l}}function eg(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function tg(e,t){var n=t?t.length:0,l=e?Math.min(n,e.length):0,o=new Array(l),r=new Array(n),s;for(s=0;s<l;++s)o[s]=Tn(e[s],t[s]);for(;s<n;++s)r[s]=t[s];return function(u){for(s=0;s<l;++s)r[s]=o[s](u);return r}}function ng(e,t){var n=new Date;return e=+e,t=+t,function(l){return n.setTime(e*(1-l)+t*l),n}}function gl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function lg(e,t){var n={},l={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Tn(e[o],t[o]):l[o]=t[o];return function(r){for(o in n)l[o]=n[o](r);return l}}var fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zl=new RegExp(fo.source,"g");function og(e){return function(){return e}}function ig(e){return function(t){return e(t)+""}}function rg(e,t){var n=fo.lastIndex=zl.lastIndex=0,l,o,r,s=-1,u=[],a=[];for(e=e+"",t=t+"";(l=fo.exec(e))&&(o=zl.exec(t));)(r=o.index)>n&&(r=t.slice(n,r),u[s]?u[s]+=r:u[++s]=r),(l=l[0])===(o=o[0])?u[s]?u[s]+=o:u[++s]=o:(u[++s]=null,a.push({i:s,x:gl(l,o)})),n=zl.lastIndex;return n<t.length&&(r=t.slice(n),u[s]?u[s]+=r:u[++s]=r),u.length<2?a[0]?ig(a[0].x):og(t):(t=a.length,function(f){for(var c=0,d;c<t;++c)u[(d=a[c]).i]=d.x(f);return u.join("")})}function Tn(e,t){var n=typeof t,l;return t==null||n==="boolean"?Vo(t):(n==="number"?gl:n==="string"?(l=Nn(t))?(t=l,uo):rg:t instanceof Nn?uo:t instanceof Date?ng:eg(t)?Zh:Array.isArray(t)?tg:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lg:gl)(e,t)}function La(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function sg(e){return function(){return e}}function ag(e){return+e}var Zi=[0,1];function $t(e){return e}function co(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:sg(isNaN(t)?NaN:.5)}function ug(e,t){var n;return e>t&&(n=e,e=t,t=n),function(l){return Math.max(e,Math.min(t,l))}}function fg(e,t,n){var l=e[0],o=e[1],r=t[0],s=t[1];return o<l?(l=co(o,l),r=n(s,r)):(l=co(l,o),r=n(r,s)),function(u){return r(l(u))}}function cg(e,t,n){var l=Math.min(e.length,t.length)-1,o=new Array(l),r=new Array(l),s=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<l;)o[s]=co(e[s],e[s+1]),r[s]=n(t[s],t[s+1]);return function(u){var a=Ma(e,u,1,l)-1;return r[a](o[a](u))}}function dg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hg(){var e=Zi,t=Zi,n=Tn,l,o,r,s=$t,u,a,f;function c(){var g=Math.min(e.length,t.length);return s!==$t&&(s=ug(e[0],e[g-1])),u=g>2?cg:fg,a=f=null,d}function d(g){return g==null||isNaN(g=+g)?r:(a||(a=u(e.map(l),t,n)))(l(s(g)))}return d.invert=function(g){return s(o((f||(f=u(t,e.map(l),gl)))(g)))},d.domain=function(g){return arguments.length?(e=Array.from(g,ag),c()):e.slice()},d.range=function(g){return arguments.length?(t=Array.from(g),c()):t.slice()},d.rangeRound=function(g){return t=Array.from(g),n=La,c()},d.clamp=function(g){return arguments.length?(s=g?!0:$t,c()):s!==$t},d.interpolate=function(g){return arguments.length?(n=g,c()):n},d.unknown=function(g){return arguments.length?(r=g,d):r},function(g,p){return l=g,o=p,c()}}function gg(){return hg()($t,$t)}function pg(e,t,n,l){var o=wh(e,t,n),r;switch(l=cl(l??",f"),l.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(r=Oh(o,s))&&(l.precision=r),Oa(l,s)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(r=Th(o,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=r-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(r=Ph(o))&&(l.precision=r-(l.type==="%")*2);break}}return yt(l)}function Ha(e){var t=e.domain;return e.ticks=function(n){var l=t();return Da(l[0],l[l.length-1],n??10)},e.tickFormat=function(n,l){var o=t();return pg(o[0],o[o.length-1],n??10,l)},e.nice=function(n){n==null&&(n=10);var l=t(),o=0,r=l.length-1,s=l[o],u=l[r],a,f,c=10;for(u<s&&(f=s,s=u,u=f,f=o,o=r,r=f);c-- >0;){if(f=ln(s,u,n),f===a)return l[o]=s,l[r]=u,t(l);if(f>0)s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f;else if(f<0)s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f;else break;a=f}return e},e}function Ye(){var e=gg();return e.copy=function(){return dg(e,Ye())},To.apply(e,arguments),Ha(e)}function mg(){var e=0,t=1,n,l,o,r,s=$t,u=!1,a;function f(d){return d==null||isNaN(d=+d)?a:s(o===0?.5:(d=(r(d)-n)*o,u?Math.max(0,Math.min(1,d)):d))}f.domain=function(d){return arguments.length?([e,t]=d,n=r(e=+e),l=r(t=+t),o=n===l?0:1/(l-n),f):[e,t]},f.clamp=function(d){return arguments.length?(u=!!d,f):u},f.interpolator=function(d){return arguments.length?(s=d,f):s};function c(d){return function(g){var p,m;return arguments.length?([p,m]=g,s=d(p,m),f):[s(0),s(1)]}}return f.range=c(Tn),f.rangeRound=c(La),f.unknown=function(d){return arguments.length?(a=d,f):a},function(d){return r=d,n=d(e),l=d(t),o=n===l?0:1/(l-n),f}}function _g(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ga(){var e=Ha(mg()($t));return e.copy=function(){return _g(e,Ga())},zh.apply(e,arguments)}function it(e){return function(){return e}}const ho=Math.PI,go=2*ho,Ot=1e-6,vg=go-Ot;function ja(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function bg(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ja;const n=10**t;return function(l){this._+=l[0];for(let o=1,r=l.length;o<r;++o)this._+=Math.round(arguments[o]*n)/n+l[o]}}class wg{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ja:bg(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,l,o){this._append`Q${+t},${+n},${this._x1=+l},${this._y1=+o}`}bezierCurveTo(t,n,l,o,r,s){this._append`C${+t},${+n},${+l},${+o},${this._x1=+r},${this._y1=+s}`}arcTo(t,n,l,o,r){if(t=+t,n=+n,l=+l,o=+o,r=+r,r<0)throw new Error(`negative radius: ${r}`);let s=this._x1,u=this._y1,a=l-t,f=o-n,c=s-t,d=u-n,g=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Ot)if(!(Math.abs(d*a-f*c)>Ot)||!r)this._append`L${this._x1=t},${this._y1=n}`;else{let p=l-s,m=o-u,_=a*a+f*f,v=p*p+m*m,w=Math.sqrt(_),y=Math.sqrt(g),C=r*Math.tan((ho-Math.acos((_+g-v)/(2*w*y)))/2),E=C/y,S=C/w;Math.abs(E-1)>Ot&&this._append`L${t+E*c},${n+E*d}`,this._append`A${r},${r},0,0,${+(d*p>c*m)},${this._x1=t+S*a},${this._y1=n+S*f}`}}arc(t,n,l,o,r,s){if(t=+t,n=+n,l=+l,s=!!s,l<0)throw new Error(`negative radius: ${l}`);let u=l*Math.cos(o),a=l*Math.sin(o),f=t+u,c=n+a,d=1^s,g=s?o-r:r-o;this._x1===null?this._append`M${f},${c}`:(Math.abs(this._x1-f)>Ot||Math.abs(this._y1-c)>Ot)&&this._append`L${f},${c}`,l&&(g<0&&(g=g%go+go),g>vg?this._append`A${l},${l},0,1,${d},${t-u},${n-a}A${l},${l},0,1,${d},${this._x1=f},${this._y1=c}`:g>Ot&&this._append`A${l},${l},0,${+(g>=ho)},${d},${this._x1=t+l*Math.cos(r)},${this._y1=n+l*Math.sin(r)}`)}rect(t,n,l,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${l=+l}v${+o}h${-l}Z`}toString(){return this._}}function yg(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const l=Math.floor(n);if(!(l>=0))throw new RangeError(`invalid digits: ${n}`);t=l}return e},()=>new wg(t)}function Ba(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xa(e){this._context=e}xa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function kg(e){return new xa(e)}function Sg(e){return e[0]}function Cg(e){return e[1]}function $g(e,t){var n=it(!0),l=null,o=kg,r=null,s=yg(u);e=typeof e=="function"?e:e===void 0?Sg:it(e),t=typeof t=="function"?t:t===void 0?Cg:it(t);function u(a){var f,c=(a=Ba(a)).length,d,g=!1,p;for(l==null&&(r=o(p=s())),f=0;f<=c;++f)!(f<c&&n(d=a[f],f,a))===g&&((g=!g)?r.lineStart():r.lineEnd()),g&&r.point(+e(d,f,a),+t(d,f,a));if(p)return r=null,p+""||null}return u.x=function(a){return arguments.length?(e=typeof a=="function"?a:it(+a),u):e},u.y=function(a){return arguments.length?(t=typeof a=="function"?a:it(+a),u):t},u.defined=function(a){return arguments.length?(n=typeof a=="function"?a:it(!!a),u):n},u.curve=function(a){return arguments.length?(o=a,l!=null&&(r=o(l)),u):o},u.context=function(a){return arguments.length?(a==null?l=r=null:r=o(l=a),u):l},u}function po(e,t){if((s=e.length)>1)for(var n=1,l,o,r=e[t[0]],s,u=r.length;n<s;++n)for(o=r,r=e[t[n]],l=0;l<u;++l)r[l][1]+=r[l][0]=isNaN(o[l][1])?o[l][0]:o[l][1]}function mo(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Ag(e,t){return e[t]}function Rg(e){const t=[];return t.key=e,t}function Eg(){var e=it([]),t=mo,n=po,l=Ag;function o(r){var s=Array.from(e.apply(this,arguments),Rg),u,a=s.length,f=-1,c;for(const d of r)for(u=0,++f;u<a;++u)(s[u][f]=[0,+l(d,s[u].key,f,r)]).data=d;for(u=0,c=Ba(t(s));u<a;++u)s[c[u]].index=u;return n(s,c),s}return o.keys=function(r){return arguments.length?(e=typeof r=="function"?r:it(Array.from(r)),o):e},o.value=function(r){return arguments.length?(l=typeof r=="function"?r:it(+r),o):l},o.order=function(r){return arguments.length?(t=r==null?mo:typeof r=="function"?r:it(Array.from(r)),o):t},o.offset=function(r){return arguments.length?(n=r??po,o):n},o}function er(e,t,n){const l=e.slice();return l[21]=t[n],l[23]=n,l}function tr(e,t,n){const l=e.slice();l[24]=t[n];const o=l[4][l[21].key];return l[25]=o,l}function nr(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_=e[21].key+"",v,w,y=e[11](e[25]/e[2])+"",C,E,S,F,$,R;return{c(){t=j("rect"),f=j("line"),m=j("text"),v=L(_),w=j("tspan"),C=L(y),S=N(),h(t,"class",n="horizontal-bar-rect "+(e[5]===e[23]?"selected":"unselected")+" svelte-tg5p7i"),h(t,"y",l=e[8](e[24].data.xVal)),h(t,"x",o=e[7](e[24][0])),h(t,"stroke","var(--black)"),h(t,"width",r=e[7](e[24][1])-e[7](e[24][0])),h(t,"fill",s=e[10](e[21].key)),h(t,"opacity",u=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(t,"height",a=e[8].bandwidth()),h(f,"class","line svelte-tg5p7i"),h(f,"x1",c=e[7](e[24][0])),h(f,"x2",d=e[7](e[24][0])),h(f,"y1",g=e[8](e[24].data.xVal)-At),h(f,"y2",p=e[8].bandwidth()+e[8](e[24].data.xVal)+At),h(f,"stroke","black"),h(w,"x",E=(e[7](e[24][0])+e[7](e[24][1]))/2),h(w,"dy","16"),h(w,"text-anchor","middle"),h(m,"class","horizontal-bar-text svelte-tg5p7i"),h(m,"y",F=e[8].bandwidth()/2),h(m,"x",$=(e[7](e[24][0])+e[7](e[24][1]))/2),h(m,"opacity",R=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(m,"text-anchor","middle")},m(k,M){O(k,t,M),O(k,f,M),O(k,m,M),b(m,v),b(m,w),b(w,C),b(m,S)},p(k,M){M&32&&n!==(n="horizontal-bar-rect "+(k[5]===k[23]?"selected":"unselected")+" svelte-tg5p7i")&&h(t,"class",n),M&320&&l!==(l=k[8](k[24].data.xVal))&&h(t,"y",l),M&192&&o!==(o=k[7](k[24][0]))&&h(t,"x",o),M&192&&r!==(r=k[7](k[24][1])-k[7](k[24][0]))&&h(t,"width",r),M&64&&s!==(s=k[10](k[21].key))&&h(t,"fill",s),M&32&&u!==(u=k[5]==="all"||k[5]===k[23]?"1":"0.25")&&h(t,"opacity",u),M&256&&a!==(a=k[8].bandwidth())&&h(t,"height",a),M&192&&c!==(c=k[7](k[24][0]))&&h(f,"x1",c),M&192&&d!==(d=k[7](k[24][0]))&&h(f,"x2",d),M&320&&g!==(g=k[8](k[24].data.xVal)-At)&&h(f,"y1",g),M&320&&p!==(p=k[8].bandwidth()+k[8](k[24].data.xVal)+At)&&h(f,"y2",p),M&64&&_!==(_=k[21].key+"")&&J(v,_),M&84&&y!==(y=k[11](k[25]/k[2])+"")&&J(C,y),M&192&&E!==(E=(k[7](k[24][0])+k[7](k[24][1]))/2)&&h(w,"x",E),M&256&&F!==(F=k[8].bandwidth()/2)&&h(m,"y",F),M&192&&$!==($=(k[7](k[24][0])+k[7](k[24][1]))/2)&&h(m,"x",$),M&32&&R!==(R=k[5]==="all"||k[5]===k[23]?"1":"0.25")&&h(m,"opacity",R)},d(k){k&&P(t),k&&P(f),k&&P(m)}}}function lr(e){let t,n,l,o,r,s,u,a,f=e[21],c=[];for(let p=0;p<f.length;p+=1)c[p]=nr(tr(e,f,p));function d(){return e[17](e[23],e[21])}function g(){return e[18](e[23],e[21])}return{c(){t=j("g");for(let p=0;p<c.length;p+=1)c[p].c();n=j("line"),h(n,"class","line svelte-tg5p7i"),h(n,"x1",l=e[3]-e[9].right),h(n,"x2",o=e[3]-e[9].right),h(n,"y1",r=e[8]("A")-At),h(n,"y2",s=e[8].bandwidth()+e[8]("A")+At),h(n,"stroke","black"),h(t,"class","series svelte-tg5p7i"),h(t,"role","button"),h(t,"tabindex","0")},m(p,m){O(p,t,m);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(t,null);b(t,n),u||(a=[B(t,"click",d),B(t,"keypress",g)],u=!0)},p(p,m){if(e=p,m&3572){f=e[21];let _;for(_=0;_<f.length;_+=1){const v=tr(e,f,_);c[_]?c[_].p(v,m):(c[_]=nr(v),c[_].c(),c[_].m(t,n))}for(;_<c.length;_+=1)c[_].d(1);c.length=f.length}m&8&&l!==(l=e[3]-e[9].right)&&h(n,"x1",l),m&8&&o!==(o=e[3]-e[9].right)&&h(n,"x2",o),m&256&&r!==(r=e[8]("A")-At)&&h(n,"y1",r),m&256&&s!==(s=e[8].bandwidth()+e[8]("A")+At)&&h(n,"y2",s)},d(p){p&&P(t),pe(c,p),u=!1,he(a)}}}function Mg(e){let t,n,l,o,r,s=e[6],u=[];for(let a=0;a<s.length;a+=1)u[a]=lr(er(e,s,a));return{c(){t=A("div"),t.innerHTML="<p>Feedback Distribution</p>",n=N(),l=A("div"),o=j("svg");for(let a=0;a<u.length;a+=1)u[a].c();h(o,"width",e[1]),h(o,"height",e[0]),h(l,"id","stackedrect-holder"),h(l,"class","svelte-tg5p7i"),Se(()=>e[19].call(l))},m(a,f){O(a,t,f),O(a,n,f),O(a,l,f),b(l,o);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(o,null);r=ct(l,e[19].bind(l))},p(a,[f]){if(f&8188){s=a[6];let c;for(c=0;c<s.length;c+=1){const d=er(a,s,c);u[c]?u[c].p(d,f):(u[c]=lr(d),u[c].c(),u[c].m(o,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=s.length}f&2&&h(o,"width",a[1]),f&1&&h(o,"height",a[0])},i:X,o:X,d(a){a&&P(t),a&&P(n),a&&P(l),pe(u,a),r()}}}const At=5;function Fg(e,t,n){let l,o,r,s,u,a,f,c,d,g,p;ae(e,ut,R=>n(15,d=R)),ae(e,Zo,R=>n(4,g=R)),ae(e,je,R=>n(16,p=R));let m=300,_=300;const v={up:2,down:1,"n/a":0,all:"all"},w={top:10,bottom:10,left:25,right:5},y=Dt().range(["var(--yellow)","var(--red)","var(--green)"]),C=yt(".0%");function E(R,k){l===R?n(5,l="all"):n(5,l=R),Fe(ut,d=l==="all"?"all":k,d)}const S=(R,k)=>E(R,k.key),F=(R,k)=>E(R,k.key);function $(){_=this.offsetWidth,m=this.offsetHeight,n(1,_),n(0,m)}return e.$$.update=()=>{e.$$.dirty&32768&&n(5,l=v[d]),e.$$.dirty&2&&n(3,o=_-w.left-w.right),e.$$.dirty&1&&n(14,r=m-w.top-w.bottom),e.$$.dirty&65552&&p.forEach(R=>{Fe(Zo,g[R.vote_status]++,g)}),e.$$.dirty&16&&n(2,s=g.up+g.down+g["n/a"]),e.$$.dirty&16384&&n(8,u=Ht().rangeRound([w.top,r-w.bottom]).padding(0).domain(["a"])),e.$$.dirty&12&&n(7,a=Ye().rangeRound([w.left,o-w.right]).domain([0,s])),e.$$.dirty&8208&&n(6,c=f([g]))},n(13,f=Eg().keys(["n/a","down","up"]).order(mo).offset(po)),[m,_,s,o,g,l,c,a,u,w,y,C,E,f,r,d,p,S,F,$]}class Wa extends fe{constructor(t){super(),ce(this,t,Fg,Mg,ue,{})}}function Dg(e){let t,n,l,o,r,s,u,a,f,c,d,g=e[3][e[2]]+"",p,m;return{c(){t=A("div"),n=A("div"),l=L("Q: "),o=L(e[0]),r=N(),s=A("div"),u=L("A: "),a=L(e[1]),f=N(),c=A("div"),d=L("Rating: "),p=L(g),h(n,"class","question svelte-szi0e"),h(s,"class","answer svelte-szi0e"),h(c,"class",m="feedback "+e[2]+" svelte-szi0e"),h(t,"class","qa-card svelte-szi0e")},m(_,v){O(_,t,v),b(t,n),b(n,l),b(n,o),b(t,r),b(t,s),b(s,u),b(s,a),b(t,f),b(t,c),b(c,d),b(c,p)},p(_,[v]){v&1&&J(o,_[0]),v&2&&J(a,_[1]),v&4&&g!==(g=_[3][_[2]]+"")&&J(p,g),v&4&&m!==(m="feedback "+_[2]+" svelte-szi0e")&&h(c,"class",m)},i:X,o:X,d(_){_&&P(t)}}}function Ig(e,t,n){let{question:l="What is gradient descent?"}=t,{answer:o="Gradient descent is an algorithm used to minimize a loss function by taking small steps in the direction of steepest descent."}=t,{feedback:r="Good: 👍"}=t;const s={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"};return e.$$set=u=>{"question"in u&&n(0,l=u.question),"answer"in u&&n(1,o=u.answer),"feedback"in u&&n(2,r=u.feedback)},[l,o,r,s]}class Ng extends fe{constructor(t){super(),ce(this,t,Ig,Dg,ue,{question:0,answer:1,feedback:2})}}function or(e,t,n){const l=e.slice();return l[5]=t[n].question,l[6]=t[n].answer,l[7]=t[n].vote_status,l}function ir(e){let t,n,l,o,r;return n=new Ng({props:{question:e[5],answer:e[6],feedback:e[7]}}),{c(){t=A("div"),le(n.$$.fragment),l=N()},m(s,u){O(s,t,u),ee(n,t,null),b(t,l),r=!0},p(s,u){const a={};u&1&&(a.question=s[5]),u&1&&(a.answer=s[6]),u&1&&(a.feedback=s[7]),n.$set(a)},i(s){r||(z(n.$$.fragment,s),s&&Se(()=>{r&&(o||(o=Ge(t,e[1],{duration:300},!0)),o.run(1))}),r=!0)},o(s){q(n.$$.fragment,s),s&&(o||(o=Ge(t,e[1],{duration:300},!1)),o.run(0)),r=!1},d(s){s&&P(t),te(n),s&&o&&o.end()}}}function Pg(e){let t,n,l=e[0],o=[];for(let s=0;s<l.length;s+=1)o[s]=ir(or(e,l,s));const r=s=>q(o[s],1,1,()=>{o[s]=null});return{c(){t=A("div");for(let s=0;s<o.length;s+=1)o[s].c();h(t,"class","qa-container svelte-1xv9cfi")},m(s,u){O(s,t,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(s,[u]){if(u&1){l=s[0];let a;for(a=0;a<l.length;a+=1){const f=or(s,l,a);o[a]?(o[a].p(f,u),z(o[a],1)):(o[a]=ir(f),o[a].c(),z(o[a],1),o[a].m(t,null))}for(_e(),a=l.length;a<o.length;a+=1)r(a);ve()}},i(s){if(!n){for(let u=0;u<l.length;u+=1)z(o[u]);n=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)q(o[u]);n=!1},d(s){s&&P(t),pe(o,s)}}}function Og(e,t,n){let l,o,r,s;ae(e,oo,a=>n(4,o=a)),ae(e,ut,a=>n(2,r=a)),ae(e,Mn,a=>n(3,s=a));const u=(a,{delay:f=0,duration:c=1e3,easing:d=Fo})=>mt(a,{delay:f,duration:c,easing:d});return e.$$.update=()=>{e.$$.dirty&12&&n(0,l=r==="all"?s:s.filter(a=>a.vote_status===r)),e.$$.dirty&1&&Fe(oo,o=md(l),o)},[l,u,r,s]}class Ua extends fe{constructor(t){super(),ce(this,t,Og,Pg,ue,{})}}function rr(e,t,n){const l=e.slice();return l[13]=t[n],l}function sr(e,t,n){const l=e.slice();return l[16]=t[n],l}function ar(e,t,n){const l=e.slice();return l[16]=t[n],l}function ur(e){let t,n,l,o,r=e[16]+"",s,u;return{c(){t=j("g"),n=j("line"),o=j("text"),s=L(r),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[10].bottom+e[10].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-1oikip4"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[6](e[16])+e[6].bandwidth()/2} ${e[2]-e[10].bottom})`)},m(a,f){O(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&4&&l!==(l=-a[2]+a[10].bottom+a[10].top)&&h(n,"y2",l),f&16&&r!==(r=a[16]+"")&&J(s,r),f&84&&u!==(u=`translate(${a[6](a[16])+a[6].bandwidth()/2} ${a[2]-a[10].bottom})`)&&h(t,"transform",u)},d(a){a&&P(t)}}}function fr(e){let t,n,l,o;return{c(){t=j("g"),n=j("line"),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1",0),h(n,"x2",l=e[3]-e[10].right-e[10].left),h(n,"y1","0"),h(n,"y2","0"),h(n,"stroke","black"),h(t,"transform",o=`translate(${e[10].left} ${e[5](e[16])+0})`)},m(r,s){O(r,t,s),b(t,n)},p(r,s){s&8&&l!==(l=r[3]-r[10].right-r[10].left)&&h(n,"x2",l),s&32&&o!==(o=`translate(${r[10].left} ${r[5](r[16])+0})`)&&h(t,"transform",o)},d(r){r&&P(t)}}}function cr(e){let t,n,l,o,r,s,u,a,f=Math.round(e[11](e[13].count))+"",c,d,g;return{c(){t=j("g"),n=j("rect"),a=j("text"),c=L(f),h(n,"x",l=e[6](e[13].question)),h(n,"y",o=e[5](e[13].count)),h(n,"height",r=e[2]-e[5](e[13].count)-e[10].bottom),h(n,"fill",s=e[9][e[7]]),h(n,"fill-opacity","0.95"),h(n,"width",u=e[6].bandwidth()),h(n,"class","svelte-1oikip4"),h(a,"class","axis-text svelte-1oikip4"),h(a,"x",d=e[6](e[13].question)+e[6].bandwidth()/2),h(a,"y",g=e[5](e[13].count)-5),h(a,"text-anchor","middle"),h(t,"class","series")},m(p,m){O(p,t,m),b(t,n),b(t,a),b(a,c)},p(p,m){m&80&&l!==(l=p[6](p[13].question))&&h(n,"x",l),m&48&&o!==(o=p[5](p[13].count))&&h(n,"y",o),m&52&&r!==(r=p[2]-p[5](p[13].count)-p[10].bottom)&&h(n,"height",r),m&128&&s!==(s=p[9][p[7]])&&h(n,"fill",s),m&64&&u!==(u=p[6].bandwidth())&&h(n,"width",u),m&16&&f!==(f=Math.round(p[11](p[13].count))+"")&&J(c,f),m&80&&d!==(d=p[6](p[13].question)+p[6].bandwidth()/2)&&h(a,"x",d),m&48&&g!==(g=p[5](p[13].count)-5)&&h(a,"y",g)},d(p){p&&P(t)}}}function Tg(e){let t,n,l,o,r,s,u=e[8][e[7]]+"",a,f,c,d,g,p,m,_,v,w=e[4].map(dr),y=[];for(let $=0;$<w.length;$+=1)y[$]=ur(ar(e,w,$));let C=e[5].ticks(),E=[];for(let $=0;$<C.length;$+=1)E[$]=fr(sr(e,C,$));let S=e[4],F=[];for(let $=0;$<S.length;$+=1)F[$]=cr(rr(e,S,$));return{c(){t=A("div"),n=j("svg");for(let $=0;$<y.length;$+=1)y[$].c();l=ke();for(let $=0;$<E.length;$+=1)E[$].c();o=ke();for(let $=0;$<F.length;$+=1)F[$].c();r=j("text"),s=L("Question Type: "),a=L(u),c=j("line"),m=j("line"),h(r,"class","chart-title svelte-1oikip4"),h(r,"y",e[10].top/2+1),h(r,"x",f=(e[3]+e[10].left)/2),h(r,"text-anchor","middle"),h(c,"class","axis-line svelte-1oikip4"),h(c,"x1",e[10].left),h(c,"x2",d=e[3]-e[10].right),h(c,"y1",g=e[2]-e[10].bottom),h(c,"y2",p=e[2]-e[10].bottom),h(m,"class","axis-line svelte-1oikip4"),h(m,"x1",e[10].left),h(m,"x2",e[10].left),h(m,"y1",e[10].top),h(m,"y2",_=e[2]-e[10].bottom),h(m,"opacity","0"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","stackedrect-holder"),h(t,"class","svelte-1oikip4"),Se(()=>e[12].call(t))},m($,R){O($,t,R),b(t,n);for(let k=0;k<y.length;k+=1)y[k]&&y[k].m(n,null);b(n,l);for(let k=0;k<E.length;k+=1)E[k]&&E[k].m(n,null);b(n,o);for(let k=0;k<F.length;k+=1)F[k]&&F[k].m(n,null);b(n,r),b(r,s),b(r,a),b(n,c),b(n,m),v=ct(t,e[12].bind(t))},p($,[R]){if(R&1108){w=$[4].map(dr);let k;for(k=0;k<w.length;k+=1){const M=ar($,w,k);y[k]?y[k].p(M,R):(y[k]=ur(M),y[k].c(),y[k].m(n,l))}for(;k<y.length;k+=1)y[k].d(1);y.length=w.length}if(R&1064){C=$[5].ticks();let k;for(k=0;k<C.length;k+=1){const M=sr($,C,k);E[k]?E[k].p(M,R):(E[k]=fr(M),E[k].c(),E[k].m(n,o))}for(;k<E.length;k+=1)E[k].d(1);E.length=C.length}if(R&3828){S=$[4];let k;for(k=0;k<S.length;k+=1){const M=rr($,S,k);F[k]?F[k].p(M,R):(F[k]=cr(M),F[k].c(),F[k].m(n,r))}for(;k<F.length;k+=1)F[k].d(1);F.length=S.length}R&128&&u!==(u=$[8][$[7]]+"")&&J(a,u),R&8&&f!==(f=($[3]+$[10].left)/2)&&h(r,"x",f),R&8&&d!==(d=$[3]-$[10].right)&&h(c,"x2",d),R&4&&g!==(g=$[2]-$[10].bottom)&&h(c,"y1",g),R&4&&p!==(p=$[2]-$[10].bottom)&&h(c,"y2",p),R&4&&_!==(_=$[2]-$[10].bottom)&&h(m,"y2",_),R&2&&h(n,"width",$[1]),R&1&&h(n,"height",$[0])},i:X,o:X,d($){$&&P(t),pe(y,$),pe(E,$),pe(F,$),v()}}}const dr=e=>e.question;function zg(e,t,n){let l,o,r,s,u,a;ae(e,oo,v=>n(4,u=v)),ae(e,ut,v=>n(7,a=v));const f={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"},c={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let d=300,g=300,p={top:35,bottom:10,left:25,right:5};const m=yt(".1f");function _(){g=this.offsetWidth,d=this.offsetHeight,n(1,g),n(0,d)}return e.$$.update=()=>{e.$$.dirty&2&&n(3,l=g-p.left-p.right),e.$$.dirty&1&&n(2,o=d-p.top-p.bottom),e.$$.dirty&24&&n(6,r=Ht().rangeRound([p.left,l-p.right]).padding(.05).domain(u.map(v=>v.question))),e.$$.dirty&20&&n(5,s=Ye().rangeRound([o-p.bottom,p.top]).domain([0,bt(u,v=>v.count)])),e.$$.dirty&16&&console.log(u)},[d,g,o,l,u,s,r,a,f,c,p,m,_]}class Xa extends fe{constructor(t){super(),ce(this,t,zg,Tg,ue,{})}}function hr(e,t,n){const l=e.slice();l[19]=t[n];const o=l[7](l[19].x1)-l[7](l[19].x0);return l[20]=o,l}function gr(e,t,n){const l=e.slice();return l[23]=t[n],l}function pr(e){let t,n,l,o,r=e[23]+"",s,u;return{c(){t=j("g"),n=j("line"),o=j("text"),s=L(r),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-kz2qh6"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[7](e[23])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(a,f){O(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&4&&l!==(l=-a[2]+a[9].bottom+a[9].top)&&h(n,"y2",l),f&128&&r!==(r=a[23]+"")&&J(s,r),f&132&&u!==(u=`translate(${a[7](a[23])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&h(t,"transform",u)},d(a){a&&P(t)}}}function mr(e){let t,n,l,o,r,s,u;return{c(){t=j("g"),n=j("rect"),h(n,"x",l=e[7](e[19].x0)+1),h(n,"width",o=e[20]),h(n,"y",r=e[6](e[19].length)),h(n,"height",s=e[6](0)-e[6](e[19].length)),h(n,"fill",u=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){O(a,t,f),b(t,n)},p(a,f){f&136&&l!==(l=a[7](a[19].x0)+1)&&h(n,"x",l),f&136&&o!==(o=a[20])&&h(n,"width",o),f&72&&r!==(r=a[6](a[19].length))&&h(n,"y",r),f&72&&s!==(s=a[6](0)-a[6](a[19].length))&&h(n,"height",s),f&32&&u!==(u=a[8][a[5]])&&h(n,"fill",u)},d(a){a&&P(t)}}}function Vg(e){let t,n,l,o,r,s,u,a,f,c,d,g=e[7].ticks(),p=[];for(let v=0;v<g.length;v+=1)p[v]=pr(gr(e,g,v));let m=e[3],_=[];for(let v=0;v<m.length;v+=1)_[v]=mr(hr(e,m,v));return{c(){t=A("div"),n=j("svg");for(let v=0;v<p.length;v+=1)p[v].c();l=ke();for(let v=0;v<_.length;v+=1)_[v].c();o=j("text"),r=L("Answer Length"),u=j("line"),h(o,"class","chart-title svelte-kz2qh6"),h(o,"y",e[9].top/2+5),h(o,"x",s=(e[4]+e[9].left)/2),h(o,"text-anchor","middle"),h(u,"class","axis-line svelte-kz2qh6"),h(u,"x1",e[9].left),h(u,"x2",a=e[4]-e[9].right),h(u,"y1",f=e[2]-e[9].bottom),h(u,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),Se(()=>e[14].call(t))},m(v,w){O(v,t,w),b(t,n);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(n,null);b(n,l);for(let y=0;y<_.length;y+=1)_[y]&&_[y].m(n,null);b(n,o),b(o,r),b(n,u),d=ct(t,e[14].bind(t))},p(v,[w]){if(w&644){g=v[7].ticks();let y;for(y=0;y<g.length;y+=1){const C=gr(v,g,y);p[y]?p[y].p(C,w):(p[y]=pr(C),p[y].c(),p[y].m(n,l))}for(;y<p.length;y+=1)p[y].d(1);p.length=g.length}if(w&488){m=v[3];let y;for(y=0;y<m.length;y+=1){const C=hr(v,m,y);_[y]?_[y].p(C,w):(_[y]=mr(C),_[y].c(),_[y].m(n,o))}for(;y<_.length;y+=1)_[y].d(1);_.length=m.length}w&16&&s!==(s=(v[4]+v[9].left)/2)&&h(o,"x",s),w&16&&a!==(a=v[4]-v[9].right)&&h(u,"x2",a),w&4&&f!==(f=v[2]-v[9].bottom)&&h(u,"y1",f),w&4&&c!==(c=v[2]-v[9].bottom)&&h(u,"y2",c),w&2&&h(n,"width",v[1]),w&1&&h(n,"height",v[0])},i:X,o:X,d(v){v&&P(t),pe(p,v),pe(_,v),d()}}}let _r=100;function qg(e,t,n){let l,o,r,s,u,a,f,c,d,g;ae(e,ut,C=>n(5,d=C)),ae(e,je,C=>n(13,g=C));const p={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let m=300,_=300,v={top:15,bottom:10,left:25,right:5};yt(".1f");let w=Array.from({length:_r},(C,E)=>E);function y(){_=this.offsetWidth,m=this.offsetHeight,n(1,_),n(0,m)}return e.$$.update=()=>{e.$$.dirty&8224&&n(12,l=d==="all"?g:g.filter(C=>C.vote_status===d)),e.$$.dirty&4096&&n(11,o=Aa(l)),e.$$.dirty&2&&n(4,r=_-v.left-v.right),e.$$.dirty&1&&n(2,s=m-v.top-v.bottom),e.$$.dirty&2048&&n(3,u=Ia().thresholds(w).value(C=>C.answer)(o)),e.$$.dirty&16&&n(7,a=Ye().domain([3,_r]).range([v.left,r-v.right])),e.$$.dirty&12&&n(6,f=Ye().domain([0,bt(u,C=>C.length)]).range([s-v.bottom,v.top])),e.$$.dirty&2048&&n(10,c=bt(o,C=>C.length)),e.$$.dirty&1056&&Ye().domain([0,c]).range(["white",p[d]]).interpolate(Tn)},[m,_,s,u,r,d,f,a,p,v,c,o,l,g,y]}class Ya extends fe{constructor(t){super(),ce(this,t,qg,Vg,ue,{})}}function vr(e,t,n){const l=e.slice();l[18]=t[n];const o=l[7](l[18].x1)-l[7](l[18].x0);return l[19]=o,l}function br(e,t,n){const l=e.slice();return l[22]=t[n],l}function wr(e){let t,n,l,o,r=e[22]+"",s,u;return{c(){t=j("g"),n=j("line"),o=j("text"),s=L(r),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-kz2qh6"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[7](e[22])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(a,f){O(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&4&&l!==(l=-a[2]+a[9].bottom+a[9].top)&&h(n,"y2",l),f&128&&r!==(r=a[22]+"")&&J(s,r),f&132&&u!==(u=`translate(${a[7](a[22])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&h(t,"transform",u)},d(a){a&&P(t)}}}function yr(e){let t,n,l,o,r,s,u;return{c(){t=j("g"),n=j("rect"),h(n,"x",l=e[7](e[18].x0)+1),h(n,"width",o=e[19]),h(n,"y",r=e[6](e[18].length)),h(n,"height",s=e[6](0)-e[6](e[18].length)),h(n,"fill",u=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){O(a,t,f),b(t,n)},p(a,f){f&136&&l!==(l=a[7](a[18].x0)+1)&&h(n,"x",l),f&136&&o!==(o=a[19])&&h(n,"width",o),f&72&&r!==(r=a[6](a[18].length))&&h(n,"y",r),f&72&&s!==(s=a[6](0)-a[6](a[18].length))&&h(n,"height",s),f&32&&u!==(u=a[8][a[5]])&&h(n,"fill",u)},d(a){a&&P(t)}}}function Lg(e){let t,n,l,o,r,s,u,a,f,c,d,g=e[7].ticks(),p=[];for(let v=0;v<g.length;v+=1)p[v]=wr(br(e,g,v));let m=e[3],_=[];for(let v=0;v<m.length;v+=1)_[v]=yr(vr(e,m,v));return{c(){t=A("div"),n=j("svg");for(let v=0;v<p.length;v+=1)p[v].c();l=ke();for(let v=0;v<_.length;v+=1)_[v].c();o=j("text"),r=L("Question Length"),u=j("line"),h(o,"class","chart-title svelte-kz2qh6"),h(o,"y",e[9].top/2+5),h(o,"x",s=(e[4]+e[9].left)/2),h(o,"text-anchor","middle"),h(u,"class","axis-line svelte-kz2qh6"),h(u,"x1",e[9].left),h(u,"x2",a=e[4]-e[9].right),h(u,"y1",f=e[2]-e[9].bottom),h(u,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),Se(()=>e[13].call(t))},m(v,w){O(v,t,w),b(t,n);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(n,null);b(n,l);for(let y=0;y<_.length;y+=1)_[y]&&_[y].m(n,null);b(n,o),b(o,r),b(n,u),d=ct(t,e[13].bind(t))},p(v,[w]){if(w&644){g=v[7].ticks();let y;for(y=0;y<g.length;y+=1){const C=br(v,g,y);p[y]?p[y].p(C,w):(p[y]=wr(C),p[y].c(),p[y].m(n,l))}for(;y<p.length;y+=1)p[y].d(1);p.length=g.length}if(w&488){m=v[3];let y;for(y=0;y<m.length;y+=1){const C=vr(v,m,y);_[y]?_[y].p(C,w):(_[y]=yr(C),_[y].c(),_[y].m(n,o))}for(;y<_.length;y+=1)_[y].d(1);_.length=m.length}w&16&&s!==(s=(v[4]+v[9].left)/2)&&h(o,"x",s),w&16&&a!==(a=v[4]-v[9].right)&&h(u,"x2",a),w&4&&f!==(f=v[2]-v[9].bottom)&&h(u,"y1",f),w&4&&c!==(c=v[2]-v[9].bottom)&&h(u,"y2",c),w&2&&h(n,"width",v[1]),w&1&&h(n,"height",v[0])},i:X,o:X,d(v){v&&P(t),pe(p,v),pe(_,v),d()}}}let kr=100;function Hg(e,t,n){let l,o,r,s,u,a,f,c,d;ae(e,ut,y=>n(5,c=y)),ae(e,je,y=>n(12,d=y));const g={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let p=300,m=300,_={top:15,bottom:10,left:25,right:5},v=Array.from({length:kr},(y,C)=>C);Dt().range(["var(--yellow)","var(--red)","var(--green)"]);function w(){m=this.offsetWidth,p=this.offsetHeight,n(1,m),n(0,p)}return e.$$.update=()=>{e.$$.dirty&4128&&n(11,l=c==="all"?d:d.filter(y=>y.vote_status===c)),e.$$.dirty&2048&&n(10,o=Aa(l)),e.$$.dirty&2&&n(4,r=m-_.left-_.right),e.$$.dirty&1&&n(2,s=p-_.top-_.bottom),e.$$.dirty&1024&&n(3,u=Ia().thresholds(v).value(y=>y.question)(o)),e.$$.dirty&16&&n(7,a=Ye().domain([3,kr]).range([_.left,r-_.right])),e.$$.dirty&12&&n(6,f=Ye().domain([0,bt(u,y=>y.length)]).range([s-_.bottom,_.top])),e.$$.dirty&1024&&bt(o,y=>y.length)},[p,m,s,u,r,c,f,a,g,_,o,l,d,w]}class Qa extends fe{constructor(t){super(),ce(this,t,Hg,Lg,ue,{})}}function Gg(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m=Math.round(e[5](e[3]))+"",_,v,w,y,C,E,S,F;return{c(){t=A("div"),n=A("div"),l=A("p"),l.textContent="Questions",o=N(),r=A("select"),s=A("option"),s.textContent="All",u=A("option"),u.textContent="Good",a=A("option"),a.textContent="Bad",f=A("option"),f.textContent="N/A",c=N(),d=A("div"),g=j("svg"),p=j("text"),_=L(m),C=N(),E=A("p"),E.textContent="number of responses",h(l,"class","card-text svelte-1pknxov"),s.__value="all",s.value=s.__value,h(s,"class","svelte-1pknxov"),u.__value="up",u.value=u.__value,h(u,"class","svelte-1pknxov"),a.__value="down",a.value=a.__value,h(a,"class","svelte-1pknxov"),f.__value="n/a",f.value=f.__value,h(f,"class","svelte-1pknxov"),h(r,"id","feedback-dropdown"),h(r,"name","feedback-dropdown"),ye(r,"background",e[6][e[0]]),h(r,"class","svelte-1pknxov"),e[0]===void 0&&Se(()=>e[9].call(r)),h(n,"class","svelte-1pknxov"),h(p,"dominant-baseline","middle"),h(p,"x",v=e[2]/2),h(p,"y",w=e[1]/2),h(p,"text-anchor","middle"),h(p,"class","svelte-1pknxov"),h(g,"width",e[2]),h(g,"height",e[1]),h(g,"class","svelte-1pknxov"),h(d,"class","svelte-1pknxov"),Se(()=>e[10].call(d)),h(E,"class","small svelte-1pknxov"),h(t,"class","card-container svelte-1pknxov"),ye(t,"background",e[6][e[0]])},m($,R){O($,t,R),b(t,n),b(n,l),b(n,o),b(n,r),b(r,s),b(r,u),b(r,a),b(r,f),ol(r,e[0],!0),b(t,c),b(t,d),b(d,g),b(g,p),b(p,_),y=ct(d,e[10].bind(d)),b(t,C),b(t,E),S||(F=B(r,"change",e[9]),S=!0)},p($,[R]){R&1&&ye(r,"background",$[6][$[0]]),R&1&&ol(r,$[0]),R&8&&m!==(m=Math.round($[5]($[3]))+"")&&J(_,m),R&4&&v!==(v=$[2]/2)&&h(p,"x",v),R&2&&w!==(w=$[1]/2)&&h(p,"y",w),R&4&&h(g,"width",$[2]),R&2&&h(g,"height",$[1]),R&1&&ye(t,"background",$[6][$[0]])},i:X,o:X,d($){$&&P(t),y(),S=!1,F()}}}function jg(e,t){return t==="all"?e.length:e.filter(l=>l.vote_status===t).length}function Bg(e,t,n){let l,o,r,s;ae(e,ut,m=>n(0,o=m)),ae(e,je,m=>n(8,r=m));let u,a,f=Do(0);ae(e,f,m=>n(3,s=m));const c=yt(".1f"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function g(){o=sa(this),ut.set(o)}function p(){a=this.clientWidth,u=this.clientHeight,n(2,a),n(1,u)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,l=jg(r,o)),e.$$.dirty&128&&console.log("fbc",l),e.$$.dirty&128&&f.set(l)},[o,u,a,s,f,c,d,l,r,g,p]}class Ka extends fe{constructor(t){super(),ce(this,t,Bg,Gg,ue,{})}}function xg(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m=e[5](e[3])+"",_,v,w,y,C,E,S,F;return{c(){t=A("div"),n=A("div"),l=A("p"),l.textContent="Questions",o=N(),r=A("select"),s=A("option"),s.textContent="All",u=A("option"),u.textContent="Good",a=A("option"),a.textContent="Bad",f=A("option"),f.textContent="N/A",c=N(),d=A("div"),g=j("svg"),p=j("text"),_=L(m),C=N(),E=A("p"),E.textContent="percentage of responses",h(l,"class","card-text svelte-mchgj2"),s.__value="all",s.value=s.__value,u.__value="up",u.value=u.__value,a.__value="down",a.value=a.__value,f.__value="n/a",f.value=f.__value,h(r,"id","feedback-dropdown"),h(r,"name","feedback-dropdown"),ye(r,"background",e[6][e[0]]),h(r,"class","svelte-mchgj2"),e[0]===void 0&&Se(()=>e[9].call(r)),h(p,"dominant-baseline","middle"),h(p,"x",v=e[2]/2),h(p,"y",w=e[1]/2),h(p,"text-anchor","middle"),h(p,"class","svelte-mchgj2"),h(g,"width",e[2]),h(g,"height",e[1]),h(g,"class","svelte-mchgj2"),Se(()=>e[10].call(d)),h(E,"class","small svelte-mchgj2"),h(t,"class","card-container svelte-mchgj2"),ye(t,"background",e[6][e[0]])},m($,R){O($,t,R),b(t,n),b(n,l),b(n,o),b(n,r),b(r,s),b(r,u),b(r,a),b(r,f),ol(r,e[0],!0),b(t,c),b(t,d),b(d,g),b(g,p),b(p,_),y=ct(d,e[10].bind(d)),b(t,C),b(t,E),S||(F=B(r,"change",e[9]),S=!0)},p($,[R]){R&1&&ye(r,"background",$[6][$[0]]),R&1&&ol(r,$[0]),R&8&&m!==(m=$[5]($[3])+"")&&J(_,m),R&4&&v!==(v=$[2]/2)&&h(p,"x",v),R&2&&w!==(w=$[1]/2)&&h(p,"y",w),R&4&&h(g,"width",$[2]),R&2&&h(g,"height",$[1]),R&1&&ye(t,"background",$[6][$[0]])},i:X,o:X,d($){$&&P(t),y(),S=!1,F()}}}function Wg(e,t){const n=e.length;return t==="all"?1:e.filter(o=>o.vote_status===t).length/n}function Ug(e,t,n){let l,o,r,s;ae(e,ut,m=>n(0,o=m)),ae(e,je,m=>n(8,r=m));let u,a,f=Do(0);ae(e,f,m=>n(3,s=m));const c=yt(".1%"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function g(){o=sa(this),ut.set(o)}function p(){a=this.clientWidth,u=this.clientHeight,n(2,a),n(1,u)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,l=Wg(r,o)),e.$$.dirty&128&&f.set(l)},[o,u,a,s,f,c,d,l,r,g,p]}class Ja extends fe{constructor(t){super(),ce(this,t,Ug,xg,ue,{})}}function Xg(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,w,y,C,E,S,F,$,R,k,M,I;return r=new Ka({}),a=new Ja({}),d=new Wa({}),m=new Xa({props:{feedback:"Bad"}}),w=new Qa({}),E=new Ya({}),M=new Ua({}),{c(){t=A("div"),n=A("div"),l=A("div"),o=A("div"),le(r.$$.fragment),s=N(),u=A("div"),le(a.$$.fragment),f=N(),c=A("div"),le(d.$$.fragment),g=N(),p=A("div"),le(m.$$.fragment),_=N(),v=A("div"),le(w.$$.fragment),y=N(),C=A("div"),le(E.$$.fragment),S=N(),F=A("div"),$=A("div"),$.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,R=N(),k=A("div"),le(M.$$.fragment),h(o,"class","card-1 svelte-14znspc"),h(u,"class","card-2"),h(l,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(p,"class","left-question svelte-14znspc"),h(v,"class","left-filter svelte-14znspc"),h(C,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h($,"class","right-chart svelte-14znspc"),h(k,"class","right-table svelte-14znspc"),h(F,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(D,V){O(D,t,V),b(t,n),b(n,l),b(l,o),ee(r,o,null),b(l,s),b(l,u),ee(a,u,null),b(n,f),b(n,c),ee(d,c,null),b(n,g),b(n,p),ee(m,p,null),b(n,_),b(n,v),ee(w,v,null),b(n,y),b(n,C),ee(E,C,null),b(t,S),b(t,F),b(F,$),b(F,R),b(F,k),ee(M,k,null),I=!0},p:X,i(D){I||(z(r.$$.fragment,D),z(a.$$.fragment,D),z(d.$$.fragment,D),z(m.$$.fragment,D),z(w.$$.fragment,D),z(E.$$.fragment,D),z(M.$$.fragment,D),I=!0)},o(D){q(r.$$.fragment,D),q(a.$$.fragment,D),q(d.$$.fragment,D),q(m.$$.fragment,D),q(w.$$.fragment,D),q(E.$$.fragment,D),q(M.$$.fragment,D),I=!1},d(D){D&&P(t),te(r),te(a),te(d),te(m),te(w),te(E),te(M)}}}function Yg(e,t,n){let l;ae(e,Mn,r=>n(0,l=r)),dt(()=>{o()});async function o(){const a=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[3]}));Fe(Mn,l=[...a],l)}return[]}class Za extends fe{constructor(t){super(),ce(this,t,Yg,Xg,ue,{})}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,l)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sr(Object(n),!0).forEach(function(l){Qg(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function Jn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jn=function(t){return typeof t}:Jn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(e)}function Qg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(){return wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},wt.apply(this,arguments)}function Kg(e,t){if(e==null)return{};var n={},l=Object.keys(e),o,r;for(r=0;r<l.length;r++)o=l[r],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Jg(e,t){if(e==null)return{};var n=Kg(e,t),l,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)l=r[o],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}var Zg="1.15.0";function _t(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var kt=_t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),zn=_t(/Edge/i),Cr=_t(/firefox/i),yn=_t(/safari/i)&&!_t(/chrome/i)&&!_t(/android/i),eu=_t(/iP(ad|od|hone)/i),tu=_t(/chrome/i)&&_t(/android/i),nu={capture:!1,passive:!1};function ge(e,t,n){e.addEventListener(t,n,!kt&&nu)}function de(e,t,n){e.removeEventListener(t,n,!kt&&nu)}function pl(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function ep(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ot(e,t,n,l){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&pl(e,t):pl(e,t))||l&&e===n)return e;if(e===n)break}while(e=ep(e))}return null}var $r=/\s+/g;function We(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var l=(" "+e.className+" ").replace($r," ").replace(" "+t+" "," ");e.className=(l+(n?" "+t:"")).replace($r," ")}}function ne(e,t,n){var l=e&&e.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in l)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),l[t]=n+(typeof n=="string"?"":"px")}}function en(e,t){var n="";if(typeof e=="string")n=e;else do{var l=ne(e,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function lu(e,t,n){if(e){var l=e.getElementsByTagName(t),o=0,r=l.length;if(n)for(;o<r;o++)n(l[o],o);return l}return[]}function at(){var e=document.scrollingElement;return e||document.documentElement}function Me(e,t,n,l,o){if(!(!e.getBoundingClientRect&&e!==window)){var r,s,u,a,f,c,d;if(e!==window&&e.parentNode&&e!==at()?(r=e.getBoundingClientRect(),s=r.top,u=r.left,a=r.bottom,f=r.right,c=r.height,d=r.width):(s=0,u=0,a=window.innerHeight,f=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!kt))do if(o&&o.getBoundingClientRect&&(ne(o,"transform")!=="none"||n&&ne(o,"position")!=="static")){var g=o.getBoundingClientRect();s-=g.top+parseInt(ne(o,"border-top-width")),u-=g.left+parseInt(ne(o,"border-left-width")),a=s+r.height,f=u+r.width;break}while(o=o.parentNode);if(l&&e!==window){var p=en(o||e),m=p&&p.a,_=p&&p.d;p&&(s/=_,u/=m,d/=m,c/=_,a=s+c,f=u+d)}return{top:s,left:u,bottom:a,right:f,width:d,height:c}}}function Ar(e,t,n){for(var l=Rt(e,!0),o=Me(e)[t];l;){var r=Me(l)[n],s=void 0;if(n==="top"||n==="left"?s=o>=r:s=o<=r,!s)return l;if(l===at())break;l=Rt(l,!1)}return!1}function rn(e,t,n,l){for(var o=0,r=0,s=e.children;r<s.length;){if(s[r].style.display!=="none"&&s[r]!==Z.ghost&&(l||s[r]!==Z.dragged)&&ot(s[r],n.draggable,e,!1)){if(o===t)return s[r];o++}r++}return null}function qo(e,t){for(var n=e.lastElementChild;n&&(n===Z.ghost||ne(n,"display")==="none"||t&&!pl(n,t));)n=n.previousElementSibling;return n||null}function Qe(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Z.clone&&(!t||pl(e,t))&&n++;return n}function Rr(e){var t=0,n=0,l=at();if(e)do{var o=en(e),r=o.a,s=o.d;t+=e.scrollLeft*r,n+=e.scrollTop*s}while(e!==l&&(e=e.parentNode));return[t,n]}function tp(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var l in t)if(t.hasOwnProperty(l)&&t[l]===e[n][l])return Number(n)}return-1}function Rt(e,t){if(!e||!e.getBoundingClientRect)return at();var n=e,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=ne(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return at();if(l||t)return n;l=!0}}while(n=n.parentNode);return at()}function np(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Vl(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var kn;function ou(e,t){return function(){if(!kn){var n=arguments,l=this;n.length===1?e.call(l,n[0]):e.apply(l,n),kn=setTimeout(function(){kn=void 0},t)}}}function lp(){clearTimeout(kn),kn=void 0}function iu(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function ru(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var Xe="Sortable"+new Date().getTime();function op(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(o){if(!(ne(o,"display")==="none"||o===Z.ghost)){e.push({target:o,rect:Me(o)});var r=ft({},e[e.length-1].rect);if(o.thisAnimationDuration){var s=en(o,!0);s&&(r.top-=s.f,r.left-=s.e)}o.fromRect=r}})}},addAnimationState:function(l){e.push(l)},removeAnimationState:function(l){e.splice(tp(e,{target:l}),1)},animateAll:function(l){var o=this;if(!this.options.animation){clearTimeout(t),typeof l=="function"&&l();return}var r=!1,s=0;e.forEach(function(u){var a=0,f=u.target,c=f.fromRect,d=Me(f),g=f.prevFromRect,p=f.prevToRect,m=u.rect,_=en(f,!0);_&&(d.top-=_.f,d.left-=_.e),f.toRect=d,f.thisAnimationDuration&&Vl(g,d)&&!Vl(c,d)&&(m.top-d.top)/(m.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(a=rp(m,g,p,o.options)),Vl(d,c)||(f.prevFromRect=c,f.prevToRect=d,a||(a=o.options.animation),o.animate(f,m,d,a)),a&&(r=!0,s=Math.max(s,a),clearTimeout(f.animationResetTimer),f.animationResetTimer=setTimeout(function(){f.animationTime=0,f.prevFromRect=null,f.fromRect=null,f.prevToRect=null,f.thisAnimationDuration=null},a),f.thisAnimationDuration=a)}),clearTimeout(t),r?t=setTimeout(function(){typeof l=="function"&&l()},s):typeof l=="function"&&l(),e=[]},animate:function(l,o,r,s){if(s){ne(l,"transition",""),ne(l,"transform","");var u=en(this.el),a=u&&u.a,f=u&&u.d,c=(o.left-r.left)/(a||1),d=(o.top-r.top)/(f||1);l.animatingX=!!c,l.animatingY=!!d,ne(l,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=ip(l),ne(l,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),ne(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){ne(l,"transition",""),ne(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},s)}}}}function ip(e){return e.offsetWidth}function rp(e,t,n,l){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*l.animation}var xt=[],ql={initializeByDefault:!0},Vn={mount:function(t){for(var n in ql)ql.hasOwnProperty(n)&&!(n in t)&&(t[n]=ql[n]);xt.forEach(function(l){if(l.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),xt.push(t)},pluginEvent:function(t,n,l){var o=this;this.eventCanceled=!1,l.cancel=function(){o.eventCanceled=!0};var r=t+"Global";xt.forEach(function(s){n[s.pluginName]&&(n[s.pluginName][r]&&n[s.pluginName][r](ft({sortable:n},l)),n.options[s.pluginName]&&n[s.pluginName][t]&&n[s.pluginName][t](ft({sortable:n},l)))})},initializePlugins:function(t,n,l,o){xt.forEach(function(u){var a=u.pluginName;if(!(!t.options[a]&&!u.initializeByDefault)){var f=new u(t,n,t.options);f.sortable=t,f.options=t.options,t[a]=f,wt(l,f.defaults)}});for(var r in t.options)if(t.options.hasOwnProperty(r)){var s=this.modifyOption(t,r,t.options[r]);typeof s<"u"&&(t.options[r]=s)}},getEventProperties:function(t,n){var l={};return xt.forEach(function(o){typeof o.eventProperties=="function"&&wt(l,o.eventProperties.call(n[o.pluginName],t))}),l},modifyOption:function(t,n,l){var o;return xt.forEach(function(r){t[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(o=r.optionListeners[n].call(t[r.pluginName],l))}),o}};function sp(e){var t=e.sortable,n=e.rootEl,l=e.name,o=e.targetEl,r=e.cloneEl,s=e.toEl,u=e.fromEl,a=e.oldIndex,f=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,g=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[Xe],!!t){var _,v=t.options,w="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!kt&&!zn?_=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent(l,!0,!0)),_.to=s||n,_.from=u||n,_.item=o||n,_.clone=r,_.oldIndex=a,_.newIndex=f,_.oldDraggableIndex=c,_.newDraggableIndex=d,_.originalEvent=g,_.pullMode=p?p.lastPutMode:void 0;var y=ft(ft({},m),Vn.getEventProperties(l,t));for(var C in y)_[C]=y[C];n&&n.dispatchEvent(_),v[w]&&v[w].call(t,_)}}var ap=["evt"],Le=function(t,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=l.evt,r=Jg(l,ap);Vn.pluginEvent.bind(Z)(t,n,ft({dragEl:H,parentEl:Re,ghostEl:re,rootEl:be,nextEl:Tt,lastDownEl:Zn,cloneEl:we,cloneHidden:Ct,dragStarted:pn,putSortable:Ne,activeSortable:Z.active,originalEvent:o,oldIndex:Yt,oldDraggableIndex:Sn,newIndex:Ue,newDraggableIndex:St,hideGhostForTarget:fu,unhideGhostForTarget:cu,cloneNowHidden:function(){Ct=!0},cloneNowShown:function(){Ct=!1},dispatchSortableEvent:function(u){Oe({sortable:n,name:u,originalEvent:o})}},r))};function Oe(e){sp(ft({putSortable:Ne,cloneEl:we,targetEl:H,rootEl:be,oldIndex:Yt,oldDraggableIndex:Sn,newIndex:Ue,newDraggableIndex:St},e))}var H,Re,re,be,Tt,Zn,we,Ct,Yt,Ue,Sn,St,Bn,Ne,Xt=!1,ml=!1,_l=[],Nt,Ze,Ll,Hl,Er,Mr,pn,Wt,Cn,$n=!1,xn=!1,el,Pe,Gl=[],_o=!1,vl=[],El=typeof document<"u",Wn=eu,Fr=zn||kt?"cssFloat":"float",up=El&&!tu&&!eu&&"draggable"in document.createElement("div"),su=function(){if(El){if(kt)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),au=function(t,n){var l=ne(t),o=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),r=rn(t,0,n),s=rn(t,1,n),u=r&&ne(r),a=s&&ne(s),f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Me(r).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Me(s).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&u.float&&u.float!=="none"){var d=u.float==="left"?"left":"right";return s&&(a.clear==="both"||a.clear===d)?"vertical":"horizontal"}return r&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||f>=o&&l[Fr]==="none"||s&&l[Fr]==="none"&&f+c>o)?"vertical":"horizontal"},fp=function(t,n,l){var o=l?t.left:t.top,r=l?t.right:t.bottom,s=l?t.width:t.height,u=l?n.left:n.top,a=l?n.right:n.bottom,f=l?n.width:n.height;return o===u||r===a||o+s/2===u+f/2},cp=function(t,n){var l;return _l.some(function(o){var r=o[Xe].options.emptyInsertThreshold;if(!(!r||qo(o))){var s=Me(o),u=t>=s.left-r&&t<=s.right+r,a=n>=s.top-r&&n<=s.bottom+r;if(u&&a)return l=o}}),l},uu=function(t){function n(r,s){return function(u,a,f,c){var d=u.options.group.name&&a.options.group.name&&u.options.group.name===a.options.group.name;if(r==null&&(s||d))return!0;if(r==null||r===!1)return!1;if(s&&r==="clone")return r;if(typeof r=="function")return n(r(u,a,f,c),s)(u,a,f,c);var g=(s?u:a).options.group.name;return r===!0||typeof r=="string"&&r===g||r.join&&r.indexOf(g)>-1}}var l={},o=t.group;(!o||Jn(o)!="object")&&(o={name:o}),l.name=o.name,l.checkPull=n(o.pull,!0),l.checkPut=n(o.put),l.revertClone=o.revertClone,t.group=l},fu=function(){!su&&re&&ne(re,"display","none")},cu=function(){!su&&re&&ne(re,"display","")};El&&!tu&&document.addEventListener("click",function(e){if(ml)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ml=!1,!1},!0);var Pt=function(t){if(H){t=t.touches?t.touches[0]:t;var n=cp(t.clientX,t.clientY);if(n){var l={};for(var o in t)t.hasOwnProperty(o)&&(l[o]=t[o]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[Xe]._onDragOver(l)}}},dp=function(t){H&&H.parentNode[Xe]._isOutsideThisEl(t.target)};function Z(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=wt({},t),e[Xe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return au(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,u){s.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Z.supportPointer!==!1&&"PointerEvent"in window&&!yn,emptyInsertThreshold:5};Vn.initializePlugins(this,e,n);for(var l in n)!(l in t)&&(t[l]=n[l]);uu(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:up,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ge(e,"pointerdown",this._onTapStart):(ge(e,"mousedown",this._onTapStart),ge(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ge(e,"dragover",this),ge(e,"dragenter",this)),_l.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),wt(this,op())}Z.prototype={constructor:Z,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Wt=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,H):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,l=this.el,o=this.options,r=o.preventOnFilter,s=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,a=(u||t).target,f=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,c=o.filter;if(wp(l),!H&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||o.disabled)&&!f.isContentEditable&&!(!this.nativeDraggable&&yn&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=ot(a,o.draggable,l,!1),!(a&&a.animated)&&Zn!==a)){if(Yt=Qe(a),Sn=Qe(a,o.draggable),typeof c=="function"){if(c.call(this,t,a,this)){Oe({sortable:n,rootEl:f,name:"filter",targetEl:a,toEl:l,fromEl:l}),Le("filter",n,{evt:t}),r&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=ot(f,d.trim(),l,!1),d)return Oe({sortable:n,rootEl:d,name:"filter",targetEl:a,fromEl:l,toEl:l}),Le("filter",n,{evt:t}),!0}),c)){r&&t.cancelable&&t.preventDefault();return}o.handle&&!ot(f,o.handle,l,!1)||this._prepareDragStart(t,u,a)}}},_prepareDragStart:function(t,n,l){var o=this,r=o.el,s=o.options,u=r.ownerDocument,a;if(l&&!H&&l.parentNode===r){var f=Me(l);if(be=r,H=l,Re=H.parentNode,Tt=H.nextSibling,Zn=l,Bn=s.group,Z.dragged=H,Nt={target:H,clientX:(n||t).clientX,clientY:(n||t).clientY},Er=Nt.clientX-f.left,Mr=Nt.clientY-f.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,H.style["will-change"]="all",a=function(){if(Le("delayEnded",o,{evt:t}),Z.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Cr&&o.nativeDraggable&&(H.draggable=!0),o._triggerDragStart(t,n),Oe({sortable:o,name:"choose",originalEvent:t}),We(H,s.chosenClass,!0)},s.ignore.split(",").forEach(function(c){lu(H,c.trim(),jl)}),ge(u,"dragover",Pt),ge(u,"mousemove",Pt),ge(u,"touchmove",Pt),ge(u,"mouseup",o._onDrop),ge(u,"touchend",o._onDrop),ge(u,"touchcancel",o._onDrop),Cr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,H.draggable=!0),Le("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(zn||kt))){if(Z.eventCanceled){this._onDrop();return}ge(u,"mouseup",o._disableDelayedDrag),ge(u,"touchend",o._disableDelayedDrag),ge(u,"touchcancel",o._disableDelayedDrag),ge(u,"mousemove",o._delayedDragTouchMoveHandler),ge(u,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&ge(u,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,s.delay)}else a()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){H&&jl(H),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;de(t,"mouseup",this._disableDelayedDrag),de(t,"touchend",this._disableDelayedDrag),de(t,"touchcancel",this._disableDelayedDrag),de(t,"mousemove",this._delayedDragTouchMoveHandler),de(t,"touchmove",this._delayedDragTouchMoveHandler),de(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?ge(document,"pointermove",this._onTouchMove):n?ge(document,"touchmove",this._onTouchMove):ge(document,"mousemove",this._onTouchMove):(ge(H,"dragend",this),ge(be,"dragstart",this._onDragStart));try{document.selection?tl(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Xt=!1,be&&H){Le("dragStarted",this,{evt:n}),this.nativeDraggable&&ge(document,"dragover",dp);var l=this.options;!t&&We(H,l.dragClass,!1),We(H,l.ghostClass,!0),Z.active=this,t&&this._appendGhost(),Oe({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ze){this._lastX=Ze.clientX,this._lastY=Ze.clientY,fu();for(var t=document.elementFromPoint(Ze.clientX,Ze.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ze.clientX,Ze.clientY),t!==n);)n=t;if(H.parentNode[Xe]._isOutsideThisEl(t),n)do{if(n[Xe]){var l=void 0;if(l=n[Xe]._onDragOver({clientX:Ze.clientX,clientY:Ze.clientY,target:t,rootEl:n}),l&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);cu()}},_onTouchMove:function(t){if(Nt){var n=this.options,l=n.fallbackTolerance,o=n.fallbackOffset,r=t.touches?t.touches[0]:t,s=re&&en(re,!0),u=re&&s&&s.a,a=re&&s&&s.d,f=Wn&&Pe&&Rr(Pe),c=(r.clientX-Nt.clientX+o.x)/(u||1)+(f?f[0]-Gl[0]:0)/(u||1),d=(r.clientY-Nt.clientY+o.y)/(a||1)+(f?f[1]-Gl[1]:0)/(a||1);if(!Z.active&&!Xt){if(l&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<l)return;this._onDragStart(t,!0)}if(re){s?(s.e+=c-(Ll||0),s.f+=d-(Hl||0)):s={a:1,b:0,c:0,d:1,e:c,f:d};var g="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");ne(re,"webkitTransform",g),ne(re,"mozTransform",g),ne(re,"msTransform",g),ne(re,"transform",g),Ll=c,Hl=d,Ze=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!re){var t=this.options.fallbackOnBody?document.body:be,n=Me(H,!0,Wn,!0,t),l=this.options;if(Wn){for(Pe=t;ne(Pe,"position")==="static"&&ne(Pe,"transform")==="none"&&Pe!==document;)Pe=Pe.parentNode;Pe!==document.body&&Pe!==document.documentElement?(Pe===document&&(Pe=at()),n.top+=Pe.scrollTop,n.left+=Pe.scrollLeft):Pe=at(),Gl=Rr(Pe)}re=H.cloneNode(!0),We(re,l.ghostClass,!1),We(re,l.fallbackClass,!0),We(re,l.dragClass,!0),ne(re,"transition",""),ne(re,"transform",""),ne(re,"box-sizing","border-box"),ne(re,"margin",0),ne(re,"top",n.top),ne(re,"left",n.left),ne(re,"width",n.width),ne(re,"height",n.height),ne(re,"opacity","0.8"),ne(re,"position",Wn?"absolute":"fixed"),ne(re,"zIndex","100000"),ne(re,"pointerEvents","none"),Z.ghost=re,t.appendChild(re),ne(re,"transform-origin",Er/parseInt(re.style.width)*100+"% "+Mr/parseInt(re.style.height)*100+"%")}},_onDragStart:function(t,n){var l=this,o=t.dataTransfer,r=l.options;if(Le("dragStart",this,{evt:t}),Z.eventCanceled){this._onDrop();return}Le("setupClone",this),Z.eventCanceled||(we=ru(H),we.removeAttribute("id"),we.draggable=!1,we.style["will-change"]="",this._hideClone(),We(we,this.options.chosenClass,!1),Z.clone=we),l.cloneId=tl(function(){Le("clone",l),!Z.eventCanceled&&(l.options.removeCloneOnHide||be.insertBefore(we,H),l._hideClone(),Oe({sortable:l,name:"clone"}))}),!n&&We(H,r.dragClass,!0),n?(ml=!0,l._loopId=setInterval(l._emulateDragOver,50)):(de(document,"mouseup",l._onDrop),de(document,"touchend",l._onDrop),de(document,"touchcancel",l._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(l,o,H)),ge(document,"drop",l),ne(H,"transform","translateZ(0)")),Xt=!0,l._dragStartId=tl(l._dragStarted.bind(l,n,t)),ge(document,"selectstart",l),pn=!0,yn&&ne(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,l=t.target,o,r,s,u=this.options,a=u.group,f=Z.active,c=Bn===a,d=u.sort,g=Ne||f,p,m=this,_=!1;if(_o)return;function v(K,U){Le(K,m,ft({evt:t,isOwner:c,axis:p?"vertical":"horizontal",revert:s,dragRect:o,targetRect:r,canSort:d,fromSortable:g,target:l,completed:y,onMove:function(Q,Ce){return Un(be,n,H,o,Q,Me(Q),t,Ce)},changed:C},U))}function w(){v("dragOverAnimationCapture"),m.captureAnimationState(),m!==g&&g.captureAnimationState()}function y(K){return v("dragOverCompleted",{insertion:K}),K&&(c?f._hideClone():f._showClone(m),m!==g&&(We(H,Ne?Ne.options.ghostClass:f.options.ghostClass,!1),We(H,u.ghostClass,!0)),Ne!==m&&m!==Z.active?Ne=m:m===Z.active&&Ne&&(Ne=null),g===m&&(m._ignoreWhileAnimating=l),m.animateAll(function(){v("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(l===H&&!H.animated||l===n&&!l.animated)&&(Wt=null),!u.dragoverBubble&&!t.rootEl&&l!==document&&(H.parentNode[Xe]._isOutsideThisEl(t.target),!K&&Pt(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),_=!0}function C(){Ue=Qe(H),St=Qe(H,u.draggable),Oe({sortable:m,name:"change",toEl:n,newIndex:Ue,newDraggableIndex:St,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),l=ot(l,u.draggable,n,!0),v("dragOver"),Z.eventCanceled)return _;if(H.contains(t.target)||l.animated&&l.animatingX&&l.animatingY||m._ignoreWhileAnimating===l)return y(!1);if(ml=!1,f&&!u.disabled&&(c?d||(s=Re!==be):Ne===this||(this.lastPutMode=Bn.checkPull(this,f,H,t))&&a.checkPut(this,f,H,t))){if(p=this._getDirection(t,l)==="vertical",o=Me(H),v("dragOverValid"),Z.eventCanceled)return _;if(s)return Re=be,w(),this._hideClone(),v("revert"),Z.eventCanceled||(Tt?be.insertBefore(H,Tt):be.appendChild(H)),y(!0);var E=qo(n,u.draggable);if(!E||mp(t,p,this)&&!E.animated){if(E===H)return y(!1);if(E&&n===t.target&&(l=E),l&&(r=Me(l)),Un(be,n,H,o,l,r,t,!!l)!==!1)return w(),E&&E.nextSibling?n.insertBefore(H,E.nextSibling):n.appendChild(H),Re=n,C(),y(!0)}else if(E&&pp(t,p,this)){var S=rn(n,0,u,!0);if(S===H)return y(!1);if(l=S,r=Me(l),Un(be,n,H,o,l,r,t,!1)!==!1)return w(),n.insertBefore(H,S),Re=n,C(),y(!0)}else if(l.parentNode===n){r=Me(l);var F=0,$,R=H.parentNode!==n,k=!fp(H.animated&&H.toRect||o,l.animated&&l.toRect||r,p),M=p?"top":"left",I=Ar(l,"top","top")||Ar(H,"top","top"),D=I?I.scrollTop:void 0;Wt!==l&&($=r[M],$n=!1,xn=!k&&u.invertSwap||R),F=_p(t,l,r,p,k?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,xn,Wt===l);var V;if(F!==0){var T=Qe(H);do T-=F,V=Re.children[T];while(V&&(ne(V,"display")==="none"||V===re))}if(F===0||V===l)return y(!1);Wt=l,Cn=F;var x=l.nextElementSibling,W=!1;W=F===1;var G=Un(be,n,H,o,l,r,t,W);if(G!==!1)return(G===1||G===-1)&&(W=G===1),_o=!0,setTimeout(gp,30),w(),W&&!x?n.appendChild(H):l.parentNode.insertBefore(H,W?x:l),I&&iu(I,0,D-I.scrollTop),Re=H.parentNode,$!==void 0&&!xn&&(el=Math.abs($-Me(l)[M])),C(),y(!0)}if(n.contains(H))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){de(document,"mousemove",this._onTouchMove),de(document,"touchmove",this._onTouchMove),de(document,"pointermove",this._onTouchMove),de(document,"dragover",Pt),de(document,"mousemove",Pt),de(document,"touchmove",Pt)},_offUpEvents:function(){var t=this.el.ownerDocument;de(t,"mouseup",this._onDrop),de(t,"touchend",this._onDrop),de(t,"pointerup",this._onDrop),de(t,"touchcancel",this._onDrop),de(document,"selectstart",this)},_onDrop:function(t){var n=this.el,l=this.options;if(Ue=Qe(H),St=Qe(H,l.draggable),Le("drop",this,{evt:t}),Re=H&&H.parentNode,Ue=Qe(H),St=Qe(H,l.draggable),Z.eventCanceled){this._nulling();return}Xt=!1,xn=!1,$n=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),vo(this.cloneId),vo(this._dragStartId),this.nativeDraggable&&(de(document,"drop",this),de(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),yn&&ne(document.body,"user-select",""),ne(H,"transform",""),t&&(pn&&(t.cancelable&&t.preventDefault(),!l.dropBubble&&t.stopPropagation()),re&&re.parentNode&&re.parentNode.removeChild(re),(be===Re||Ne&&Ne.lastPutMode!=="clone")&&we&&we.parentNode&&we.parentNode.removeChild(we),H&&(this.nativeDraggable&&de(H,"dragend",this),jl(H),H.style["will-change"]="",pn&&!Xt&&We(H,Ne?Ne.options.ghostClass:this.options.ghostClass,!1),We(H,this.options.chosenClass,!1),Oe({sortable:this,name:"unchoose",toEl:Re,newIndex:null,newDraggableIndex:null,originalEvent:t}),be!==Re?(Ue>=0&&(Oe({rootEl:Re,name:"add",toEl:Re,fromEl:be,originalEvent:t}),Oe({sortable:this,name:"remove",toEl:Re,originalEvent:t}),Oe({rootEl:Re,name:"sort",toEl:Re,fromEl:be,originalEvent:t}),Oe({sortable:this,name:"sort",toEl:Re,originalEvent:t})),Ne&&Ne.save()):Ue!==Yt&&Ue>=0&&(Oe({sortable:this,name:"update",toEl:Re,originalEvent:t}),Oe({sortable:this,name:"sort",toEl:Re,originalEvent:t})),Z.active&&((Ue==null||Ue===-1)&&(Ue=Yt,St=Sn),Oe({sortable:this,name:"end",toEl:Re,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Le("nulling",this),be=H=Re=re=Tt=we=Zn=Ct=Nt=Ze=pn=Ue=St=Yt=Sn=Wt=Cn=Ne=Bn=Z.dragged=Z.ghost=Z.clone=Z.active=null,vl.forEach(function(t){t.checked=!0}),vl.length=Ll=Hl=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":H&&(this._onDragOver(t),hp(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,l=this.el.children,o=0,r=l.length,s=this.options;o<r;o++)n=l[o],ot(n,s.draggable,this.el,!1)&&t.push(n.getAttribute(s.dataIdAttr)||bp(n));return t},sort:function(t,n){var l={},o=this.el;this.toArray().forEach(function(r,s){var u=o.children[s];ot(u,this.options.draggable,o,!1)&&(l[r]=u)},this),n&&this.captureAnimationState(),t.forEach(function(r){l[r]&&(o.removeChild(l[r]),o.appendChild(l[r]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return ot(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var l=this.options;if(n===void 0)return l[t];var o=Vn.modifyOption(this,t,n);typeof o<"u"?l[t]=o:l[t]=n,t==="group"&&uu(l)},destroy:function(){Le("destroy",this);var t=this.el;t[Xe]=null,de(t,"mousedown",this._onTapStart),de(t,"touchstart",this._onTapStart),de(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(de(t,"dragover",this),de(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_l.splice(_l.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Ct){if(Le("hideClone",this),Z.eventCanceled)return;ne(we,"display","none"),this.options.removeCloneOnHide&&we.parentNode&&we.parentNode.removeChild(we),Ct=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Ct){if(Le("showClone",this),Z.eventCanceled)return;H.parentNode==be&&!this.options.group.revertClone?be.insertBefore(we,H):Tt?be.insertBefore(we,Tt):be.appendChild(we),this.options.group.revertClone&&this.animate(H,we),ne(we,"display",""),Ct=!1}}};function hp(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Un(e,t,n,l,o,r,s,u){var a,f=e[Xe],c=f.options.onMove,d;return window.CustomEvent&&!kt&&!zn?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=t,a.from=e,a.dragged=n,a.draggedRect=l,a.related=o||t,a.relatedRect=r||Me(t),a.willInsertAfter=u,a.originalEvent=s,e.dispatchEvent(a),c&&(d=c.call(f,a,s)),d}function jl(e){e.draggable=!1}function gp(){_o=!1}function pp(e,t,n){var l=Me(rn(n.el,0,n.options,!0)),o=10;return t?e.clientX<l.left-o||e.clientY<l.top&&e.clientX<l.right:e.clientY<l.top-o||e.clientY<l.bottom&&e.clientX<l.left}function mp(e,t,n){var l=Me(qo(n.el,n.options.draggable)),o=10;return t?e.clientX>l.right+o||e.clientX<=l.right&&e.clientY>l.bottom&&e.clientX>=l.left:e.clientX>l.right&&e.clientY>l.top||e.clientX<=l.right&&e.clientY>l.bottom+o}function _p(e,t,n,l,o,r,s,u){var a=l?e.clientY:e.clientX,f=l?n.height:n.width,c=l?n.top:n.left,d=l?n.bottom:n.right,g=!1;if(!s){if(u&&el<f*o){if(!$n&&(Cn===1?a>c+f*r/2:a<d-f*r/2)&&($n=!0),$n)g=!0;else if(Cn===1?a<c+el:a>d-el)return-Cn}else if(a>c+f*(1-o)/2&&a<d-f*(1-o)/2)return vp(t)}return g=g||s,g&&(a<c+f*r/2||a>d-f*r/2)?a>c+f/2?1:-1:0}function vp(e){return Qe(H)<Qe(e)?1:-1}function bp(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,l=0;n--;)l+=t.charCodeAt(n);return l.toString(36)}function wp(e){vl.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var l=t[n];l.checked&&vl.push(l)}}function tl(e){return setTimeout(e,0)}function vo(e){return clearTimeout(e)}El&&ge(document,"touchmove",function(e){(Z.active||Xt)&&e.cancelable&&e.preventDefault()});Z.utils={on:ge,off:de,css:ne,find:lu,is:function(t,n){return!!ot(t,n,t,!1)},extend:np,throttle:ou,closest:ot,toggleClass:We,clone:ru,index:Qe,nextTick:tl,cancelNextTick:vo,detectDirection:au,getChild:rn};Z.get=function(e){return e[Xe]};Z.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(Z.utils=ft(ft({},Z.utils),l.utils)),Vn.mount(l)})};Z.create=function(e,t){return new Z(e,t)};Z.version=Zg;var Ee=[],mn,bo,wo=!1,Bl,xl,bl,_n;function yp(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?ge(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ge(document,"pointermove",this._handleFallbackAutoScroll):l.touches?ge(document,"touchmove",this._handleFallbackAutoScroll):ge(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?de(document,"dragover",this._handleAutoScroll):(de(document,"pointermove",this._handleFallbackAutoScroll),de(document,"touchmove",this._handleFallbackAutoScroll),de(document,"mousemove",this._handleFallbackAutoScroll)),Dr(),nl(),lp()},nulling:function(){bl=bo=mn=wo=_n=Bl=xl=null,Ee.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var o=this,r=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(r,s);if(bl=n,l||this.options.forceAutoScrollFallback||zn||kt||yn){Wl(n,this.options,u,l);var a=Rt(u,!0);wo&&(!_n||r!==Bl||s!==xl)&&(_n&&Dr(),_n=setInterval(function(){var f=Rt(document.elementFromPoint(r,s),!0);f!==a&&(a=f,nl()),Wl(n,o.options,f,l)},10),Bl=r,xl=s)}else{if(!this.options.bubbleScroll||Rt(u,!0)===at()){nl();return}Wl(n,this.options,Rt(u,!1),!1)}}},wt(e,{pluginName:"scroll",initializeByDefault:!0})}function nl(){Ee.forEach(function(e){clearInterval(e.pid)}),Ee=[]}function Dr(){clearInterval(_n)}var Wl=ou(function(e,t,n,l){if(t.scroll){var o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,u=t.scrollSpeed,a=at(),f=!1,c;bo!==n&&(bo=n,nl(),mn=t.scroll,c=t.scrollFn,mn===!0&&(mn=Rt(n,!0)));var d=0,g=mn;do{var p=g,m=Me(p),_=m.top,v=m.bottom,w=m.left,y=m.right,C=m.width,E=m.height,S=void 0,F=void 0,$=p.scrollWidth,R=p.scrollHeight,k=ne(p),M=p.scrollLeft,I=p.scrollTop;p===a?(S=C<$&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),F=E<R&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(S=C<$&&(k.overflowX==="auto"||k.overflowX==="scroll"),F=E<R&&(k.overflowY==="auto"||k.overflowY==="scroll"));var D=S&&(Math.abs(y-o)<=s&&M+C<$)-(Math.abs(w-o)<=s&&!!M),V=F&&(Math.abs(v-r)<=s&&I+E<R)-(Math.abs(_-r)<=s&&!!I);if(!Ee[d])for(var T=0;T<=d;T++)Ee[T]||(Ee[T]={});(Ee[d].vx!=D||Ee[d].vy!=V||Ee[d].el!==p)&&(Ee[d].el=p,Ee[d].vx=D,Ee[d].vy=V,clearInterval(Ee[d].pid),(D!=0||V!=0)&&(f=!0,Ee[d].pid=setInterval((function(){l&&this.layer===0&&Z.active._onTouchMove(bl);var x=Ee[this.layer].vy?Ee[this.layer].vy*u:0,W=Ee[this.layer].vx?Ee[this.layer].vx*u:0;typeof c=="function"&&c.call(Z.dragged.parentNode[Xe],W,x,e,bl,Ee[this.layer].el)!=="continue"||iu(Ee[this.layer].el,W,x)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&g!==a&&(g=Rt(g,!1)));wo=f}},30),du=function(t){var n=t.originalEvent,l=t.putSortable,o=t.dragEl,r=t.activeSortable,s=t.dispatchSortableEvent,u=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(n){var f=l||r;u();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);a(),f&&!f.el.contains(d)&&(s("spill"),this.onSpill({dragEl:o,putSortable:l}))}};function Lo(){}Lo.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,l=t.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var o=rn(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:du};wt(Lo,{pluginName:"revertOnSpill"});function Ho(){}Ho.prototype={onSpill:function(t){var n=t.dragEl,l=t.putSortable,o=l||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:du};wt(Ho,{pluginName:"removeOnSpill"});Z.mount(new yp);Z.mount(Ho,Lo);function Ir(e,t,n){const l=e.slice();return l[23]=t[n],l[25]=n,l}function Nr(e,t,n){const l=e.slice();return l[26]=t[n],l[28]=n,l}function Pr(e,t,n){const l=e.slice();return l[29]=t[n],l[28]=n,l}function Or(e){let t,n=e[28]+1+"",l;return{c(){t=A("option"),l=L(n),t.__value=e[28]+1,t.value=t.__value,h(t,"class","svelte-1nj8mt0")},m(o,r){O(o,t,r),b(t,l)},p:X,d(o){o&&P(t)}}}function Tr(e,t){let n,l,o=t[1][t[28]]+"",r,s,u,a,f=t[23][t[1][t[28]]]+"",c,d,g,p,m,_,v,w,y,C=Array(t[0]).fill(),E=[];for(let $=0;$<C.length;$+=1)E[$]=Or(Pr(t,C,$));function S(...$){return t[16](t[23],t[28],...$)}function F(...$){return t[17](t[23],...$)}return{key:e,first:null,c(){n=A("div"),l=A("h5"),r=L(o),s=L(":"),u=N(),a=A("p"),c=L(f),d=N(),g=A("div"),p=L(`Rank:
                        `),m=A("select");for(let $=0;$<E.length;$+=1)E[$].c();_=N(),h(l,"class","bold underline svelte-1nj8mt0"),h(a,"class","svelte-1nj8mt0"),h(m,"class","answer-rank"),h(n,"class","answer svelte-1nj8mt0"),h(n,"id",v=`answer-${t[28]}-${t[23].qid}`),this.first=n},m($,R){O($,n,R),b(n,l),b(l,r),b(l,s),b(n,u),b(n,a),b(a,c),b(n,d),b(n,g),b(g,p),b(g,m);for(let k=0;k<E.length;k+=1)E[k]&&E[k].m(m,null);b(n,_),w||(y=[B(m,"change",S),B(n,"dragend",F)],w=!0)},p($,R){if(t=$,R&3&&o!==(o=t[1][t[28]]+"")&&J(r,o),R&259&&f!==(f=t[23][t[1][t[28]]]+"")&&J(c,f),R&1){C=Array(t[0]).fill();let k;for(k=0;k<C.length;k+=1){const M=Pr(t,C,k);E[k]?E[k].p(M,R):(E[k]=Or(M),E[k].c(),E[k].m(m,null))}for(;k<E.length;k+=1)E[k].d(1);E.length=C.length}R&257&&v!==(v=`answer-${t[28]}-${t[23].qid}`)&&h(n,"id",v)},d($){$&&P(n),pe(E,$),w=!1,he(y)}}}function zr(e,t){let n,l,o,r,s,u,a=t[23].qid+"",f,c,d,g=t[23].question+"",p,m,_,v=[],w=new Map,y,C,E,S,F=Array(t[0]).fill();const $=R=>R[28];for(let R=0;R<F.length;R+=1){let k=Nr(t,F,R),M=$(k);w.set(M,v[R]=Tr(M,k))}return{key:e,first:null,c(){n=A("div"),l=A("div"),o=A("div"),r=A("div"),s=A("h5"),u=L("Question: "),f=L(a),c=N(),d=A("p"),p=L(g),m=N(),_=A("div");for(let R=0;R<v.length;R+=1)v[R].c();y=N(),h(s,"class","bold svelte-1nj8mt0"),h(d,"class","svelte-1nj8mt0"),h(r,"class","question svelte-1nj8mt0"),h(_,"class","answers"),ye(_,"display","grid"),ye(_,"grid-template-columns",t[7]),ye(_,"gap",".25%"),ye(_,"width","100%"),ye(_,"margin","auto"),h(o,"class","message-content svelte-1nj8mt0"),h(l,"class","chat-message-center svelte-1nj8mt0"),h(n,"class","chat-message svelte-1nj8mt0"),this.first=n},m(R,k){O(R,n,k),b(n,l),b(l,o),b(o,r),b(r,s),b(s,u),b(s,f),b(r,c),b(r,d),b(d,p),b(o,m),b(o,_);for(let M=0;M<v.length;M+=1)v[M]&&v[M].m(_,null);t[18](_),b(n,y),E||(S=Lt(C=Sp.call(null,n,t[25]===t[8].length-1)),E=!0)},p(R,k){t=R,k&256&&a!==(a=t[23].qid+"")&&J(f,a),k&256&&g!==(g=t[23].question+"")&&J(p,g),k&3331&&(F=Array(t[0]).fill(),v=vt(v,k,$,1,t,F,w,_,nn,Tr,null,Nr)),k&128&&ye(_,"grid-template-columns",t[7]),C&&Ve(C.update)&&k&256&&C.update.call(null,t[25]===t[8].length-1)},d(R){R&&P(n);for(let k=0;k<v.length;k+=1)v[k].d();t[18](null),E=!1,S()}}}function kp(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,w,y,C=[],E=new Map,S,F,$,R,k,M,I=(e[4]?e[6]:"Send")+"",D,V,T,x,W;function G(Q){e[15](Q)}let K={table:"comparator/db"};e[5]!==void 0&&(K.showModal=e[5]),t=new No({props:K}),nt.push(()=>En(t,"showModal",G));let U=e[8];const Y=Q=>Q[25];for(let Q=0;Q<U.length;Q+=1){let Ce=Ir(e,U,Q),De=Y(Ce);E.set(De,C[Q]=zr(De,Ce))}return{c(){le(t.$$.fragment),l=N(),o=A("div"),r=A("div"),s=A("h5"),s.textContent="Q & A Comparison Instructions",u=N(),a=A("br"),f=N(),c=A("p"),c.textContent=`Ask a question and rank the answers across the models. Drag each answer to
      rank it, in ascending order, from left-to-right. Optionally, select the
      rank for each via the corresponding dropdown.`,d=N(),g=A("br"),p=N(),m=A("button"),m.textContent="Download Data",_=N(),v=A("div"),w=A("section"),y=A("div");for(let Q=0;Q<C.length;Q+=1)C[Q].c();S=N(),F=A("div"),$=A("form"),R=A("input"),k=N(),M=A("button"),D=L(I),h(s,"class","underline bold svelte-1nj8mt0"),h(c,"class","svelte-1nj8mt0"),h(m,"class","svelte-1nj8mt0"),h(r,"class","instructions svelte-1nj8mt0"),h(y,"class","chat-log svelte-1nj8mt0"),h(w,"class","chatbox svelte-1nj8mt0"),h(R,"class","chat-input-textarea svelte-1nj8mt0"),h(R,"placeholder","Type Message Here"),h(M,"class",V="btnyousend "+(e[3]===""?"":"active")+" svelte-1nj8mt0"),h(M,"type","submit"),h($,"class","chat-input-form svelte-1nj8mt0"),h(F,"class","chat-input-holder svelte-1nj8mt0"),h(v,"class","ranked-chat svelte-1nj8mt0"),h(o,"class","ranked-feedback-container svelte-1nj8mt0")},m(Q,Ce){ee(t,Q,Ce),O(Q,l,Ce),O(Q,o,Ce),b(o,r),b(r,s),b(r,u),b(r,a),b(r,f),b(r,c),b(r,d),b(r,g),b(r,p),b(r,m),b(o,_),b(o,v),b(v,w),b(w,y);for(let De=0;De<C.length;De+=1)C[De]&&C[De].m(y,null);b(v,S),b(v,F),b(F,$),b($,R),Ke(R,e[3]),b($,k),b($,M),b(M,D),T=!0,x||(W=[B(m,"click",e[12]),B(R,"input",e[19]),B($,"submit",e[9])],x=!0)},p(Q,[Ce]){const De={};!n&&Ce&32&&(n=!0,De.showModal=Q[5],Rn(()=>n=!1)),t.$set(De),Ce&3463&&(U=Q[8],C=vt(C,Ce,Y,1,Q,U,E,y,nn,zr,null,Ir)),Ce&8&&R.value!==Q[3]&&Ke(R,Q[3]),(!T||Ce&80)&&I!==(I=(Q[4]?Q[6]:"Send")+"")&&J(D,I),(!T||Ce&8&&V!==(V="btnyousend "+(Q[3]===""?"":"active")+" svelte-1nj8mt0"))&&h(M,"class",V)},i(Q){T||(z(t.$$.fragment,Q),T=!0)},o(Q){q(t.$$.fragment,Q),T=!1},d(Q){te(t,Q),Q&&P(l),Q&&P(o);for(let Ce=0;Ce<C.length;Ce+=1)C[Ce].d();x=!1,he(W)}}}function Sp(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function Vr(e){console.log("run update",e);const n=await fetch("/chat/comparator/db/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})});if(n.ok)console.log("ok",n);else{const l=await n.text();alert(l)}}function Cp(e,t,n){let l,o,r;ae(e,cn,k=>n(8,r=k));let{numModels:s=1}=t,{models:u=[0]}=t,a="",f="",c=!1,d=!1;dt(async()=>{if(await new Promise(k=>setTimeout(k,200)),_){const k=new Z(_,{animation:150,onUpdate(M){k.toArray()}});k.toArray()}g()});async function g(){const M=await(await fetch("/chat/comparator/db/retrieve")).json();console.log(M);const I=M.data;let D={},V=new Set;for(const T of I)V.add(T.model),D[T.qid]||(D[T.qid]={},D[T.qid].qid=T.qid,D[T.qid].question=T.question),D[T.qid][T.model]=T.answer,console.log(D);n(1,u=Array.from(V)),n(0,s=u.length),console.log(Object.values(D)),Fe(cn,r=[...Object.values(D)],r)}const p=async k=>{k.preventDefault(),a=f,n(3,f=""),n(4,c=!0);let M={question:a};for(let D of u)M[D]="Loading...";Fe(cn,r=[...r,M],r),console.log("compare chat log",cn);const I=await fetch(`/chat/comparator/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})});if(I.ok){const D=await I.json();n(1,u=Object.keys(D.answer)),n(0,s=u.length);for(let V of u)M[V]=D.answer[V];M.qid=D.qid,cn.update(V=>(V[V.length-1]=M,V))}else{const D=await I.text();alert(D)}n(4,c=!1)};let m=0;setInterval(()=>{n(13,m=(m+1)%4)},200);let _,v;function w(k,M){const I=M,V=Fn(k.currentTarget.parentNode).selectAll("div.answer").nodes().map(G=>G.id);V.forEach((G,K)=>{Fn(`#${G}`).select(".answer-rank").property("value",K+1)});let T=[];for(let[G,K]of V.entries()){const U=parseInt(K.split("-")[1]),Y=u[U],Q={rank:G,model:Y};T.push(Q)}let x=r.filter(G=>G.qid===I),W=[];for(let G of T){const K={model:G.model,qid:parseInt(I),rank:parseInt(G.rank)+1,answer:x[0][G.model]};W.push(K)}Vr(W)}function y(k,M,I){const D=M,V=parseInt(k.target.value),T=u[I],x={qid:D,rank:parseInt(V),model:T};let W=[],K=r.filter(Y=>Y.qid===x.qid)[0][x.model];const U={model:x.model,qid:parseInt(x.qid),rank:parseInt(x.rank),answer:K};W.push(U),Vr(W)}function C(){n(5,d=!0)}function E(k){d=k,n(5,d)}const S=(k,M,I)=>y(I,k.qid,M),F=(k,M)=>w(M,k.qid);function $(k){nt[k?"unshift":"push"](()=>{_=k,n(2,_)})}function R(){f=this.value,n(3,f)}return e.$$set=k=>{"numModels"in k&&n(0,s=k.numModels),"models"in k&&n(1,u=k.models)},e.$$.update=()=>{e.$$.dirty&1&&n(7,l="1fr ".repeat(s).trim()),e.$$.dirty&8192&&n(6,o=".".repeat(m).padEnd(3)),e.$$.dirty&16388&&_&&(n(14,v=new Z(_,{animation:150,dataIdAttr:"id",onUpdate(k){v.toArray()}})),v.toArray())},[s,u,_,f,c,d,o,l,r,p,w,y,C,m,v,E,S,F,$,R]}class $p extends fe{constructor(t){super(),ce(this,t,Cp,kp,ue,{numModels:0,models:1})}}const sn=Ie([{model:"llama",qid:1,rank:1,answer:"Llama's first unique answer."},{model:"gpt3.5",qid:1,rank:2,answer:"GPT-3.5's first unique answer."},{model:"gpt4",qid:1,rank:3,answer:"GPT-4's first unique answer."},{model:"claude",qid:1,rank:4,answer:"Claude's first unique answer."},{model:"llama",qid:2,rank:4,answer:"Llama's second unique answer."},{model:"gpt3.5",qid:2,rank:2,answer:"GPT-3.5's second unique answer."},{model:"gpt4",qid:2,rank:4,answer:"GPT-4's second unique answer."},{model:"claude",qid:2,rank:3,answer:"'s second unique answer."}]);function qr(e,t,n){const l=e.slice();return l[20]=t[n],l}function Lr(e,t,n){const l=e.slice();return l[20]=t[n],l[24]=n,l}function Hr(e,t,n){const l=e.slice();return l[25]=t[n],l}function Gr(e){let t,n,l,o,r=`Q.${e[25]}`,s,u;return{c(){t=j("g"),n=j("line"),o=j("text"),s=L(r),h(n,"class","axis-tick svelte-1nna9rx"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[5]+e[12].bottom+e[12].top),h(n,"stroke","black"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-1nna9rx"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[3](e[25])+0} ${e[5]-e[12].bottom})`),h(t,"class","svelte-1nna9rx")},m(a,f){O(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&32&&l!==(l=-a[5]+a[12].bottom+a[12].top)&&h(n,"y2",l),f&256&&r!==(r=`Q.${a[25]}`)&&J(s,r),f&296&&u!==(u=`translate(${a[3](a[25])+0} ${a[5]-a[12].bottom})`)&&h(t,"transform",u)},d(a){a&&P(t)}}}function jr(e){let t=Number.isInteger(e[25]),n,l=t&&Gr(e);return{c(){l&&l.c(),n=ke()},m(o,r){l&&l.m(o,r),O(o,n,r)},p(o,r){r&256&&(t=Number.isInteger(o[25])),t?l?l.p(o,r):(l=Gr(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){l&&l.d(o),o&&P(n)}}}function Br(e,t){let n,l,o,r,s,u,a,f,c;function d(){return t[15](t[24])}function g(){return t[16](t[24])}return{key:e,first:null,c(){n=j("path"),r=j("path"),h(n,"class","model-path-outer svelte-1nna9rx"),h(n,"d",l=t[10](t[20])),h(n,"stroke","white"),h(n,"data-model",o=t[2][t[24]]),h(r,"class","model-path svelte-1nna9rx"),h(r,"d",s=t[10](t[20])),h(r,"role","img"),h(r,"stroke",u=t[11](t[2][t[24]])),h(r,"data-model",a=t[2][t[24]]),this.first=n},m(p,m){O(p,n,m),O(p,r,m),f||(c=[B(r,"mouseover",d),B(r,"focus",g),B(r,"mouseout",wl),B(r,"blur",wl)],f=!0)},p(p,m){t=p,m&1536&&l!==(l=t[10](t[20]))&&h(n,"d",l),m&516&&o!==(o=t[2][t[24]])&&h(n,"data-model",o),m&1536&&s!==(s=t[10](t[20]))&&h(r,"d",s),m&2564&&u!==(u=t[11](t[2][t[24]]))&&h(r,"stroke",u),m&516&&a!==(a=t[2][t[24]])&&h(r,"data-model",a)},d(p){p&&P(n),p&&P(r),f=!1,he(c)}}}function xr(e,t){let n,l,o,r,s,u,a=t[20].rank+"",f,c,d,g;return{key:e,first:null,c(){n=j("g"),l=j("circle"),u=j("text"),f=L(a),h(l,"r",o=t[20].answer.length/2*0+12),h(l,"fill",r=t[11](t[20].model)),h(l,"stroke","white"),h(l,"class","model-circle svelte-1nna9rx"),h(l,"role","img"),h(l,"data-model",s=t[20].model),h(u,"class","bump-text svelte-1nna9rx"),h(u,"text-anchor","middle"),h(u,"alignment-baseline","middle"),h(u,"color","white"),h(u,"fill","white"),h(n,"transform",c=`translate(${t[3](t[20].qid)}, ${t[4](t[20].rank)})`),h(n,"class","svelte-1nna9rx"),this.first=n},m(p,m){O(p,n,m),b(n,l),b(n,u),b(u,f),d||(g=[B(l,"mouseover",t[17]),B(l,"focus",t[18]),B(l,"mouseout",wl),B(l,"blur",wl)],d=!0)},p(p,m){t=p,m&128&&o!==(o=t[20].answer.length/2*0+12)&&h(l,"r",o),m&2176&&r!==(r=t[11](t[20].model))&&h(l,"fill",r),m&128&&s!==(s=t[20].model)&&h(l,"data-model",s),m&128&&a!==(a=t[20].rank+"")&&J(f,a),m&152&&c!==(c=`translate(${t[3](t[20].qid)}, ${t[4](t[20].rank)})`)&&h(n,"transform",c)},d(p){p&&P(n),d=!1,he(g)}}}function Ap(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m=[],_=new Map,v,w=[],y=new Map,C,E,S,F,$,R=e[8],k=[];for(let T=0;T<R.length;T+=1)k[T]=jr(Hr(e,R,T));let M=e[9];const I=T=>T[24];for(let T=0;T<M.length;T+=1){let x=Lr(e,M,T),W=I(x);_.set(W,m[T]=Br(W,x))}let D=e[7];const V=T=>T[20].model+T[20].qid;for(let T=0;T<D.length;T+=1){let x=qr(e,D,T),W=V(x);y.set(W,w[T]=xr(W,x))}return{c(){t=A("div"),n=j("svg"),l=j("line");for(let T=0;T<k.length;T+=1)k[T].c();u=j("text"),f=j("text"),g=j("text");for(let T=0;T<m.length;T+=1)m[T].c();v=ke();for(let T=0;T<w.length;T+=1)w[T].c();C=j("text"),E=L("Per-Question Ranks"),S=j("text"),F=L("Answer ranks over time, by model."),h(l,"class","axis-line svelte-1nna9rx"),h(l,"x1",e[12].left),h(l,"x2",o=e[6]-e[12].right),h(l,"y1",r=e[5]-e[12].bottom),h(l,"y2",s=e[5]-e[12].bottom),h(u,"class","chart-title svelte-1nna9rx"),h(u,"y",e[12].top/2),h(u,"x",a=(e[6]+e[12].left)/2),h(u,"text-anchor","middle"),h(f,"class","axis-label svelte-1nna9rx"),h(f,"y",c=e[5]+e[12].bottom+10),h(f,"x",d=(e[6]+e[12].left)/2),h(f,"text-anchor","middle"),h(g,"class","axis-label svelte-1nna9rx"),h(g,"y",e[12].left/2),h(g,"x",p=-(e[5]/2)),h(g,"text-anchor","middle"),h(g,"transform","rotate(-90)"),h(C,"class","chart-title svelte-1nna9rx"),h(C,"y",e[12].top/2),h(C,"x",e[12].left),h(C,"text-anchor","start"),h(S,"class","chart-subtitle svelte-1nna9rx"),h(S,"y",e[12].top/2+15),h(S,"x",e[12].left),h(S,"opacity",".6"),h(S,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-1nna9rx"),h(t,"id","chart-holder"),h(t,"class","svelte-1nna9rx"),Se(()=>e[19].call(t))},m(T,x){O(T,t,x),b(t,n),b(n,l);for(let W=0;W<k.length;W+=1)k[W]&&k[W].m(n,null);b(n,u),b(n,f),b(n,g);for(let W=0;W<m.length;W+=1)m[W]&&m[W].m(n,null);b(n,v);for(let W=0;W<w.length;W+=1)w[W]&&w[W].m(n,null);b(n,C),b(C,E),b(n,S),b(S,F),$=ct(t,e[19].bind(t))},p(T,[x]){if(x&64&&o!==(o=T[6]-T[12].right)&&h(l,"x2",o),x&32&&r!==(r=T[5]-T[12].bottom)&&h(l,"y1",r),x&32&&s!==(s=T[5]-T[12].bottom)&&h(l,"y2",s),x&4392){R=T[8];let W;for(W=0;W<R.length;W+=1){const G=Hr(T,R,W);k[W]?k[W].p(G,x):(k[W]=jr(G),k[W].c(),k[W].m(n,u))}for(;W<k.length;W+=1)k[W].d(1);k.length=R.length}x&64&&a!==(a=(T[6]+T[12].left)/2)&&h(u,"x",a),x&32&&c!==(c=T[5]+T[12].bottom+10)&&h(f,"y",c),x&64&&d!==(d=(T[6]+T[12].left)/2)&&h(f,"x",d),x&32&&p!==(p=-(T[5]/2))&&h(g,"x",p),x&11780&&(M=T[9],m=vt(m,x,I,1,T,M,_,n,nn,Br,v,Lr)),x&16787608&&(D=T[7],w=vt(w,x,V,1,T,D,y,n,nn,xr,C,qr)),x&2&&h(n,"width",T[1]),x&1&&h(n,"height",T[0])},i:X,o:X,d(T){T&&P(t),pe(k,T);for(let x=0;x<m.length;x+=1)m[x].d();for(let x=0;x<w.length;x+=1)w[x].d();$()}}}function wl(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function Rp(e,t,n){let l,o,r,s,u,a,f,c,d,g,p;ae(e,sn,$=>n(7,p=$));let m,_,v={top:35,bottom:15,left:10,right:0};function w($){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(R=>{R.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${l[$]}"], .model-circle[data-model="${l[$]}"]`).forEach(R=>{R.style.opacity=1})}const y=$=>w($),C=$=>w($),E=()=>w(i),S=()=>w(i);function F(){_=this.offsetWidth,m=this.offsetHeight,n(1,_),n(0,m)}return e.$$.update=()=>{e.$$.dirty&128&&n(2,l=Array.from(new Set(p.map($=>$.model)))),e.$$.dirty&2&&n(6,o=_-v.left-v.right),e.$$.dirty&1&&n(5,r=m-v.top-v.bottom),e.$$.dirty&192&&n(3,s=Bi().domain(p.map($=>$.qid)).padding(.3).range([v.left,o-v.right])),e.$$.dirty&128&&n(14,u=p.map($=>$.rank).sort(($,R)=>$-R)),e.$$.dirty&16416&&n(4,a=Bi().domain(u).padding(1).range([v.top,r-v.bottom])),e.$$.dirty&128&&n(11,f=Dt().domain(p.map($=>$.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"])),e.$$.dirty&24&&n(10,c=$g().x($=>s($.qid)).y($=>a($.rank))),e.$$.dirty&132&&n(9,d=l.map($=>p.filter(R=>R.model===$))),e.$$.dirty&8&&n(8,g=s.domain().length>10?s.domain().filter(($,R)=>R%2===0):s.domain())},[m,_,l,s,a,r,o,p,g,d,c,f,v,w,u,y,C,E,S,F]}class Ep extends fe{constructor(t){super(),ce(this,t,Rp,Ap,ue,{})}}function Wr(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function Ur(e,t,n){const l=e.slice();return l[16]=t[n],l}function Xr(e,t,n){const l=e.slice();return l[16]=t[n],l}function Yr(e){let t,n,l=e[16]+"",o,r;return{c(){t=j("g"),n=j("text"),o=L(l),h(n,"class","axis-text svelte-1y9gffu"),h(n,"x","-5"),h(n,"y","0"),h(n,"text-anchor","end"),h(t,"transform",r=`translate(${e[9].left} ${e[8](e[16])+e[8].bandwidth()/2})`)},m(s,u){O(s,t,u),b(t,n),b(n,o)},p(s,u){u&4&&l!==(l=s[16]+"")&&J(o,l),u&260&&r!==(r=`translate(${s[9].left} ${s[8](s[16])+s[8].bandwidth()/2})`)&&h(t,"transform",r)},d(s){s&&P(t)}}}function Qr(e){let t,n,l=e[16]+"",o,r;return{c(){t=j("g"),n=j("text"),o=L(l),h(n,"class","axis-text svelte-1y9gffu"),h(n,"y","15"),h(n,"text-anchor","middle"),h(t,"transform",r=`translate(${e[7](e[16])}, ${e[4]-e[9].bottom})`)},m(s,u){O(s,t,u),b(t,n),b(n,o)},p(s,u){u&128&&l!==(l=s[16]+"")&&J(o,l),u&144&&r!==(r=`translate(${s[7](s[16])}, ${s[4]-s[9].bottom})`)&&h(t,"transform",r)},d(s){s&&P(t)}}}function Kr(e){let t,n=e[16]%2==0&&Qr(e);return{c(){n&&n.c(),t=ke()},m(l,o){n&&n.m(l,o),O(l,t,o)},p(l,o){l[16]%2==0?n?n.p(l,o):(n=Qr(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){n&&n.d(l),l&&P(t)}}}function Jr(e){let t,n,l,o,r,s,u,a=e[13].avgRank.toFixed(2)+"",f,c,d;return{c(){t=j("rect"),u=j("text"),f=L(a),h(t,"y",n=e[8](e[13].model)),h(t,"x",e[9].left),h(t,"width",l=e[7](e[13].avgRank)-e[9].left),h(t,"height",o=e[8].bandwidth()),h(t,"fill",r=e[6](e[13].model)),h(t,"class","model-path"),h(t,"data-model",s=e[5][e[15]]),h(u,"class","label-text svelte-1y9gffu"),h(u,"y",c=e[8](e[13].model)+e[8].bandwidth()/2),h(u,"x",d=e[7](e[13].avgRank)+5),h(u,"text-anchor","start"),h(u,"dominant-baseline","middle")},m(g,p){O(g,t,p),O(g,u,p),b(u,f)},p(g,p){p&260&&n!==(n=g[8](g[13].model))&&h(t,"y",n),p&132&&l!==(l=g[7](g[13].avgRank)-g[9].left)&&h(t,"width",l),p&256&&o!==(o=g[8].bandwidth())&&h(t,"height",o),p&68&&r!==(r=g[6](g[13].model))&&h(t,"fill",r),p&32&&s!==(s=g[5][g[15]])&&h(t,"data-model",s),p&4&&a!==(a=g[13].avgRank.toFixed(2)+"")&&J(f,a),p&260&&c!==(c=g[8](g[13].model)+g[8].bandwidth()/2)&&h(u,"y",c),p&132&&d!==(d=g[7](g[13].avgRank)+5)&&h(u,"x",d)},d(g){g&&P(t),g&&P(u)}}}function Mp(e){let t,n,l,o,r,s,u,a,f,c,d,g,p=e[2].map(Zr),m=[];for(let C=0;C<p.length;C+=1)m[C]=Yr(Xr(e,p,C));let _=e[7].ticks(),v=[];for(let C=0;C<_.length;C+=1)v[C]=Kr(Ur(e,_,C));let w=e[2],y=[];for(let C=0;C<w.length;C+=1)y[C]=Jr(Wr(e,w,C));return{c(){t=A("div"),n=j("svg");for(let C=0;C<m.length;C+=1)m[C].c();l=ke();for(let C=0;C<v.length;C+=1)v[C].c();o=ke();for(let C=0;C<y.length;C+=1)y[C].c();r=j("line"),f=j("text"),c=L("Average Rank"),d=j("text"),h(r,"class","axis-line svelte-1y9gffu"),h(r,"x1",e[9].left),h(r,"x2",s=e[3]-e[9].right),h(r,"y1",u=e[4]-e[9].bottom),h(r,"y2",a=e[4]-e[9].bottom),h(f,"class","chart-title"),h(f,"y",e[9].top/2),h(f,"x",e[9].left),h(f,"text-anchor","start"),h(d,"class","chart-subtitle"),h(d,"y",e[9].top/2+15),h(d,"x",e[9].left),h(d,"opacity",".6"),h(d,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","bar-chart-holder"),h(t,"class","svelte-1y9gffu"),Se(()=>e[12].call(t))},m(C,E){O(C,t,E),b(t,n);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(n,null);b(n,l);for(let S=0;S<v.length;S+=1)v[S]&&v[S].m(n,null);b(n,o);for(let S=0;S<y.length;S+=1)y[S]&&y[S].m(n,null);b(n,r),b(n,f),b(f,c),b(n,d),g=ct(t,e[12].bind(t))},p(C,[E]){if(E&772){p=C[2].map(Zr);let S;for(S=0;S<p.length;S+=1){const F=Xr(C,p,S);m[S]?m[S].p(F,E):(m[S]=Yr(F),m[S].c(),m[S].m(n,l))}for(;S<m.length;S+=1)m[S].d(1);m.length=p.length}if(E&656){_=C[7].ticks();let S;for(S=0;S<_.length;S+=1){const F=Ur(C,_,S);v[S]?v[S].p(F,E):(v[S]=Kr(F),v[S].c(),v[S].m(n,o))}for(;S<v.length;S+=1)v[S].d(1);v.length=_.length}if(E&996){w=C[2];let S;for(S=0;S<w.length;S+=1){const F=Wr(C,w,S);y[S]?y[S].p(F,E):(y[S]=Jr(F),y[S].c(),y[S].m(n,r))}for(;S<y.length;S+=1)y[S].d(1);y.length=w.length}E&8&&s!==(s=C[3]-C[9].right)&&h(r,"x2",s),E&16&&u!==(u=C[4]-C[9].bottom)&&h(r,"y1",u),E&16&&a!==(a=C[4]-C[9].bottom)&&h(r,"y2",a),E&2&&h(n,"width",C[1]),E&1&&h(n,"height",C[0])},i:X,o:X,d(C){C&&P(t),pe(m,C),pe(v,C),pe(y,C),g()}}}const Zr=e=>e.model;function Fp(e,t,n){let l,o,r,s,u,a,f,c,d;ae(e,sn,v=>n(11,d=v));let g=300,p=500,m={top:50,bottom:0,left:100,right:0};function _(){p=this.offsetWidth,g=this.offsetHeight,n(1,p),n(0,g)}return e.$$.update=()=>{e.$$.dirty&2048&&n(10,l=d.reduce((v,w)=>(v[w.model]?(v[w.model].sum+=w.rank,v[w.model].count++):v[w.model]={sum:w.rank,count:1},v),{})),e.$$.dirty&1024&&n(2,o=Object.keys(l).map(v=>({model:v,avgRank:l[v].sum/l[v].count}))),e.$$.dirty&2&&n(3,r=p-m.left-m.right),e.$$.dirty&1&&n(4,s=g-m.top-m.bottom),e.$$.dirty&20&&n(8,u=Ht().rangeRound([m.top,s-m.bottom]).padding(.05).domain(o.map(v=>v.model))),e.$$.dirty&12&&n(7,a=Ye().rangeRound([m.left,r-m.right]).domain([0,bt(o,v=>v.avgRank)])),e.$$.dirty&4&&n(6,f=Dt().domain(o.map(v=>v.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&2048&&n(5,c=Array.from(new Set(d.map(v=>v.model))))},[g,p,o,r,s,c,f,a,u,m,l,d,_]}class Dp extends fe{constructor(t){super(),ce(this,t,Fp,Mp,ue,{})}}function es(e,t,n){const l=e.slice();return l[20]=t[n],l[22]=n,l}function ts(e,t,n){const l=e.slice();return l[23]=t[n],l[25]=n,l}function ns(e,t,n){const l=e.slice();return l[23]=t[n],l}function ls(e){let t,n=e[23].key+"",l,o,r;function s(){return e[10](e[23])}return{c(){t=A("th"),l=L(n),h(t,"class","svelte-owgjbp")},m(u,a){O(u,t,a),b(t,l),o||(r=B(t,"click",s),o=!0)},p(u,a){e=u,a&64&&n!==(n=e[23].key+"")&&J(l,n)},d(u){u&&P(t),o=!1,r()}}}function os(e,t){let n,l=(t[20][t[23].key].length>rs&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"",o,r,s,u;function a(){return t[11](t[22],t[25])}return{key:e,first:null,c(){n=A("td"),o=L(l),h(n,"class",r="cell-type-"+t[23].type+" svelte-owgjbp"),ye(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),Te(n,"active",t[4]===`${t[22]}-${t[25]}`),this.first=n},m(f,c){O(f,n,c),b(n,o),s||(u=B(n,"click",a),s=!0)},p(f,c){t=f,c&112&&l!==(l=(t[20][t[23].key].length>rs&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"")&&J(o,l),c&64&&r!==(r="cell-type-"+t[23].type+" svelte-owgjbp")&&h(n,"class",r),c&96&&ye(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),c&80&&Te(n,"active",t[4]===`${t[22]}-${t[25]}`)},d(f){f&&P(n),s=!1,u()}}}function is(e){let t,n=[],l=new Map,o,r=e[6];const s=u=>u[23].key;for(let u=0;u<r.length;u+=1){let a=ts(e,r,u),f=s(a);l.set(f,n[u]=os(f,a))}return{c(){t=A("tr");for(let u=0;u<n.length;u+=1)n[u].c();o=N(),h(t,"class","svelte-owgjbp")},m(u,a){O(u,t,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);b(t,o)},p(u,a){a&240&&(r=u[6],n=vt(n,a,s,1,u,r,l,t,nn,os,o,ts))},d(u){u&&P(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Ip(e){let t,n,l,o,r,s,u,a,f,c=e[6],d=[];for(let m=0;m<c.length;m+=1)d[m]=ls(ns(e,c,m));let g=e[5],p=[];for(let m=0;m<g.length;m+=1)p[m]=is(es(e,g,m));return{c(){t=A("div"),n=A("div"),l=A("table"),o=A("thead");for(let m=0;m<d.length;m+=1)d[m].c();r=N(),s=A("tbody");for(let m=0;m<p.length;m+=1)p[m].c();a=N(),f=A("br"),h(o,"class","svelte-owgjbp"),h(s,"class","svelte-owgjbp"),h(l,"class",u="pretty-table "+e[0].style+" svelte-owgjbp"),h(n,"class","svelte-owgjbp"),h(f,"class","svelte-owgjbp"),h(t,"class","table svelte-owgjbp")},m(m,_){O(m,t,_),b(t,n),b(n,l),b(l,o);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(o,null);b(l,r),b(l,s);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(s,null);b(t,a),b(t,f)},p(m,[_]){if(_&78){c=m[6];let v;for(v=0;v<c.length;v+=1){const w=ns(m,c,v);d[v]?d[v].p(w,_):(d[v]=ls(w),d[v].c(),d[v].m(o,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=c.length}if(_&240){g=m[5];let v;for(v=0;v<g.length;v+=1){const w=es(m,g,v);p[v]?p[v].p(w,_):(p[v]=is(w),p[v].c(),p[v].m(s,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=g.length}_&1&&u!==(u="pretty-table "+m[0].style+" svelte-owgjbp")&&h(l,"class",u)},i:X,o:X,d(m){m&&P(t),pe(d,m),pe(p,m)}}}let rs=25,Np=0;function Pp(e,t,n){let l,o,r,s;ae(e,sn,E=>n(9,s=E));let u={};const a=yt(".2f");function f(E){let S=E.reduce(($,R)=>($[R.model]||($[R.model]=[]),$[R.model].push(R.rank),$),{});return Object.entries(S).map(([$,R])=>{let k=R.reduce((I,D)=>(I[D]=(I[D]||0)+1,I),{}),M=Object.entries(k).reduce((I,D)=>D[1]>I[1]?D:I)[0];return{model:$,overall_rank:Number(M),average_rank:a(Ch(R)),standard_deviation_rank:a(uh(R))}})}u={...{columns:{},style:"normal",paged:25},...u};const d=Ye().domain([-1,0,1]).range(["#FF5470","#f8f8f8","#00ebc7"]);let{sortable:g,index:p,paged:m}=u,_,v=!0;if(g&&p)throw new Error("A table can either be ranked or sortable, but not both");p=1,g=1;let w=null;const y=E=>{g&&(_===E.key&&n(2,v=!v),n(1,_=E.key))},C=(E,S)=>{n(4,w=w===`${E}-${S}`?null:`${E}-${S}`)};return e.$$.update=()=>{if(e.$$.dirty&512,e.$$.dirty&512&&n(8,l=f(s)),e.$$.dirty&774){_&&n(8,l=l.slice().sort((S,F)=>{let $=S[_],R=F[_];if($==R)return JSON.stringify(S).localeCompare(JSON.stringify(F));let k=$>R?1:$<R?-1:0;return v&&(k=-k),k}));let E=Np*m;n(5,r=l.slice(E,E+(m||l.length))),m&&Math.ceil(s.length/m)}e.$$.dirty&257&&n(6,o=Object.keys(l[0]).map(E=>{const S=u.columns[E]||{};return{key:E,type:S.type||typeof l[0][E],options:S}}))},n(5,r=[]),[u,_,v,g,w,r,o,d,l,s,y,C]}let Op=class extends fe{constructor(t){super(),ce(this,t,Pp,Ip,ue,{})}};function ss(e,t,n){const l=e.slice();return l[19]=t[n],l}function as(e,t,n){const l=e.slice();return l[22]=t[n],l}function us(e,t,n){const l=e.slice();return l[25]=t[n],l[27]=n,l}function fs(e){let t,n=e[25]+"",l,o,r,s=e[25]+"",u,a;return{c(){t=j("text"),l=L(n),r=j("text"),u=L(s),h(t,"class","axis-text svelte-t6wv8i"),h(t,"x",o=e[7].left+e[5](e[25])+e[5].bandwidth()/2),h(t,"y",e[7].top-10),h(t,"text-anchor","middle"),h(r,"class","axis-text svelte-t6wv8i"),h(r,"x",e[7].left-10),h(r,"y",a=e[7].top+e[4](e[25])+e[4].bandwidth()/2),h(r,"text-anchor","end"),h(r,"dominant-baseline","middle")},m(f,c){O(f,t,c),b(t,l),O(f,r,c),b(r,u)},p(f,c){c&8&&n!==(n=f[25]+"")&&J(l,n),c&40&&o!==(o=f[7].left+f[5](f[25])+f[5].bandwidth()/2)&&h(t,"x",o),c&8&&s!==(s=f[25]+"")&&J(u,s),c&24&&a!==(a=f[7].top+f[4](f[25])+f[4].bandwidth()/2)&&h(r,"y",a)},d(f){f&&P(t),f&&P(r)}}}function cs(e){let t,n,l,o,r,s,u,a,f=e[6](e[2][e[19]][e[22]])+"",c,d,g,p;return{c(){t=j("rect"),a=j("text"),c=L(f),h(t,"x",n=e[7].left+e[5](e[22])),h(t,"y",l=e[7].top+e[4](e[19])),h(t,"width",o=e[5].bandwidth()),h(t,"height",r=e[4].bandwidth()),h(t,"fill",s=e[8](e[19],e[22])),h(t,"rx","4"),h(t,"ry","4"),h(t,"class","model-path"),h(t,"data-model",u=e[19]),h(a,"x",d=e[7].left+e[5](e[22])+e[5].bandwidth()/2),h(a,"y",g=e[7].top+e[4](e[19])+e[4].bandwidth()/2),h(a,"text-anchor","middle"),h(a,"dominant-baseline","middle"),h(a,"class","model-path"),h(a,"data-model",p=e[19])},m(m,_){O(m,t,_),O(m,a,_),b(a,c)},p(m,_){_&40&&n!==(n=m[7].left+m[5](m[22]))&&h(t,"x",n),_&24&&l!==(l=m[7].top+m[4](m[19]))&&h(t,"y",l),_&32&&o!==(o=m[5].bandwidth())&&h(t,"width",o),_&16&&r!==(r=m[4].bandwidth())&&h(t,"height",r),_&8&&s!==(s=m[8](m[19],m[22]))&&h(t,"fill",s),_&8&&u!==(u=m[19])&&h(t,"data-model",u),_&12&&f!==(f=m[6](m[2][m[19]][m[22]])+"")&&J(c,f),_&40&&d!==(d=m[7].left+m[5](m[22])+m[5].bandwidth()/2)&&h(a,"x",d),_&24&&g!==(g=m[7].top+m[4](m[19])+m[4].bandwidth()/2)&&h(a,"y",g),_&8&&p!==(p=m[19])&&h(a,"data-model",p)},d(m){m&&P(t),m&&P(a)}}}function ds(e){let t,n=e[3],l=[];for(let o=0;o<n.length;o+=1)l[o]=cs(as(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=ke()},m(o,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(o,r);O(o,t,r)},p(o,r){if(r&508){n=o[3];let s;for(s=0;s<n.length;s+=1){const u=as(o,n,s);l[s]?l[s].p(u,r):(l[s]=cs(u),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(o){pe(l,o),o&&P(t)}}}function Tp(e){let t,n,l,o,r,s,u,a=e[3],f=[];for(let g=0;g<a.length;g+=1)f[g]=fs(us(e,a,g));let c=e[3],d=[];for(let g=0;g<c.length;g+=1)d[g]=ds(ss(e,c,g));return{c(){t=A("div"),n=j("svg");for(let g=0;g<f.length;g+=1)f[g].c();l=ke();for(let g=0;g<d.length;g+=1)d[g].c();o=j("text"),r=L("Relative Performance"),s=j("text"),h(o,"class","chart-title"),h(o,"y",e[7].top/2),h(o,"x",e[7].left),h(o,"text-anchor","start"),h(s,"class","chart-subtitle svelte-t6wv8i"),h(s,"y",e[7].top/2+15),h(s,"x",e[7].left),h(s,"opacity",".6"),h(s,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","heatmap-holder"),h(t,"class","svelte-t6wv8i"),Se(()=>e[16].call(t))},m(g,p){O(g,t,p),b(t,n);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(n,null);b(n,l);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(n,null);b(n,o),b(o,r),b(n,s),u=ct(t,e[16].bind(t))},p(g,[p]){if(p&184){a=g[3];let m;for(m=0;m<a.length;m+=1){const _=us(g,a,m);f[m]?f[m].p(_,p):(f[m]=fs(_),f[m].c(),f[m].m(n,l))}for(;m<f.length;m+=1)f[m].d(1);f.length=a.length}if(p&508){c=g[3];let m;for(m=0;m<c.length;m+=1){const _=ss(g,c,m);d[m]?d[m].p(_,p):(d[m]=ds(_),d[m].c(),d[m].m(n,o))}for(;m<d.length;m+=1)d[m].d(1);d.length=c.length}p&2&&h(n,"width",g[1]),p&1&&h(n,"height",g[0])},i:X,o:X,d(g){g&&P(t),pe(f,g),pe(d,g),u()}}}function zp(e,t,n){let l,o,r,s,u,a,f,c,d,g,p;ae(e,sn,S=>n(15,p=S));const m=yt(".1f");function _(S){let F=S.reduce((k,M)=>(k[M.qid]||(k[M.qid]=[]),k[M.qid].push(M),k),{}),$=Array.from(new Set(S.map(k=>k.model))),R=$.reduce((k,M)=>(k[M]=$.reduce((I,D)=>(I[D]={sum:0,count:0},I),{}),k),{});for(let k in F){let M=F[k];for(let I of $)for(let D of $){let V=M.find(x=>x.model===I),T=M.find(x=>x.model===D);V&&T&&(R[I][D].sum+=T.rank-V.rank,R[I][D].count++)}}for(let k in R)for(let M in R[k])R[k][M].count>0?R[k][M]=R[k][M].sum/R[k][M].count:R[k][M]=0;return R}let v=500,w=500,y={top:50,bottom:0,left:65,right:25};function C(S,F){let $=l[S][F];return $===0?"white":$>=0?g(S):g(F)}function E(){w=this.offsetWidth,v=this.offsetHeight,n(1,w),n(0,v)}return e.$$.update=()=>{e.$$.dirty&32768&&n(2,l=_(p)),e.$$.dirty&32768&&n(3,o=Array.from(new Set(p.map(S=>S.model)))),e.$$.dirty&2&&n(14,r=w-y.left-y.right),e.$$.dirty&1&&n(13,s=v-y.top-y.bottom),e.$$.dirty&16392&&n(5,u=Ht().range([0,r]).domain(o).padding(.05)),e.$$.dirty&8200&&n(4,a=Ht().range([0,s]).domain(o).padding(.05)),e.$$.dirty&4&&n(12,f=Object.values(l).flatMap(S=>Object.values(S))),e.$$.dirty&4096&&n(11,c=so(f)),e.$$.dirty&4096&&n(10,d=bt(f)),e.$$.dirty&8&&n(9,g=Dt().domain(o).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&3592&&o.reduce((S,F)=>(S[F]=Ga().domain([c,d]).interpolator(uo("white",g(F))),S),{})},[v,w,l,o,a,u,m,y,C,g,d,c,f,s,r,p,E]}class Vp extends fe{constructor(t){super(),ce(this,t,zp,Tp,ue,{})}}function hs(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function qp(e){let t;return{c(){t=A("div"),t.innerHTML="<h5>To view the comparison dashboard, you must first rank some comparisons!</h5>",h(t,"class","holder svelte-7imt18")},m(n,l){O(n,t,l)},p:X,i:X,o:X,d(n){n&&P(t)}}}function Lp(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,w,y,C,E,S,F=e[1],$=[];for(let R=0;R<F.length;R+=1)$[R]=gs(hs(e,F,R));return a=new Ep({}),d=new Op({}),w=new Dp({}),E=new Vp({}),{c(){t=A("div"),n=A("div"),l=A("div"),o=A("h4"),o.textContent="Model Comparisons",r=N();for(let R=0;R<$.length;R+=1)$[R].c();s=N(),u=A("div"),le(a.$$.fragment),f=N(),c=A("div"),le(d.$$.fragment),g=N(),p=A("div"),m=A("div"),_=N(),v=A("div"),le(w.$$.fragment),y=N(),C=A("div"),le(E.$$.fragment),h(o,"class","svelte-7imt18"),h(l,"class","chart-captions svelte-7imt18"),h(u,"class","eval-main"),h(c,"class","eval-table svelte-7imt18"),h(n,"class","left-charts svelte-7imt18"),h(m,"class","right-chart-1"),h(v,"class","right-chart-2"),h(C,"class","right-chart-3"),h(p,"class","right-charts svelte-7imt18"),h(t,"class","eval-container svelte-7imt18")},m(R,k){O(R,t,k),b(t,n),b(n,l),b(l,o),b(l,r);for(let M=0;M<$.length;M+=1)$[M]&&$[M].m(l,null);b(n,s),b(n,u),ee(a,u,null),b(n,f),b(n,c),ee(d,c,null),b(t,g),b(t,p),b(p,m),b(p,_),b(p,v),ee(w,v,null),b(p,y),b(p,C),ee(E,C,null),S=!0},p(R,k){if(k&14){F=R[1];let M;for(M=0;M<F.length;M+=1){const I=hs(R,F,M);$[M]?$[M].p(I,k):($[M]=gs(I),$[M].c(),$[M].m(l,null))}for(;M<$.length;M+=1)$[M].d(1);$.length=F.length}},i(R){S||(z(a.$$.fragment,R),z(d.$$.fragment,R),z(w.$$.fragment,R),z(E.$$.fragment,R),S=!0)},o(R){q(a.$$.fragment,R),q(d.$$.fragment,R),q(w.$$.fragment,R),q(E.$$.fragment,R),S=!1},d(R){R&&P(t),pe($,R),te(a),te(d),te(w),te(E)}}}function gs(e){let t,n=e[7]+"",l,o,r,s;function u(){return e[4](e[9])}function a(){return e[5](e[9])}return{c(){t=A("button"),l=L(n),h(t,"data-model",o=e[7]),h(t,"class","model-path svelte-7imt18"),ye(t,"color","white"),ye(t,"background",e[2](e[7]))},m(f,c){O(f,t,c),b(t,l),r||(s=[B(t,"mouseover",u),B(t,"focus",a),B(t,"mouseout",ps),B(t,"blur",ps)],r=!0)},p(f,c){e=f,c&2&&n!==(n=e[7]+"")&&J(l,n),c&2&&o!==(o=e[7])&&h(t,"data-model",o),c&6&&ye(t,"background",e[2](e[7]))},d(f){f&&P(t),r=!1,he(s)}}}function Hp(e){let t,n,l,o;const r=[Lp,qp],s=[];function u(a,f){return a[0].length>0?0:1}return n=u(e),l=s[n]=r[n](e),{c(){t=A("div"),l.c(),h(t,"class","main-container svelte-7imt18")},m(a,f){O(a,t,f),s[n].m(t,null),o=!0},p(a,[f]){let c=n;n=u(a),n===c?s[n].p(a,f):(_e(),q(s[c],1,1,()=>{s[c]=null}),ve(),l=s[n],l?l.p(a,f):(l=s[n]=r[n](a),l.c()),z(l,1),l.m(t,null))},i(a){o||(z(l),o=!0)},o(a){q(l),o=!1},d(a){a&&P(t),s[n].d()}}}function ps(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function Gp(e,t,n){let l,o,r;ae(e,sn,c=>n(0,r=c));async function s(){const d=await(await fetch("/chat/comparator/db/retrieve")).json();console.log("uploooo",d);const p=d.data.map(m=>({model:m.model,answer:m.answer,qid:parseInt(m.qid),rank:parseInt(m.rank)}));Fe(sn,r=[...p],r)}dt(()=>{s()});function u(c){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(d=>{d.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${l[c]}"], .model-circle[data-model="${l[c]}"]`).forEach(d=>{d.style.opacity=1})}const a=c=>u(c),f=c=>u(c);return e.$$.update=()=>{e.$$.dirty&1&&n(1,l=Array.from(new Set(r.map(c=>c.model)))),e.$$.dirty&1&&n(2,o=Dt().domain(r.map(c=>c.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"]))},[r,l,o,u,a,f]}class jp extends fe{constructor(t){super(),ce(this,t,Gp,Hp,ue,{})}}function Bp(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return hu(this.cover(t,n),t,n,e)}function hu(e,t,n,l){if(isNaN(t)||isNaN(n))return e;var o,r=e._root,s={data:l},u=e._x0,a=e._y0,f=e._x1,c=e._y1,d,g,p,m,_,v,w,y;if(!r)return e._root=s,e;for(;r.length;)if((_=t>=(d=(u+f)/2))?u=d:f=d,(v=n>=(g=(a+c)/2))?a=g:c=g,o=r,!(r=r[w=v<<1|_]))return o[w]=s,e;if(p=+e._x.call(null,r.data),m=+e._y.call(null,r.data),t===p&&n===m)return s.next=r,o?o[w]=s:e._root=s,e;do o=o?o[w]=new Array(4):e._root=new Array(4),(_=t>=(d=(u+f)/2))?u=d:f=d,(v=n>=(g=(a+c)/2))?a=g:c=g;while((w=v<<1|_)===(y=(m>=g)<<1|p>=d));return o[y]=r,o[w]=s,e}function xp(e){var t,n,l=e.length,o,r,s=new Array(l),u=new Array(l),a=1/0,f=1/0,c=-1/0,d=-1/0;for(n=0;n<l;++n)isNaN(o=+this._x.call(null,t=e[n]))||isNaN(r=+this._y.call(null,t))||(s[n]=o,u[n]=r,o<a&&(a=o),o>c&&(c=o),r<f&&(f=r),r>d&&(d=r));if(a>c||f>d)return this;for(this.cover(a,f).cover(c,d),n=0;n<l;++n)hu(this,s[n],u[n],e[n]);return this}function Wp(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,l=this._y0,o=this._x1,r=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,r=(l=Math.floor(t))+1;else{for(var s=o-n||1,u=this._root,a,f;n>e||e>=o||l>t||t>=r;)switch(f=(t<l)<<1|e<n,a=new Array(4),a[f]=u,u=a,s*=2,f){case 0:o=n+s,r=l+s;break;case 1:n=o-s,r=l+s;break;case 2:o=n+s,l=r-s;break;case 3:n=o-s,l=r-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=l,this._x1=o,this._y1=r,this}function Up(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Xp(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ze(e,t,n,l,o){this.node=e,this.x0=t,this.y0=n,this.x1=l,this.y1=o}function Yp(e,t,n){var l,o=this._x0,r=this._y0,s,u,a,f,c=this._x1,d=this._y1,g=[],p=this._root,m,_;for(p&&g.push(new ze(p,o,r,c,d)),n==null?n=1/0:(o=e-n,r=t-n,c=e+n,d=t+n,n*=n);m=g.pop();)if(!(!(p=m.node)||(s=m.x0)>c||(u=m.y0)>d||(a=m.x1)<o||(f=m.y1)<r))if(p.length){var v=(s+a)/2,w=(u+f)/2;g.push(new ze(p[3],v,w,a,f),new ze(p[2],s,w,v,f),new ze(p[1],v,u,a,w),new ze(p[0],s,u,v,w)),(_=(t>=w)<<1|e>=v)&&(m=g[g.length-1],g[g.length-1]=g[g.length-1-_],g[g.length-1-_]=m)}else{var y=e-+this._x.call(null,p.data),C=t-+this._y.call(null,p.data),E=y*y+C*C;if(E<n){var S=Math.sqrt(n=E);o=e-S,r=t-S,c=e+S,d=t+S,l=p.data}}return l}function Qp(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,l,o,r,s=this._x0,u=this._y0,a=this._x1,f=this._y1,c,d,g,p,m,_,v,w;if(!n)return this;if(n.length)for(;;){if((m=c>=(g=(s+a)/2))?s=g:a=g,(_=d>=(p=(u+f)/2))?u=p:f=p,t=n,!(n=n[v=_<<1|m]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(l=t,w=v)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(r=n.next)&&delete n.next,o?(r?o.next=r:delete o.next,this):t?(r?t[v]=r:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(l?l[w]=n:this._root=n),this):(this._root=r,this)}function Kp(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Jp(){return this._root}function Zp(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function em(e){var t=[],n,l=this._root,o,r,s,u,a;for(l&&t.push(new ze(l,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(l=n.node,r=n.x0,s=n.y0,u=n.x1,a=n.y1)&&l.length){var f=(r+u)/2,c=(s+a)/2;(o=l[3])&&t.push(new ze(o,f,c,u,a)),(o=l[2])&&t.push(new ze(o,r,c,f,a)),(o=l[1])&&t.push(new ze(o,f,s,u,c)),(o=l[0])&&t.push(new ze(o,r,s,f,c))}return this}function tm(e){var t=[],n=[],l;for(this._root&&t.push(new ze(this._root,this._x0,this._y0,this._x1,this._y1));l=t.pop();){var o=l.node;if(o.length){var r,s=l.x0,u=l.y0,a=l.x1,f=l.y1,c=(s+a)/2,d=(u+f)/2;(r=o[0])&&t.push(new ze(r,s,u,c,d)),(r=o[1])&&t.push(new ze(r,c,u,a,d)),(r=o[2])&&t.push(new ze(r,s,d,c,f)),(r=o[3])&&t.push(new ze(r,c,d,a,f))}n.push(l)}for(;l=n.pop();)e(l.node,l.x0,l.y0,l.x1,l.y1);return this}function nm(e){return e[0]}function lm(e){return arguments.length?(this._x=e,this):this._x}function om(e){return e[1]}function im(e){return arguments.length?(this._y=e,this):this._y}function gu(e,t,n){var l=new Go(t??nm,n??om,NaN,NaN,NaN,NaN);return e==null?l:l.addAll(e)}function Go(e,t,n,l,o,r){this._x=e,this._y=t,this._x0=n,this._y0=l,this._x1=o,this._y1=r,this._root=void 0}function ms(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var qe=gu.prototype=Go.prototype;qe.copy=function(){var e=new Go(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,l;if(!t)return e;if(!t.length)return e._root=ms(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var o=0;o<4;++o)(l=t.source[o])&&(l.length?n.push({source:l,target:t.target[o]=new Array(4)}):t.target[o]=ms(l));return e};qe.add=Bp;qe.addAll=xp;qe.cover=Wp;qe.data=Up;qe.extent=Xp;qe.find=Yp;qe.remove=Qp;qe.removeAll=Kp;qe.root=Jp;qe.size=Zp;qe.visit=em;qe.visitAfter=tm;qe.x=lm;qe.y=im;function rt(e){return function(){return e}}function _s(e){return(e()-.5)*1e-6}function rm(e){return e.x+e.vx}function sm(e){return e.y+e.vy}function am(e){var t,n,l,o=1,r=1;typeof e!="function"&&(e=rt(e==null?1:+e));function s(){for(var f,c=t.length,d,g,p,m,_,v,w=0;w<r;++w)for(d=gu(t,rm,sm).visitAfter(u),f=0;f<c;++f)g=t[f],_=n[g.index],v=_*_,p=g.x+g.vx,m=g.y+g.vy,d.visit(y);function y(C,E,S,F,$){var R=C.data,k=C.r,M=_+k;if(R){if(R.index>g.index){var I=p-R.x-R.vx,D=m-R.y-R.vy,V=I*I+D*D;V<M*M&&(I===0&&(I=_s(l),V+=I*I),D===0&&(D=_s(l),V+=D*D),V=(M-(V=Math.sqrt(V)))/V*o,g.vx+=(I*=V)*(M=(k*=k)/(v+k)),g.vy+=(D*=V)*M,R.vx-=I*(M=1-M),R.vy-=D*M)}return}return E>p+M||F<p-M||S>m+M||$<m-M}}function u(f){if(f.data)return f.r=n[f.data.index];for(var c=f.r=0;c<4;++c)f[c]&&f[c].r>f.r&&(f.r=f[c].r)}function a(){if(t){var f,c=t.length,d;for(n=new Array(c),f=0;f<c;++f)d=t[f],n[d.index]=+e(d,f,t)}}return s.initialize=function(f,c){t=f,l=c,a()},s.iterations=function(f){return arguments.length?(r=+f,s):r},s.strength=function(f){return arguments.length?(o=+f,s):o},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:rt(+f),a(),s):e},s}var um={value:()=>{}};function pu(){for(var e=0,t=arguments.length,n={},l;e<t;++e){if(!(l=arguments[e]+"")||l in n||/[\s.]/.test(l))throw new Error("illegal type: "+l);n[l]=[]}return new ll(n)}function ll(e){this._=e}function fm(e,t){return e.trim().split(/^|\s+/).map(function(n){var l="",o=n.indexOf(".");if(o>=0&&(l=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:l}})}ll.prototype=pu.prototype={constructor:ll,on:function(e,t){var n=this._,l=fm(e+"",n),o,r=-1,s=l.length;if(arguments.length<2){for(;++r<s;)if((o=(e=l[r]).type)&&(o=cm(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<s;)if(o=(e=l[r]).type)n[o]=vs(n[o],e.name,t);else if(t==null)for(o in n)n[o]=vs(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ll(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),l=0,o,r;l<o;++l)n[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],l=0,o=r.length;l<o;++l)r[l].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],o=0,r=l.length;o<r;++o)l[o].value.apply(t,n)}};function cm(e,t){for(var n=0,l=e.length,o;n<l;++n)if((o=e[n]).name===t)return o.value}function vs(e,t,n){for(var l=0,o=e.length;l<o;++l)if(e[l].name===t){e[l]=um,e=e.slice(0,l).concat(e.slice(l+1));break}return n!=null&&e.push({name:t,value:n}),e}var an=0,vn=0,hn=0,mu=1e3,yl,bn,kl=0,Gt=0,Ml=0,Pn=typeof performance=="object"&&performance.now?performance:Date,_u=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vu(){return Gt||(_u(dm),Gt=Pn.now()+Ml)}function dm(){Gt=0}function yo(){this._call=this._time=this._next=null}yo.prototype=bu.prototype={constructor:yo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?vu():+n)+(t==null?0:+t),!this._next&&bn!==this&&(bn?bn._next=this:yl=this,bn=this),this._call=e,this._time=n,ko()},stop:function(){this._call&&(this._call=null,this._time=1/0,ko())}};function bu(e,t,n){var l=new yo;return l.restart(e,t,n),l}function hm(){vu(),++an;for(var e=yl,t;e;)(t=Gt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--an}function bs(){Gt=(kl=Pn.now())+Ml,an=vn=0;try{hm()}finally{an=0,pm(),Gt=0}}function gm(){var e=Pn.now(),t=e-kl;t>mu&&(Ml-=t,kl=e)}function pm(){for(var e,t=yl,n,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yl=n);bn=e,ko(l)}function ko(e){if(!an){vn&&(vn=clearTimeout(vn));var t=e-Gt;t>24?(e<1/0&&(vn=setTimeout(bs,e-Pn.now()-Ml)),hn&&(hn=clearInterval(hn))):(hn||(kl=Pn.now(),hn=setInterval(gm,mu)),an=1,_u(bs))}}const mm=1664525,_m=1013904223,ws=4294967296;function vm(){let e=1;return()=>(e=(mm*e+_m)%ws)/ws}var bm=10,wm=Math.PI*(3-Math.sqrt(5));function ym(e){var t,n=1,l=.001,o=1-Math.pow(l,1/300),r=0,s=.6,u=new Map,a=bu(d),f=pu("tick","end"),c=vm();e==null&&(e=[]);function d(){g(),f.call("tick",t),n<l&&(a.stop(),f.call("end",t))}function g(_){var v,w=e.length,y;_===void 0&&(_=1);for(var C=0;C<_;++C)for(n+=(r-n)*o,u.forEach(function(E){E(n)}),v=0;v<w;++v)y=e[v],y.fx==null?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return t}function p(){for(var _=0,v=e.length,w;_<v;++_){if(w=e[_],w.index=_,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var y=bm*Math.sqrt(.5+_),C=_*wm;w.x=y*Math.cos(C),w.y=y*Math.sin(C)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function m(_){return _.initialize&&_.initialize(e,c),_}return p(),t={tick:g,restart:function(){return a.restart(d),t},stop:function(){return a.stop(),t},nodes:function(_){return arguments.length?(e=_,p(),u.forEach(m),t):e},alpha:function(_){return arguments.length?(n=+_,t):n},alphaMin:function(_){return arguments.length?(l=+_,t):l},alphaDecay:function(_){return arguments.length?(o=+_,t):+o},alphaTarget:function(_){return arguments.length?(r=+_,t):r},velocityDecay:function(_){return arguments.length?(s=1-_,t):1-s},randomSource:function(_){return arguments.length?(c=_,u.forEach(m),t):c},force:function(_,v){return arguments.length>1?(v==null?u.delete(_):u.set(_,m(v)),t):u.get(_)},find:function(_,v,w){var y=0,C=e.length,E,S,F,$,R;for(w==null?w=1/0:w*=w,y=0;y<C;++y)$=e[y],E=_-$.x,S=v-$.y,F=E*E+S*S,F<w&&(R=$,w=F);return R},on:function(_,v){return arguments.length>1?(f.on(_,v),t):f.on(_)}}}function km(e){var t=rt(.1),n,l,o;typeof e!="function"&&(e=rt(e==null?0:+e));function r(u){for(var a=0,f=n.length,c;a<f;++a)c=n[a],c.vx+=(o[a]-c.x)*l[a]*u}function s(){if(n){var u,a=n.length;for(l=new Array(a),o=new Array(a),u=0;u<a;++u)l[u]=isNaN(o[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return r.initialize=function(u){n=u,s()},r.strength=function(u){return arguments.length?(t=typeof u=="function"?u:rt(+u),s(),r):t},r.x=function(u){return arguments.length?(e=typeof u=="function"?u:rt(+u),s(),r):e},r}function Sm(e){var t=rt(.1),n,l,o;typeof e!="function"&&(e=rt(e==null?0:+e));function r(u){for(var a=0,f=n.length,c;a<f;++a)c=n[a],c.vy+=(o[a]-c.y)*l[a]*u}function s(){if(n){var u,a=n.length;for(l=new Array(a),o=new Array(a),u=0;u<a;++u)l[u]=isNaN(o[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return r.initialize=function(u){n=u,s()},r.strength=function(u){return arguments.length?(t=typeof u=="function"?u:rt(+u),s(),r):t},r.y=function(u){return arguments.length?(e=typeof u=="function"?u:rt(+u),s(),r):e},r}const Sl=Ie([]),ys=Ie({labelNames:["txt2.txt","pdf2.txt"],labels:[0,3],projection:[[.1443715864989249,.00463214192040876,.11292804485781914],[-.05626482326843836,-.013694651798983428,.01709368313171561]]});function ks(e,t,n){const l=e.slice();return l[20]=t[n],l[22]=n,l}function Ss(e){let t,n,l,o,r,s=e[20].file+"",u,a,f=ro(e[20].size)+"",c,d,g,p,m,_,v,w;return{c(){t=j("g"),n=j("circle"),r=j("text"),u=L(s),a=j("tspan"),c=L(f),h(n,"r",l=e[3](e[20].size)),h(n,"fill","var(--primary"),h(n,"stroke","var(--white)"),h(n,"stroke-width","1"),h(n,"fill-opacity",.95),h(n,"class","svelte-h2ab3o"),h(a,"x","0"),h(a,"y","15"),h(r,"class","bubble-file-text svelte-h2ab3o"),h(r,"text-anchor","middle"),h(r,"opacity",d=e[20].size>e[4]?1:0),h(t,"class",p="file-circle-g "+(e[20].size>e[4]?"large":"")+" svelte-h2ab3o"),h(t,"style",m=e[5](e[20].x,e[20].y)),h(t,"role","img")},m(y,C){O(y,t,C),b(t,n),b(t,r),b(r,u),b(r,a),b(a,c),_=!0,v||(w=[B(t,"mouseover",e[6]),B(t,"mouseout",e[7]),B(t,"focus",e[6]),B(t,"blur",e[7])],v=!0)},p(y,C){(!_||C&12&&l!==(l=y[3](y[20].size)))&&h(n,"r",l),(!_||C&4)&&s!==(s=y[20].file+"")&&J(u,s),(!_||C&4)&&f!==(f=ro(y[20].size)+"")&&J(c,f),(!_||C&20&&d!==(d=y[20].size>y[4]?1:0))&&h(r,"opacity",d),(!_||C&20&&p!==(p="file-circle-g "+(y[20].size>y[4]?"large":"")+" svelte-h2ab3o"))&&h(t,"class",p),(!_||C&4&&m!==(m=y[5](y[20].x,y[20].y)))&&h(t,"style",m)},i(y){_||(y&&Se(()=>{_&&(o||(o=Ge(n,Ln,{duration:1e3},!0)),o.run(1))}),y&&Se(()=>{_&&(g||(g=Ge(r,Ln,{duration:1e3},!0)),g.run(1))}),_=!0)},o(y){y&&(o||(o=Ge(n,Ln,{duration:1e3},!1)),o.run(0)),y&&(g||(g=Ge(r,Ln,{duration:1e3},!1)),g.run(0)),_=!1},d(y){y&&P(t),y&&o&&o.end(),y&&g&&g.end(),v=!1,he(w)}}}function Cm(e){let t,n,l,o,r=e[2],s=[];for(let a=0;a<r.length;a+=1)s[a]=Ss(ks(e,r,a));const u=a=>q(s[a],1,1,()=>{s[a]=null});return{c(){t=A("div"),n=j("svg");for(let a=0;a<s.length;a+=1)s[a].c();h(n,"width",e[0]),h(n,"height",e[1]),h(n,"class","svelte-h2ab3o"),h(t,"id","network-chart"),Se(()=>e[15].call(t))},m(a,f){O(a,t,f),b(t,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null);l=ct(t,e[15].bind(t)),o=!0},p(a,[f]){if(f&252){r=a[2];let c;for(c=0;c<r.length;c+=1){const d=ks(a,r,c);s[c]?(s[c].p(d,f),z(s[c],1)):(s[c]=Ss(d),s[c].c(),z(s[c],1),s[c].m(n,null))}for(_e(),c=r.length;c<s.length;c+=1)u(c);ve()}(!o||f&1)&&h(n,"width",a[0]),(!o||f&2)&&h(n,"height",a[1])},i(a){if(!o){for(let f=0;f<r.length;f+=1)z(s[f]);o=!0}},o(a){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)q(s[f]);o=!1},d(a){a&&P(t),pe(s,a),l()}}}function $m(e,t,n){let l,o,r,s,u,a,f,c;ae(e,Sl,S=>n(14,c=S));let d=600,g=350,p=!0,m=!1;const _=(S,F)=>`transform: translate(${S}px, ${F}px)`,v=[-4,4],w=[-1,1];function y(){n(8,p=!0),n(9,m=!0);const S=Fn(this);Pl(".file-circle-g").select("text").style("opacity",0),S.raise(),S.select("circle").attr("fill","var(--red)"),S.select("text").style("opacity",1)}const C=()=>{const S=Pl(".file-circle-g");S.select("circle").attr("fill","var(--yellow)"),S.select("text").style("opacity",0),n(9,m=!1),setTimeout(()=>{n(8,p=!1)},1e3)};function E(){d=this.offsetWidth,g=this.offsetHeight,n(0,d),n(1,g)}return e.$$.update=()=>{e.$$.dirty&16387&&n(2,l=c.map(S=>({...S,x:d/2,y:g/2,tickCount:0}))),e.$$.dirty&16384&&console.log(c.map(S=>S.size).sort((S,F)=>S-F)),e.$$.dirty&1&&n(13,o=km().x(d/2)),e.$$.dirty&2&&n(12,r=Sm().y(g/2)),e.$$.dirty&16384&&n(3,a=Ye().domain(wn(c,S=>S.size)).range([12,60])),e.$$.dirty&8&&n(10,s=am().radius(S=>a(S.size)+1).iterations(3)),e.$$.dirty&16384&&n(4,u=Sh(c.map(S=>S.size).sort((S,F)=>S-F),.85)),e.$$.dirty&1&&Ye().domain(v).range([5,d]),e.$$.dirty&2&&Ye().domain(w).range([g,5]),e.$$.dirty&4&&n(11,f=ym().nodes(l).on("tick",()=>{n(2,l=[...l])})),e.$$.dirty&15360&&(f.force("x",o),f.force("y",r),f.force("collide",s),f.alpha(.02),f.restart()),e.$$.dirty&19468&&(a.domain(wn(c,S=>S.size)),l.forEach(S=>S.radius=a(S.size)),f.nodes(l),s.radius(S=>S.radius+.5)),e.$$.dirty&768&&p===!1&&(m||Pl(".large").select("text").style("opacity",1))},[d,g,l,a,u,_,y,C,p,m,s,f,r,o,c,E]}class Am extends fe{constructor(t){super(),ce(this,t,$m,Cm,ue,{})}}/**
 * table-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Et(e,t){return typeof e=="function"?e(t):e}function Je(e,t){return n=>{t.setState(l=>({...l,[e]:Et(n,l[e])}))}}function Cl(e){return e instanceof Function}function Rm(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Em(e,t){const n=[],l=o=>{o.forEach(r=>{n.push(r);const s=t(r);s!=null&&s.length&&l(s)})};return l(e),n}function oe(e,t,n){let l=[],o;return()=>{let r;n.key&&n.debug&&(r=Date.now());const s=e();if(!(s.length!==l.length||s.some((f,c)=>l[c]!==f)))return o;l=s;let a;if(n.key&&n.debug&&(a=Date.now()),o=t(...s),n==null||n.onChange==null||n.onChange(o),n.key&&n.debug&&n!=null&&n.debug()){const f=Math.round((Date.now()-r)*100)/100,c=Math.round((Date.now()-a)*100)/100,d=c/16,g=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%c⏱ ${g(c,5)} /${g(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,n==null?void 0:n.key)}return o}}function Mm(e,t,n,l){var o,r;const u={...e._getDefaultColumnDef(),...t},a=u.accessorKey;let f=(o=(r=u.id)!=null?r:a?a.replace(".","_"):void 0)!=null?o:typeof u.header=="string"?u.header:void 0,c;if(u.accessorFn?c=u.accessorFn:a&&(a.includes(".")?c=g=>{let p=g;for(const _ of a.split(".")){var m;p=(m=p)==null?void 0:m[_]}return p}:c=g=>g[u.accessorKey]),!f)throw new Error;let d={id:`${String(f)}`,accessorFn:c,parent:l,depth:n,columnDef:u,columns:[],getFlatColumns:oe(()=>[!0],()=>{var g;return[d,...(g=d.columns)==null?void 0:g.flatMap(p=>p.getFlatColumns())]},{key:"column.getFlatColumns",debug:()=>{var g;return(g=e.options.debugAll)!=null?g:e.options.debugColumns}}),getLeafColumns:oe(()=>[e._getOrderColumnsFn()],g=>{var p;if((p=d.columns)!=null&&p.length){let m=d.columns.flatMap(_=>_.getLeafColumns());return g(m)}return[d]},{key:"column.getLeafColumns",debug:()=>{var g;return(g=e.options.debugAll)!=null?g:e.options.debugColumns}})};return d=e._features.reduce((g,p)=>Object.assign(g,p.createColumn==null?void 0:p.createColumn(d,e)),d),d}function Cs(e,t,n){var l;let r={id:(l=n.id)!=null?l:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],u=a=>{a.subHeaders&&a.subHeaders.length&&a.subHeaders.map(u),s.push(a)};return u(r),s},getContext:()=>({table:e,header:r,column:t})};return e._features.forEach(s=>{Object.assign(r,s.createHeader==null?void 0:s.createHeader(r,e))}),r}const Fm={createTable:e=>({getHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l,o)=>{var r,s;const u=(r=l==null?void 0:l.map(d=>n.find(g=>g.id===d)).filter(Boolean))!=null?r:[],a=(s=o==null?void 0:o.map(d=>n.find(g=>g.id===d)).filter(Boolean))!=null?s:[],f=n.filter(d=>!(l!=null&&l.includes(d.id))&&!(o!=null&&o.includes(d.id)));return Xn(t,[...u,...f,...a],e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l,o)=>(n=n.filter(r=>!(l!=null&&l.includes(r.id))&&!(o!=null&&o.includes(r.id))),Xn(t,n,e,"center")),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,l)=>{var o;const r=(o=l==null?void 0:l.map(s=>n.find(u=>u.id===s)).filter(Boolean))!=null?o:[];return Xn(t,r,e,"left")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,l)=>{var o;const r=(o=l==null?void 0:l.map(s=>n.find(u=>u.id===s)).filter(Boolean))!=null?o:[];return Xn(t,r,e,"right")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFooterGroups:oe(()=>[e.getHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFooterGroups:oe(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFooterGroups:oe(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFooterGroups:oe(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFlatHeaders:oe(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFlatHeaders:oe(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFlatHeaders:oe(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFlatHeaders:oe(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterLeafHeaders:oe(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftLeafHeaders:oe(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightLeafHeaders:oe(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeafHeaders:oe(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,l)=>{var o,r,s,u,a,f;return[...(o=(r=t[0])==null?void 0:r.headers)!=null?o:[],...(s=(u=n[0])==null?void 0:u.headers)!=null?s:[],...(a=(f=l[0])==null?void 0:f.headers)!=null?a:[]].map(c=>c.getLeafHeaders()).flat()},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}})})};function Xn(e,t,n,l){var o,r;let s=0;const u=function(g,p){p===void 0&&(p=1),s=Math.max(s,p),g.filter(m=>m.getIsVisible()).forEach(m=>{var _;(_=m.columns)!=null&&_.length&&u(m.columns,p+1)},0)};u(e);let a=[];const f=(g,p)=>{const m={depth:p,id:[l,`${p}`].filter(Boolean).join("_"),headers:[]},_=[];g.forEach(v=>{const w=[..._].reverse()[0],y=v.column.depth===m.depth;let C,E=!1;if(y&&v.column.parent?C=v.column.parent:(C=v.column,E=!0),w&&(w==null?void 0:w.column)===C)w.subHeaders.push(v);else{const S=Cs(n,C,{id:[l,p,C.id,v==null?void 0:v.id].filter(Boolean).join("_"),isPlaceholder:E,placeholderId:E?`${_.filter(F=>F.column===C).length}`:void 0,depth:p,index:_.length});S.subHeaders.push(v),_.push(S)}m.headers.push(v),v.headerGroup=m}),a.push(m),p>0&&f(_,p-1)},c=t.map((g,p)=>Cs(n,g,{depth:s,index:p}));f(c,s-1),a.reverse();const d=g=>g.filter(m=>m.column.getIsVisible()).map(m=>{let _=0,v=0,w=[0];m.subHeaders&&m.subHeaders.length?(w=[],d(m.subHeaders).forEach(C=>{let{colSpan:E,rowSpan:S}=C;_+=E,w.push(S)})):_=1;const y=Math.min(...w);return v=v+y,m.colSpan=_,m.rowSpan=v,{colSpan:_,rowSpan:v}});return d((o=(r=a[0])==null?void 0:r.headers)!=null?o:[]),a}const Yn={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Ul=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Dm={getDefaultColumnDef:()=>Yn,getInitialState:e=>({columnSizing:{},columnSizingInfo:Ul(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",onColumnSizingChange:Je("columnSizing",e),onColumnSizingInfoChange:Je("columnSizingInfo",e)}),createColumn:(e,t)=>({getSize:()=>{var n,l,o;const r=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Yn.minSize,(l=r??e.columnDef.size)!=null?l:Yn.size),(o=e.columnDef.maxSize)!=null?o:Yn.maxSize)},getStart:n=>{const l=n?n==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns(),o=l.findIndex(r=>r.id===e.id);if(o>0){const r=l[o-1];return r.getStart(n)+r.getSize()}return 0},resetSize:()=>{t.setColumnSizing(n=>{let{[e.id]:l,...o}=n;return o})},getCanResize:()=>{var n,l;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((l=t.options.enableColumnResizing)!=null?l:!0)},getIsResizing:()=>t.getState().columnSizingInfo.isResizingColumn===e.id}),createHeader:(e,t)=>({getSize:()=>{let n=0;const l=o=>{if(o.subHeaders.length)o.subHeaders.forEach(l);else{var r;n+=(r=o.column.getSize())!=null?r:0}};return l(e),n},getStart:()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},getResizeHandler:()=>{const n=t.getColumn(e.column.id),l=n==null?void 0:n.getCanResize();return o=>{if(!n||!l||(o.persist==null||o.persist(),Xl(o)&&o.touches&&o.touches.length>1))return;const r=e.getSize(),s=e?e.getLeafHeaders().map(_=>[_.column.id,_.column.getSize()]):[[n.id,n.getSize()]],u=Xl(o)?Math.round(o.touches[0].clientX):o.clientX,a={},f=(_,v)=>{typeof v=="number"&&(t.setColumnSizingInfo(w=>{var y,C;const E=v-((y=w==null?void 0:w.startOffset)!=null?y:0),S=Math.max(E/((C=w==null?void 0:w.startSize)!=null?C:0),-.999999);return w.columnSizingStart.forEach(F=>{let[$,R]=F;a[$]=Math.round(Math.max(R+R*S,0)*100)/100}),{...w,deltaOffset:E,deltaPercentage:S}}),(t.options.columnResizeMode==="onChange"||_==="end")&&t.setColumnSizing(w=>({...w,...a})))},c=_=>f("move",_),d=_=>{f("end",_),t.setColumnSizingInfo(v=>({...v,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g={moveHandler:_=>c(_.clientX),upHandler:_=>{document.removeEventListener("mousemove",g.moveHandler),document.removeEventListener("mouseup",g.upHandler),d(_.clientX)}},p={moveHandler:_=>(_.cancelable&&(_.preventDefault(),_.stopPropagation()),c(_.touches[0].clientX),!1),upHandler:_=>{var v;document.removeEventListener("touchmove",p.moveHandler),document.removeEventListener("touchend",p.upHandler),_.cancelable&&(_.preventDefault(),_.stopPropagation()),d((v=_.touches[0])==null?void 0:v.clientX)}},m=Im()?{passive:!1}:!1;Xl(o)?(document.addEventListener("touchmove",p.moveHandler,m),document.addEventListener("touchend",p.upHandler,m)):(document.addEventListener("mousemove",g.moveHandler,m),document.addEventListener("mouseup",g.upHandler,m)),t.setColumnSizingInfo(_=>({..._,startOffset:u,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:n.id}))}}}),createTable:e=>({setColumnSizing:t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),setColumnSizingInfo:t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),resetColumnSizing:t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},resetHeaderSizeInfo:t=>{var n;e.setColumnSizingInfo(t?Ul():(n=e.initialState.columnSizingInfo)!=null?n:Ul())},getTotalSize:()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0},getLeftTotalSize:()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0},getCenterTotalSize:()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0},getRightTotalSize:()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0}})};let Qn=null;function Im(){if(typeof Qn=="boolean")return Qn;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return Qn=e,Qn}function Xl(e){return e.type==="touchstart"}const Nm={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Je("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;return{_autoResetExpanded:()=>{var l,o;if(!t){e._queue(()=>{t=!0});return}if((l=(o=e.options.autoResetAll)!=null?o:e.options.autoResetExpanded)!=null?l:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},setExpanded:l=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(l),toggleAllRowsExpanded:l=>{l??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},resetExpanded:l=>{var o,r;e.setExpanded(l?{}:(o=(r=e.initialState)==null?void 0:r.expanded)!=null?o:{})},getCanSomeRowsExpand:()=>e.getPrePaginationRowModel().flatRows.some(l=>l.getCanExpand()),getToggleAllRowsExpandedHandler:()=>l=>{l.persist==null||l.persist(),e.toggleAllRowsExpanded()},getIsSomeRowsExpanded:()=>{const l=e.getState().expanded;return l===!0||Object.values(l).some(Boolean)},getIsAllRowsExpanded:()=>{const l=e.getState().expanded;return typeof l=="boolean"?l===!0:!(!Object.keys(l).length||e.getRowModel().flatRows.some(o=>!o.getIsExpanded()))},getExpandedDepth:()=>{let l=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(r=>{const s=r.split(".");l=Math.max(l,s.length)}),l},getPreExpandedRowModel:()=>e.getSortedRowModel(),getExpandedRowModel:()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())}},createRow:(e,t)=>({toggleExpanded:n=>{t.setExpanded(l=>{var o;const r=l===!0?!0:!!(l!=null&&l[e.id]);let s={};if(l===!0?Object.keys(t.getRowModel().rowsById).forEach(u=>{s[u]=!0}):s=l,n=(o=n)!=null?o:!r,!r&&n)return{...s,[e.id]:!0};if(r&&!n){const{[e.id]:u,...a}=s;return a}return l})},getIsExpanded:()=>{var n;const l=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:l===!0||l!=null&&l[e.id])},getCanExpand:()=>{var n,l,o;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((l=t.options.enableExpanding)!=null?l:!0)&&!!((o=e.subRows)!=null&&o.length)},getToggleExpandedHandler:()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}})},wu=(e,t,n)=>{var l,o,r;const s=n.toLowerCase();return!!(!((l=e.getValue(t))==null||(o=l.toString())==null||(r=o.toLowerCase())==null)&&r.includes(s))};wu.autoRemove=e=>tt(e);const yu=(e,t,n)=>{var l,o;return!!(!((l=e.getValue(t))==null||(o=l.toString())==null)&&o.includes(n))};yu.autoRemove=e=>tt(e);const ku=(e,t,n)=>{var l,o;return((l=e.getValue(t))==null||(o=l.toString())==null?void 0:o.toLowerCase())===(n==null?void 0:n.toLowerCase())};ku.autoRemove=e=>tt(e);const Su=(e,t,n)=>{var l;return(l=e.getValue(t))==null?void 0:l.includes(n)};Su.autoRemove=e=>tt(e)||!(e!=null&&e.length);const Cu=(e,t,n)=>!n.some(l=>{var o;return!((o=e.getValue(t))!=null&&o.includes(l))});Cu.autoRemove=e=>tt(e)||!(e!=null&&e.length);const $u=(e,t,n)=>n.some(l=>{var o;return(o=e.getValue(t))==null?void 0:o.includes(l)});$u.autoRemove=e=>tt(e)||!(e!=null&&e.length);const Au=(e,t,n)=>e.getValue(t)===n;Au.autoRemove=e=>tt(e);const Ru=(e,t,n)=>e.getValue(t)==n;Ru.autoRemove=e=>tt(e);const jo=(e,t,n)=>{let[l,o]=n;const r=e.getValue(t);return r>=l&&r<=o};jo.resolveFilterValue=e=>{let[t,n]=e,l=typeof t!="number"?parseFloat(t):t,o=typeof n!="number"?parseFloat(n):n,r=t===null||Number.isNaN(l)?-1/0:l,s=n===null||Number.isNaN(o)?1/0:o;if(r>s){const u=r;r=s,s=u}return[r,s]};jo.autoRemove=e=>tt(e)||tt(e[0])&&tt(e[1]);const ht={includesString:wu,includesStringSensitive:yu,equalsString:ku,arrIncludes:Su,arrIncludesAll:Cu,arrIncludesSome:$u,equals:Au,weakEquals:Ru,inNumberRange:jo};function tt(e){return e==null||e===""}const Pm={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],globalFilter:void 0,...e}),getDefaultOptions:e=>({onColumnFiltersChange:Je("columnFilters",e),onGlobalFilterChange:Je("globalFilter",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100,globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n,l;const o=(n=e.getCoreRowModel().flatRows[0])==null||(l=n._getAllCellsByColumnId()[t.id])==null?void 0:l.getValue();return typeof o=="string"||typeof o=="number"}}),createColumn:(e,t)=>({getAutoFilterFn:()=>{const n=t.getCoreRowModel().flatRows[0],l=n==null?void 0:n.getValue(e.id);return typeof l=="string"?ht.includesString:typeof l=="number"?ht.inNumberRange:typeof l=="boolean"||l!==null&&typeof l=="object"?ht.equals:Array.isArray(l)?ht.arrIncludes:ht.weakEquals},getFilterFn:()=>{var n,l;return Cl(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(l=t.options.filterFns)==null?void 0:l[e.columnDef.filterFn])!=null?n:ht[e.columnDef.filterFn]},getCanFilter:()=>{var n,l,o;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((l=t.options.enableColumnFilters)!=null?l:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&!!e.accessorFn},getCanGlobalFilter:()=>{var n,l,o,r;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((l=t.options.enableGlobalFilter)!=null?l:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&((r=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?r:!0)&&!!e.accessorFn},getIsFiltered:()=>e.getFilterIndex()>-1,getFilterValue:()=>{var n,l;return(n=t.getState().columnFilters)==null||(l=n.find(o=>o.id===e.id))==null?void 0:l.value},getFilterIndex:()=>{var n,l;return(n=(l=t.getState().columnFilters)==null?void 0:l.findIndex(o=>o.id===e.id))!=null?n:-1},setFilterValue:n=>{t.setColumnFilters(l=>{const o=e.getFilterFn(),r=l==null?void 0:l.find(c=>c.id===e.id),s=Et(n,r?r.value:void 0);if($s(o,s,e)){var u;return(u=l==null?void 0:l.filter(c=>c.id!==e.id))!=null?u:[]}const a={id:e.id,value:s};if(r){var f;return(f=l==null?void 0:l.map(c=>c.id===e.id?a:c))!=null?f:[]}return l!=null&&l.length?[...l,a]:[a]})},_getFacetedRowModel:t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),getFacetedRowModel:()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),_getFacetedUniqueValues:t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),getFacetedUniqueValues:()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,_getFacetedMinMaxValues:t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),getFacetedMinMaxValues:()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}),createRow:(e,t)=>({columnFilters:{},columnFiltersMeta:{}}),createTable:e=>({getGlobalAutoFilterFn:()=>ht.includesString,getGlobalFilterFn:()=>{var t,n;const{globalFilterFn:l}=e.options;return Cl(l)?l:l==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[l])!=null?t:ht[l]},setColumnFilters:t=>{const n=e.getAllLeafColumns(),l=o=>{var r;return(r=Et(t,o))==null?void 0:r.filter(s=>{const u=n.find(a=>a.id===s.id);if(u){const a=u.getFilterFn();if($s(a,s.value,u))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(l)},setGlobalFilter:t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},resetGlobalFilter:t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)},resetColumnFilters:t=>{var n,l;e.setColumnFilters(t?[]:(n=(l=e.initialState)==null?void 0:l.columnFilters)!=null?n:[])},getPreFilteredRowModel:()=>e.getCoreRowModel(),getFilteredRowModel:()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel()),_getGlobalFacetedRowModel:e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),getGlobalFacetedRowModel:()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),_getGlobalFacetedUniqueValues:e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),getGlobalFacetedUniqueValues:()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,_getGlobalFacetedMinMaxValues:e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),getGlobalFacetedMinMaxValues:()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}})};function $s(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Om=(e,t,n)=>n.reduce((l,o)=>{const r=o.getValue(e);return l+(typeof r=="number"?r:0)},0),Tm=(e,t,n)=>{let l;return n.forEach(o=>{const r=o.getValue(e);r!=null&&(l>r||l===void 0&&r>=r)&&(l=r)}),l},zm=(e,t,n)=>{let l;return n.forEach(o=>{const r=o.getValue(e);r!=null&&(l<r||l===void 0&&r>=r)&&(l=r)}),l},Vm=(e,t,n)=>{let l,o;return n.forEach(r=>{const s=r.getValue(e);s!=null&&(l===void 0?s>=s&&(l=o=s):(l>s&&(l=s),o<s&&(o=s)))}),[l,o]},qm=(e,t)=>{let n=0,l=0;if(t.forEach(o=>{let r=o.getValue(e);r!=null&&(r=+r)>=r&&(++n,l+=r)}),n)return l/n},Lm=(e,t)=>{if(!t.length)return;const n=t.map(r=>r.getValue(e));if(!Rm(n))return;if(n.length===1)return n[0];const l=Math.floor(n.length/2),o=n.sort((r,s)=>r-s);return n.length%2!==0?o[l]:(o[l-1]+o[l])/2},Hm=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),Gm=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,jm=(e,t)=>t.length,Yl={sum:Om,min:Tm,max:zm,extent:Vm,mean:qm,median:Lm,unique:Hm,uniqueCount:Gm,count:jm},Bm={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Je("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>({toggleGrouping:()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(l=>l!==e.id):[...n??[],e.id])},getCanGroup:()=>{var n,l,o,r;return(n=(l=(o=(r=e.columnDef.enableGrouping)!=null?r:!0)!=null?o:t.options.enableGrouping)!=null?l:!0)!=null?n:!!e.accessorFn},getIsGrouped:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},getGroupedIndex:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},getToggleGroupingHandler:()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},getAutoAggregationFn:()=>{const n=t.getCoreRowModel().flatRows[0],l=n==null?void 0:n.getValue(e.id);if(typeof l=="number")return Yl.sum;if(Object.prototype.toString.call(l)==="[object Date]")return Yl.extent},getAggregationFn:()=>{var n,l;if(!e)throw new Error;return Cl(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(l=t.options.aggregationFns)==null?void 0:l[e.columnDef.aggregationFn])!=null?n:Yl[e.columnDef.aggregationFn]}}),createTable:e=>({setGrouping:t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),resetGrouping:t=>{var n,l;e.setGrouping(t?[]:(n=(l=e.initialState)==null?void 0:l.grouping)!=null?n:[])},getPreGroupedRowModel:()=>e.getFilteredRowModel(),getGroupedRowModel:()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())}),createRow:(e,t)=>({getIsGrouped:()=>!!e.groupingColumnId,getGroupingValue:n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const l=t.getColumn(n);return l!=null&&l.columnDef.getGroupingValue?(e._groupingValuesCache[n]=l.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},_groupingValuesCache:{}}),createCell:(e,t,n,l)=>({getIsGrouped:()=>t.getIsGrouped()&&t.id===n.groupingColumnId,getIsPlaceholder:()=>!e.getIsGrouped()&&t.getIsGrouped(),getIsAggregated:()=>{var o;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((o=n.subRows)!=null&&o.length)}})};function xm(e,t,n){if(!(t!=null&&t.length)||!n)return e;const l=e.filter(r=>!t.includes(r.id));return n==="remove"?l:[...t.map(r=>e.find(s=>s.id===r)).filter(Boolean),...l]}const Wm={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Je("columnOrder",e)}),createTable:e=>({setColumnOrder:t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),resetColumnOrder:t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},_getOrderColumnsFn:oe(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,l)=>o=>{let r=[];if(!(t!=null&&t.length))r=o;else{const s=[...t],u=[...o];for(;u.length&&s.length;){const a=s.shift(),f=u.findIndex(c=>c.id===a);f>-1&&r.push(u.splice(f,1)[0])}r=[...r,...u]}return xm(r,n,l)},{key:!1})})},So=0,Co=10,Ql=()=>({pageIndex:So,pageSize:Co}),Um={getInitialState:e=>({...e,pagination:{...Ql(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:Je("pagination",e)}),createTable:e=>{let t=!1,n=!1;return{_autoResetPageIndex:()=>{var l,o;if(!t){e._queue(()=>{t=!0});return}if((l=(o=e.options.autoResetAll)!=null?o:e.options.autoResetPageIndex)!=null?l:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},setPagination:l=>{const o=r=>Et(l,r);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(o)},resetPagination:l=>{var o;e.setPagination(l?Ql():(o=e.initialState.pagination)!=null?o:Ql())},setPageIndex:l=>{e.setPagination(o=>{let r=Et(l,o.pageIndex);const s=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return r=Math.max(0,Math.min(r,s)),{...o,pageIndex:r}})},resetPageIndex:l=>{var o,r,s;e.setPageIndex(l?So:(o=(r=e.initialState)==null||(s=r.pagination)==null?void 0:s.pageIndex)!=null?o:So)},resetPageSize:l=>{var o,r,s;e.setPageSize(l?Co:(o=(r=e.initialState)==null||(s=r.pagination)==null?void 0:s.pageSize)!=null?o:Co)},setPageSize:l=>{e.setPagination(o=>{const r=Math.max(1,Et(l,o.pageSize)),s=o.pageSize*o.pageIndex,u=Math.floor(s/r);return{...o,pageIndex:u,pageSize:r}})},setPageCount:l=>e.setPagination(o=>{var r;let s=Et(l,(r=e.options.pageCount)!=null?r:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...o,pageCount:s}}),getPageOptions:oe(()=>[e.getPageCount()],l=>{let o=[];return l&&l>0&&(o=[...new Array(l)].fill(null).map((r,s)=>s)),o},{key:!1,debug:()=>{var l;return(l=e.options.debugAll)!=null?l:e.options.debugTable}}),getCanPreviousPage:()=>e.getState().pagination.pageIndex>0,getCanNextPage:()=>{const{pageIndex:l}=e.getState().pagination,o=e.getPageCount();return o===-1?!0:o===0?!1:l<o-1},previousPage:()=>e.setPageIndex(l=>l-1),nextPage:()=>e.setPageIndex(l=>l+1),getPrePaginationRowModel:()=>e.getExpandedRowModel(),getPaginationRowModel:()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),getPageCount:()=>{var l;return(l=e.options.pageCount)!=null?l:Math.ceil(e.getPrePaginationRowModel().rows.length/e.getState().pagination.pageSize)}}}},Kl=()=>({left:[],right:[]}),Xm={getInitialState:e=>({columnPinning:Kl(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Je("columnPinning",e)}),createColumn:(e,t)=>({pin:n=>{const l=e.getLeafColumns().map(o=>o.id).filter(Boolean);t.setColumnPinning(o=>{var r,s;if(n==="right"){var u,a;return{left:((u=o==null?void 0:o.left)!=null?u:[]).filter(d=>!(l!=null&&l.includes(d))),right:[...((a=o==null?void 0:o.right)!=null?a:[]).filter(d=>!(l!=null&&l.includes(d))),...l]}}if(n==="left"){var f,c;return{left:[...((f=o==null?void 0:o.left)!=null?f:[]).filter(d=>!(l!=null&&l.includes(d))),...l],right:((c=o==null?void 0:o.right)!=null?c:[]).filter(d=>!(l!=null&&l.includes(d)))}}return{left:((r=o==null?void 0:o.left)!=null?r:[]).filter(d=>!(l!=null&&l.includes(d))),right:((s=o==null?void 0:o.right)!=null?s:[]).filter(d=>!(l!=null&&l.includes(d)))}})},getCanPin:()=>e.getLeafColumns().some(l=>{var o,r;return((o=l.columnDef.enablePinning)!=null?o:!0)&&((r=t.options.enablePinning)!=null?r:!0)}),getIsPinned:()=>{const n=e.getLeafColumns().map(u=>u.id),{left:l,right:o}=t.getState().columnPinning,r=n.some(u=>l==null?void 0:l.includes(u)),s=n.some(u=>o==null?void 0:o.includes(u));return r?"left":s?"right":!1},getPinnedIndex:()=>{var n,l,o;const r=e.getIsPinned();return r?(n=(l=t.getState().columnPinning)==null||(o=l[r])==null?void 0:o.indexOf(e.id))!=null?n:-1:0}}),createRow:(e,t)=>({getCenterVisibleCells:oe(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,l,o)=>{const r=[...l??[],...o??[]];return n.filter(s=>!r.includes(s.column.id))},{key:"row.getCenterVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getLeftVisibleCells:oe(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,,],(n,l)=>(l??[]).map(r=>n.find(s=>s.column.id===r)).filter(Boolean).map(r=>({...r,position:"left"})),{key:"row.getLeftVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getRightVisibleCells:oe(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,l)=>(l??[]).map(r=>n.find(s=>s.column.id===r)).filter(Boolean).map(r=>({...r,position:"right"})),{key:"row.getRightVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>({setColumnPinning:t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),resetColumnPinning:t=>{var n,l;return e.setColumnPinning(t?Kl():(n=(l=e.initialState)==null?void 0:l.columnPinning)!=null?n:Kl())},getIsSomeColumnsPinned:t=>{var n;const l=e.getState().columnPinning;if(!t){var o,r;return!!((o=l.left)!=null&&o.length||(r=l.right)!=null&&r.length)}return!!((n=l[t])!=null&&n.length)},getLeftLeafColumns:oe(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(l=>t.find(o=>o.id===l)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getRightLeafColumns:oe(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(l=>t.find(o=>o.id===l)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getCenterLeafColumns:oe(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l)=>{const o=[...n??[],...l??[]];return t.filter(r=>!o.includes(r.id))},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}})})},Ym={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Je("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>({setRowSelection:t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),resetRowSelection:t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},toggleAllRowsSelected:t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const l={...n},o=e.getPreGroupedRowModel().flatRows;return t?o.forEach(r=>{r.getCanSelect()&&(l[r.id]=!0)}):o.forEach(r=>{delete l[r.id]}),l})},toggleAllPageRowsSelected:t=>e.setRowSelection(n=>{const l=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),o={...n};return e.getRowModel().rows.forEach(r=>{$o(o,r.id,l,e)}),o}),getPreSelectedRowModel:()=>e.getCoreRowModel(),getSelectedRowModel:oe(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Jl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getFilteredSelectedRowModel:oe(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Jl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getFilteredSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getGroupedSelectedRowModel:oe(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Jl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getGroupedSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getIsAllRowsSelected:()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let l=!!(t.length&&Object.keys(n).length);return l&&t.some(o=>o.getCanSelect()&&!n[o.id])&&(l=!1),l},getIsAllPageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows.filter(o=>o.getCanSelect()),{rowSelection:n}=e.getState();let l=!!t.length;return l&&t.some(o=>!n[o.id])&&(l=!1),l},getIsSomeRowsSelected:()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},getIsSomePageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},getToggleAllRowsSelectedHandler:()=>t=>{e.toggleAllRowsSelected(t.target.checked)},getToggleAllPageRowsSelectedHandler:()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}}),createRow:(e,t)=>({toggleSelected:n=>{const l=e.getIsSelected();t.setRowSelection(o=>{if(n=typeof n<"u"?n:!l,l===n)return o;const r={...o};return $o(r,e.id,n,t),r})},getIsSelected:()=>{const{rowSelection:n}=t.getState();return Bo(e,n)},getIsSomeSelected:()=>{const{rowSelection:n}=t.getState();return As(e,n)==="some"},getIsAllSubRowsSelected:()=>{const{rowSelection:n}=t.getState();return As(e,n)==="all"},getCanSelect:()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},getCanSelectSubRows:()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},getCanMultiSelect:()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},getToggleSelectedHandler:()=>{const n=e.getCanSelect();return l=>{var o;n&&e.toggleSelected((o=l.target)==null?void 0:o.checked)}}})},$o=(e,t,n,l)=>{var o;const r=l.getRow(t);n?(r.getCanMultiSelect()||Object.keys(e).forEach(s=>delete e[s]),r.getCanSelect()&&(e[t]=!0)):delete e[t],(o=r.subRows)!=null&&o.length&&r.getCanSelectSubRows()&&r.subRows.forEach(s=>$o(e,s.id,n,l))};function Jl(e,t){const n=e.getState().rowSelection,l=[],o={},r=function(s,u){return s.map(a=>{var f;const c=Bo(a,n);if(c&&(l.push(a),o[a.id]=a),(f=a.subRows)!=null&&f.length&&(a={...a,subRows:r(a.subRows)}),c)return a}).filter(Boolean)};return{rows:r(t.rows),flatRows:l,rowsById:o}}function Bo(e,t){var n;return(n=t[e.id])!=null?n:!1}function As(e,t,n){if(e.subRows&&e.subRows.length){let l=!0,o=!1;return e.subRows.forEach(r=>{o&&!l||(Bo(r,t)?o=!0:l=!1)}),l?"all":o?"some":!1}return!1}const Ao=/([0-9]+)/gm,Qm=(e,t,n)=>Eu(Ft(e.getValue(n)).toLowerCase(),Ft(t.getValue(n)).toLowerCase()),Km=(e,t,n)=>Eu(Ft(e.getValue(n)),Ft(t.getValue(n))),Jm=(e,t,n)=>xo(Ft(e.getValue(n)).toLowerCase(),Ft(t.getValue(n)).toLowerCase()),Zm=(e,t,n)=>xo(Ft(e.getValue(n)),Ft(t.getValue(n))),e_=(e,t,n)=>{const l=e.getValue(n),o=t.getValue(n);return l>o?1:l<o?-1:0},t_=(e,t,n)=>xo(e.getValue(n),t.getValue(n));function xo(e,t){return e===t?0:e>t?1:-1}function Ft(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Eu(e,t){const n=e.split(Ao).filter(Boolean),l=t.split(Ao).filter(Boolean);for(;n.length&&l.length;){const o=n.shift(),r=l.shift(),s=parseInt(o,10),u=parseInt(r,10),a=[s,u].sort();if(isNaN(a[0])){if(o>r)return 1;if(r>o)return-1;continue}if(isNaN(a[1]))return isNaN(s)?-1:1;if(s>u)return 1;if(u>s)return-1}return n.length-l.length}const gn={alphanumeric:Qm,alphanumericCaseSensitive:Km,text:Jm,textCaseSensitive:Zm,datetime:e_,basic:t_},n_={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:Je("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>({getAutoSortingFn:()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let l=!1;for(const o of n){const r=o==null?void 0:o.getValue(e.id);if(Object.prototype.toString.call(r)==="[object Date]")return gn.datetime;if(typeof r=="string"&&(l=!0,r.split(Ao).length>1))return gn.alphanumeric}return l?gn.text:gn.basic},getAutoSortDir:()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},getSortingFn:()=>{var n,l;if(!e)throw new Error;return Cl(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(l=t.options.sortingFns)==null?void 0:l[e.columnDef.sortingFn])!=null?n:gn[e.columnDef.sortingFn]},toggleSorting:(n,l)=>{const o=e.getNextSortingOrder(),r=typeof n<"u"&&n!==null;t.setSorting(s=>{const u=s==null?void 0:s.find(p=>p.id===e.id),a=s==null?void 0:s.findIndex(p=>p.id===e.id);let f=[],c,d=r?n:o==="desc";if(s!=null&&s.length&&e.getCanMultiSort()&&l?u?c="toggle":c="add":s!=null&&s.length&&a!==s.length-1?c="replace":u?c="toggle":c="replace",c==="toggle"&&(r||o||(c="remove")),c==="add"){var g;f=[...s,{id:e.id,desc:d}],f.splice(0,f.length-((g=t.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else c==="toggle"?f=s.map(p=>p.id===e.id?{...p,desc:d}:p):c==="remove"?f=s.filter(p=>p.id!==e.id):f=[{id:e.id,desc:d}];return f})},getFirstSortDir:()=>{var n,l;return((n=(l=e.columnDef.sortDescFirst)!=null?l:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},getNextSortingOrder:n=>{var l,o;const r=e.getFirstSortDir(),s=e.getIsSorted();return s?s!==r&&((l=t.options.enableSortingRemoval)==null||l)&&(!(n&&(o=t.options.enableMultiRemove)!=null)||o)?!1:s==="desc"?"asc":"desc":r},getCanSort:()=>{var n,l;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((l=t.options.enableSorting)!=null?l:!0)&&!!e.accessorFn},getCanMultiSort:()=>{var n,l;return(n=(l=e.columnDef.enableMultiSort)!=null?l:t.options.enableMultiSort)!=null?n:!!e.accessorFn},getIsSorted:()=>{var n;const l=(n=t.getState().sorting)==null?void 0:n.find(o=>o.id===e.id);return l?l.desc?"desc":"asc":!1},getSortIndex:()=>{var n,l;return(n=(l=t.getState().sorting)==null?void 0:l.findIndex(o=>o.id===e.id))!=null?n:-1},clearSorting:()=>{t.setSorting(n=>n!=null&&n.length?n.filter(l=>l.id!==e.id):[])},getToggleSortingHandler:()=>{const n=e.getCanSort();return l=>{n&&(l.persist==null||l.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(l):!1))}}}),createTable:e=>({setSorting:t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),resetSorting:t=>{var n,l;e.setSorting(t?[]:(n=(l=e.initialState)==null?void 0:l.sorting)!=null?n:[])},getPreSortedRowModel:()=>e.getGroupedRowModel(),getSortedRowModel:()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())})},l_={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Je("columnVisibility",e)}),createColumn:(e,t)=>({toggleVisibility:n=>{e.getCanHide()&&t.setColumnVisibility(l=>({...l,[e.id]:n??!e.getIsVisible()}))},getIsVisible:()=>{var n,l;return(n=(l=t.getState().columnVisibility)==null?void 0:l[e.id])!=null?n:!0},getCanHide:()=>{var n,l;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((l=t.options.enableHiding)!=null?l:!0)},getToggleVisibilityHandler:()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}}),createRow:(e,t)=>({_getAllVisibleCells:oe(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(l=>l.column.getIsVisible()),{key:"row._getAllVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getVisibleCells:oe(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,l,o)=>[...n,...l,...o],{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>{const t=(n,l)=>oe(()=>[l(),l().filter(o=>o.getIsVisible()).map(o=>o.id).join("_")],o=>o.filter(r=>r.getIsVisible==null?void 0:r.getIsVisible()),{key:n,debug:()=>{var o;return(o=e.options.debugAll)!=null?o:e.options.debugColumns}});return{getVisibleFlatColumns:t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),getVisibleLeafColumns:t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),getLeftVisibleLeafColumns:t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),getRightVisibleLeafColumns:t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),getCenterVisibleLeafColumns:t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),setColumnVisibility:n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),resetColumnVisibility:n=>{var l;e.setColumnVisibility(n?{}:(l=e.initialState.columnVisibility)!=null?l:{})},toggleAllColumnsVisible:n=>{var l;n=(l=n)!=null?l:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((o,r)=>({...o,[r.id]:n||!(r.getCanHide!=null&&r.getCanHide())}),{}))},getIsAllColumnsVisible:()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),getIsSomeColumnsVisible:()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),getToggleAllColumnsVisibilityHandler:()=>n=>{var l;e.toggleAllColumnsVisible((l=n.target)==null?void 0:l.checked)}}}},Rs=[Fm,l_,Wm,Xm,Pm,n_,Bm,Nm,Um,Ym,Dm];function o_(e){var t;(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");let n={_features:Rs};const l=n._features.reduce((c,d)=>Object.assign(c,d.getDefaultOptions==null?void 0:d.getDefaultOptions(n)),{}),o=c=>n.options.mergeOptions?n.options.mergeOptions(l,c):{...l,...c};let s={...{},...(t=e.initialState)!=null?t:{}};n._features.forEach(c=>{var d;s=(d=c.getInitialState==null?void 0:c.getInitialState(s))!=null?d:s});const u=[];let a=!1;const f={_features:Rs,options:{...l,...e},initialState:s,_queue:c=>{u.push(c),a||(a=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();a=!1}).catch(d=>setTimeout(()=>{throw d})))},reset:()=>{n.setState(n.initialState)},setOptions:c=>{const d=Et(c,n.options);n.options=o(d)},getState:()=>n.options.state,setState:c=>{n.options.onStateChange==null||n.options.onStateChange(c)},_getRowId:(c,d,g)=>{var p;return(p=n.options.getRowId==null?void 0:n.options.getRowId(c,d,g))!=null?p:`${g?[g.id,d].join("."):d}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:c=>{const d=n.getRowModel().rowsById[c];if(!d)throw new Error;return d},_getDefaultColumnDef:oe(()=>[n.options.defaultColumn],c=>{var d;return c=(d=c)!=null?d:{},{header:g=>{const p=g.header.column.columnDef;return p.accessorKey?p.accessorKey:p.accessorFn?p.id:null},cell:g=>{var p,m;return(p=(m=g.renderValue())==null||m.toString==null?void 0:m.toString())!=null?p:null},...n._features.reduce((g,p)=>Object.assign(g,p.getDefaultColumnDef==null?void 0:p.getDefaultColumnDef()),{}),...c}},{debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns},key:!1}),_getColumnDefs:()=>n.options.columns,getAllColumns:oe(()=>[n._getColumnDefs()],c=>{const d=function(g,p,m){return m===void 0&&(m=0),g.map(_=>{const v=Mm(n,_,m,p),w=_;return v.columns=w.columns?d(w.columns,v,m+1):[],v})};return d(c)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllFlatColumns:oe(()=>[n.getAllColumns()],c=>c.flatMap(d=>d.getFlatColumns()),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),_getAllFlatColumnsById:oe(()=>[n.getAllFlatColumns()],c=>c.reduce((d,g)=>(d[g.id]=g,d),{}),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllLeafColumns:oe(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(c,d)=>{let g=c.flatMap(p=>p.getLeafColumns());return d(g)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getColumn:c=>n._getAllFlatColumnsById()[c]};return Object.assign(n,f),n._features.forEach(c=>Object.assign(n,c.createTable==null?void 0:c.createTable(n))),n}function i_(e,t,n,l){const o=()=>{var s;return(s=r.getValue())!=null?s:e.options.renderFallbackValue},r={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(l),renderValue:o,getContext:oe(()=>[e,n,t,r],(s,u,a,f)=>({table:s,column:u,row:a,cell:f,getValue:f.getValue,renderValue:f.renderValue}),{key:!1,debug:()=>e.options.debugAll})};return e._features.forEach(s=>{Object.assign(r,s.createCell==null?void 0:s.createCell(r,n,t,e))},{}),r}const Wo=(e,t,n,l,o,r,s)=>{let u={id:t,index:l,original:n,depth:o,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:a=>{if(u._valuesCache.hasOwnProperty(a))return u._valuesCache[a];const f=e.getColumn(a);if(f!=null&&f.accessorFn)return u._valuesCache[a]=f.accessorFn(u.original,l),u._valuesCache[a]},getUniqueValues:a=>{if(u._uniqueValuesCache.hasOwnProperty(a))return u._uniqueValuesCache[a];const f=e.getColumn(a);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(u._uniqueValuesCache[a]=f.columnDef.getUniqueValues(u.original,l),u._uniqueValuesCache[a]):(u._uniqueValuesCache[a]=[u.getValue(a)],u._uniqueValuesCache[a])},renderValue:a=>{var f;return(f=u.getValue(a))!=null?f:e.options.renderFallbackValue},subRows:r??[],getLeafRows:()=>Em(u.subRows,a=>a.subRows),getParentRow:()=>u.parentId?e.getRow(u.parentId):void 0,getParentRows:()=>{let a=[],f=u;for(;;){const c=f.getParentRow();if(!c)break;a.push(c),f=c}return a.reverse()},getAllCells:oe(()=>[e.getAllLeafColumns()],a=>a.map(f=>i_(e,u,f,f.id)),{key:!1,debug:()=>{var a;return(a=e.options.debugAll)!=null?a:e.options.debugRows}}),_getAllCellsByColumnId:oe(()=>[u.getAllCells()],a=>a.reduce((f,c)=>(f[c.column.id]=c,f),{}),{key:"row.getAllCellsByColumnId",debug:()=>{var a;return(a=e.options.debugAll)!=null?a:e.options.debugRows}})};for(let a=0;a<e._features.length;a++){const f=e._features[a];Object.assign(u,f==null||f.createRow==null?void 0:f.createRow(u,e))}return u};function r_(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function Es(){return e=>oe(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},l=function(o,r,s){r===void 0&&(r=0);const u=[];for(let f=0;f<o.length;f++){const c=Wo(e,e._getRowId(o[f],f,s),o[f],f,r,void 0,s==null?void 0:s.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,u.push(c),e.options.getSubRows){var a;c.originalSubRows=e.options.getSubRows(o[f],f),(a=c.originalSubRows)!=null&&a.length&&(c.subRows=l(c.originalSubRows,r+1,c))}}return u};return n.rows=l(t),n},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function Mu(e,t,n){return n.options.filterFromLeafRows?s_(e,t,n):a_(e,t,n)}function s_(e,t,n){var l;const o=[],r={},s=(l=n.options.maxLeafRowFilterDepth)!=null?l:100,u=function(a,f){f===void 0&&(f=0);const c=[];for(let g=0;g<a.length;g++){var d;let p=a[g];const m=Wo(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);if(m.columnFilters=p.columnFilters,(d=p.subRows)!=null&&d.length&&f<s){if(m.subRows=u(p.subRows,f+1),p=m,t(p)&&!m.subRows.length){c.push(p),r[p.id]=p,r[g]=p;continue}if(t(p)||m.subRows.length){c.push(p),r[p.id]=p,r[g]=p;continue}}else p=m,t(p)&&(c.push(p),r[p.id]=p,r[g]=p)}return c};return{rows:u(e),flatRows:o,rowsById:r}}function a_(e,t,n){var l;const o=[],r={},s=(l=n.options.maxLeafRowFilterDepth)!=null?l:100,u=function(a,f){f===void 0&&(f=0);const c=[];for(let g=0;g<a.length;g++){let p=a[g];if(t(p)){var d;if((d=p.subRows)!=null&&d.length&&f<s){const _=Wo(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);_.subRows=u(p.subRows,f+1),p=_}c.push(p),o.push(p),r[p.id]=p}}return c};return{rows:u(e),flatRows:o,rowsById:r}}function Ms(){return e=>oe(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,l)=>{if(!t.rows.length||!(n!=null&&n.length)&&!l){for(let g=0;g<t.flatRows.length;g++)t.flatRows[g].columnFilters={},t.flatRows[g].columnFiltersMeta={};return t}const o=[],r=[];(n??[]).forEach(g=>{var p;const m=e.getColumn(g.id);if(!m)return;const _=m.getFilterFn();_&&o.push({id:g.id,filterFn:_,resolvedValue:(p=_.resolveFilterValue==null?void 0:_.resolveFilterValue(g.value))!=null?p:g.value})});const s=n.map(g=>g.id),u=e.getGlobalFilterFn(),a=e.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());l&&u&&a.length&&(s.push("__global__"),a.forEach(g=>{var p;r.push({id:g.id,filterFn:u,resolvedValue:(p=u.resolveFilterValue==null?void 0:u.resolveFilterValue(l))!=null?p:l})}));let f,c;for(let g=0;g<t.flatRows.length;g++){const p=t.flatRows[g];if(p.columnFilters={},o.length)for(let m=0;m<o.length;m++){f=o[m];const _=f.id;p.columnFilters[_]=f.filterFn(p,_,f.resolvedValue,v=>{p.columnFiltersMeta[_]=v})}if(r.length){for(let m=0;m<r.length;m++){c=r[m];const _=c.id;if(c.filterFn(p,_,c.resolvedValue,v=>{p.columnFiltersMeta[_]=v})){p.columnFilters.__global__=!0;break}}p.columnFilters.__global__!==!0&&(p.columnFilters.__global__=!1)}}const d=g=>{for(let p=0;p<s.length;p++)if(g.columnFilters[s[p]]===!1)return!1;return!0};return Mu(t.rows,d,e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function Fs(){return(e,t)=>oe(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,l,o)=>{if(!n.rows.length||!(l!=null&&l.length)&&!o)return n;const r=[...l.map(u=>u.id).filter(u=>u!==t),o?"__global__":void 0].filter(Boolean),s=u=>{for(let a=0;a<r.length;a++)if(u.columnFilters[r[a]]===!1)return!1;return!0};return Mu(n.rows,s,e)},{key:!1,debug:()=>{var n;return(n=e.options.debugAll)!=null?n:e.options.debugTable},onChange:()=>{}})}function Ds(){return e=>oe(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const l=e.getState().sorting,o=[],r=l.filter(a=>{var f;return(f=e.getColumn(a.id))==null?void 0:f.getCanSort()}),s={};r.forEach(a=>{const f=e.getColumn(a.id);f&&(s[a.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const u=a=>{const f=[...a];return f.sort((c,d)=>{for(let p=0;p<r.length;p+=1){var g;const m=r[p],_=s[m.id],v=(g=m==null?void 0:m.desc)!=null?g:!1;let w=0;if(_.sortUndefined){const y=c.getValue(m.id),C=d.getValue(m.id),E=y===void 0,S=C===void 0;(E||S)&&(w=E&&S?0:E?_.sortUndefined:-_.sortUndefined)}if(w===0&&(w=_.sortingFn(c,d,m.id)),w!==0)return v&&(w*=-1),_.invertSorting&&(w*=-1),w}return c.index-d.index}),f.forEach(c=>{var d;o.push(c),(d=c.subRows)!=null&&d.length&&(c.subRows=u(c.subRows))}),f};return{rows:u(n.rows),flatRows:o,rowsById:n.rowsById}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function u_(e){const t=[],n=l=>{var o;t.push(l),(o=l.subRows)!=null&&o.length&&l.getIsExpanded()&&l.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function Is(e){return t=>oe(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,l)=>{if(!l.rows.length)return l;const{pageSize:o,pageIndex:r}=n;let{rows:s,flatRows:u,rowsById:a}=l;const f=o*r,c=f+o;s=s.slice(f,c);let d;t.options.paginateExpandedRows?d={rows:s,flatRows:u,rowsById:a}:d=u_({rows:s,flatRows:u,rowsById:a}),d.flatRows=[];const g=p=>{d.flatRows.push(p),p.subRows.length&&p.subRows.forEach(g)};return d.rows.forEach(g),d},{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugTable}})}/**
 * svelte-table
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f_(e){let t;return{c(){t=L(e[0])},l(n){t=Xu(n,e[0])},m(n,l){Gu(n,t,l)},p(n,[l]){l&1&&J(t,n[0])},i:X,o:X,d(n){n&&P(t)}}}function c_(e,t,n){let{content:l}=t;return e.$$set=o=>{"content"in o&&n(0,l=o.content)},[l]}class d_ extends fe{constructor(t){super(),ce(this,t,c_,f_,ue,{content:0})}}const h_=ca((e,t,n,l)=>`${df(t.content)}`);var g_=typeof document>"u"?h_:d_;function p_(e,t,n){let l,o;return l=new t({props:n,$$inline:!0}),{c(){le(l.$$.fragment)},l(r){gf(l.$$.fragment,r)},m(r,s){ee(l,r,s),o=!0},p:X,i(r){o||(z(l.$$.fragment,r),o=!0)},o(r){q(l.$$.fragment,r),o=!1},d(r){te(l,r)}}}function m_(e,t){return class extends fe{constructor(l){super(),ce(this,l,null,o=>p_(o,e,t),ue,{},void 0)}}}function __(e,t){return ca((l,o,r,s)=>`${hf(e,"TableComponent").$$render(l,t,{},{})}`)}const Ro=typeof window>"u"?__:m_;function v_(e){return typeof e=="object"&&typeof e.$$render=="function"&&typeof e.render=="function"}function b_(e){var t,n;let l="__SVELTE_HMR"in window;return e.prototype instanceof fe||l&&((t=e.name)==null?void 0:t.startsWith("Proxy<"))&&((n=e.name)==null?void 0:n.endsWith(">"))}function Ns(e){return typeof document>"u"?v_(e):b_(e)}function Ps(e){return Ro(g_,{content:e})}function $l(e,t){if(!e)return null;if(Ns(e))return Ro(e,t);if(typeof e=="function"){const n=e(t);return n==null?null:Ns(n)?Ro(n,t):Ps(n)}return Ps(e)}function Os(e){let t;"subscribe"in e?t=e:t=no(e);let n={state:{},onStateChange:()=>{},renderFallbackValue:null,...Pu(t)},l=o_(n),o=Ie(l.initialState),r=mf([o,t],u=>u);return no(l,function(a){const f=r.subscribe(c=>{let[d,g]=c;l.setOptions(p=>({...p,...g,state:{...d,...g.state},onStateChange:m=>{m instanceof Function?o.update(m):o.set(m),n.onStateChange==null||n.onStateChange(m)}})),a(l)});return function(){f()}})}/**
 * match-sorter-utils
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Fu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},w_=Object.keys(Fu).join("|"),y_=new RegExp(w_,"g");function k_(e){return e.replace(y_,t=>Fu[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const He={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function S_(e,t,n){var l;if(n=n||{},n.threshold=(l=n.threshold)!=null?l:He.MATCHES,!n.accessors){const s=Ts(e,t,n);return{rankedValue:e,rank:s,accessorIndex:-1,accessorThreshold:n.threshold,passed:s>=n.threshold}}const o=R_(e,n.accessors),r={rankedValue:e,rank:He.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let s=0;s<o.length;s++){const u=o[s];let a=Ts(u.itemValue,t,n);const{minRanking:f,maxRanking:c,threshold:d=n.threshold}=u.attributes;a<f&&a>=He.MATCHES?a=f:a>c&&(a=c),a=Math.min(a,c),a>=d&&a>r.rank&&(r.rank=a,r.passed=!0,r.accessorIndex=s,r.accessorThreshold=d,r.rankedValue=u.itemValue)}return r}function Ts(e,t,n){return e=zs(e,n),t=zs(t,n),t.length>e.length?He.NO_MATCH:e===t?He.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?He.EQUAL:e.startsWith(t)?He.STARTS_WITH:e.includes(` ${t}`)?He.WORD_STARTS_WITH:e.includes(t)?He.CONTAINS:t.length===1?He.NO_MATCH:C_(e).includes(t)?He.ACRONYM:$_(e,t))}function C_(e){let t="";return e.split(" ").forEach(l=>{l.split("-").forEach(r=>{t+=r.substr(0,1)})}),t}function $_(e,t){let n=0,l=0;function o(a,f,c){for(let d=c,g=f.length;d<g;d++)if(f[d]===a)return n+=1,d+1;return-1}function r(a){const f=1/a,c=n/t.length;return He.MATCHES+c*f}const s=o(t[0],e,0);if(s<0)return He.NO_MATCH;l=s;for(let a=1,f=t.length;a<f;a++){const c=t[a];if(l=o(c,e,l),!(l>-1))return He.NO_MATCH}const u=l-s;return r(u)}function zs(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=k_(e)),e}function A_(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const l=n(e);return l==null?[]:Array.isArray(l)?l:[String(l)]}function R_(e,t){const n=[];for(let l=0,o=t.length;l<o;l++){const r=t[l],s=E_(r),u=A_(e,r);for(let a=0,f=u.length;a<f;a++)n.push({itemValue:u[a],attributes:s})}return n}const Vs={maxRanking:1/0,minRanking:-1/0};function E_(e){return typeof e=="function"?Vs:{...Vs,...e}}function qs(e,t,n){const l=e.slice();return l[17]=t[n],l}function Ls(e,t,n){const l=e.slice();return l[20]=t[n],l}function Hs(e,t,n){const l=e.slice();return l[23]=t[n],l}function Gs(e,t,n){const l=e.slice();return l[26]=t[n],l}function M_(e){let t,n,l,o,r=D_(e[26].column.getIsSorted())+"",s,u,a,f;var c=$l(e[26].column.columnDef.header,e[26].getContext());function d(g){return{}}return c&&(n=Mt(c,d())),{c(){t=A("button"),n&&le(n.$$.fragment),l=N(),o=A("span"),s=L(r),t.disabled=!e[26].column.getCanSort(),Te(t,"is-disabled",!e[26].column.getCanSort())},m(g,p){O(g,t,p),n&&ee(n,t,null),b(t,l),b(t,o),b(o,s),u=!0,a||(f=B(t,"click",e[26].column.getToggleSortingHandler()),a=!0)},p(g,p){if(e=g,c!==(c=$l(e[26].column.columnDef.header,e[26].getContext()))){if(n){_e();const m=n;q(m.$$.fragment,1,0,()=>{te(m,1)}),ve()}c?(n=Mt(c,d()),le(n.$$.fragment),z(n.$$.fragment,1),ee(n,t,l)):n=null}},i(g){u||(n&&z(n.$$.fragment,g),u=!0)},o(g){n&&q(n.$$.fragment,g),u=!1},d(g){g&&P(t),n&&te(n),a=!1,f()}}}function js(e){let t,n,l=!e[26].isPlaceholder&&M_(e);return{c(){t=A("th"),l&&l.c(),h(t,"colspan",e[26].colSpan),h(t,"class","svelte-16fb3tv")},m(o,r){O(o,t,r),l&&l.m(t,null),n=!0},p(o,r){o[26].isPlaceholder||l.p(o,r)},i(o){n||(z(l),n=!0)},o(o){q(l),n=!1},d(o){o&&P(t),l&&l.d()}}}function Bs(e){let t,n,l,o=e[23].headers,r=[];for(let u=0;u<o.length;u+=1)r[u]=js(Gs(e,o,u));const s=u=>q(r[u],1,1,()=>{r[u]=null});return{c(){t=A("tr");for(let u=0;u<r.length;u+=1)r[u].c();n=N()},m(u,a){O(u,t,a);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(t,null);b(t,n),l=!0},p(u,a){if(a&32){o=u[23].headers;let f;for(f=0;f<o.length;f+=1){const c=Gs(u,o,f);r[f]?(r[f].p(c,a),z(r[f],1)):(r[f]=js(c),r[f].c(),z(r[f],1),r[f].m(t,n))}for(_e(),f=o.length;f<r.length;f+=1)s(f);ve()}},i(u){if(!l){for(let a=0;a<o.length;a+=1)z(r[a]);l=!0}},o(u){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)q(r[a]);l=!1},d(u){u&&P(t),pe(r,u)}}}function xs(e,t){let n,l,o;var r=$l(t[20].column.columnDef.cell,t[20].getContext());function s(u){return{}}return r&&(l=Mt(r,s())),{key:e,first:null,c(){n=A("td"),l&&le(l.$$.fragment),h(n,"class","svelte-16fb3tv"),this.first=n},m(u,a){O(u,n,a),l&&ee(l,n,null),o=!0},p(u,a){if(t=u,a&2&&r!==(r=$l(t[20].column.columnDef.cell,t[20].getContext()))){if(l){_e();const f=l;q(f.$$.fragment,1,0,()=>{te(f,1)}),ve()}r?(l=Mt(r,s()),le(l.$$.fragment),z(l.$$.fragment,1),ee(l,n,null)):l=null}},i(u){o||(l&&z(l.$$.fragment,u),o=!0)},o(u){l&&q(l.$$.fragment,u),o=!1},d(u){u&&P(n),l&&te(l)}}}function Ws(e){let t,n=[],l=new Map,o,r,s=e[17].getVisibleCells();const u=a=>a[20].id;for(let a=0;a<s.length;a+=1){let f=Ls(e,s,a),c=u(f);l.set(c,n[a]=xs(c,f))}return{c(){t=A("tr");for(let a=0;a<n.length;a+=1)n[a].c();o=N(),h(t,"class","svelte-16fb3tv")},m(a,f){O(a,t,f);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);b(t,o),r=!0},p(a,f){f&2&&(s=a[17].getVisibleCells(),_e(),n=vt(n,f,u,1,a,s,l,t,Mo,xs,o,Ls),ve())},i(a){if(!r){for(let f=0;f<s.length;f+=1)z(n[f]);r=!0}},o(a){for(let f=0;f<n.length;f+=1)q(n[f]);r=!1},d(a){a&&P(t);for(let f=0;f<n.length;f+=1)n[f].d()}}}function F_(e){let t,n,l,o,r,s,u,a,f,c,d,g="<",p,m,_,v,w,y,C,E,S,F,$=" ",R,k,M=" ",I,D,V=e[1].getPageCount()+"",T,x,W,G=">",K,U,Y,Q,Ce,De=e[5],$e=[];for(let ie=0;ie<De.length;ie+=1)$e[ie]=Bs(Hs(e,De,ie));const Du=ie=>q($e[ie],1,1,()=>{$e[ie]=null});let It=e[1].getRowModel().rows,Ae=[];for(let ie=0;ie<It.length;ie+=1)Ae[ie]=Ws(qs(e,It,ie));const Iu=ie=>q(Ae[ie],1,1,()=>{Ae[ie]=null});return{c(){t=A("div"),n=A("input"),l=N(),o=A("div"),r=A("table"),s=A("thead");for(let ie=0;ie<$e.length;ie+=1)$e[ie].c();u=N(),a=A("tbody");for(let ie=0;ie<Ae.length;ie+=1)Ae[ie].c();f=N(),c=A("div"),d=A("button"),p=L(g),_=N(),v=A("span"),v.textContent="Page",w=N(),y=A("input"),S=N(),F=A("span"),R=L($),k=L("of"),I=L(M),D=N(),T=L(V),x=N(),W=A("button"),K=L(G),h(n,"type","search"),h(n,"class","input"),h(n,"placeholder","Search..."),h(s,"class","svelte-16fb3tv"),h(a,"class","svelte-16fb3tv"),h(d,"class","button is-white svelte-16fb3tv"),d.disabled=m=!e[1].getCanPreviousPage(),Te(d,"is-disabled",!e[1].getCanPreviousPage()),h(y,"type","number"),y.value=C=e[1].getState().pagination.pageIndex+1,h(y,"min",0),h(y,"max",E=e[1].getPageCount()-1),h(y,"class","mx-1 svelte-16fb3tv"),h(W,"class","button is-white svelte-16fb3tv"),W.disabled=U=!e[1].getCanNextPage(),Te(W,"is-disabled",!e[1].getCanNextPage()),h(c,"class","is-flex is-align-items-center svelte-16fb3tv"),h(r,"class","table svelte-16fb3tv"),h(o,"class","table-container svelte-16fb3tv")},m(ie,me){O(ie,t,me),b(t,n),b(t,l),b(t,o),b(o,r),b(r,s);for(let se=0;se<$e.length;se+=1)$e[se]&&$e[se].m(s,null);b(r,u),b(r,a);for(let se=0;se<Ae.length;se+=1)Ae[se]&&Ae[se].m(a,null);b(r,f),b(r,c),b(c,d),b(d,p),b(c,_),b(c,v),b(c,w),b(c,y),b(c,S),b(c,F),b(F,R),b(F,k),b(F,I),b(F,D),b(F,T),b(c,x),b(c,W),b(W,K),Y=!0,Q||(Ce=[B(n,"keyup",e[3]),B(n,"search",e[3]),B(d,"click",e[9]),B(y,"change",e[4]),B(W,"click",e[10])],Q=!0)},p(ie,[me]){if(me&32){De=ie[5];let se;for(se=0;se<De.length;se+=1){const un=Hs(ie,De,se);$e[se]?($e[se].p(un,me),z($e[se],1)):($e[se]=Bs(un),$e[se].c(),z($e[se],1),$e[se].m(s,null))}for(_e(),se=De.length;se<$e.length;se+=1)Du(se);ve()}if(me&2){It=ie[1].getRowModel().rows;let se;for(se=0;se<It.length;se+=1){const un=qs(ie,It,se);Ae[se]?(Ae[se].p(un,me),z(Ae[se],1)):(Ae[se]=Ws(un),Ae[se].c(),z(Ae[se],1),Ae[se].m(a,null))}for(_e(),se=It.length;se<Ae.length;se+=1)Iu(se);ve()}(!Y||me&2&&m!==(m=!ie[1].getCanPreviousPage()))&&(d.disabled=m),(!Y||me&2)&&Te(d,"is-disabled",!ie[1].getCanPreviousPage()),(!Y||me&2&&C!==(C=ie[1].getState().pagination.pageIndex+1)&&y.value!==C)&&(y.value=C),(!Y||me&2&&E!==(E=ie[1].getPageCount()-1))&&h(y,"max",E),(!Y||me&2)&&V!==(V=ie[1].getPageCount()+"")&&J(T,V),(!Y||me&2&&U!==(U=!ie[1].getCanNextPage()))&&(W.disabled=U),(!Y||me&2)&&Te(W,"is-disabled",!ie[1].getCanNextPage())},i(ie){if(!Y){for(let me=0;me<De.length;me+=1)z($e[me]);for(let me=0;me<It.length;me+=1)z(Ae[me]);Y=!0}},o(ie){$e=$e.filter(Boolean);for(let me=0;me<$e.length;me+=1)q($e[me]);Ae=Ae.filter(Boolean);for(let me=0;me<Ae.length;me+=1)q(Ae[me]);Y=!1},d(ie){ie&&P(t),pe($e,ie),pe(Ae,ie),Q=!1,he(Ce)}}}function D_(e){return e?e==="asc"?"🔼":"🔽":""}function I_(e,t,n){let l,o,r=X,s=()=>(r(),r=Al(w,S=>n(1,o=S)),w);ae(e,Sl,S=>n(8,l=S)),e.$$.on_destroy.push(()=>r());const u=(S,F,$,R)=>{if(console.log("yessir"),Array.isArray($))return $.length===0?!0:$.includes(S.getValue(F));typeof $=="number"&&($=String($));const k=S_(S.getValue(F),$);return R({itemRank:k}),k.passed},a=r_(),f=[a.accessor("file",{header:"File",cell:S=>S.getValue(),footer:S=>S.column.id}),a.accessor("size",{header:"Size",cell:S=>ro(S.getValue()),footer:S=>S.column.id}),a.accessor("type",{header:"Type",cell:S=>S.getValue(),footer:S=>S.column.id})];let c="",d=Ie({data:l,columns:f,getCoreRowModel:Es(),getSortedRowModel:Ds(),getFilteredRowModel:Ms(),globalFilterFn:u,getFacetedRowModel:Fs(),getPaginationRowModel:Is(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0});function g(S){n(6,c=S),d.update(F=>({...F,state:{...F.state,globalFilter:S}}))}function p(S){d.update(F=>{var $;return{...F,state:{...F.state,pagination:{...($=F.state)==null?void 0:$.pagination,pageIndex:S}}}})}let m;function _(S){clearTimeout(m),m=setTimeout(()=>{const F=S.target;g(F.value)},100)}function v(S){const F=S.target;p(parseInt(F.value)-1)}let w=Os(d);s();let y=o.getHeaderGroups();const C=()=>p(o.getState().pagination.pageIndex-1),E=()=>p(o.getState().pagination.pageIndex+1);return e.$$.update=()=>{e.$$.dirty&448&&(n(7,d={data:l,columns:f,getCoreRowModel:Es(),getSortedRowModel:Ds(),getFilteredRowModel:Ms(),globalFilterFn:u,getFacetedRowModel:Fs(),getPaginationRowModel:Is(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0}),s(n(0,w=Os(Ie(d)))))},[w,o,p,_,v,y,c,d,l,C,E]}class N_ extends fe{constructor(t){super(),ce(this,t,I_,F_,ue,{})}}function P_(e){let t,n;return{c(){t=j("svg"),n=j("path"),h(n,"d","M248,128a87.34,87.34,0,0,1-17.6,52.81,8,8,0,1,1-12.8-9.62A71.34,71.34,0,0,0,232,128a72,72,0,0,0-144,0,8,8,0,0,1-16,0,88,88,0,0,1,3.29-23.88C74.2,104,73.1,104,72,104a48,48,0,0,0,0,96H96a8,8,0,0,1,0,16H72A64,64,0,1,1,81.29,88.68,88,88,0,0,1,248,128Zm-90.34-5.66a8,8,0,0,0-11.32,0l-32,32a8,8,0,0,0,11.32,11.32L144,147.31V208a8,8,0,0,0,16,0V147.31l18.34,18.35a8,8,0,0,0,11.32-11.32Z"),h(t,"xmlns","http://www.w3.org/2000/svg"),h(t,"width",e[1]),h(t,"height",e[0]),h(t,"fill","currentColor"),h(t,"viewBox","0 0 256 256")},m(l,o){O(l,t,o),b(t,n)},p(l,[o]){o&2&&h(t,"width",l[1]),o&1&&h(t,"height",l[0])},i:X,o:X,d(l){l&&P(t)}}}function O_(e,t,n){let{height:l=256,width:o=256}=t;return e.$$set=r=>{"height"in r&&n(0,l=r.height),"width"in r&&n(1,o=r.width)},[l,o]}class T_ extends fe{constructor(t){super(),ce(this,t,O_,P_,ue,{height:0,width:1})}}function Us(e){let t,n,l,o=e[4].length>1?`s (${e[4].length})`:"",r,s,u,a,f,c,d,g,p,m,_,v,w,y,C,E,S,F,$,R,k,M,I;return{c(){t=A("div"),n=A("div"),l=L("File"),r=L(o),s=N(),u=A("div"),u.textContent=`${e[7]()}`,f=N(),c=A("div"),d=A("div"),g=L("Upload"),m=N(),_=A("div"),v=L("Index"),y=N(),C=A("div"),E=L("Load"),F=N(),$=A("div"),R=L("Embed"),h(u,"class","processing-files svelte-qkz5xu"),h(t,"class","processing-container svelte-qkz5xu"),h(d,"class",p=lt(`loading load-left ${e[0]}`)+" svelte-qkz5xu"),h(_,"class",w=lt(`loading ${e[1]}`)+" svelte-qkz5xu"),h(C,"class",S=lt(`loading ${e[2]}`)+" svelte-qkz5xu"),h($,"class",k=lt(`loading load-right ${e[3]}`)+" svelte-qkz5xu"),h(c,"class","upload-status svelte-qkz5xu")},m(D,V){O(D,t,V),b(t,n),b(n,l),b(n,r),b(t,s),b(t,u),O(D,f,V),O(D,c,V),b(c,d),b(d,g),b(c,m),b(c,_),b(_,v),b(c,y),b(c,C),b(C,E),b(c,F),b(c,$),b($,R),I=!0},p(D,V){(!I||V&16)&&o!==(o=D[4].length>1?`s (${D[4].length})`:"")&&J(r,o),(!I||V&1&&p!==(p=lt(`loading load-left ${D[0]}`)+" svelte-qkz5xu"))&&h(d,"class",p),(!I||V&2&&w!==(w=lt(`loading ${D[1]}`)+" svelte-qkz5xu"))&&h(_,"class",w),(!I||V&4&&S!==(S=lt(`loading ${D[2]}`)+" svelte-qkz5xu"))&&h(C,"class",S),(!I||V&8&&k!==(k=lt(`loading load-right ${D[3]}`)+" svelte-qkz5xu"))&&h($,"class",k)},i(D){I||(Se(()=>{I&&(a||(a=Ge(t,mt,{duration:250},!0)),a.run(1))}),Se(()=>{I&&(M||(M=Ge(c,mt,{duration:250},!0)),M.run(1))}),I=!0)},o(D){a||(a=Ge(t,mt,{duration:250},!1)),a.run(0),M||(M=Ge(c,mt,{duration:250},!1)),M.run(0),I=!1},d(D){D&&P(t),D&&a&&a.end(),D&&P(f),D&&P(c),D&&M&&M.end()}}}function Xs(e){let t,n;return t=new N_({}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function z_(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,w,y,C,E,S,F,$,R,k;m=new T_({props:{height:32,width:32}});let M=e[0]!==e[5].WAITING&&Us(e);S=new Am({});let I=e[4]&&Xs();return{c(){t=A("div"),n=A("div"),l=A("div"),o=A("div"),r=A("h4"),r.textContent="Upload Data",s=N(),u=A("p"),u.textContent="These are the files your model will use as context.",a=N(),f=A("div"),c=A("form"),d=A("input"),g=N(),p=A("div"),le(m.$$.fragment),_=L(`
            Drag and drop files here`),v=N(),M&&M.c(),w=N(),y=A("p"),y.textContent="Currently pdf, txt, and md are supported.",C=N(),E=A("div"),le(S.$$.fragment),F=N(),I&&I.c(),h(u,"class","svelte-qkz5xu"),h(d,"type","file"),d.multiple=!0,h(p,"class","drop-zone svelte-qkz5xu"),h(f,"class","upload-files-container svelte-qkz5xu"),h(y,"class","svelte-qkz5xu"),h(o,"class","upload-box svelte-qkz5xu"),h(l,"class","upload-container svelte-qkz5xu"),h(n,"class","file-container svelte-qkz5xu"),h(E,"class","charts-container svelte-qkz5xu"),h(t,"class","data-grid svelte-qkz5xu")},m(D,V){O(D,t,V),b(t,n),b(n,l),b(l,o),b(o,r),b(o,s),b(o,u),b(o,a),b(o,f),b(f,c),b(c,d),b(f,g),b(f,p),ee(m,p,null),b(p,_),b(o,v),M&&M.m(o,null),b(o,w),b(o,y),b(t,C),b(t,E),ee(S,E,null),b(E,F),I&&I.m(E,null),$=!0,R||(k=[B(d,"change",e[6]),B(p,"drop",e[6]),B(p,"dragover",V_)],R=!0)},p(D,[V]){D[0]!==D[5].WAITING?M?(M.p(D,V),V&1&&z(M,1)):(M=Us(D),M.c(),z(M,1),M.m(o,w)):M&&(_e(),q(M,1,1,()=>{M=null}),ve()),D[4]?I?V&16&&z(I,1):(I=Xs(),I.c(),z(I,1),I.m(E,null)):I&&(_e(),q(I,1,1,()=>{I=null}),ve())},i(D){$||(z(m.$$.fragment,D),z(M),z(S.$$.fragment,D),z(I),$=!0)},o(D){q(m.$$.fragment,D),q(M),q(S.$$.fragment,D),q(I),$=!1},d(D){D&&P(t),te(m),M&&M.d(),te(S),I&&I.d(),R=!1,he(k)}}}function V_(e){e.preventDefault()}function q_(e,t,n){let l,o;ae(e,ys,w=>n(8,l=w)),ae(e,Sl,w=>n(9,o=w));const r={WAITING:"waiting",IN_PROGRESS:"in-progress",DONE:"done"};let s=[],u=r.WAITING,a=r.WAITING,f=r.WAITING,c=r.WAITING;function d(){n(0,u=r.WAITING),n(1,a=r.WAITING),n(2,f=r.WAITING),n(3,c=r.WAITING)}async function g(w){w.preventDefault(),d(),n(0,u=r.IN_PROGRESS),n(4,s=[]),w.dataTransfer?w.dataTransfer.items?[...w.dataTransfer.items].forEach((S,F)=>{if(S.kind==="file"){const $=S.getAsFile();s.push($)}}):[...w.dataTransfer.files].forEach((S,F)=>{s.push(S)}):n(4,s=w.target.files);const y=new FormData;for(let S=0;S<s.length;S++)y.append("files",s[S]);const E=await(await fetch("/retrieval/file/upload",{method:"POST",body:y})).json();console.log("Upload complete! Response:",E),n(0,u=r.DONE),m(),p(),_()}async function p(){a===r.IN_PROGRESS&&n(2,f=r.IN_PROGRESS);const C=(await(await fetch("/retrieval/file/get")).json()).files.map(E=>({file:E.name,size:E.size,type:E.type}));Fe(Sl,o=[...C],o),f===r.IN_PROGRESS&&n(2,f=r.DONE)}async function m(){console.log("index!"),n(1,a=r.IN_PROGRESS),await(await fetch("/retrieval/vector_db/index",{method:"POST"})).json(),n(1,a=r.DONE)}async function _(){n(3,c=r.IN_PROGRESS),console.log("getting embeddings...");const y=await(await fetch("/retrieval/vector_db/get")).json();console.log("embeddingData",y),Fe(ys,l=y,l),n(3,c=r.DONE)}function v(){let w="";for(let y=0;y<s.length;y++)w+=s[y].name+", ";return w.slice(0,-2)}return dt(()=>{p()}),e.$$.update=()=>{e.$$.dirty&15&&u===r.DONE&&a===r.DONE&&f===r.DONE&&c===r.DONE&&setTimeout(d,3e3)},[u,a,f,c,s,r,g,v]}class L_ extends fe{constructor(t){super(),ce(this,t,q_,z_,ue,{})}}function H_(e){let t,n,l,o,r,s,u,a,f,c,d,g,p,m,_,v,w,y,C,E,S,F,$,R,k,M,I;return r=new Ka({}),a=new Ja({}),d=new Wa({}),m=new Xa({props:{feedback:"Bad"}}),w=new Qa({}),E=new Ya({}),M=new Ua({}),{c(){t=A("div"),n=A("div"),l=A("div"),o=A("div"),le(r.$$.fragment),s=N(),u=A("div"),le(a.$$.fragment),f=N(),c=A("div"),le(d.$$.fragment),g=N(),p=A("div"),le(m.$$.fragment),_=N(),v=A("div"),le(w.$$.fragment),y=N(),C=A("div"),le(E.$$.fragment),S=N(),F=A("div"),$=A("div"),$.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,R=N(),k=A("div"),le(M.$$.fragment),h(o,"class","card-1 svelte-14znspc"),h(u,"class","card-2"),h(l,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(p,"class","left-question svelte-14znspc"),h(v,"class","left-filter svelte-14znspc"),h(C,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h($,"class","right-chart svelte-14znspc"),h(k,"class","right-table svelte-14znspc"),h(F,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(D,V){O(D,t,V),b(t,n),b(n,l),b(l,o),ee(r,o,null),b(l,s),b(l,u),ee(a,u,null),b(n,f),b(n,c),ee(d,c,null),b(n,g),b(n,p),ee(m,p,null),b(n,_),b(n,v),ee(w,v,null),b(n,y),b(n,C),ee(E,C,null),b(t,S),b(t,F),b(F,$),b(F,R),b(F,k),ee(M,k,null),I=!0},p:X,i(D){I||(z(r.$$.fragment,D),z(a.$$.fragment,D),z(d.$$.fragment,D),z(m.$$.fragment,D),z(w.$$.fragment,D),z(E.$$.fragment,D),z(M.$$.fragment,D),I=!0)},o(D){q(r.$$.fragment,D),q(a.$$.fragment,D),q(d.$$.fragment,D),q(m.$$.fragment,D),q(w.$$.fragment,D),q(E.$$.fragment,D),q(M.$$.fragment,D),I=!1},d(D){D&&P(t),te(r),te(a),te(d),te(m),te(w),te(E),te(M)}}}function G_(e,t,n){let l;ae(e,Mn,r=>n(0,l=r)),dt(()=>{console.log("FEEDBACK on mount"),o()});async function o(){const a=(await(await fetch("/chat/rag_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[4]}));Fe(Mn,l=[...a],l)}return[]}class j_ extends fe{constructor(t){super(),ce(this,t,G_,H_,ue,{})}}function B_(e){let t,n;return t=new Za({}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function x_(e){let t,n;return t=new j_({}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function W_(e){let t,n;return t=new Za({}),{c(){le(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function U_(e){let t,n,l,o;const r=[W_,x_,B_],s=[];function u(a,f){return a[0]==="vote"?0:a[0]==="rag"?1:2}return t=u(e),n=s[t]=r[t](e),{c(){n.c(),l=ke()},m(a,f){s[t].m(a,f),O(a,l,f),o=!0},p(a,[f]){let c=t;t=u(a),t!==c&&(_e(),q(s[c],1,1,()=>{s[c]=null}),ve(),n=s[t],n||(n=s[t]=r[t](a),n.c()),z(n,1),n.m(l.parentNode,l))},i(a){o||(z(n),o=!0)},o(a){q(n),o=!1},d(a){s[t].d(a),a&&P(l)}}}function X_(e,t,n){let{feedback:l}=t;return e.$$set=o=>{"feedback"in o&&n(0,l=o.feedback)},[l]}class Y_ extends fe{constructor(t){super(),ce(this,t,X_,U_,ue,{feedback:0})}}function Ys(e,t,n){const l=e.slice();return l[7]=t[n],l}function Qs(e){let t,n=e[0],l=[];for(let o=0;o<n.length;o+=1)l[o]=Ks(Ys(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=ke()},m(o,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(o,r);O(o,t,r)},p(o,r){if(r&33){n=o[0];let s;for(s=0;s<n.length;s+=1){const u=Ys(o,n,s);l[s]?l[s].p(u,r):(l[s]=Ks(u),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(o){pe(l,o),o&&P(t)}}}function Ks(e){let t,n=e[7].svelte_component+"",l,o,r,s;function u(){return e[6](e[7])}return{c(){t=A("button"),l=L(n),h(t,"aria-label",o=`Load ${e[7].svelte_component} component`)},m(a,f){O(a,t,f),b(t,l),r||(s=B(t,"click",u),r=!0)},p(a,f){e=a,f&1&&n!==(n=e[7].svelte_component+"")&&J(l,n),f&1&&o!==(o=`Load ${e[7].svelte_component} component`)&&h(t,"aria-label",o)},d(a){a&&P(t),r=!1,s()}}}function Js(e){let t,n,l;const o=[e[1].props];var r=e[4][e[1].svelte_component];function s(u){let a={};for(let f=0;f<o.length;f+=1)a=An(a,o[f]);return{props:a}}return r&&(t=Mt(r,s())),{c(){t&&le(t.$$.fragment),n=ke()},m(u,a){t&&ee(t,u,a),O(u,n,a),l=!0},p(u,a){const f=a&2?ua(o,[fa(u[1].props)]):{};if(a&2&&r!==(r=u[4][u[1].svelte_component])){if(t){_e();const c=t;q(c.$$.fragment,1,0,()=>{te(c,1)}),ve()}r?(t=Mt(r,s()),le(t.$$.fragment),z(t.$$.fragment,1),ee(t,n.parentNode,n)):t=null}else r&&t.$set(f)},i(u){l||(t&&z(t.$$.fragment,u),l=!0)},o(u){t&&q(t.$$.fragment,u),l=!1},d(u){u&&P(n),t&&te(t,u)}}}function Q_(e){let t,n,l,o=e[0].length>1&&Qs(e),r=e[1]&&Js(e);return{c(){o&&o.c(),t=N(),r&&r.c(),n=ke()},m(s,u){o&&o.m(s,u),O(s,t,u),r&&r.m(s,u),O(s,n,u),l=!0},p(s,[u]){s[0].length>1?o?o.p(s,u):(o=Qs(s),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),s[1]?r?(r.p(s,u),u&2&&z(r,1)):(r=Js(s),r.c(),z(r,1),r.m(n.parentNode,n)):r&&(_e(),q(r,1,1,()=>{r=null}),ve())},i(s){l||(z(r),l=!0)},o(s){q(r),l=!1},d(s){o&&o.d(s),s&&P(t),r&&r.d(s),s&&P(n)}}}function K_(e,t,n){let l,o;const r=Ie([]);ae(e,r,c=>n(0,l=c));const s=Ie(null);ae(e,s,c=>n(1,o=c));const u={Chatbot:Kd,Dropdown:eh,Feedback:Y_,Compare:$p,CompareDashboard:jp,RetrievalQA:L_},a=c=>{s.set(c)};return fetch("/components").then(c=>{if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return c.json()}).then(c=>{r.set(c),s.set(c[0])}).catch(c=>{console.log("Fetch request failed",c)}),[l,o,r,s,u,a,c=>a(c)]}class J_ extends fe{constructor(t){super(),ce(this,t,K_,Q_,ue,{})}}new J_({target:document.getElementById("app")});
