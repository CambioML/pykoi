(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function U(){}const ea=e=>e;function Cn(e,t){for(const n in t)e[n]=t[n];return e}function ta(e){return e()}function Zl(){return Object.create(null)}function ve(e){e.forEach(ta)}function Ve(e){return typeof e=="function"}function fe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Nu(e){return Object.keys(e).length===0}function Rl(e,...t){if(e==null)return U;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Pu(e){let t;return Rl(e,n=>t=n)(),t}function ue(e,t,n){e.$$.on_destroy.push(Rl(t,n))}function Wo(e,t,n,l){if(e){const o=na(e,t,n,l);return e[0](o)}}function na(e,t,n,l){return e[1]&&l?Cn(n.ctx.slice(),e[1](l(t))):n.ctx}function Xo(e,t,n,l){if(e[2]&&l){const o=e[2](l(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const r=[],s=Math.max(t.dirty.length,o.length);for(let u=0;u<s;u+=1)r[u]=t.dirty[u]|o[u];return r}return t.dirty|o}return t.dirty}function Yo(e,t,n,l,o,r){if(o){const s=na(t,n,l,r);e.p(s,o)}}function Qo(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let l=0;l<n;l++)t[l]=-1;return t}return-1}function Ko(e){return e??""}function De(e,t,n){return e.set(n),t}function Jt(e){return e&&Ve(e.destroy)?e.destroy:U}const la=typeof window<"u";let oa=la?()=>window.performance.now():()=>Date.now(),Mo=la?e=>requestAnimationFrame(e):U;const Wt=new Set;function ia(e){Wt.forEach(t=>{t.c(e)||(Wt.delete(t),t.f())}),Wt.size!==0&&Mo(ia)}function ra(e){let t;return Wt.size===0&&Mo(ia),{promise:new Promise(n=>{Wt.add(t={c:e,f:n})}),abort(){Wt.delete(t)}}}let Al=!1;function Tu(){Al=!0}function Ou(){Al=!1}function zu(e,t,n,l){for(;e<t;){const o=e+(t-e>>1);n(o)<=l?e=o+1:t=o}return e}function Vu(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const a=[];for(let f=0;f<t.length;f++){const c=t[f];c.claim_order!==void 0&&a.push(c)}t=a}const n=new Int32Array(t.length+1),l=new Int32Array(t.length);n[0]=-1;let o=0;for(let a=0;a<t.length;a++){const f=t[a].claim_order,c=(o>0&&t[n[o]].claim_order<=f?o+1:zu(1,o,p=>t[n[p]].claim_order,f))-1;l[a]=n[c]+1;const d=c+1;n[d]=a,o=Math.max(d,o)}const r=[],s=[];let u=t.length-1;for(let a=n[o]+1;a!=0;a=l[a-1]){for(r.push(t[a-1]);u>=a;u--)s.push(t[u]);u--}for(;u>=0;u--)s.push(t[u]);r.reverse(),s.sort((a,f)=>a.claim_order-f.claim_order);for(let a=0,f=0;a<s.length;a++){for(;f<r.length&&s[a].claim_order>=r[f].claim_order;)f++;const c=f<r.length?r[f]:null;e.insertBefore(s[a],c)}}function b(e,t){e.appendChild(t)}function sa(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Lu(e){const t=R("style");return qu(sa(e),t),t.sheet}function qu(e,t){return b(e.head||e,t),t.sheet}function Hu(e,t){if(Al){for(Vu(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function Gu(e,t,n){Al&&!n?Hu(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function I(e){e.parentNode&&e.parentNode.removeChild(e)}function _e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function R(e){return document.createElement(e)}function G(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function q(e){return document.createTextNode(e)}function P(){return q(" ")}function Ce(){return q("")}function x(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function Bu(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function ju(e){return function(t){t.target===this&&e.call(this,t)}}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function xu(e){return Array.from(e.childNodes)}function Uu(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function Wu(e,t,n,l,o=!1){Uu(e);const r=(()=>{for(let s=e.claim_info.last_index;s<e.length;s++){const u=e[s];if(t(u)){const a=n(u);return a===void 0?e.splice(s,1):e[s]=a,o||(e.claim_info.last_index=s),u}}for(let s=e.claim_info.last_index-1;s>=0;s--){const u=e[s];if(t(u)){const a=n(u);return a===void 0?e.splice(s,1):e[s]=a,o?a===void 0&&e.claim_info.last_index--:e.claim_info.last_index=s,u}}return l()})();return r.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,r}function Xu(e,t){return Wu(e,n=>n.nodeType===3,n=>{const l=""+t;if(n.data.startsWith(l)){if(n.data.length!==l.length)return n.splitText(l.length)}else n.data=l},()=>q(t),!0)}function K(e,t){t=""+t,e.data!==t&&(e.data=t)}function Qe(e,t){e.value=t??""}function Ae(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function ol(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function aa(e){const t=e.querySelector(":checked");return t&&t.__value}let Ln;function Yu(){if(Ln===void 0){Ln=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ln=!0}}return Ln}function ft(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const l=R("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const o=Yu();let r;return o?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=x(window,"message",s=>{s.source===l.contentWindow&&t()})):(l.src="about:blank",l.onload=()=>{r=x(l.contentWindow,"resize",t),t()}),b(e,l),()=>{(o||r&&l.contentWindow)&&r(),I(l)}}function Oe(e,t,n){e.classList[n?"add":"remove"](t)}function Qu(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,l,t),o}function Rt(e,t){return new e(t)}const il=new Map;let rl=0;function Ku(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ju(e,t){const n={stylesheet:Lu(t),rules:{}};return il.set(e,n),n}function Jo(e,t,n,l,o,r,s,u=0){const a=16.666/l;let f=`{
`;for(let v=0;v<=1;v+=a){const y=t+(n-t)*r(v);f+=v*100+`%{${s(y,1-y)}}
`}const c=f+`100% {${s(n,1-n)}}
}`,d=`__svelte_${Ku(c)}_${u}`,p=sa(e),{stylesheet:g,rules:m}=il.get(p)||Ju(p,e);m[d]||(m[d]=!0,g.insertRule(`@keyframes ${d} ${c}`,g.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${d} ${l}ms linear ${o}ms 1 both`,rl+=1,d}function Zu(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),o=n.length-l.length;o&&(e.style.animation=l.join(", "),rl-=o,rl||ef())}function ef(){Mo(()=>{rl||(il.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&I(t)}),il.clear())})}let Zt;function Ot(e){Zt=e}function tf(){if(!Zt)throw new Error("Function called outside component initialization");return Zt}function ct(e){tf().$$.on_mount.push(e)}function nf(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const jt=[],tt=[];let Xt=[];const eo=[],lf=Promise.resolve();let to=!1;function of(){to||(to=!0,lf.then(ua))}function Me(e){Xt.push(e)}function $n(e){eo.push(e)}const Fl=new Set;let qt=0;function ua(){if(qt!==0)return;const e=Zt;do{try{for(;qt<jt.length;){const t=jt[qt];qt++,Ot(t),rf(t.$$)}}catch(t){throw jt.length=0,qt=0,t}for(Ot(null),jt.length=0,qt=0;tt.length;)tt.pop()();for(let t=0;t<Xt.length;t+=1){const n=Xt[t];Fl.has(n)||(Fl.add(n),n())}Xt.length=0}while(jt.length);for(;eo.length;)eo.pop()();to=!1,Fl.clear(),Ot(e)}function rf(e){if(e.fragment!==null){e.update(),ve(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Me)}}function sf(e){const t=[],n=[];Xt.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),Xt=t}let an;function af(){return an||(an=Promise.resolve(),an.then(()=>{an=null})),an}function Dl(e,t,n){e.dispatchEvent(Qu(`${t?"intro":"outro"}${n}`))}const Kn=new Set;let ht;function we(){ht={r:0,c:[],p:ht}}function ye(){ht.r||ve(ht.c),ht=ht.p}function z(e,t){e&&e.i&&(Kn.delete(e),e.i(t))}function V(e,t,n,l){if(e&&e.o){if(Kn.has(e))return;Kn.add(e),ht.c.push(()=>{Kn.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const uf={duration:0};function ot(e,t,n,l){const o={direction:"both"};let r=t(e,n,o),s=l?0:1,u=null,a=null,f=null;function c(){f&&Zu(e,f)}function d(g,m){const _=g.b-s;return m*=Math.abs(_),{a:s,b:g.b,d:_,duration:m,start:g.start,end:g.start+m,group:g.group}}function p(g){const{delay:m=0,duration:_=300,easing:v=ea,tick:y=U,css:w}=r||uf,S={start:oa()+m,b:g};g||(S.group=ht,ht.r+=1),u||a?a=S:(w&&(c(),f=Jo(e,s,g,_,m,v,w)),g&&y(0,1),u=d(S,_),Me(()=>Dl(e,g,"start")),ra(M=>{if(a&&M>a.start&&(u=d(a,_),a=null,Dl(e,u.b,"start"),w&&(c(),f=Jo(e,s,u.b,u.duration,0,v,r.css))),u){if(M>=u.end)y(s=u.b,1-s),Dl(e,u.b,"end"),a||(u.b?c():--u.group.r||ve(u.group.c)),u=null;else if(M>=u.start){const C=M-u.start;s=u.a+u.d*v(C/u.duration),y(s,1-s)}}return!!(u||a)}))}return{run(g){Ve(r)?af().then(()=>{r=r(o),p(g)}):p(g)},end(){c(),u=a=null}}}function en(e,t){e.d(1),t.delete(e.key)}function Eo(e,t){V(e,1,1,()=>{t.delete(e.key)})}function pt(e,t,n,l,o,r,s,u,a,f,c,d){let p=e.length,g=r.length,m=p;const _={};for(;m--;)_[e[m].key]=m;const v=[],y=new Map,w=new Map,S=[];for(m=g;m--;){const $=d(o,r,m),A=n($);let k=s.get(A);k?l&&S.push(()=>k.p($,t)):(k=f(A,$),k.c()),y.set(A,v[m]=k),A in _&&w.set(A,Math.abs(m-_[A]))}const M=new Set,C=new Set;function E($){z($,1),$.m(u,c),s.set($.key,$),c=$.first,g--}for(;p&&g;){const $=v[g-1],A=e[p-1],k=$.key,F=A.key;$===A?(c=$.first,p--,g--):y.has(F)?!s.has(k)||M.has(k)?E($):C.has(F)?p--:w.get(k)>w.get(F)?(C.add(k),E($)):(M.add(F),p--):(a(A,s),p--)}for(;p--;){const $=e[p];y.has($.key)||a($,s)}for(;g;)E(v[g-1]);return ve(S),v}function fa(e,t){const n={},l={},o={$$scope:1};let r=e.length;for(;r--;){const s=e[r],u=t[r];if(u){for(const a in s)a in u||(l[a]=1);for(const a in u)o[a]||(n[a]=u[a],o[a]=1);e[r]=u}else for(const a in s)o[a]=1}for(const s in l)s in n||(n[s]=void 0);return n}function ca(e){return typeof e=="object"&&e!==null?e:{}}const ff=/[&"]/g,cf=/[&<]/g;function df(e,t=!1){const n=String(e),l=t?ff:cf;l.lastIndex=0;let o="",r=0;for(;l.test(n);){const s=l.lastIndex-1,u=n[s];o+=n.substring(r,s)+(u==="&"?"&amp;":u==='"'?"&quot;":"&lt;"),r=s+1}return o+n.substring(r)}function hf(e,t){if(!e||!e.$$render)throw t==="svelte:component"&&(t+=" this={...}"),new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${t}>.`);return e}let Il;function da(e){function t(n,l,o,r,s){const u=Zt,a={on_destroy:Il,context:new Map(s||(u?u.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:Zl()};Ot({$$:a});const f=e(n,l,o,r);return Ot(u),f}return{render:(n={},{$$slots:l={},context:o=new Map}={})=>{Il=[];const r={title:"",head:"",css:new Set},s=t(r,n,{},l,o);return ve(Il),{html:s,css:{code:Array.from(r.css).map(u=>u.code).join(`
`),map:null},head:r.title+r.head}},$$render:t}}function Rn(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function ne(e){e&&e.c()}function gf(e,t){e&&e.l(t)}function ee(e,t,n,l){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),l||Me(()=>{const s=e.$$.on_mount.map(ta).filter(Ve);e.$$.on_destroy?e.$$.on_destroy.push(...s):ve(s),e.$$.on_mount=[]}),r.forEach(Me)}function te(e,t){const n=e.$$;n.fragment!==null&&(sf(n.after_update),ve(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function pf(e,t){e.$$.dirty[0]===-1&&(jt.push(e),of(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function de(e,t,n,l,o,r,s,u=[-1]){const a=Zt;Ot(e);const f=e.$$={fragment:null,ctx:[],props:r,update:U,not_equal:o,bound:Zl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Zl(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};s&&s(f.root);let c=!1;if(f.ctx=n?n(e,t.props||{},(d,p,...g)=>{const m=g.length?g[0]:p;return f.ctx&&o(f.ctx[d],f.ctx[d]=m)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](m),c&&pf(e,d)),p}):[],f.update(),c=!0,ve(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){Tu();const d=xu(t.target);f.fragment&&f.fragment.l(d),d.forEach(I)}else f.fragment&&f.fragment.c();t.intro&&z(e.$$.fragment),ee(e,t.target,t.anchor,t.customElement),Ou(),ua()}Ot(a)}class ce{$destroy(){te(this,1),this.$destroy=U}$on(t,n){if(!Ve(n))return U;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!Nu(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ht=[];function no(e,t){return{subscribe:Ie(e,t).subscribe}}function Ie(e,t=U){let n;const l=new Set;function o(u){if(fe(e,u)&&(e=u,n)){const a=!Ht.length;for(const f of l)f[1](),Ht.push(f,e);if(a){for(let f=0;f<Ht.length;f+=2)Ht[f][0](Ht[f+1]);Ht.length=0}}}function r(u){o(u(e))}function s(u,a=U){const f=[u,a];return l.add(f),l.size===1&&(n=t(o)||U),u(e),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:s}}function mf(e,t,n){const l=!Array.isArray(e),o=l?[e]:e,r=t.length<2;return no(n,s=>{let u=!1;const a=[];let f=0,c=U;const d=()=>{if(f)return;c();const g=t(l?a[0]:a,s);r?s(g):c=Ve(g)?g:U},p=o.map((g,m)=>Rl(g,_=>{a[m]=_,f&=~(1<<m),u&&d()},()=>{f|=1<<m}));return u=!0,d(),function(){ve(p),c(),u=!1}})}function Fo(e){const t=e-1;return t*t*t+1}function Zo(e){return Object.prototype.toString.call(e)==="[object Date]"}function lo(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const l=t.map((o,r)=>lo(e[r],o));return o=>l.map(r=>r(o))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Zo(e)&&Zo(t)){e=e.getTime(),t=t.getTime();const r=t-e;return s=>new Date(e+s*r)}const l=Object.keys(t),o={};return l.forEach(r=>{o[r]=lo(e[r],t[r])}),r=>{const s={};return l.forEach(u=>{s[u]=o[u](r)}),s}}if(n==="number"){const l=t-e;return o=>e+o*l}throw new Error(`Cannot interpolate ${n} values`)}function Do(e,t={}){const n=Ie(e);let l,o=e;function r(s,u){if(e==null)return n.set(e=s),Promise.resolve();o=s;let a=l,f=!1,{delay:c=0,duration:d=400,easing:p=ea,interpolate:g=lo}=Cn(Cn({},t),u);if(d===0)return a&&(a.abort(),a=null),n.set(e=o),Promise.resolve();const m=oa()+c;let _;return l=ra(v=>{if(v<m)return!0;f||(_=g(e,s),typeof d=="function"&&(d=d(e,s)),f=!0),a&&(a.abort(),a=null);const y=v-m;return y>d?(n.set(e=s),!1):(n.set(e=_(p(y/d))),!0)}),l.promise}return{set:r,update:(s,u)=>r(s(o,e),u),subscribe:n.subscribe}}const Ge=Ie([]),Nl=Ie([]),un=Ie([]),An=Ie([]),at=Ie("all"),ei=Ie({"n/a":1,up:1,down:1}),_f=["who","what","how","why","where","does","can","n/a"],oo=Do(_f.map(e=>({question:e,count:0}))),It=Ie(new Set);var io="http://www.w3.org/1999/xhtml";const ti={svg:"http://www.w3.org/2000/svg",xhtml:io,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ha(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ti.hasOwnProperty(t)?{space:ti[t],local:e}:e}function vf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===io&&t.documentElement.namespaceURI===io?t.createElement(e):t.createElementNS(n,e)}}function bf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ga(e){var t=ha(e);return(t.local?bf:vf)(t)}function wf(){}function pa(e){return e==null?wf:function(){return this.querySelector(e)}}function yf(e){typeof e!="function"&&(e=pa(e));for(var t=this._groups,n=t.length,l=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,u=l[o]=new Array(s),a,f,c=0;c<s;++c)(a=r[c])&&(f=e.call(a,a.__data__,c,r))&&("__data__"in a&&(f.__data__=a.__data__),u[c]=f);return new je(l,this._parents)}function ma(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function kf(){return[]}function Sf(e){return e==null?kf:function(){return this.querySelectorAll(e)}}function Cf(e){return function(){return ma(e.apply(this,arguments))}}function $f(e){typeof e=="function"?e=Cf(e):e=Sf(e);for(var t=this._groups,n=t.length,l=[],o=[],r=0;r<n;++r)for(var s=t[r],u=s.length,a,f=0;f<u;++f)(a=s[f])&&(l.push(e.call(a,a.__data__,f,s)),o.push(a));return new je(l,o)}function Rf(e){return function(){return this.matches(e)}}function _a(e){return function(t){return t.matches(e)}}var Af=Array.prototype.find;function Mf(e){return function(){return Af.call(this.children,e)}}function Ef(){return this.firstElementChild}function Ff(e){return this.select(e==null?Ef:Mf(typeof e=="function"?e:_a(e)))}var Df=Array.prototype.filter;function If(){return Array.from(this.children)}function Nf(e){return function(){return Df.call(this.children,e)}}function Pf(e){return this.selectAll(e==null?If:Nf(typeof e=="function"?e:_a(e)))}function Tf(e){typeof e!="function"&&(e=Rf(e));for(var t=this._groups,n=t.length,l=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,u=l[o]=[],a,f=0;f<s;++f)(a=r[f])&&e.call(a,a.__data__,f,r)&&u.push(a);return new je(l,this._parents)}function va(e){return new Array(e.length)}function Of(){return new je(this._enter||this._groups.map(va),this._parents)}function sl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sl.prototype={constructor:sl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function zf(e){return function(){return e}}function Vf(e,t,n,l,o,r){for(var s=0,u,a=t.length,f=r.length;s<f;++s)(u=t[s])?(u.__data__=r[s],l[s]=u):n[s]=new sl(e,r[s]);for(;s<a;++s)(u=t[s])&&(o[s]=u)}function Lf(e,t,n,l,o,r,s){var u,a,f=new Map,c=t.length,d=r.length,p=new Array(c),g;for(u=0;u<c;++u)(a=t[u])&&(p[u]=g=s.call(a,a.__data__,u,t)+"",f.has(g)?o[u]=a:f.set(g,a));for(u=0;u<d;++u)g=s.call(e,r[u],u,r)+"",(a=f.get(g))?(l[u]=a,a.__data__=r[u],f.delete(g)):n[u]=new sl(e,r[u]);for(u=0;u<c;++u)(a=t[u])&&f.get(p[u])===a&&(o[u]=a)}function qf(e){return e.__data__}function Hf(e,t){if(!arguments.length)return Array.from(this,qf);var n=t?Lf:Vf,l=this._parents,o=this._groups;typeof e!="function"&&(e=zf(e));for(var r=o.length,s=new Array(r),u=new Array(r),a=new Array(r),f=0;f<r;++f){var c=l[f],d=o[f],p=d.length,g=Gf(e.call(c,c&&c.__data__,f,l)),m=g.length,_=u[f]=new Array(m),v=s[f]=new Array(m),y=a[f]=new Array(p);n(c,d,_,v,y,g,t);for(var w=0,S=0,M,C;w<m;++w)if(M=_[w]){for(w>=S&&(S=w+1);!(C=v[S])&&++S<m;);M._next=C||null}}return s=new je(s,l),s._enter=u,s._exit=a,s}function Gf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Bf(){return new je(this._exit||this._groups.map(va),this._parents)}function jf(e,t,n){var l=this.enter(),o=this,r=this.exit();return typeof e=="function"?(l=e(l),l&&(l=l.selection())):l=l.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?r.remove():n(r),l&&o?l.merge(o).order():o}function xf(e){for(var t=e.selection?e.selection():e,n=this._groups,l=t._groups,o=n.length,r=l.length,s=Math.min(o,r),u=new Array(o),a=0;a<s;++a)for(var f=n[a],c=l[a],d=f.length,p=u[a]=new Array(d),g,m=0;m<d;++m)(g=f[m]||c[m])&&(p[m]=g);for(;a<o;++a)u[a]=n[a];return new je(u,this._parents)}function Uf(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var l=e[t],o=l.length-1,r=l[o],s;--o>=0;)(s=l[o])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function Wf(e){e||(e=Xf);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,l=n.length,o=new Array(l),r=0;r<l;++r){for(var s=n[r],u=s.length,a=o[r]=new Array(u),f,c=0;c<u;++c)(f=s[c])&&(a[c]=f);a.sort(t)}return new je(o,this._parents).order()}function Xf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Yf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qf(){return Array.from(this)}function Kf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],o=0,r=l.length;o<r;++o){var s=l[o];if(s)return s}return null}function Jf(){let e=0;for(const t of this)++e;return e}function Zf(){return!this.node()}function ec(e){for(var t=this._groups,n=0,l=t.length;n<l;++n)for(var o=t[n],r=0,s=o.length,u;r<s;++r)(u=o[r])&&e.call(u,u.__data__,r,o);return this}function tc(e){return function(){this.removeAttribute(e)}}function nc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lc(e,t){return function(){this.setAttribute(e,t)}}function oc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ic(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sc(e,t){var n=ha(e);if(arguments.length<2){var l=this.node();return n.local?l.getAttributeNS(n.space,n.local):l.getAttribute(n)}return this.each((t==null?n.local?nc:tc:typeof t=="function"?n.local?rc:ic:n.local?oc:lc)(n,t))}function ba(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ac(e){return function(){this.style.removeProperty(e)}}function uc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fc(e,t,n){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,n)}}function cc(e,t,n){return arguments.length>1?this.each((t==null?ac:typeof t=="function"?fc:uc)(e,t,n??"")):dc(this.node(),e)}function dc(e,t){return e.style.getPropertyValue(t)||ba(e).getComputedStyle(e,null).getPropertyValue(t)}function hc(e){return function(){delete this[e]}}function gc(e,t){return function(){this[e]=t}}function pc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mc(e,t){return arguments.length>1?this.each((t==null?hc:typeof t=="function"?pc:gc)(e,t)):this.node()[e]}function wa(e){return e.trim().split(/^|\s+/)}function Io(e){return e.classList||new ya(e)}function ya(e){this._node=e,this._names=wa(e.getAttribute("class")||"")}ya.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ka(e,t){for(var n=Io(e),l=-1,o=t.length;++l<o;)n.add(t[l])}function Sa(e,t){for(var n=Io(e),l=-1,o=t.length;++l<o;)n.remove(t[l])}function _c(e){return function(){ka(this,e)}}function vc(e){return function(){Sa(this,e)}}function bc(e,t){return function(){(t.apply(this,arguments)?ka:Sa)(this,e)}}function wc(e,t){var n=wa(e+"");if(arguments.length<2){for(var l=Io(this.node()),o=-1,r=n.length;++o<r;)if(!l.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?bc:t?_c:vc)(n,t))}function yc(){this.textContent=""}function kc(e){return function(){this.textContent=e}}function Sc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cc(e){return arguments.length?this.each(e==null?yc:(typeof e=="function"?Sc:kc)(e)):this.node().textContent}function $c(){this.innerHTML=""}function Rc(e){return function(){this.innerHTML=e}}function Ac(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Mc(e){return arguments.length?this.each(e==null?$c:(typeof e=="function"?Ac:Rc)(e)):this.node().innerHTML}function Ec(){this.nextSibling&&this.parentNode.appendChild(this)}function Fc(){return this.each(Ec)}function Dc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ic(){return this.each(Dc)}function Nc(e){var t=typeof e=="function"?e:ga(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Pc(){return null}function Tc(e,t){var n=typeof e=="function"?e:ga(e),l=t==null?Pc:typeof t=="function"?t:pa(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),l.apply(this,arguments)||null)})}function Oc(){var e=this.parentNode;e&&e.removeChild(this)}function zc(){return this.each(Oc)}function Vc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qc(e){return this.select(e?Lc:Vc)}function Hc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Gc(e){return function(t){e.call(this,t,this.__data__)}}function Bc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",l=t.indexOf(".");return l>=0&&(n=t.slice(l+1),t=t.slice(0,l)),{type:t,name:n}})}function jc(e){return function(){var t=this.__on;if(t){for(var n=0,l=-1,o=t.length,r;n<o;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++l]=r;++l?t.length=l:delete this.__on}}}function xc(e,t,n){return function(){var l=this.__on,o,r=Gc(t);if(l){for(var s=0,u=l.length;s<u;++s)if((o=l[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),o.value=t;return}}this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},l?l.push(o):this.__on=[o]}}function Uc(e,t,n){var l=Bc(e+""),o,r=l.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var a=0,f=u.length,c;a<f;++a)for(o=0,c=u[a];o<r;++o)if((s=l[o]).type===c.type&&s.name===c.name)return c.value}return}for(u=t?xc:jc,o=0;o<r;++o)this.each(u(l[o],t,n));return this}function Ca(e,t,n){var l=ba(e),o=l.CustomEvent;typeof o=="function"?o=new o(t,n):(o=l.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Wc(e,t){return function(){return Ca(this,e,t)}}function Xc(e,t){return function(){return Ca(this,e,t.apply(this,arguments))}}function Yc(e,t){return this.each((typeof t=="function"?Xc:Wc)(e,t))}function*Qc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],o=0,r=l.length,s;o<r;++o)(s=l[o])&&(yield s)}var $a=[null];function je(e,t){this._groups=e,this._parents=t}function Kc(){return this}je.prototype={constructor:je,select:yf,selectAll:$f,selectChild:Ff,selectChildren:Pf,filter:Tf,data:Hf,enter:Of,exit:Bf,join:jf,merge:xf,selection:Kc,order:Uf,sort:Wf,call:Yf,nodes:Qf,node:Kf,size:Jf,empty:Zf,each:ec,attr:sc,style:cc,property:mc,classed:wc,text:Cc,html:Mc,raise:Fc,lower:Ic,append:Nc,insert:Tc,remove:zc,clone:qc,datum:Hc,on:Uc,dispatch:Yc,[Symbol.iterator]:Qc};function Mn(e){return typeof e=="string"?new je([[document.querySelector(e)]],[document.documentElement]):new je([[e]],$a)}function Pl(e){return typeof e=="string"?new je([document.querySelectorAll(e)],[document.documentElement]):new je([ma(e)],$a)}const Jc=e=>({}),ni=e=>({});function Zc(e){let t,n,l,o,r,s,u,a,f;const c=e[4].header,d=Wo(c,e,e[3],ni),p=e[4].default,g=Wo(p,e,e[3],null);return{c(){t=R("dialog"),n=R("div"),l=R("div"),o=R("button"),o.textContent="X",r=P(),d&&d.c(),s=P(),g&&g.c(),h(o,"class","close-button svelte-g384pz"),h(l,"class","btn-container svelte-g384pz"),h(n,"class","svelte-g384pz"),h(t,"class","svelte-g384pz")},m(m,_){T(m,t,_),b(t,n),b(n,l),b(l,o),b(n,r),d&&d.m(n,null),b(n,s),g&&g.m(n,null),e[6](t),u=!0,a||(f=[x(o,"click",function(){Ve(e[1])&&e[1].apply(this,arguments)}),x(n,"click",Bu(e[5])),x(t,"close",function(){Ve(e[1])&&e[1].apply(this,arguments)}),x(t,"click",ju(function(){Ve(e[1])&&e[1].apply(this,arguments)}))],a=!0)},p(m,[_]){e=m,d&&d.p&&(!u||_&8)&&Yo(d,c,e,e[3],u?Xo(c,e[3],_,Jc):Qo(e[3]),ni),g&&g.p&&(!u||_&8)&&Yo(g,p,e,e[3],u?Xo(p,e[3],_,null):Qo(e[3]),null)},i(m){u||(z(d,m),z(g,m),u=!0)},o(m){V(d,m),V(g,m),u=!1},d(m){m&&I(t),d&&d.d(m),g&&g.d(m),e[6](null),a=!1,ve(f)}}}function ed(e,t,n){let{$$slots:l={},$$scope:o}=t,{showModal:r}=t,{dialog:s}=t,{handleClose:u}=t;function a(c){nf.call(this,e,c)}function f(c){tt[c?"unshift":"push"](()=>{s=c,n(0,s)})}return e.$$set=c=>{"showModal"in c&&n(2,r=c.showModal),"dialog"in c&&n(0,s=c.dialog),"handleClose"in c&&n(1,u=c.handleClose),"$$scope"in c&&n(3,o=c.$$scope)},e.$$.update=()=>{e.$$.dirty&5&&s&&r&&s.showModal()},[s,u,r,o,l,a,f]}class td extends ce{constructor(t){super(),de(this,t,ed,Zc,fe,{showModal:2,dialog:0,handleClose:1})}}function li(e){let t,n,l,o,r,s,u,a,f;return{c(){t=R("form"),n=R("div"),l=R("label"),l.textContent="Filename",o=P(),r=R("input"),s=P(),u=R("div"),u.innerHTML='<button type="submit">Download</button>',h(l,"for","file_name"),h(l,"class","svelte-sy2m0x"),h(r,"type","text"),h(r,"placeholder","Please enter filename"),h(r,"name","file_name"),r.required=!0,h(n,"class","inputs svelte-sy2m0x"),h(u,"class","btn-container svelte-sy2m0x")},m(c,d){T(c,t,d),b(t,n),b(n,l),b(n,o),b(n,r),Qe(r,e[2]),b(t,s),b(t,u),a||(f=[x(r,"input",e[9]),x(t,"submit",e[6])],a=!0)},p(c,d){d&4&&r.value!==c[2]&&Qe(r,c[2])},d(c){c&&I(t),a=!1,ve(f)}}}function oi(e){let t,n,l,o,r,s,u,a,f;return{c(){t=R("div"),n=q("✅ Data downloaded to /pykoi/"),l=q(e[2]),o=q(".csv"),r=P(),s=R("div"),u=R("button"),u.textContent="Close",h(s,"class","btn-container svelte-sy2m0x")},m(c,d){T(c,t,d),b(t,n),b(t,l),b(t,o),T(c,r,d),T(c,s,d),b(s,u),a||(f=x(u,"click",e[7]),a=!0)},p(c,d){d&4&&K(l,c[2])},d(c){c&&I(t),c&&I(r),c&&I(s),a=!1,f()}}}function ii(e){let t,n,l,o,r,s,u,a;return{c(){t=R("div"),t.textContent="⚠️ Download failed. Please try again.",n=P(),l=R("div"),o=R("button"),o.textContent="Retry",r=P(),s=R("button"),s.textContent="Close",h(l,"class","btn-container svelte-sy2m0x")},m(f,c){T(f,t,c),T(f,n,c),T(f,l,c),b(l,o),b(l,r),b(l,s),u||(a=[x(o,"click",e[10]),x(s,"click",e[7])],u=!0)},p:U,d(f){f&&I(t),f&&I(n),f&&I(l),u=!1,ve(a)}}}function ri(e){let t,n,l,o,r,s,u,a,f,c,d;return{c(){t=R("div"),n=q("⚠️ "),l=q(e[2]),o=q(".csv already exists. Do you wish to overwrite it?"),r=P(),s=R("div"),u=R("button"),u.textContent="Back",a=P(),f=R("button"),f.textContent="Overwrite",h(s,"class","btn-container svelte-sy2m0x")},m(p,g){T(p,t,g),b(t,n),b(t,l),b(t,o),T(p,r,g),T(p,s,g),b(s,u),b(s,a),b(s,f),c||(d=[x(u,"click",e[11]),x(f,"click",e[12])],c=!0)},p(p,g){g&4&&K(l,p[2])},d(p){p&&I(t),p&&I(r),p&&I(s),c=!1,ve(d)}}}function nd(e){let t,n,l,o,r=e[3]===e[4].FILE_INPUT&&li(e),s=e[3]===e[4].DOWNLOADED&&oi(e),u=e[3]===e[4].FAILED_DOWNLOAD&&ii(e),a=e[3]===e[4].OVERWRITE&&ri(e);return{c(){r&&r.c(),t=P(),s&&s.c(),n=P(),u&&u.c(),l=P(),a&&a.c(),o=Ce()},m(f,c){r&&r.m(f,c),T(f,t,c),s&&s.m(f,c),T(f,n,c),u&&u.m(f,c),T(f,l,c),a&&a.m(f,c),T(f,o,c)},p(f,c){f[3]===f[4].FILE_INPUT?r?r.p(f,c):(r=li(f),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),f[3]===f[4].DOWNLOADED?s?s.p(f,c):(s=oi(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),f[3]===f[4].FAILED_DOWNLOAD?u?u.p(f,c):(u=ii(f),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),f[3]===f[4].OVERWRITE?a?a.p(f,c):(a=ri(f),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},d(f){r&&r.d(f),f&&I(t),s&&s.d(f),f&&I(n),u&&u.d(f),f&&I(l),a&&a.d(f),f&&I(o)}}}function ld(e){let t;return{c(){t=R("h4"),t.textContent="Download Data",h(t,"slot","header"),h(t,"class","svelte-sy2m0x")},m(n,l){T(n,t,l)},p:U,d(n){n&&I(t)}}}function od(e){let t,n,l,o;function r(a){e[13](a)}function s(a){e[14](a)}let u={handleClose:e[7],$$slots:{header:[ld],default:[nd]},$$scope:{ctx:e}};return e[0]!==void 0&&(u.showModal=e[0]),e[1]!==void 0&&(u.dialog=e[1]),t=new td({props:u}),tt.push(()=>Rn(t,"showModal",r)),tt.push(()=>Rn(t,"dialog",s)),{c(){ne(t.$$.fragment)},m(a,f){ee(t,a,f),o=!0},p(a,[f]){const c={};f&32780&&(c.$$scope={dirty:f,ctx:a}),!n&&f&1&&(n=!0,c.showModal=a[0],$n(()=>n=!1)),!l&&f&2&&(l=!0,c.dialog=a[1],$n(()=>l=!1)),t.$set(c)},i(a){o||(z(t.$$.fragment,a),o=!0)},o(a){V(t.$$.fragment,a),o=!1},d(a){te(t,a)}}}function id(e,t,n){let{showModal:l,table:o}=t,r,s="";const u={FILE_INPUT:0,DOWNLOADED:1,FAILED_DOWNLOAD:2,OVERWRITE:3};let a=u.FILE_INPUT;const f=async w=>{const S={file_name:w},C=await(await fetch(`/chat/${o}/save_to_csv`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).json();console.log("Download Complete: ",C),C.status==="200"?(console.log("success"),n(3,a=u.DOWNLOADED)):(console.log("failed"),n(3,a=u.FAILED_DOWNLOAD))},c=async w=>{w.preventDefault();const S=await fetch(`/file_exists/?file_name=${s}.csv`),{file_exists:M}=await S.json();M===!0?n(3,a=u.OVERWRITE):f(s)};function d(){n(0,l=!1),n(3,a=u.FILE_INPUT),r.close()}function p(){s=this.value,n(2,s)}const g=()=>n(3,a=u.FILE_INPUT),m=()=>n(3,a=u.FILE_INPUT),_=()=>f(s);function v(w){l=w,n(0,l)}function y(w){r=w,n(1,r)}return e.$$set=w=>{"showModal"in w&&n(0,l=w.showModal),"table"in w&&n(8,o=w.table)},[l,r,s,a,u,f,c,d,o,p,g,m,_,v,y]}class No extends ce{constructor(t){super(),de(this,t,id,od,fe,{showModal:0,table:8})}}function si(e){let t;return{c(){t=R("h5"),t.textContent="Response:",h(t,"class","bold")},m(n,l){T(n,t,l)},d(n){n&&I(t)}}}function ai(e){let t,n,l,o,r,s;return{c(){t=R("div"),n=R("button"),n.textContent="👍",l=P(),o=R("button"),o.textContent="👎",h(n,"class","small-button thumbs-up svelte-e92v1n"),Oe(n,"vote-selected",e[0].vote_status==="up"),Oe(n,"vote-not-selected",e[0].vote_status==="down"),h(o,"class","small-button thumbs-down svelte-e92v1n"),Oe(o,"vote-selected",e[0].vote_status==="down"),Oe(o,"vote-not-selected",e[0].vote_status==="up"),h(t,"class","feedback-buttons svelte-e92v1n")},m(u,a){T(u,t,a),b(t,n),b(t,l),b(t,o),r||(s=[x(n,"click",e[5]),x(o,"click",e[6])],r=!0)},p(u,a){a&1&&Oe(n,"vote-selected",u[0].vote_status==="up"),a&1&&Oe(n,"vote-not-selected",u[0].vote_status==="down"),a&1&&Oe(o,"vote-selected",u[0].vote_status==="down"),a&1&&Oe(o,"vote-not-selected",u[0].vote_status==="up")},d(u){u&&I(t),r=!1,ve(s)}}}function rd(e){let t,n,l,o=e[0].answer+"",r,s,u=e[3]&&si(),a=e[1]&&ai(e);return{c(){t=R("div"),u&&u.c(),n=P(),l=R("p"),r=q(o),s=P(),a&&a.c(),h(t,"class","answer svelte-e92v1n")},m(f,c){T(f,t,c),u&&u.m(t,null),b(t,n),b(t,l),b(l,r),b(t,s),a&&a.m(t,null)},p(f,[c]){f[3]?u||(u=si(),u.c(),u.m(t,n)):u&&(u.d(1),u=null),c&1&&o!==(o=f[0].answer+"")&&K(r,o),f[1]?a?a.p(f,c):(a=ai(f),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i:U,o:U,d(f){f&&I(t),u&&u.d(),a&&a.d()}}}function sd(e,t,n){let l;ue(e,Ge,p=>n(7,l=p));let{message:o={}}=t,{feedback:r=!1}=t,{index:s=0}=t,{title:u=!1}=t;async function a(p){const g=await fetch("/chat/rag_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(g.ok)console.log("response",g),n(0,o.vote_status=p.vote_status,o);else{const m=await g.text();alert(m)}}function f(p,g,m){const _=l[m];_.vote=g;const v={id:m+1,vote_status:g};a(v)}console.log("Answer",o.vote_status);const c=p=>f(p,"up",s),d=p=>f(p,"down",s);return e.$$set=p=>{"message"in p&&n(0,o=p.message),"feedback"in p&&n(1,r=p.feedback),"index"in p&&n(2,s=p.index),"title"in p&&n(3,u=p.title)},[o,r,s,u,f,c,d]}class Ra extends ce{constructor(t){super(),de(this,t,sd,rd,fe,{message:0,feedback:1,index:2,title:3})}}function ui(e,t,n){const l=e.slice();return l[17]=t[n],l[19]=n,l}function fi(e,t){let n,l,o,r,s,u,a,f,c,d=t[17].question+"",p,g,m,_,v,y,w,S,M;return _=new Ra({props:{feedback:t[0],message:t[17],index:t[19],title:!0}}),{key:e,first:null,c(){n=R("div"),l=R("div"),o=R("div"),r=P(),s=R("div"),u=R("div"),a=R("h5"),a.textContent="Question:",f=P(),c=R("p"),p=q(d),g=P(),m=R("div"),ne(_.$$.fragment),v=P(),h(o,"class","avatar"),h(a,"class","bold svelte-yzyd3k"),h(u,"class","question svelte-yzyd3k"),h(m,"class","answers svelte-yzyd3k"),h(s,"class","message-content svelte-yzyd3k"),h(l,"class","chat-message-center svelte-yzyd3k"),h(n,"class","chat-message svelte-yzyd3k"),this.first=n},m(C,E){T(C,n,E),b(n,l),b(l,o),b(l,r),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,p),b(s,g),b(s,m),ee(_,m,null),b(n,v),w=!0,S||(M=Jt(y=ud.call(null,n,t[19]===t[5].length-1)),S=!0)},p(C,E){t=C,(!w||E&32)&&d!==(d=t[17].question+"")&&K(p,d);const $={};E&1&&($.feedback=t[0]),E&32&&($.message=t[17]),E&32&&($.index=t[19]),_.$set($),y&&Ve(y.update)&&E&32&&y.update.call(null,t[19]===t[5].length-1)},i(C){w||(z(_.$$.fragment,C),w=!0)},o(C){V(_.$$.fragment,C),w=!1},d(C){C&&I(n),te(_),S=!1,M()}}}function ad(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m,_=[],v=new Map,y,w,S,M,C,E,$=(e[3]?e[4]:"Send")+"",A,k,F,N,D,L,O;function B(X){e[10](X)}let j={table:"qa_table"};e[1]!==void 0&&(j.showModal=e[1]),t=new No({props:j}),tt.push(()=>Rn(t,"showModal",B));let ae=e[5];const pe=X=>X[19];for(let X=0;X<ae.length;X+=1){let W=ui(e,ae,X),Y=pe(W);v.set(Y,_[X]=fi(Y,W))}return{c(){ne(t.$$.fragment),l=P(),o=R("div"),r=R("div"),s=R("h5"),s.textContent="Vote Feedback Instructions",u=P(),a=R("p"),a.innerHTML=`Ask a question to receive an answer from the chatbot. If the response is
      satisfactory, click on the <span class="inline-button green svelte-yzyd3k">👍</span>
      button. If the repsonse is not satisfactory, click on the
      <span class="inline-button red svelte-yzyd3k">👎</span> button.`,f=P(),c=R("button"),c.textContent="Download Data",d=P(),p=R("div"),g=R("section"),m=R("div");for(let X=0;X<_.length;X+=1)_[X].c();y=P(),w=R("div"),S=R("form"),M=R("input"),C=P(),E=R("button"),A=q($),F=P(),N=R("p"),N.textContent="Note - may produce inaccurate information.",h(s,"class","underline bold svelte-yzyd3k"),h(a,"class","svelte-yzyd3k"),h(c,"class","svelte-yzyd3k"),h(r,"class","instructions svelte-yzyd3k"),h(m,"class","chat-log svelte-yzyd3k"),h(g,"class","chatbox svelte-yzyd3k"),h(M,"class","chat-input-textarea svelte-yzyd3k"),h(M,"placeholder","Type Question Here"),h(E,"class",k="btnyousend "+(e[2]===""?"":"active")+" svelte-yzyd3k"),h(E,"type","submit"),h(S,"class","chat-input-form svelte-yzyd3k"),h(N,"class","message svelte-yzyd3k"),h(w,"class","chat-input-holder svelte-yzyd3k"),h(p,"class","ranked-chat svelte-yzyd3k"),h(o,"class","ranked-feedback-container svelte-yzyd3k")},m(X,W){ee(t,X,W),T(X,l,W),T(X,o,W),b(o,r),b(r,s),b(r,u),b(r,a),b(r,f),b(r,c),b(o,d),b(o,p),b(p,g),b(g,m);for(let Y=0;Y<_.length;Y+=1)_[Y]&&_[Y].m(m,null);b(p,y),b(p,w),b(w,S),b(S,M),Qe(M,e[2]),b(S,C),b(S,E),b(E,A),b(w,F),b(w,N),D=!0,L||(O=[x(c,"click",e[7]),x(M,"input",e[11]),x(S,"submit",e[6])],L=!0)},p(X,[W]){const Y={};!n&&W&2&&(n=!0,Y.showModal=X[1],$n(()=>n=!1)),t.$set(Y),W&33&&(ae=X[5],we(),_=pt(_,W,pe,1,X,ae,v,m,Eo,fi,null,ui),ye()),W&4&&M.value!==X[2]&&Qe(M,X[2]),(!D||W&24)&&$!==($=(X[3]?X[4]:"Send")+"")&&K(A,$),(!D||W&4&&k!==(k="btnyousend "+(X[2]===""?"":"active")+" svelte-yzyd3k"))&&h(E,"class",k)},i(X){if(!D){z(t.$$.fragment,X);for(let W=0;W<ae.length;W+=1)z(_[W]);D=!0}},o(X){V(t.$$.fragment,X);for(let W=0;W<_.length;W+=1)V(_[W]);D=!1},d(X){te(t,X),X&&I(l),X&&I(o);for(let W=0;W<_.length;W+=1)_[W].d();L=!1,ve(O)}}}function ud(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function fd(e,t,n){let l,o;ue(e,Ge,y=>n(5,o=y));let r=!1,{feedback:s=!1}=t,{is_retrieval:u=!1}=t,a="",f="",c=!1;ct(()=>{d()});async function d(){const M=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map(C=>({id:C[0],question:C[1],answer:C[2],vote_status:C[3]}));De(Ge,o=[...M],o)}const p=async y=>{y.preventDefault(),a=f,n(2,f=""),n(3,c=!0);let w={id:o.length+1,question:a,answer:"Loading...",vote_status:"na"};De(Ge,o=[...o,w],o);const S=u?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})}):await fetch(`/chat/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})});if(S.ok){const M=await S.json();console.log("response data",M),w.answer=M.answer,Ge.update(C=>(C[C.length-1]=w,C))}else{const M=await S.text();alert(M)}n(3,c=!1)};let g=0;setInterval(()=>{n(9,g=(g+1)%4)},200);function m(){n(1,r=!0)}[...Array(10).keys()].map(y=>String.fromCharCode(65+y));function _(y){r=y,n(1,r)}function v(){f=this.value,n(2,f)}return e.$$set=y=>{"feedback"in y&&n(0,s=y.feedback),"is_retrieval"in y&&n(8,u=y.is_retrieval)},e.$$.update=()=>{e.$$.dirty&512&&n(4,l=".".repeat(g).padEnd(3))},[s,r,f,c,l,o,p,m,u,g,_,v]}class Po extends ce{constructor(t){super(),de(this,t,fd,ad,fe,{feedback:0,is_retrieval:8})}}function ci(e,t,n){const l=e.slice();return l[14]=t[n],l[16]=n,l}function di(e,t){let n,l,o,r,s,u,a,f,c,d=t[14].question+"",p,g,m,_,v,y,w,S=t[14].up_ranking_answer+"",M,C,E,$,A,k,F=t[14].low_ranking_answer+"",N,D,L,O,B;function j(...W){return t[7](t[14],t[16],...W)}function ae(...W){return t[8](t[14],t[16],...W)}function pe(...W){return t[9](t[14],t[16],...W)}function X(...W){return t[10](t[14],t[16],...W)}return{key:e,first:null,c(){n=R("div"),l=R("div"),o=R("div"),r=P(),s=R("div"),u=R("div"),a=R("h5"),a.textContent="Question:",f=P(),c=R("p"),p=q(d),g=P(),m=R("div"),_=R("div"),v=R("h5"),v.textContent="Response 1:",y=P(),w=R("p"),M=q(S),C=P(),E=R("div"),$=R("h5"),$.textContent="Response 2:",A=P(),k=R("p"),N=q(F),D=P(),h(o,"class","avatar"),h(a,"class","bold svelte-au920n"),h(u,"class","question svelte-au920n"),h(v,"class","bold underline svelte-au920n"),h(_,"class","answer svelte-au920n"),h($,"class","bold underline svelte-au920n"),h(E,"class","answer svelte-au920n"),h(m,"class","answers svelte-au920n"),h(s,"class","message-content svelte-au920n"),h(l,"class","chat-message-center svelte-au920n"),h(n,"class","chat-message svelte-au920n"),this.first=n},m(W,Y){T(W,n,Y),b(n,l),b(l,o),b(l,r),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,p),b(s,g),b(s,m),b(m,_),b(_,v),b(_,y),b(_,w),b(w,M),b(m,C),b(m,E),b(E,$),b(E,A),b(E,k),b(k,N),b(n,D),O||(B=[x(_,"click",j),x(_,"keydown",ae),x(E,"click",pe),x(E,"keydown",X),Jt(L=dd.call(null,n,t[16]===t[3].length-1))],O=!0)},p(W,Y){t=W,Y&8&&d!==(d=t[14].question+"")&&K(p,d),Y&8&&S!==(S=t[14].up_ranking_answer+"")&&K(M,S),Y&8&&F!==(F=t[14].low_ranking_answer+"")&&K(N,F),L&&Ve(L.update)&&Y&8&&L.update.call(null,t[16]===t[3].length-1)},d(W){W&&I(n),O=!1,ve(B)}}}function cd(e){let t,n,l,o,r,s,u=[],a=new Map,f,c,d,p,g,m,_=(e[1]?e[2]:"Send")+"",v,y,w,S,M,C,E=e[3];const $=A=>A[16];for(let A=0;A<E.length;A+=1){let k=ci(e,E,A),F=$(k);a.set(F,u[A]=di(F,k))}return{c(){t=R("div"),n=R("div"),n.innerHTML=`<h5 class="underline bold svelte-au920n">Ranked Feedback Instructions</h5> 
    <p class="svelte-au920n">Ask a question and click on the better of the two responses. The better
      response will be outlined in <span class="green svelte-au920n">green</span>, the worse
      response outlined in <span class="red svelte-au920n">red</span>. This data will be
      automatically fed to RLHF.</p> 
    <button class="svelte-au920n">Download Data</button>`,l=P(),o=R("div"),r=R("section"),s=R("div");for(let A=0;A<u.length;A+=1)u[A].c();f=P(),c=R("div"),d=R("form"),p=R("input"),g=P(),m=R("button"),v=q(_),w=P(),S=R("p"),S.textContent="Note - may produce inaccurate information.",h(n,"class","instructions svelte-au920n"),h(s,"class","chat-log svelte-au920n"),h(r,"class","chatbox svelte-au920n"),h(p,"class","chat-input-textarea svelte-au920n"),h(p,"placeholder","Type Message Here"),h(m,"class",y="btnyousend "+(e[0]===""?"":"active")+" svelte-au920n"),h(m,"type","submit"),h(d,"class","chat-input-form svelte-au920n"),h(S,"class","message svelte-au920n"),h(c,"class","chat-input-holder svelte-au920n"),h(o,"class","ranked-chat svelte-au920n"),h(t,"class","ranked-feedback-container svelte-au920n")},m(A,k){T(A,t,k),b(t,n),b(t,l),b(t,o),b(o,r),b(r,s);for(let F=0;F<u.length;F+=1)u[F]&&u[F].m(s,null);b(o,f),b(o,c),b(c,d),b(d,p),Qe(p,e[0]),b(d,g),b(d,m),b(m,v),b(c,w),b(c,S),M||(C=[x(p,"input",e[11]),x(d,"submit",e[4])],M=!0)},p(A,[k]){k&40&&(E=A[3],u=pt(u,k,$,1,A,E,a,s,en,di,null,ci)),k&1&&p.value!==A[0]&&Qe(p,A[0]),k&6&&_!==(_=(A[1]?A[2]:"Send")+"")&&K(v,_),k&1&&y!==(y="btnyousend "+(A[0]===""?"":"active")+" svelte-au920n")&&h(m,"class",y)},i:U,o:U,d(A){A&&I(t);for(let k=0;k<u.length;k+=1)u[k].d();M=!1,ve(C)}}}function dd(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function hd(e){const t=await fetch("/chat/ranking_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function gd(e,t,n){let l,o;ue(e,Nl,v=>n(3,o=v));let r="",s="",u=!1;ct(()=>{});const a=async v=>{v.preventDefault(),r=s,n(0,s=""),n(1,u=!0);let y={question:r,up_ranking_answer:"Loading...",low_ranking_answer:"Loading..."};De(Nl,o=[...o,y],o);const w=await fetch(`/chat/multi_responses/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r})});if(w.ok){const S=await w.json();y.up_ranking_answer=S.answer[0],y.low_ranking_answer=S.answer[1],Nl.update(M=>(M[M.length-1]=y,M))}else{const S=await w.text();alert(S)}n(1,u=!1)};let f=0;setInterval(()=>{n(6,f=(f+1)%4)},200);function c(v,y,w,S){const M=o[w],C={1:"up_ranking_answer",2:"low_ranking_answer"},E={question:M.question,up_ranking_answer:M[C[S]],low_ranking_answer:M[C[S%2+1]]};hd(E),Mn(v.currentTarget.parentNode).selectAll("div").style("outline","2px solid var(--red)").style("border","1px solid var(--red)"),Mn(v.currentTarget).style("outline","2px solid var(--green)").style("border","1px solid var(--green)")}const d=(v,y,w)=>c(w,v,y,1),p=(v,y,w)=>c(w,v,y,1),g=(v,y,w)=>c(w,v,y,2),m=(v,y,w)=>c(w,v,y,2);function _(){s=this.value,n(0,s)}return e.$$.update=()=>{e.$$.dirty&64&&n(2,l=".".repeat(f).padEnd(3))},[s,u,l,o,a,c,f,d,p,g,m,_]}class pd extends ce{constructor(t){super(),de(this,t,gd,cd,fe,{})}}function ro(e,t=2){if(e===0)return"0 Bytes";const n=1024,l=t<0?0:t,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(l))+" "+o[r]}function md(e){let t={who:0,what:0,how:0,why:0,where:0,does:0,can:0,"n/a":0};for(let l=0;l<e.length;l++){let o=e[l].question.split(" ")[0].toLowerCase();o in t?t[o]++:t["n/a"]++}return Object.keys(t).map(l=>({question:l,count:t[l]}))}function Aa(e){return e.map(t=>{const n=t.question.split(" ").length,l=t.answer.split(" ").length;return{index:t.index,question:+n,answer:+l,vote:t.vote}})}function Ma(e,t){e.classList.add("tooltip"),e.setAttribute("tabindex",0);function n(){const o=document.createElement("span");o.textContent=t,o.setAttribute("id","tooltip"),e.appendChild(o),e.addEventListener("mouseleave",l),e.addEventListener("blur",l),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}function l(){e.removeChild(e.querySelector("#tooltip")),e.removeEventListener("mouseleave",l),e.removeEventListener("blur",l),e.addEventListener("mouseenter",n),e.addEventListener("focus",n)}return e.addEventListener("mouseenter",n),e.addEventListener("focus",n),{onDestroy(){e.classList.remove("tooltip"),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}}}function hi(e,t,n){const l=e.slice();return l[10]=t[n],l[12]=n,l}function _d(e){let t,n,l,o,r,s,u,a,f=e[0],c=[];for(let d=0;d<f.length;d+=1)c[d]=gi(hi(e,f,d));return{c(){t=R("div"),n=R("button"),n.textContent="Select All",l=P(),o=R("button"),o.textContent="Deselect All",r=P(),s=R("div");for(let d=0;d<c.length;d+=1)c[d].c();h(n,"class","svelte-1betmla"),h(o,"class","svelte-1betmla"),h(t,"class","select-button-container svelte-1betmla"),h(s,"class","checkbox-container svelte-1betmla")},m(d,p){T(d,t,p),b(t,n),b(t,l),b(t,o),T(d,r,p),T(d,s,p);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(s,null);u||(a=[x(n,"click",e[6]),x(o,"click",e[7])],u=!0)},p(d,p){if(p&35){f=d[0];let g;for(g=0;g<f.length;g+=1){const m=hi(d,f,g);c[g]?c[g].p(m,p):(c[g]=gi(m),c[g].c(),c[g].m(s,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=f.length}},d(d){d&&I(t),d&&I(r),d&&I(s),_e(c,d),u=!1,ve(a)}}}function vd(e){let t;return{c(){t=R("div"),t.textContent="No documents found. Please upload via the RetrievalQA component."},m(n,l){T(n,t,l)},p:U,d(n){n&&I(t)}}}function gi(e){let t,n,l,o,r,s,u=pi(e[10].name)+"",a,f,c,d,p,g;function m(..._){return e[8](e[10],..._)}return{c(){t=R("label"),n=R("input"),r=P(),s=R("span"),a=q(u),c=P(),h(n,"type","checkbox"),h(n,"id",l=e[10].id),n.checked=o=e[1].has(e[10].name),h(n,"class","svelte-1betmla"),h(s,"class","svelte-1betmla"),h(t,"for",d=e[10].id),h(t,"class","svelte-1betmla")},m(_,v){T(_,t,v),b(t,n),b(t,r),b(t,s),b(s,a),b(t,c),p||(g=[x(n,"change",m),Jt(f=Ma.call(null,s,e[10].name))],p=!0)},p(_,v){e=_,v&1&&l!==(l=e[10].id)&&h(n,"id",l),v&3&&o!==(o=e[1].has(e[10].name))&&(n.checked=o),v&1&&u!==(u=pi(e[10].name)+"")&&K(a,u),f&&Ve(f.update)&&v&1&&f.update.call(null,e[10].name),v&1&&d!==(d=e[10].id)&&h(t,"for",d)},d(_){_&&I(t),p=!1,ve(g)}}}function bd(e){let t,n,l,o,r,s,u,a,f,c,d;function p(_,v){return _[0].length===0?vd:_d}let g=p(e),m=g(e);return{c(){t=R("form"),n=R("div"),l=R("div"),o=R("select"),r=R("option"),r.textContent="Documents",s=P(),u=R("div"),a=P(),f=R("div"),m.c(),r.__value="Documents",r.value=r.__value,h(o,"class","svelte-1betmla"),h(u,"class","overSelect svelte-1betmla"),h(l,"class","selectBox svelte-1betmla"),h(f,"class","dropdown-content svelte-1betmla"),Ae(f,"display",e[2]?"block":"none"),h(n,"class","multiselect svelte-1betmla")},m(_,v){T(_,t,v),b(t,n),b(n,l),b(l,o),b(o,r),b(l,s),b(l,u),b(n,a),b(n,f),m.m(f,null),e[9](f),c||(d=x(l,"click",e[4]),c=!0)},p(_,[v]){g===(g=p(_))&&m?m.p(_,v):(m.d(1),m=g(_),m&&(m.c(),m.m(f,null))),v&4&&Ae(f,"display",_[2]?"block":"none")},i:U,o:U,d(_){_&&I(t),m.d(),e[9](null),c=!1,d()}}}function pi(e){const n=Math.floor(8);return e.length>16?e.slice(0,n)+"..."+e.slice(-n):e}function wd(e,t,n){let l;ue(e,It,g=>n(1,l=g));let{documents:o=[]}=t,r=!1,s;function u(g){g.preventDefault(),n(2,r=!r)}function a(g,m){m.target.checked?l.add(g):l.delete(g),It.set(new Set(l))}function f(g){g.preventDefault(),De(It,l=new Set(o.map(m=>m.name)),l),It.set(new Set(l))}function c(g){g.preventDefault(),De(It,l=new Set,l),It.set(new Set(l))}const d=(g,m)=>a(g.name,m);function p(g){tt[g?"unshift":"push"](()=>{s=g,n(3,s)})}return e.$$set=g=>{"documents"in g&&n(0,o=g.documents)},e.$$.update=()=>{e.$$.dirty&2&&console.log(l)},[o,l,r,s,u,a,f,c,d,p]}let yd=class extends ce{constructor(t){super(),de(this,t,wd,bd,fe,{documents:0})}};function En(e,{delay:t=0,duration:n=400,easing:l=Fo,axis:o="y"}={}){const r=getComputedStyle(e),s=+r.opacity,u=o==="y"?"height":"width",a=parseFloat(r[u]),f=o==="y"?["top","bottom"]:["left","right"],c=f.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),d=parseFloat(r[`padding${c[0]}`]),p=parseFloat(r[`padding${c[1]}`]),g=parseFloat(r[`margin${c[0]}`]),m=parseFloat(r[`margin${c[1]}`]),_=parseFloat(r[`border${c[0]}Width`]),v=parseFloat(r[`border${c[1]}Width`]);return{delay:t,duration:n,easing:l,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*s};${u}: ${y*a}px;padding-${f[0]}: ${y*d}px;padding-${f[1]}: ${y*p}px;margin-${f[0]}: ${y*g}px;margin-${f[1]}: ${y*m}px;border-${f[0]}-width: ${y*_}px;border-${f[1]}-width: ${y*v}px;`}}function qn(e,{delay:t=0,duration:n=400,easing:l=Fo,start:o=0,opacity:r=0}={}){const s=getComputedStyle(e),u=+s.opacity,a=s.transform==="none"?"":s.transform,f=1-o,c=u*(1-r);return{delay:t,duration:n,easing:l,css:(d,p)=>`
			transform: ${a} scale(${1-f*p});
			opacity: ${u-c*p}
		`}}function kd(e){let t;return{c(){t=R("p"),t.textContent="⌄",h(t,"class","svelte-1pk2e1k")},m(n,l){T(n,t,l)},d(n){n&&I(t)}}}function Sd(e){let t;return{c(){t=R("p"),t.textContent="⌃",h(t,"class","svelte-1pk2e1k")},m(n,l){T(n,t,l)},d(n){n&&I(t)}}}function mi(e){let t,n,l,o,r;return{c(){t=R("div"),n=R("p"),l=q(e[1]),h(n,"class","bold svelte-1pk2e1k"),h(t,"class","source_content svelte-1pk2e1k")},m(s,u){T(s,t,u),b(t,n),b(n,l),r=!0},p(s,u){(!r||u&2)&&K(l,s[1])},i(s){r||(Me(()=>{r&&(o||(o=ot(t,En,{},!0)),o.run(1))}),r=!0)},o(s){o||(o=ot(t,En,{},!1)),o.run(0),r=!1},d(s){s&&I(t),s&&o&&o.end()}}}function Cd(e){let t,n,l,o=e[2]+1+"",r,s,u,a,f,c,d,p,g;function m(w,S){return w[3]?Sd:kd}let _=m(e),v=_(e),y=e[3]&&mi(e);return{c(){t=R("div"),n=R("div"),l=R("p"),r=q(o),s=q(": "),u=q(e[0]),a=P(),v.c(),c=P(),y&&y.c(),h(l,"class","bold svelte-1pk2e1k"),h(n,"class","source_tab svelte-1pk2e1k"),h(t,"class","source svelte-1pk2e1k")},m(w,S){T(w,t,S),b(t,n),b(n,l),b(l,r),b(l,s),b(l,u),b(n,a),v.m(n,null),b(t,c),y&&y.m(t,null),d=!0,p||(g=x(n,"click",e[4]),p=!0)},p(w,[S]){(!d||S&4)&&o!==(o=w[2]+1+"")&&K(r,o),(!d||S&1)&&K(u,w[0]),_!==(_=m(w))&&(v.d(1),v=_(w),v&&(v.c(),v.m(n,null))),w[3]?y?(y.p(w,S),S&8&&z(y,1)):(y=mi(w),y.c(),z(y,1),y.m(t,null)):y&&(we(),V(y,1,1,()=>{y=null}),ye())},i(w){d||(Me(()=>{d&&(f||(f=ot(n,En,{},!0)),f.run(1))}),z(y),d=!0)},o(w){f||(f=ot(n,En,{},!1)),f.run(0),V(y),d=!1},d(w){w&&I(t),v.d(),w&&f&&f.end(),y&&y.d(),p=!1,g()}}}function $d(e,t,n){let{source:l=""}=t,{source_content:o=""}=t,{i:r=0}=t,s=r===0;const u=()=>n(3,s=!s);return e.$$set=a=>{"source"in a&&n(0,l=a.source),"source_content"in a&&n(1,o=a.source_content),"i"in a&&n(2,r=a.i)},[l,o,r,s,u]}class Rd extends ce{constructor(t){super(),de(this,t,$d,Cd,fe,{source:0,source_content:1,i:2})}}function _i(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function vi(e){let t,n,l,o;const r=[Fd,Ed,Md,Ad],s=[];function u(a,f){return a[0][0]==="N/A"?0:a[0][0]==="Loading..."?1:a[0][0]==="Not loaded"?2:3}return t=u(e),n=s[t]=r[t](e),{c(){n.c(),l=Ce()},m(a,f){s[t].m(a,f),T(a,l,f),o=!0},p(a,f){let c=t;t=u(a),t===c?s[t].p(a,f):(we(),V(s[c],1,1,()=>{s[c]=null}),ye(),n=s[t],n?n.p(a,f):(n=s[t]=r[t](a),n.c()),z(n,1),n.m(l.parentNode,l))},i(a){o||(z(n),o=!0)},o(a){V(n),o=!1},d(a){s[t].d(a),a&&I(l)}}}function Ad(e){let t,n,l,o=e[0].length+"",r,s,u,a,f,c,d,p;function g(y,w){return y[2]?Id:Dd}let m=g(e),_=m(e),v=e[2]&&bi(e);return{c(){t=R("div"),n=R("h5"),l=q("📖 Response Sources ("),r=q(o),s=q(")"),u=P(),_.c(),a=P(),v&&v.c(),f=Ce(),h(n,"class","bold"),h(t,"class","sources-header svelte-1r759df")},m(y,w){T(y,t,w),b(t,n),b(n,l),b(n,r),b(n,s),b(t,u),_.m(t,null),T(y,a,w),v&&v.m(y,w),T(y,f,w),c=!0,d||(p=x(t,"click",e[3]),d=!0)},p(y,w){(!c||w&1)&&o!==(o=y[0].length+"")&&K(r,o),m!==(m=g(y))&&(_.d(1),_=m(y),_&&(_.c(),_.m(t,null))),y[2]?v?(v.p(y,w),w&4&&z(v,1)):(v=bi(y),v.c(),z(v,1),v.m(f.parentNode,f)):v&&(we(),V(v,1,1,()=>{v=null}),ye())},i(y){c||(z(v),c=!0)},o(y){V(v),c=!1},d(y){y&&I(t),_.d(),y&&I(a),v&&v.d(y),y&&I(f),d=!1,p()}}}function Md(e){let t;return{c(){t=R("h5"),t.textContent="⚠️ No sources loaded",h(t,"class","bold")},m(n,l){T(n,t,l)},p:U,i:U,o:U,d(n){n&&I(t)}}}function Ed(e){let t;return{c(){t=R("h5"),t.textContent="📖 Loading...",h(t,"class","bold")},m(n,l){T(n,t,l)},p:U,i:U,o:U,d(n){n&&I(t)}}}function Fd(e){let t;return{c(){t=R("h5"),t.textContent="⚠️ No Retrieval Sources selected or received",h(t,"class","bold")},m(n,l){T(n,t,l)},p:U,i:U,o:U,d(n){n&&I(t)}}}function Dd(e){let t;return{c(){t=R("span"),t.textContent="⌄"},m(n,l){T(n,t,l)},d(n){n&&I(t)}}}function Id(e){let t;return{c(){t=R("span"),t.textContent="⌃"},m(n,l){T(n,t,l)},d(n){n&&I(t)}}}function bi(e){let t,n,l=e[0],o=[];for(let s=0;s<l.length;s+=1)o[s]=wi(_i(e,l,s));const r=s=>V(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=Ce()},m(s,u){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,u);T(s,t,u),n=!0},p(s,u){if(u&3){l=s[0];let a;for(a=0;a<l.length;a+=1){const f=_i(s,l,a);o[a]?(o[a].p(f,u),z(o[a],1)):(o[a]=wi(f),o[a].c(),z(o[a],1),o[a].m(t.parentNode,t))}for(we(),a=l.length;a<o.length;a+=1)r(a);ye()}},i(s){if(!n){for(let u=0;u<l.length;u+=1)z(o[u]);n=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)V(o[u]);n=!1},d(s){_e(o,s),s&&I(t)}}}function wi(e){let t,n;return t=new Rd({props:{source:e[4],source_content:e[1][e[6]],i:e[6]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&1&&(r.source=l[4]),o&2&&(r.source_content=l[1][l[6]]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Nd(e){let t,n,l=e[0]!==void 0&&vi(e);return{c(){t=R("div"),l&&l.c(),h(t,"class","sources svelte-1r759df")},m(o,r){T(o,t,r),l&&l.m(t,null),n=!0},p(o,[r]){o[0]!==void 0?l?(l.p(o,r),r&1&&z(l,1)):(l=vi(o),l.c(),z(l,1),l.m(t,null)):l&&(we(),V(l,1,1,()=>{l=null}),ye())},i(o){n||(z(l),n=!0)},o(o){V(l),n=!1},d(o){o&&I(t),l&&l.d()}}}function Pd(e,t,n){let{sources:l=[]}=t,{source_content:o=[]}=t,r=!1;const s=()=>n(2,r=!r);return e.$$set=u=>{"sources"in u&&n(0,l=u.sources),"source_content"in u&&n(1,o=u.source_content)},[l,o,r,s]}class Td extends ce{constructor(t){super(),de(this,t,Pd,Nd,fe,{sources:0,source_content:1})}}function yi(e,t,n){const l=e.slice();return l[4]=t[n],l}function ki(e,t,n){const l=e.slice();return l[4]=t[n],l}function Si(e){let t,n,l,o=e[4].label+"",r,s,u,a,f;return{c(){t=R("li"),n=R("span"),l=R("h5"),r=q(o),s=P(),h(l,"class","bold"),h(n,"class","svelte-iwm583"),h(t,"class",u=Ko(e[0]===e[4].value?"active":"")+" svelte-iwm583")},m(c,d){T(c,t,d),b(t,n),b(n,l),b(l,r),b(t,s),a||(f=x(n,"click",function(){Ve(e[3](e[4].value))&&e[3](e[4].value).apply(this,arguments)}),a=!0)},p(c,d){e=c,d&2&&o!==(o=e[4].label+"")&&K(r,o),d&3&&u!==(u=Ko(e[0]===e[4].value?"active":"")+" svelte-iwm583")&&h(t,"class",u)},d(c){c&&I(t),a=!1,f()}}}function Ci(e){let t,n,l,o;const r=[e[2]];var s=e[4].component;function u(a){let f={};for(let c=0;c<r.length;c+=1)f=Cn(f,r[c]);return{props:f}}return s&&(n=Rt(s,u())),{c(){t=R("div"),n&&ne(n.$$.fragment),l=P(),h(t,"class","box svelte-iwm583")},m(a,f){T(a,t,f),n&&ee(n,t,null),b(t,l),o=!0},p(a,f){const c=f&4?fa(r,[ca(a[2])]):{};if(f&2&&s!==(s=a[4].component)){if(n){we();const d=n;V(d.$$.fragment,1,0,()=>{te(d,1)}),ye()}s?(n=Rt(s,u()),ne(n.$$.fragment),z(n.$$.fragment,1),ee(n,t,l)):n=null}else s&&n.$set(c)},i(a){o||(n&&z(n.$$.fragment,a),o=!0)},o(a){n&&V(n.$$.fragment,a),o=!1},d(a){a&&I(t),n&&te(n)}}}function $i(e){let t,n,l=e[0]==e[4].value&&Ci(e);return{c(){l&&l.c(),t=Ce()},m(o,r){l&&l.m(o,r),T(o,t,r),n=!0},p(o,r){o[0]==o[4].value?l?(l.p(o,r),r&3&&z(l,1)):(l=Ci(o),l.c(),z(l,1),l.m(t.parentNode,t)):l&&(we(),V(l,1,1,()=>{l=null}),ye())},i(o){n||(z(l),n=!0)},o(o){V(l),n=!1},d(o){l&&l.d(o),o&&I(t)}}}function Od(e){let t,n,l,o,r=e[1],s=[];for(let c=0;c<r.length;c+=1)s[c]=Si(ki(e,r,c));let u=e[1],a=[];for(let c=0;c<u.length;c+=1)a[c]=$i(yi(e,u,c));const f=c=>V(a[c],1,1,()=>{a[c]=null});return{c(){t=R("ul");for(let c=0;c<s.length;c+=1)s[c].c();n=P();for(let c=0;c<a.length;c+=1)a[c].c();l=Ce(),h(t,"class","svelte-iwm583")},m(c,d){T(c,t,d);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(t,null);T(c,n,d);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(c,d);T(c,l,d),o=!0},p(c,[d]){if(d&11){r=c[1];let p;for(p=0;p<r.length;p+=1){const g=ki(c,r,p);s[p]?s[p].p(g,d):(s[p]=Si(g),s[p].c(),s[p].m(t,null))}for(;p<s.length;p+=1)s[p].d(1);s.length=r.length}if(d&7){u=c[1];let p;for(p=0;p<u.length;p+=1){const g=yi(c,u,p);a[p]?(a[p].p(g,d),z(a[p],1)):(a[p]=$i(g),a[p].c(),z(a[p],1),a[p].m(l.parentNode,l))}for(we(),p=u.length;p<a.length;p+=1)f(p);ye()}},i(c){if(!o){for(let d=0;d<u.length;d+=1)z(a[d]);o=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)V(a[d]);o=!1},d(c){c&&I(t),_e(s,c),c&&I(n),_e(a,c),c&&I(l)}}}function zd(e,t,n){let{items:l=[]}=t,{activeTabValue:o=1}=t,{tabProps:r={}}=t;const s=u=>()=>n(0,o=u);return e.$$set=u=>{"items"in u&&n(1,l=u.items),"activeTabValue"in u&&n(0,o=u.activeTabValue),"tabProps"in u&&n(2,r=u.tabProps)},[o,l,r,s]}class Vd extends ce{constructor(t){super(),de(this,t,zd,Od,fe,{items:1,activeTabValue:0,tabProps:2})}}function Ri(e){let t;return{c(){t=q("Press ENTER to autofill with the RAG answer.")},m(n,l){T(n,t,l)},d(n){n&&I(t)}}}function Ld(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m=e[0].edited_answer===al&&Ri();return{c(){t=R("form"),n=R("textarea"),o=P(),r=R("div"),s=R("div"),m&&m.c(),u=P(),a=R("div"),f=R("button"),f.textContent="Update",c=P(),d=R("button"),d.textContent="Reset",h(n,"placeholder",l=e[0].answer),h(s,"class","note svelte-i9wciy"),h(r,"class","button-container svelte-i9wciy")},m(_,v){T(_,t,v),b(t,n),Qe(n,e[0].edited_answer),e[6](n),b(t,o),b(t,r),b(r,s),m&&m.m(s,null),b(r,u),b(r,a),b(a,f),b(a,c),b(a,d),p||(g=[x(n,"input",e[5]),x(n,"keydown",e[4]),x(f,"click",e[2]),x(d,"click",e[3])],p=!0)},p(_,[v]){v&1&&l!==(l=_[0].answer)&&h(n,"placeholder",l),v&1&&Qe(n,_[0].edited_answer),_[0].edited_answer===al?m||(m=Ri(),m.c(),m.m(s,null)):m&&(m.d(1),m=null)},i:U,o:U,d(_){_&&I(t),e[6](null),m&&m.d(),p=!1,ve(g)}}}const al="";function qd(e,t,n){let{message:l={}}=t,o;const r=async d=>{const p={id:l.id,new_answer:d},g=await fetch("/chat/rag_table/update_answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(g.ok)console.log("Answer updated successfully",g),n(0,l.edited_answer=d,l);else{const m=await g.text();alert(m)}},s=d=>{d.preventDefault(),r(l.edited_answer)},u=d=>{d.preventDefault(),r(al)},a=d=>{d.key=="Enter"&&l.edited_answer===al&&(d.preventDefault(),console.log("ENTER"),n(0,l.edited_answer=l.answer,l))};ct(function(){o.focus()});function f(){l.edited_answer=this.value,n(0,l)}function c(d){tt[d?"unshift":"push"](()=>{o=d,n(1,o)})}return e.$$set=d=>{"message"in d&&n(0,l=d.message)},[l,o,s,u,a,f,c]}class Hd extends ce{constructor(t){super(),de(this,t,qd,Ld,fe,{message:0})}}function Ai(e,t,n){const l=e.slice();return l[19]=t[n],l[21]=n,l}function Mi(e,t){let n,l,o,r,s,u,a,f,c,d=t[19].question+"",p,g,m,_,v,y,w,S,M,C,E,$,A,k,F,N;return M=new Vd({props:{items:t[8],tabProps:{message:t[19],feedback:t[0],index:t[21]}}}),E=new Td({props:{sources:t[19].source,source_content:t[19].source_content}}),{key:e,first:null,c(){n=R("div"),l=R("div"),o=R("div"),r=P(),s=R("div"),u=R("div"),a=R("h5"),a.textContent="Question:",f=P(),c=R("p"),p=q(d),g=P(),m=R("div"),_=R("p"),_.textContent="ℹ️ Retrieval Sources",y=P(),w=R("div"),S=R("div"),ne(M.$$.fragment),C=P(),ne(E.$$.fragment),$=P(),h(o,"class","avatar"),h(a,"class","bold"),h(_,"class","bold"),h(m,"class","rag-sources svelte-vgv4ev"),h(u,"class","question svelte-vgv4ev"),h(S,"class","answer svelte-vgv4ev"),h(w,"class","answers svelte-vgv4ev"),h(s,"class","message-content svelte-vgv4ev"),h(l,"class","chat-message-center svelte-vgv4ev"),h(n,"class","chat-message svelte-vgv4ev"),this.first=n},m(D,L){T(D,n,L),b(n,l),b(l,o),b(l,r),b(l,s),b(s,u),b(u,a),b(u,f),b(u,c),b(c,p),b(u,g),b(u,m),b(m,_),b(s,y),b(s,w),b(w,S),ee(M,S,null),b(s,C),ee(E,s,null),b(n,$),k=!0,F||(N=[Jt(v=Ma.call(null,_,Ei(t[19]))),Jt(A=Bd.call(null,n,t[21]===t[5].length-1))],F=!0)},p(D,L){t=D,(!k||L&32)&&d!==(d=t[19].question+"")&&K(p,d),v&&Ve(v.update)&&L&32&&v.update.call(null,Ei(t[19]));const O={};L&33&&(O.tabProps={message:t[19],feedback:t[0],index:t[21]}),M.$set(O);const B={};L&32&&(B.sources=t[19].source),L&32&&(B.source_content=t[19].source_content),E.$set(B),A&&Ve(A.update)&&L&32&&A.update.call(null,t[21]===t[5].length-1)},i(D){k||(z(M.$$.fragment,D),z(E.$$.fragment,D),k=!0)},o(D){V(M.$$.fragment,D),V(E.$$.fragment,D),k=!1},d(D){D&&I(n),te(M),te(E),F=!1,ve(N)}}}function Gd(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m,_=[],v=new Map,y,w,S,M,C,E,$,A,k,F=(e[2]?e[4]:"Send")+"",N,D,L,O,B,j,ae;function pe(Q){e[13](Q)}let X={table:"rag_table"};e[3]!==void 0&&(X.showModal=e[3]),t=new No({props:X}),tt.push(()=>Rn(t,"showModal",pe));let W=e[5];const Y=Q=>Q[21];for(let Q=0;Q<W.length;Q+=1){let le=Ai(e,W,Q),he=Y(le);v.set(he,_[Q]=Mi(he,le))}return M=new yd({props:{documents:e[6]}}),{c(){ne(t.$$.fragment),l=P(),o=R("div"),r=R("div"),s=R("h5"),s.textContent="Vote Feedback Instructions",u=P(),a=R("p"),a.innerHTML=`Ask a question to receive an answer from the chatbot. If the response is
      satisfactory, click on the <span class="inline-button green svelte-vgv4ev">👍</span>
      button. If the response is not satisfactory, click on the
      <span class="inline-button red svelte-vgv4ev">👎</span> button.`,f=P(),c=R("button"),c.textContent="Download Data",d=P(),p=R("div"),g=R("section"),m=R("div");for(let Q=0;Q<_.length;Q+=1)_[Q].c();y=P(),w=R("div"),S=R("div"),ne(M.$$.fragment),C=P(),E=R("form"),$=R("input"),A=P(),k=R("button"),N=q(F),L=P(),O=R("p"),O.textContent="Note - may produce inaccurate information.",h(s,"class","underline bold svelte-vgv4ev"),h(a,"class","svelte-vgv4ev"),h(c,"class","svelte-vgv4ev"),h(r,"class","instructions svelte-vgv4ev"),h(m,"class","chat-log svelte-vgv4ev"),h(g,"class","chatbox svelte-vgv4ev"),h($,"class","chat-input-textarea svelte-vgv4ev"),h($,"placeholder","Type Question Here"),h(k,"class",D="btnyousend "+(e[1]===""?"":"active")+" svelte-vgv4ev"),h(k,"type","submit"),h(E,"class","chat-input-form svelte-vgv4ev"),h(S,"class","chat-and-question svelte-vgv4ev"),h(O,"class","message svelte-vgv4ev"),h(w,"class","chat-input-holder svelte-vgv4ev"),h(p,"class","ranked-chat svelte-vgv4ev"),h(o,"class","ranked-feedback-container svelte-vgv4ev")},m(Q,le){ee(t,Q,le),T(Q,l,le),T(Q,o,le),b(o,r),b(r,s),b(r,u),b(r,a),b(r,f),b(r,c),b(o,d),b(o,p),b(p,g),b(g,m);for(let he=0;he<_.length;he+=1)_[he]&&_[he].m(m,null);b(p,y),b(p,w),b(w,S),ee(M,S,null),b(S,C),b(S,E),b(E,$),Qe($,e[1]),b(E,A),b(E,k),b(k,N),b(w,L),b(w,O),B=!0,j||(ae=[x(c,"click",e[10]),x($,"input",e[14]),x(E,"submit",e[9])],j=!0)},p(Q,[le]){const he={};!n&&le&8&&(n=!0,he.showModal=Q[3],$n(()=>n=!1)),t.$set(he),le&289&&(W=Q[5],we(),_=pt(_,le,Y,1,Q,W,v,m,Eo,Mi,null,Ai),ye());const Vn={};le&64&&(Vn.documents=Q[6]),M.$set(Vn),le&2&&$.value!==Q[1]&&Qe($,Q[1]),(!B||le&20)&&F!==(F=(Q[2]?Q[4]:"Send")+"")&&K(N,F),(!B||le&2&&D!==(D="btnyousend "+(Q[1]===""?"":"active")+" svelte-vgv4ev"))&&h(k,"class",D)},i(Q){if(!B){z(t.$$.fragment,Q);for(let le=0;le<W.length;le+=1)z(_[le]);z(M.$$.fragment,Q),B=!0}},o(Q){V(t.$$.fragment,Q);for(let le=0;le<_.length;le+=1)V(_[le]);V(M.$$.fragment,Q),B=!1},d(Q){te(t,Q),Q&&I(l),Q&&I(o);for(let le=0;le<_.length;le+=1)_[le].d();te(M),j=!1,ve(ae)}}}function Bd(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function Ei(e){return e.rag_sources.length===0?"No Sources":e.rag_sources.join(", ")}function jd(e,t,n){let l,o,r,s;ue(e,Ge,E=>n(5,o=E)),ue(e,It,E=>n(16,r=E));let{feedback:u=!1}=t,{is_retrieval:a=!1}=t;const f=Ie([]);ue(e,f,E=>n(6,s=E));let c="",d="",p=!1,g=!1,m=[{label:"Answer",value:1,component:Ra},{label:"Modified Answer",value:2,component:Hd}];ct(()=>{v(),_()});async function _(){const $=await(await fetch("/retrieval/file/get")).json();console.log("data",$.files);const k=$.files.map((F,N)=>({id:String(N),name:F.name}));console.log("files",k),De(f,s=[...k],s)}async function v(){const A=(await(await fetch("/chat/rag_table/retrieve")).json()).rows;console.log("Got data from db",A);const k=A.map(F=>({id:F[0],question:F[1],answer:F[2],edited_answer:F[3],vote_status:F[4],rag_sources:F[5],source:F[6],source_content:F[7]}));De(Ge,o=[...k],o)}const y=async E=>{E.preventDefault(),c=d,n(1,d=""),n(2,p=!0);const $=[...r];let A={id:o.length+1,question:c,answer:"Loading...",rag_sources:$,vote_status:"na",source:["Loading..."],source_content:["Loading..."]};De(Ge,o=[...o,A],o);const k=a?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c,file_names:$})}):await fetch(`/chat/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c})});if(k.ok){const F=await k.json();console.log("response data",F),A.answer=F.answer,A.source=F.source,A.source_content=F.source_content,Ge.update(N=>(N[N.length-1]=A,N))}else{const F=await k.text();alert(F)}n(2,p=!1)};let w=0;setInterval(()=>{n(12,w=(w+1)%4)},200);function S(){n(3,g=!0)}function M(E){g=E,n(3,g)}function C(){d=this.value,n(1,d)}return e.$$set=E=>{"feedback"in E&&n(0,u=E.feedback),"is_retrieval"in E&&n(11,a=E.is_retrieval)},e.$$.update=()=>{e.$$.dirty&4096&&n(4,l=".".repeat(w).padEnd(3))},[u,d,p,g,l,o,s,f,m,y,S,a,w,M,C]}class xd extends ce{constructor(t){super(),de(this,t,jd,Gd,fe,{feedback:0,is_retrieval:11})}}function Fi(e){let t,n;return t=new Po({props:{is_retrieval:e[1]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Di(e){let t,n;return t=new Po({props:{feedback:!0,is_retrieval:e[1]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Ii(e){let t,n;return t=new xd({props:{feedback:!0,is_retrieval:e[1]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Ni(e){let t,n,l,o;const r=[Wd,Ud],s=[];function u(a,f){return a[1]?0:1}return t=u(e),n=s[t]=r[t](e),{c(){n.c(),l=Ce()},m(a,f){s[t].m(a,f),T(a,l,f),o=!0},p(a,f){let c=t;t=u(a),t===c?s[t].p(a,f):(we(),V(s[c],1,1,()=>{s[c]=null}),ye(),n=s[t],n?n.p(a,f):(n=s[t]=r[t](a),n.c()),z(n,1),n.m(l.parentNode,l))},i(a){o||(z(n),o=!0)},o(a){V(n),o=!1},d(a){s[t].d(a),a&&I(l)}}}function Ud(e){let t,n;return t=new pd({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p:U,i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Wd(e){let t,n;return t=new Po({props:{feedback:!0,is_retrieval:e[1]}}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},p(l,o){const r={};o&2&&(r.is_retrieval=l[1]),t.$set(r)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function Xd(e){let t,n,l,o,r,s=!e[0]&&Fi(e),u=e[0]==="vote"&&Di(e),a=e[0]==="rag"&&Ii(e),f=e[0]==="rank"&&Ni(e);return{c(){s&&s.c(),t=P(),u&&u.c(),n=P(),a&&a.c(),l=P(),f&&f.c(),o=Ce()},m(c,d){s&&s.m(c,d),T(c,t,d),u&&u.m(c,d),T(c,n,d),a&&a.m(c,d),T(c,l,d),f&&f.m(c,d),T(c,o,d),r=!0},p(c,[d]){c[0]?s&&(we(),V(s,1,1,()=>{s=null}),ye()):s?(s.p(c,d),d&1&&z(s,1)):(s=Fi(c),s.c(),z(s,1),s.m(t.parentNode,t)),c[0]==="vote"?u?(u.p(c,d),d&1&&z(u,1)):(u=Di(c),u.c(),z(u,1),u.m(n.parentNode,n)):u&&(we(),V(u,1,1,()=>{u=null}),ye()),c[0]==="rag"?a?(a.p(c,d),d&1&&z(a,1)):(a=Ii(c),a.c(),z(a,1),a.m(l.parentNode,l)):a&&(we(),V(a,1,1,()=>{a=null}),ye()),c[0]==="rank"?f?(f.p(c,d),d&1&&z(f,1)):(f=Ni(c),f.c(),z(f,1),f.m(o.parentNode,o)):f&&(we(),V(f,1,1,()=>{f=null}),ye())},i(c){r||(z(s),z(u),z(a),z(f),r=!0)},o(c){V(s),V(u),V(a),V(f),r=!1},d(c){s&&s.d(c),c&&I(t),u&&u.d(c),c&&I(n),a&&a.d(c),c&&I(l),f&&f.d(c),c&&I(o)}}}function Yd(e,t,n){let{feedback:l}=t,{is_retrieval:o}=t;return e.$$set=r=>{"feedback"in r&&n(0,l=r.feedback),"is_retrieval"in r&&n(1,o=r.is_retrieval)},[l,o]}class Qd extends ce{constructor(t){super(),de(this,t,Yd,Xd,fe,{feedback:0,is_retrieval:1})}}function Pi(e,t,n){const l=e.slice();return l[2]=t[n],l}function Ti(e){let t,n=e[2]+"",l,o;return{c(){t=R("option"),l=q(n),t.__value=o=e[2],t.value=t.__value},m(r,s){T(r,t,s),b(t,l)},p(r,s){s&1&&n!==(n=r[2]+"")&&K(l,n),s&1&&o!==(o=r[2])&&(t.__value=o,t.value=t.__value)},d(r){r&&I(t)}}}function Kd(e){let t,n=e[0],l=[];for(let o=0;o<n.length;o+=1)l[o]=Ti(Pi(e,n,o));return{c(){t=R("select");for(let o=0;o<l.length;o+=1)l[o].c()},m(o,r){T(o,t,r);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null)},p(o,[r]){if(r&1){n=o[0];let s;for(s=0;s<n.length;s+=1){const u=Pi(o,n,s);l[s]?l[s].p(u,r):(l[s]=Ti(u),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},i:U,o:U,d(o){o&&I(t),_e(l,o)}}}function Jd(e,t,n){let{data_endpoint:l}=t,o=[];return ct(async()=>{const r=await fetch(`/data/${l}`);n(0,o=await r.json())}),e.$$set=r=>{"data_endpoint"in r&&n(1,l=r.data_endpoint)},[o,l]}class Zd extends ce{constructor(t){super(),de(this,t,Jd,Kd,fe,{data_endpoint:1})}}function Yt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eh(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ea(e){let t,n,l;e.length!==2?(t=Yt,n=(u,a)=>Yt(e(u),a),l=(u,a)=>e(u)-a):(t=e===Yt||e===eh?e:th,n=e,l=e);function o(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(u[d],a)<0?f=d+1:c=d}while(f<c)}return f}function r(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(u[d],a)<=0?f=d+1:c=d}while(f<c)}return f}function s(u,a,f=0,c=u.length){const d=o(u,a,f,c-1);return d>f&&l(u[d-1],a)>-l(u[d],a)?d-1:d}return{left:o,center:s,right:r}}function th(){return 0}function nh(e){return e===null?NaN:+e}function*lh(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let l of e)(l=t(l,++n,e))!=null&&(l=+l)>=l&&(yield l)}}const oh=Ea(Yt),ih=oh.right;Ea(nh).center;const Fa=ih;function rh(e,t){let n=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&++n;else{let l=-1;for(let o of e)(o=t(o,++l,e))!=null&&(o=+o)>=o&&++n}return n}function sh(e,t){let n=0,l,o=0,r=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(l=s-o,o+=l/++n,r+=l*(s-o));else{let s=-1;for(let u of e)(u=t(u,++s,e))!=null&&(u=+u)>=u&&(l=u-o,o+=l/++n,r+=l*(u-o))}if(n>1)return r/(n-1)}function ah(e,t){const n=sh(e,t);return n&&Math.sqrt(n)}function vn(e,t){let n,l;if(t===void 0)for(const o of e)o!=null&&(n===void 0?o>=o&&(n=l=o):(n>o&&(n=o),l<o&&(l=o)));else{let o=-1;for(let r of e)(r=t(r,++o,e))!=null&&(n===void 0?r>=r&&(n=l=r):(n>r&&(n=r),l<r&&(l=r)))}return[n,l]}class Oi extends Map{constructor(t,n=ch){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[l,o]of t)this.set(l,o)}get(t){return super.get(zi(this,t))}has(t){return super.has(zi(this,t))}set(t,n){return super.set(uh(this,t),n)}delete(t){return super.delete(fh(this,t))}}function zi({_intern:e,_key:t},n){const l=t(n);return e.has(l)?e.get(l):n}function uh({_intern:e,_key:t},n){const l=t(n);return e.has(l)?e.get(l):(e.set(l,n),n)}function fh({_intern:e,_key:t},n){const l=t(n);return e.has(l)&&(n=e.get(l),e.delete(l)),n}function ch(e){return e!==null&&typeof e=="object"?e.valueOf():e}function dh(e){return e}function hh(e=Yt){if(e===Yt)return Da;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const l=e(t,n);return l||l===0?l:(e(n,n)===0)-(e(t,t)===0)}}function Da(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var gh=Array.prototype,ph=gh.slice;function Tl(e){return()=>e}const mh=Math.sqrt(50),_h=Math.sqrt(10),vh=Math.sqrt(2);function ul(e,t,n){const l=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(l)),r=l/Math.pow(10,o),s=r>=mh?10:r>=_h?5:r>=vh?2:1;let u,a,f;return o<0?(f=Math.pow(10,-o)/s,u=Math.round(e*f),a=Math.round(t*f),u/f<e&&++u,a/f>t&&--a,f=-f):(f=Math.pow(10,o)*s,u=Math.round(e/f),a=Math.round(t/f),u*f<e&&++u,a*f>t&&--a),a<u&&.5<=n&&n<2?ul(e,t,n*2):[u,a,f]}function Ia(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const l=t<e,[o,r,s]=l?ul(t,e,n):ul(e,t,n);if(!(r>=o))return[];const u=r-o+1,a=new Array(u);if(l)if(s<0)for(let f=0;f<u;++f)a[f]=(r-f)/-s;else for(let f=0;f<u;++f)a[f]=(r-f)*s;else if(s<0)for(let f=0;f<u;++f)a[f]=(o+f)/-s;else for(let f=0;f<u;++f)a[f]=(o+f)*s;return a}function tn(e,t,n){return t=+t,e=+e,n=+n,ul(e,t,n)[2]}function bh(e,t,n){t=+t,e=+e,n=+n;const l=t<e,o=l?tn(t,e,n):tn(e,t,n);return(l?-1:1)*(o<0?1/-o:o)}function wh(e,t,n){let l;for(;;){const o=tn(e,t,n);if(o===l||o===0||!isFinite(o))return[e,t];o>0?(e=Math.floor(e/o)*o,t=Math.ceil(t/o)*o):o<0&&(e=Math.ceil(e*o)/o,t=Math.floor(t*o)/o),l=o}}function yh(e){return Math.max(1,Math.ceil(Math.log(rh(e))/Math.LN2)+1)}function Na(){var e=dh,t=vn,n=yh;function l(o){Array.isArray(o)||(o=Array.from(o));var r,s=o.length,u,a,f=new Array(s);for(r=0;r<s;++r)f[r]=e(o[r],r,o);var c=t(f),d=c[0],p=c[1],g=n(f,d,p);if(!Array.isArray(g)){const S=p,M=+g;if(t===vn&&([d,p]=wh(d,p,M)),g=Ia(d,p,M),g[0]<=d&&(a=tn(d,p,M)),g[g.length-1]>=p)if(S>=p&&t===vn){const C=tn(d,p,M);isFinite(C)&&(C>0?p=(Math.floor(p/C)+1)*C:C<0&&(p=(Math.ceil(p*-C)+1)/-C))}else g.pop()}for(var m=g.length,_=0,v=m;g[_]<=d;)++_;for(;g[v-1]>p;)--v;(_||v<m)&&(g=g.slice(_,v),m=v-_);var y=new Array(m+1),w;for(r=0;r<=m;++r)w=y[r]=[],w.x0=r>0?g[r-1]:d,w.x1=r<m?g[r]:p;if(isFinite(a)){if(a>0)for(r=0;r<s;++r)(u=f[r])!=null&&d<=u&&u<=p&&y[Math.min(m,Math.floor((u-d)/a))].push(o[r]);else if(a<0){for(r=0;r<s;++r)if((u=f[r])!=null&&d<=u&&u<=p){const S=Math.floor((d-u)*a);y[Math.min(m,S+(g[S]<=u))].push(o[r])}}}else for(r=0;r<s;++r)(u=f[r])!=null&&d<=u&&u<=p&&y[Fa(g,u,0,m)].push(o[r]);return y}return l.value=function(o){return arguments.length?(e=typeof o=="function"?o:Tl(o),l):e},l.domain=function(o){return arguments.length?(t=typeof o=="function"?o:Tl([o[0],o[1]]),l):t},l.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:Tl(Array.isArray(o)?ph.call(o):o),l):n},l}function mt(e,t){let n;if(t===void 0)for(const l of e)l!=null&&(n<l||n===void 0&&l>=l)&&(n=l);else{let l=-1;for(let o of e)(o=t(o,++l,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function so(e,t){let n;if(t===void 0)for(const l of e)l!=null&&(n>l||n===void 0&&l>=l)&&(n=l);else{let l=-1;for(let o of e)(o=t(o,++l,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function Pa(e,t,n=0,l=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),l=Math.floor(Math.min(e.length-1,l)),!(n<=t&&t<=l))return e;for(o=o===void 0?Da:hh(o);l>n;){if(l-n>600){const a=l-n+1,f=t-n+1,c=Math.log(a),d=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*d*(a-d)/a)*(f-a/2<0?-1:1),g=Math.max(n,Math.floor(t-f*d/a+p)),m=Math.min(l,Math.floor(t+(a-f)*d/a+p));Pa(e,t,g,m,o)}const r=e[t];let s=n,u=l;for(fn(e,n,t),o(e[l],r)>0&&fn(e,n,l);s<u;){for(fn(e,s,u),++s,--u;o(e[s],r)<0;)++s;for(;o(e[u],r)>0;)--u}o(e[n],r)===0?fn(e,n,u):(++u,fn(e,u,l)),u<=t&&(n=u+1),t<=u&&(l=u-1)}return e}function fn(e,t,n){const l=e[t];e[t]=e[n],e[n]=l}function kh(e,t,n){if(e=Float64Array.from(lh(e,n)),!(!(l=e.length)||isNaN(t=+t))){if(t<=0||l<2)return so(e);if(t>=1)return mt(e);var l,o=(l-1)*t,r=Math.floor(o),s=mt(Pa(e,r).subarray(0,r+1)),u=so(e.subarray(r+1));return s+(u-s)*(o-r)}}function Sh(e,t){let n=0,l=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(++n,l+=o);else{let o=-1;for(let r of e)(r=t(r,++o,e))!=null&&(r=+r)>=r&&(++n,l+=r)}if(n)return l/n}function Ch(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var l=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,r=new Array(o);++l<o;)r[l]=e+l*n;return r}function $h(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}function nn(e){return e=fl(Math.abs(e)),e?e[1]:NaN}function Rh(e,t){return function(n,l){for(var o=n.length,r=[],s=0,u=e[0],a=0;o>0&&u>0&&(a+u+1>l&&(u=Math.max(1,l-a)),r.push(n.substring(o-=u,o+u)),!((a+=u+1)>l));)u=e[s=(s+1)%e.length];return r.reverse().join(t)}}function Ah(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Mh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cl(e){if(!(t=Mh.exec(e)))throw new Error("invalid format: "+e);var t;return new To({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}cl.prototype=To.prototype;function To(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}To.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Eh(e){e:for(var t=e.length,n=1,l=-1,o;n<t;++n)switch(e[n]){case".":l=o=n;break;case"0":l===0&&(l=n),o=n;break;default:if(!+e[n])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(o+1):e}var Ta;function Fh(e,t){var n=fl(e,t);if(!n)return e+"";var l=n[0],o=n[1],r=o-(Ta=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,s=l.length;return r===s?l:r>s?l+new Array(r-s+1).join("0"):r>0?l.slice(0,r)+"."+l.slice(r):"0."+new Array(1-r).join("0")+fl(e,Math.max(0,t+r-1))[0]}function Vi(e,t){var n=fl(e,t);if(!n)return e+"";var l=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+l:l.length>o+1?l.slice(0,o+1)+"."+l.slice(o+1):l+new Array(o-l.length+2).join("0")}const Li={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$h,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Vi(e*100,t),r:Vi,s:Fh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qi(e){return e}var Hi=Array.prototype.map,Gi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Dh(e){var t=e.grouping===void 0||e.thousands===void 0?qi:Rh(Hi.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?qi:Ah(Hi.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function f(d){d=cl(d);var p=d.fill,g=d.align,m=d.sign,_=d.symbol,v=d.zero,y=d.width,w=d.comma,S=d.precision,M=d.trim,C=d.type;C==="n"?(w=!0,C="g"):Li[C]||(S===void 0&&(S=12),M=!0,C="g"),(v||p==="0"&&g==="=")&&(v=!0,p="0",g="=");var E=_==="$"?n:_==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",$=_==="$"?l:/[%p]/.test(C)?s:"",A=Li[C],k=/[defgprs%]/.test(C);S=S===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function F(N){var D=E,L=$,O,B,j;if(C==="c")L=A(N)+L,N="";else{N=+N;var ae=N<0||1/N<0;if(N=isNaN(N)?a:A(Math.abs(N),S),M&&(N=Eh(N)),ae&&+N==0&&m!=="+"&&(ae=!1),D=(ae?m==="("?m:u:m==="-"||m==="("?"":m)+D,L=(C==="s"?Gi[8+Ta/3]:"")+L+(ae&&m==="("?")":""),k){for(O=-1,B=N.length;++O<B;)if(j=N.charCodeAt(O),48>j||j>57){L=(j===46?o+N.slice(O+1):N.slice(O))+L,N=N.slice(0,O);break}}}w&&!v&&(N=t(N,1/0));var pe=D.length+N.length+L.length,X=pe<y?new Array(y-pe+1).join(p):"";switch(w&&v&&(N=t(X+N,X.length?y-L.length:1/0),X=""),g){case"<":N=D+N+L+X;break;case"=":N=D+X+N+L;break;case"^":N=X.slice(0,pe=X.length>>1)+D+N+L+X.slice(pe);break;default:N=X+D+N+L;break}return r(N)}return F.toString=function(){return d+""},F}function c(d,p){var g=f((d=cl(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(nn(p)/3)))*3,_=Math.pow(10,-m),v=Gi[8+m/3];return function(y){return g(_*y)+v}}return{format:f,formatPrefix:c}}var Hn,vt,Oa;Ih({thousands:",",grouping:[3],currency:["$",""]});function Ih(e){return Hn=Dh(e),vt=Hn.format,Oa=Hn.formatPrefix,Hn}function Nh(e){return Math.max(0,-nn(Math.abs(e)))}function Ph(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nn(t)/3)))*3-nn(Math.abs(e)))}function Th(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nn(t)-nn(e))+1}function Oo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Oh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Bi=Symbol("implicit");function Mt(){var e=new Oi,t=[],n=[],l=Bi;function o(r){let s=e.get(r);if(s===void 0){if(l!==Bi)return l;e.set(r,s=t.push(r)-1)}return n[s%n.length]}return o.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new Oi;for(const s of r)e.has(s)||e.set(s,t.push(s)-1);return o},o.range=function(r){return arguments.length?(n=Array.from(r),o):n.slice()},o.unknown=function(r){return arguments.length?(l=r,o):l},o.copy=function(){return Mt(t,n).unknown(l)},Oo.apply(o,arguments),o}function Vt(){var e=Mt().unknown(void 0),t=e.domain,n=e.range,l=0,o=1,r,s,u=!1,a=0,f=0,c=.5;delete e.unknown;function d(){var p=t().length,g=o<l,m=g?o:l,_=g?l:o;r=(_-m)/Math.max(1,p-a+f*2),u&&(r=Math.floor(r)),m+=(_-m-r*(p-a))*c,s=r*(1-a),u&&(m=Math.round(m),s=Math.round(s));var v=Ch(p).map(function(y){return m+r*y});return n(g?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),d()):t()},e.range=function(p){return arguments.length?([l,o]=p,l=+l,o=+o,d()):[l,o]},e.rangeRound=function(p){return[l,o]=p,l=+l,o=+o,u=!0,d()},e.bandwidth=function(){return s},e.step=function(){return r},e.round=function(p){return arguments.length?(u=!!p,d()):u},e.padding=function(p){return arguments.length?(a=Math.min(1,f=+p),d()):a},e.paddingInner=function(p){return arguments.length?(a=Math.min(1,p),d()):a},e.paddingOuter=function(p){return arguments.length?(f=+p,d()):f},e.align=function(p){return arguments.length?(c=Math.max(0,Math.min(1,p)),d()):c},e.copy=function(){return Vt(t(),[l,o]).round(u).paddingInner(a).paddingOuter(f).align(c)},Oo.apply(d(),arguments)}function za(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return za(t())},e}function ji(){return za(Vt.apply(null,arguments).paddingInner(1))}function zo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Va(e,t){var n=Object.create(e.prototype);for(var l in t)n[l]=t[l];return n}function Pn(){}var Fn=.7,dl=1/Fn,Qt="\\s*([+-]?\\d+)\\s*",Dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zh=/^#([0-9a-f]{3,8})$/,Vh=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),Lh=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),qh=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${Dn}\\)$`),Hh=new RegExp(`^rgba\\(${rt},${rt},${rt},${Dn}\\)$`),Gh=new RegExp(`^hsl\\(${Dn},${rt},${rt}\\)$`),Bh=new RegExp(`^hsla\\(${Dn},${rt},${rt},${Dn}\\)$`),xi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zo(Pn,In,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ui,formatHex:Ui,formatHex8:jh,formatHsl:xh,formatRgb:Wi,toString:Wi});function Ui(){return this.rgb().formatHex()}function jh(){return this.rgb().formatHex8()}function xh(){return La(this).formatHsl()}function Wi(){return this.rgb().formatRgb()}function In(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Xi(t):n===3?new Be(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vh.exec(e))?new Be(t[1],t[2],t[3],1):(t=Lh.exec(e))?new Be(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qh.exec(e))?Gn(t[1],t[2],t[3],t[4]):(t=Hh.exec(e))?Gn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gh.exec(e))?Ki(t[1],t[2]/100,t[3]/100,1):(t=Bh.exec(e))?Ki(t[1],t[2]/100,t[3]/100,t[4]):xi.hasOwnProperty(e)?Xi(xi[e]):e==="transparent"?new Be(NaN,NaN,NaN,0):null}function Xi(e){return new Be(e>>16&255,e>>8&255,e&255,1)}function Gn(e,t,n,l){return l<=0&&(e=t=n=NaN),new Be(e,t,n,l)}function Uh(e){return e instanceof Pn||(e=In(e)),e?(e=e.rgb(),new Be(e.r,e.g,e.b,e.opacity)):new Be}function ao(e,t,n,l){return arguments.length===1?Uh(e):new Be(e,t,n,l??1)}function Be(e,t,n,l){this.r=+e,this.g=+t,this.b=+n,this.opacity=+l}zo(Be,ao,Va(Pn,{brighter(e){return e=e==null?dl:Math.pow(dl,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fn:Math.pow(Fn,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Be(zt(this.r),zt(this.g),zt(this.b),hl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yi,formatHex:Yi,formatHex8:Wh,formatRgb:Qi,toString:Qi}));function Yi(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}`}function Wh(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}${Tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qi(){const e=hl(this.opacity);return`${e===1?"rgb(":"rgba("}${zt(this.r)}, ${zt(this.g)}, ${zt(this.b)}${e===1?")":`, ${e})`}`}function hl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tt(e){return e=zt(e),(e<16?"0":"")+e.toString(16)}function Ki(e,t,n,l){return l<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ze(e,t,n,l)}function La(e){if(e instanceof Ze)return new Ze(e.h,e.s,e.l,e.opacity);if(e instanceof Pn||(e=In(e)),!e)return new Ze;if(e instanceof Ze)return e;e=e.rgb();var t=e.r/255,n=e.g/255,l=e.b/255,o=Math.min(t,n,l),r=Math.max(t,n,l),s=NaN,u=r-o,a=(r+o)/2;return u?(t===r?s=(n-l)/u+(n<l)*6:n===r?s=(l-t)/u+2:s=(t-n)/u+4,u/=a<.5?r+o:2-r-o,s*=60):u=a>0&&a<1?0:s,new Ze(s,u,a,e.opacity)}function Xh(e,t,n,l){return arguments.length===1?La(e):new Ze(e,t,n,l??1)}function Ze(e,t,n,l){this.h=+e,this.s=+t,this.l=+n,this.opacity=+l}zo(Ze,Xh,Va(Pn,{brighter(e){return e=e==null?dl:Math.pow(dl,e),new Ze(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fn:Math.pow(Fn,e),new Ze(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,l=n+(n<.5?n:1-n)*t,o=2*n-l;return new Be(Ol(e>=240?e-240:e+120,o,l),Ol(e,o,l),Ol(e<120?e+240:e-120,o,l),this.opacity)},clamp(){return new Ze(Ji(this.h),Bn(this.s),Bn(this.l),hl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hl(this.opacity);return`${e===1?"hsl(":"hsla("}${Ji(this.h)}, ${Bn(this.s)*100}%, ${Bn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ji(e){return e=(e||0)%360,e<0?e+360:e}function Bn(e){return Math.max(0,Math.min(1,e||0))}function Ol(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Vo=e=>()=>e;function Yh(e,t){return function(n){return e+n*t}}function Qh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(l){return Math.pow(e+l*t,n)}}function Kh(e){return(e=+e)==1?qa:function(t,n){return n-t?Qh(t,n,e):Vo(isNaN(t)?n:t)}}function qa(e,t){var n=t-e;return n?Yh(e,n):Vo(isNaN(e)?t:e)}const uo=function e(t){var n=Kh(t);function l(o,r){var s=n((o=ao(o)).r,(r=ao(r)).r),u=n(o.g,r.g),a=n(o.b,r.b),f=qa(o.opacity,r.opacity);return function(c){return o.r=s(c),o.g=u(c),o.b=a(c),o.opacity=f(c),o+""}}return l.gamma=e,l}(1);function Jh(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,l=t.slice(),o;return function(r){for(o=0;o<n;++o)l[o]=e[o]*(1-r)+t[o]*r;return l}}function Zh(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function eg(e,t){var n=t?t.length:0,l=e?Math.min(n,e.length):0,o=new Array(l),r=new Array(n),s;for(s=0;s<l;++s)o[s]=Tn(e[s],t[s]);for(;s<n;++s)r[s]=t[s];return function(u){for(s=0;s<l;++s)r[s]=o[s](u);return r}}function tg(e,t){var n=new Date;return e=+e,t=+t,function(l){return n.setTime(e*(1-l)+t*l),n}}function gl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ng(e,t){var n={},l={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Tn(e[o],t[o]):l[o]=t[o];return function(r){for(o in n)l[o]=n[o](r);return l}}var fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zl=new RegExp(fo.source,"g");function lg(e){return function(){return e}}function og(e){return function(t){return e(t)+""}}function ig(e,t){var n=fo.lastIndex=zl.lastIndex=0,l,o,r,s=-1,u=[],a=[];for(e=e+"",t=t+"";(l=fo.exec(e))&&(o=zl.exec(t));)(r=o.index)>n&&(r=t.slice(n,r),u[s]?u[s]+=r:u[++s]=r),(l=l[0])===(o=o[0])?u[s]?u[s]+=o:u[++s]=o:(u[++s]=null,a.push({i:s,x:gl(l,o)})),n=zl.lastIndex;return n<t.length&&(r=t.slice(n),u[s]?u[s]+=r:u[++s]=r),u.length<2?a[0]?og(a[0].x):lg(t):(t=a.length,function(f){for(var c=0,d;c<t;++c)u[(d=a[c]).i]=d.x(f);return u.join("")})}function Tn(e,t){var n=typeof t,l;return t==null||n==="boolean"?Vo(t):(n==="number"?gl:n==="string"?(l=In(t))?(t=l,uo):ig:t instanceof In?uo:t instanceof Date?tg:Zh(t)?Jh:Array.isArray(t)?eg:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ng:gl)(e,t)}function Ha(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function rg(e){return function(){return e}}function sg(e){return+e}var Zi=[0,1];function kt(e){return e}function co(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rg(isNaN(t)?NaN:.5)}function ag(e,t){var n;return e>t&&(n=e,e=t,t=n),function(l){return Math.max(e,Math.min(t,l))}}function ug(e,t,n){var l=e[0],o=e[1],r=t[0],s=t[1];return o<l?(l=co(o,l),r=n(s,r)):(l=co(l,o),r=n(r,s)),function(u){return r(l(u))}}function fg(e,t,n){var l=Math.min(e.length,t.length)-1,o=new Array(l),r=new Array(l),s=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<l;)o[s]=co(e[s],e[s+1]),r[s]=n(t[s],t[s+1]);return function(u){var a=Fa(e,u,1,l)-1;return r[a](o[a](u))}}function cg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dg(){var e=Zi,t=Zi,n=Tn,l,o,r,s=kt,u,a,f;function c(){var p=Math.min(e.length,t.length);return s!==kt&&(s=ag(e[0],e[p-1])),u=p>2?fg:ug,a=f=null,d}function d(p){return p==null||isNaN(p=+p)?r:(a||(a=u(e.map(l),t,n)))(l(s(p)))}return d.invert=function(p){return s(o((f||(f=u(t,e.map(l),gl)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,sg),c()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),c()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),n=Ha,c()},d.clamp=function(p){return arguments.length?(s=p?!0:kt,c()):s!==kt},d.interpolate=function(p){return arguments.length?(n=p,c()):n},d.unknown=function(p){return arguments.length?(r=p,d):r},function(p,g){return l=p,o=g,c()}}function hg(){return dg()(kt,kt)}function gg(e,t,n,l){var o=bh(e,t,n),r;switch(l=cl(l??",f"),l.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(r=Ph(o,s))&&(l.precision=r),Oa(l,s)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(r=Th(o,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=r-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(r=Nh(o))&&(l.precision=r-(l.type==="%")*2);break}}return vt(l)}function Ga(e){var t=e.domain;return e.ticks=function(n){var l=t();return Ia(l[0],l[l.length-1],n??10)},e.tickFormat=function(n,l){var o=t();return gg(o[0],o[o.length-1],n??10,l)},e.nice=function(n){n==null&&(n=10);var l=t(),o=0,r=l.length-1,s=l[o],u=l[r],a,f,c=10;for(u<s&&(f=s,s=u,u=f,f=o,o=r,r=f);c-- >0;){if(f=tn(s,u,n),f===a)return l[o]=s,l[r]=u,t(l);if(f>0)s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f;else if(f<0)s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f;else break;a=f}return e},e}function Xe(){var e=hg();return e.copy=function(){return cg(e,Xe())},Oo.apply(e,arguments),Ga(e)}function pg(){var e=0,t=1,n,l,o,r,s=kt,u=!1,a;function f(d){return d==null||isNaN(d=+d)?a:s(o===0?.5:(d=(r(d)-n)*o,u?Math.max(0,Math.min(1,d)):d))}f.domain=function(d){return arguments.length?([e,t]=d,n=r(e=+e),l=r(t=+t),o=n===l?0:1/(l-n),f):[e,t]},f.clamp=function(d){return arguments.length?(u=!!d,f):u},f.interpolator=function(d){return arguments.length?(s=d,f):s};function c(d){return function(p){var g,m;return arguments.length?([g,m]=p,s=d(g,m),f):[s(0),s(1)]}}return f.range=c(Tn),f.rangeRound=c(Ha),f.unknown=function(d){return arguments.length?(a=d,f):a},function(d){return r=d,n=d(e),l=d(t),o=n===l?0:1/(l-n),f}}function mg(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ba(){var e=Ga(pg()(kt));return e.copy=function(){return mg(e,Ba())},Oh.apply(e,arguments)}function lt(e){return function(){return e}}const ho=Math.PI,go=2*ho,Nt=1e-6,_g=go-Nt;function ja(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function vg(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ja;const n=10**t;return function(l){this._+=l[0];for(let o=1,r=l.length;o<r;++o)this._+=Math.round(arguments[o]*n)/n+l[o]}}class bg{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ja:vg(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,l,o){this._append`Q${+t},${+n},${this._x1=+l},${this._y1=+o}`}bezierCurveTo(t,n,l,o,r,s){this._append`C${+t},${+n},${+l},${+o},${this._x1=+r},${this._y1=+s}`}arcTo(t,n,l,o,r){if(t=+t,n=+n,l=+l,o=+o,r=+r,r<0)throw new Error(`negative radius: ${r}`);let s=this._x1,u=this._y1,a=l-t,f=o-n,c=s-t,d=u-n,p=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Nt)if(!(Math.abs(d*a-f*c)>Nt)||!r)this._append`L${this._x1=t},${this._y1=n}`;else{let g=l-s,m=o-u,_=a*a+f*f,v=g*g+m*m,y=Math.sqrt(_),w=Math.sqrt(p),S=r*Math.tan((ho-Math.acos((_+p-v)/(2*y*w)))/2),M=S/w,C=S/y;Math.abs(M-1)>Nt&&this._append`L${t+M*c},${n+M*d}`,this._append`A${r},${r},0,0,${+(d*g>c*m)},${this._x1=t+C*a},${this._y1=n+C*f}`}}arc(t,n,l,o,r,s){if(t=+t,n=+n,l=+l,s=!!s,l<0)throw new Error(`negative radius: ${l}`);let u=l*Math.cos(o),a=l*Math.sin(o),f=t+u,c=n+a,d=1^s,p=s?o-r:r-o;this._x1===null?this._append`M${f},${c}`:(Math.abs(this._x1-f)>Nt||Math.abs(this._y1-c)>Nt)&&this._append`L${f},${c}`,l&&(p<0&&(p=p%go+go),p>_g?this._append`A${l},${l},0,1,${d},${t-u},${n-a}A${l},${l},0,1,${d},${this._x1=f},${this._y1=c}`:p>Nt&&this._append`A${l},${l},0,${+(p>=ho)},${d},${this._x1=t+l*Math.cos(r)},${this._y1=n+l*Math.sin(r)}`)}rect(t,n,l,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${l=+l}v${+o}h${-l}Z`}toString(){return this._}}function wg(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const l=Math.floor(n);if(!(l>=0))throw new RangeError(`invalid digits: ${n}`);t=l}return e},()=>new bg(t)}function xa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ua(e){this._context=e}Ua.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yg(e){return new Ua(e)}function kg(e){return e[0]}function Sg(e){return e[1]}function Cg(e,t){var n=lt(!0),l=null,o=yg,r=null,s=wg(u);e=typeof e=="function"?e:e===void 0?kg:lt(e),t=typeof t=="function"?t:t===void 0?Sg:lt(t);function u(a){var f,c=(a=xa(a)).length,d,p=!1,g;for(l==null&&(r=o(g=s())),f=0;f<=c;++f)!(f<c&&n(d=a[f],f,a))===p&&((p=!p)?r.lineStart():r.lineEnd()),p&&r.point(+e(d,f,a),+t(d,f,a));if(g)return r=null,g+""||null}return u.x=function(a){return arguments.length?(e=typeof a=="function"?a:lt(+a),u):e},u.y=function(a){return arguments.length?(t=typeof a=="function"?a:lt(+a),u):t},u.defined=function(a){return arguments.length?(n=typeof a=="function"?a:lt(!!a),u):n},u.curve=function(a){return arguments.length?(o=a,l!=null&&(r=o(l)),u):o},u.context=function(a){return arguments.length?(a==null?l=r=null:r=o(l=a),u):l},u}function po(e,t){if((s=e.length)>1)for(var n=1,l,o,r=e[t[0]],s,u=r.length;n<s;++n)for(o=r,r=e[t[n]],l=0;l<u;++l)r[l][1]+=r[l][0]=isNaN(o[l][1])?o[l][0]:o[l][1]}function mo(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function $g(e,t){return e[t]}function Rg(e){const t=[];return t.key=e,t}function Ag(){var e=lt([]),t=mo,n=po,l=$g;function o(r){var s=Array.from(e.apply(this,arguments),Rg),u,a=s.length,f=-1,c;for(const d of r)for(u=0,++f;u<a;++u)(s[u][f]=[0,+l(d,s[u].key,f,r)]).data=d;for(u=0,c=xa(t(s));u<a;++u)s[c[u]].index=u;return n(s,c),s}return o.keys=function(r){return arguments.length?(e=typeof r=="function"?r:lt(Array.from(r)),o):e},o.value=function(r){return arguments.length?(l=typeof r=="function"?r:lt(+r),o):l},o.order=function(r){return arguments.length?(t=r==null?mo:typeof r=="function"?r:lt(Array.from(r)),o):t},o.offset=function(r){return arguments.length?(n=r??po,o):n},o}function er(e,t,n){const l=e.slice();return l[21]=t[n],l[23]=n,l}function tr(e,t,n){const l=e.slice();l[24]=t[n];const o=l[4][l[21].key];return l[25]=o,l}function nr(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m,_=e[21].key+"",v,y,w=e[11](e[25]/e[2])+"",S,M,C,E,$,A;return{c(){t=G("rect"),f=G("line"),m=G("text"),v=q(_),y=G("tspan"),S=q(w),C=P(),h(t,"class",n="horizontal-bar-rect "+(e[5]===e[23]?"selected":"unselected")+" svelte-tg5p7i"),h(t,"y",l=e[8](e[24].data.xVal)),h(t,"x",o=e[7](e[24][0])),h(t,"stroke","var(--black)"),h(t,"width",r=e[7](e[24][1])-e[7](e[24][0])),h(t,"fill",s=e[10](e[21].key)),h(t,"opacity",u=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(t,"height",a=e[8].bandwidth()),h(f,"class","line svelte-tg5p7i"),h(f,"x1",c=e[7](e[24][0])),h(f,"x2",d=e[7](e[24][0])),h(f,"y1",p=e[8](e[24].data.xVal)-St),h(f,"y2",g=e[8].bandwidth()+e[8](e[24].data.xVal)+St),h(f,"stroke","black"),h(y,"x",M=(e[7](e[24][0])+e[7](e[24][1]))/2),h(y,"dy","16"),h(y,"text-anchor","middle"),h(m,"class","horizontal-bar-text svelte-tg5p7i"),h(m,"y",E=e[8].bandwidth()/2),h(m,"x",$=(e[7](e[24][0])+e[7](e[24][1]))/2),h(m,"opacity",A=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(m,"text-anchor","middle")},m(k,F){T(k,t,F),T(k,f,F),T(k,m,F),b(m,v),b(m,y),b(y,S),b(m,C)},p(k,F){F&32&&n!==(n="horizontal-bar-rect "+(k[5]===k[23]?"selected":"unselected")+" svelte-tg5p7i")&&h(t,"class",n),F&320&&l!==(l=k[8](k[24].data.xVal))&&h(t,"y",l),F&192&&o!==(o=k[7](k[24][0]))&&h(t,"x",o),F&192&&r!==(r=k[7](k[24][1])-k[7](k[24][0]))&&h(t,"width",r),F&64&&s!==(s=k[10](k[21].key))&&h(t,"fill",s),F&32&&u!==(u=k[5]==="all"||k[5]===k[23]?"1":"0.25")&&h(t,"opacity",u),F&256&&a!==(a=k[8].bandwidth())&&h(t,"height",a),F&192&&c!==(c=k[7](k[24][0]))&&h(f,"x1",c),F&192&&d!==(d=k[7](k[24][0]))&&h(f,"x2",d),F&320&&p!==(p=k[8](k[24].data.xVal)-St)&&h(f,"y1",p),F&320&&g!==(g=k[8].bandwidth()+k[8](k[24].data.xVal)+St)&&h(f,"y2",g),F&64&&_!==(_=k[21].key+"")&&K(v,_),F&84&&w!==(w=k[11](k[25]/k[2])+"")&&K(S,w),F&192&&M!==(M=(k[7](k[24][0])+k[7](k[24][1]))/2)&&h(y,"x",M),F&256&&E!==(E=k[8].bandwidth()/2)&&h(m,"y",E),F&192&&$!==($=(k[7](k[24][0])+k[7](k[24][1]))/2)&&h(m,"x",$),F&32&&A!==(A=k[5]==="all"||k[5]===k[23]?"1":"0.25")&&h(m,"opacity",A)},d(k){k&&I(t),k&&I(f),k&&I(m)}}}function lr(e){let t,n,l,o,r,s,u,a,f=e[21],c=[];for(let g=0;g<f.length;g+=1)c[g]=nr(tr(e,f,g));function d(){return e[17](e[23],e[21])}function p(){return e[18](e[23],e[21])}return{c(){t=G("g");for(let g=0;g<c.length;g+=1)c[g].c();n=G("line"),h(n,"class","line svelte-tg5p7i"),h(n,"x1",l=e[3]-e[9].right),h(n,"x2",o=e[3]-e[9].right),h(n,"y1",r=e[8]("A")-St),h(n,"y2",s=e[8].bandwidth()+e[8]("A")+St),h(n,"stroke","black"),h(t,"class","series svelte-tg5p7i"),h(t,"role","button"),h(t,"tabindex","0")},m(g,m){T(g,t,m);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(t,null);b(t,n),u||(a=[x(t,"click",d),x(t,"keypress",p)],u=!0)},p(g,m){if(e=g,m&3572){f=e[21];let _;for(_=0;_<f.length;_+=1){const v=tr(e,f,_);c[_]?c[_].p(v,m):(c[_]=nr(v),c[_].c(),c[_].m(t,n))}for(;_<c.length;_+=1)c[_].d(1);c.length=f.length}m&8&&l!==(l=e[3]-e[9].right)&&h(n,"x1",l),m&8&&o!==(o=e[3]-e[9].right)&&h(n,"x2",o),m&256&&r!==(r=e[8]("A")-St)&&h(n,"y1",r),m&256&&s!==(s=e[8].bandwidth()+e[8]("A")+St)&&h(n,"y2",s)},d(g){g&&I(t),_e(c,g),u=!1,ve(a)}}}function Mg(e){let t,n,l,o,r,s=e[6],u=[];for(let a=0;a<s.length;a+=1)u[a]=lr(er(e,s,a));return{c(){t=R("div"),t.innerHTML="<p>Feedback Distribution</p>",n=P(),l=R("div"),o=G("svg");for(let a=0;a<u.length;a+=1)u[a].c();h(o,"width",e[1]),h(o,"height",e[0]),h(l,"id","stackedrect-holder"),h(l,"class","svelte-tg5p7i"),Me(()=>e[19].call(l))},m(a,f){T(a,t,f),T(a,n,f),T(a,l,f),b(l,o);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(o,null);r=ft(l,e[19].bind(l))},p(a,[f]){if(f&8188){s=a[6];let c;for(c=0;c<s.length;c+=1){const d=er(a,s,c);u[c]?u[c].p(d,f):(u[c]=lr(d),u[c].c(),u[c].m(o,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=s.length}f&2&&h(o,"width",a[1]),f&1&&h(o,"height",a[0])},i:U,o:U,d(a){a&&I(t),a&&I(n),a&&I(l),_e(u,a),r()}}}const St=5;function Eg(e,t,n){let l,o,r,s,u,a,f,c,d,p,g;ue(e,at,A=>n(15,d=A)),ue(e,ei,A=>n(4,p=A)),ue(e,Ge,A=>n(16,g=A));let m=300,_=300;const v={up:2,down:1,"n/a":0,all:"all"},y={top:10,bottom:10,left:25,right:5},w=Mt().range(["var(--yellow)","var(--red)","var(--green)"]),S=vt(".0%");function M(A,k){l===A?n(5,l="all"):n(5,l=A),De(at,d=l==="all"?"all":k,d)}const C=(A,k)=>M(A,k.key),E=(A,k)=>M(A,k.key);function $(){_=this.offsetWidth,m=this.offsetHeight,n(1,_),n(0,m)}return e.$$.update=()=>{e.$$.dirty&32768&&n(5,l=v[d]),e.$$.dirty&2&&n(3,o=_-y.left-y.right),e.$$.dirty&1&&n(14,r=m-y.top-y.bottom),e.$$.dirty&65552&&g.forEach(A=>{De(ei,p[A.vote_status]++,p)}),e.$$.dirty&16&&n(2,s=p.up+p.down+p["n/a"]),e.$$.dirty&16384&&n(8,u=Vt().rangeRound([y.top,r-y.bottom]).padding(0).domain(["a"])),e.$$.dirty&12&&n(7,a=Xe().rangeRound([y.left,o-y.right]).domain([0,s])),e.$$.dirty&8208&&n(6,c=f([p]))},n(13,f=Ag().keys(["n/a","down","up"]).order(mo).offset(po)),[m,_,s,o,p,l,c,a,u,y,w,S,M,f,r,d,g,C,E,$]}class Wa extends ce{constructor(t){super(),de(this,t,Eg,Mg,fe,{})}}function Fg(e){let t,n,l,o,r,s,u,a,f,c,d,p=e[3][e[2]]+"",g,m;return{c(){t=R("div"),n=R("div"),l=q("Q: "),o=q(e[0]),r=P(),s=R("div"),u=q("A: "),a=q(e[1]),f=P(),c=R("div"),d=q("Rating: "),g=q(p),h(n,"class","question svelte-szi0e"),h(s,"class","answer svelte-szi0e"),h(c,"class",m="feedback "+e[2]+" svelte-szi0e"),h(t,"class","qa-card svelte-szi0e")},m(_,v){T(_,t,v),b(t,n),b(n,l),b(n,o),b(t,r),b(t,s),b(s,u),b(s,a),b(t,f),b(t,c),b(c,d),b(c,g)},p(_,[v]){v&1&&K(o,_[0]),v&2&&K(a,_[1]),v&4&&p!==(p=_[3][_[2]]+"")&&K(g,p),v&4&&m!==(m="feedback "+_[2]+" svelte-szi0e")&&h(c,"class",m)},i:U,o:U,d(_){_&&I(t)}}}function Dg(e,t,n){let{question:l="What is gradient descent?"}=t,{answer:o="Gradient descent is an algorithm used to minimize a loss function by taking small steps in the direction of steepest descent."}=t,{feedback:r="Good: 👍"}=t;const s={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"};return e.$$set=u=>{"question"in u&&n(0,l=u.question),"answer"in u&&n(1,o=u.answer),"feedback"in u&&n(2,r=u.feedback)},[l,o,r,s]}class Ig extends ce{constructor(t){super(),de(this,t,Dg,Fg,fe,{question:0,answer:1,feedback:2})}}function or(e,t,n){const l=e.slice();return l[5]=t[n].question,l[6]=t[n].answer,l[7]=t[n].vote_status,l}function ir(e){let t,n,l,o,r;return n=new Ig({props:{question:e[5],answer:e[6],feedback:e[7]}}),{c(){t=R("div"),ne(n.$$.fragment),l=P()},m(s,u){T(s,t,u),ee(n,t,null),b(t,l),r=!0},p(s,u){const a={};u&1&&(a.question=s[5]),u&1&&(a.answer=s[6]),u&1&&(a.feedback=s[7]),n.$set(a)},i(s){r||(z(n.$$.fragment,s),s&&Me(()=>{r&&(o||(o=ot(t,e[1],{duration:300},!0)),o.run(1))}),r=!0)},o(s){V(n.$$.fragment,s),s&&(o||(o=ot(t,e[1],{duration:300},!1)),o.run(0)),r=!1},d(s){s&&I(t),te(n),s&&o&&o.end()}}}function Ng(e){let t,n,l=e[0],o=[];for(let s=0;s<l.length;s+=1)o[s]=ir(or(e,l,s));const r=s=>V(o[s],1,1,()=>{o[s]=null});return{c(){t=R("div");for(let s=0;s<o.length;s+=1)o[s].c();h(t,"class","qa-container svelte-1xv9cfi")},m(s,u){T(s,t,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(s,[u]){if(u&1){l=s[0];let a;for(a=0;a<l.length;a+=1){const f=or(s,l,a);o[a]?(o[a].p(f,u),z(o[a],1)):(o[a]=ir(f),o[a].c(),z(o[a],1),o[a].m(t,null))}for(we(),a=l.length;a<o.length;a+=1)r(a);ye()}},i(s){if(!n){for(let u=0;u<l.length;u+=1)z(o[u]);n=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)V(o[u]);n=!1},d(s){s&&I(t),_e(o,s)}}}function Pg(e,t,n){let l,o,r,s;ue(e,oo,a=>n(4,o=a)),ue(e,at,a=>n(2,r=a)),ue(e,An,a=>n(3,s=a));const u=(a,{delay:f=0,duration:c=1e3,easing:d=Fo})=>En(a,{delay:f,duration:c,easing:d});return e.$$.update=()=>{e.$$.dirty&12&&n(0,l=r==="all"?s:s.filter(a=>a.vote_status===r)),e.$$.dirty&1&&De(oo,o=md(l),o)},[l,u,r,s]}class Xa extends ce{constructor(t){super(),de(this,t,Pg,Ng,fe,{})}}function rr(e,t,n){const l=e.slice();return l[13]=t[n],l}function sr(e,t,n){const l=e.slice();return l[16]=t[n],l}function ar(e,t,n){const l=e.slice();return l[16]=t[n],l}function ur(e){let t,n,l,o,r=e[16]+"",s,u;return{c(){t=G("g"),n=G("line"),o=G("text"),s=q(r),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[10].bottom+e[10].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-1oikip4"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[6](e[16])+e[6].bandwidth()/2} ${e[2]-e[10].bottom})`)},m(a,f){T(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&4&&l!==(l=-a[2]+a[10].bottom+a[10].top)&&h(n,"y2",l),f&16&&r!==(r=a[16]+"")&&K(s,r),f&84&&u!==(u=`translate(${a[6](a[16])+a[6].bandwidth()/2} ${a[2]-a[10].bottom})`)&&h(t,"transform",u)},d(a){a&&I(t)}}}function fr(e){let t,n,l,o;return{c(){t=G("g"),n=G("line"),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1",0),h(n,"x2",l=e[3]-e[10].right-e[10].left),h(n,"y1","0"),h(n,"y2","0"),h(n,"stroke","black"),h(t,"transform",o=`translate(${e[10].left} ${e[5](e[16])+0})`)},m(r,s){T(r,t,s),b(t,n)},p(r,s){s&8&&l!==(l=r[3]-r[10].right-r[10].left)&&h(n,"x2",l),s&32&&o!==(o=`translate(${r[10].left} ${r[5](r[16])+0})`)&&h(t,"transform",o)},d(r){r&&I(t)}}}function cr(e){let t,n,l,o,r,s,u,a,f=Math.round(e[11](e[13].count))+"",c,d,p;return{c(){t=G("g"),n=G("rect"),a=G("text"),c=q(f),h(n,"x",l=e[6](e[13].question)),h(n,"y",o=e[5](e[13].count)),h(n,"height",r=e[2]-e[5](e[13].count)-e[10].bottom),h(n,"fill",s=e[9][e[7]]),h(n,"fill-opacity","0.95"),h(n,"width",u=e[6].bandwidth()),h(n,"class","svelte-1oikip4"),h(a,"class","axis-text svelte-1oikip4"),h(a,"x",d=e[6](e[13].question)+e[6].bandwidth()/2),h(a,"y",p=e[5](e[13].count)-5),h(a,"text-anchor","middle"),h(t,"class","series")},m(g,m){T(g,t,m),b(t,n),b(t,a),b(a,c)},p(g,m){m&80&&l!==(l=g[6](g[13].question))&&h(n,"x",l),m&48&&o!==(o=g[5](g[13].count))&&h(n,"y",o),m&52&&r!==(r=g[2]-g[5](g[13].count)-g[10].bottom)&&h(n,"height",r),m&128&&s!==(s=g[9][g[7]])&&h(n,"fill",s),m&64&&u!==(u=g[6].bandwidth())&&h(n,"width",u),m&16&&f!==(f=Math.round(g[11](g[13].count))+"")&&K(c,f),m&80&&d!==(d=g[6](g[13].question)+g[6].bandwidth()/2)&&h(a,"x",d),m&48&&p!==(p=g[5](g[13].count)-5)&&h(a,"y",p)},d(g){g&&I(t)}}}function Tg(e){let t,n,l,o,r,s,u=e[8][e[7]]+"",a,f,c,d,p,g,m,_,v,y=e[4].map(dr),w=[];for(let $=0;$<y.length;$+=1)w[$]=ur(ar(e,y,$));let S=e[5].ticks(),M=[];for(let $=0;$<S.length;$+=1)M[$]=fr(sr(e,S,$));let C=e[4],E=[];for(let $=0;$<C.length;$+=1)E[$]=cr(rr(e,C,$));return{c(){t=R("div"),n=G("svg");for(let $=0;$<w.length;$+=1)w[$].c();l=Ce();for(let $=0;$<M.length;$+=1)M[$].c();o=Ce();for(let $=0;$<E.length;$+=1)E[$].c();r=G("text"),s=q("Question Type: "),a=q(u),c=G("line"),m=G("line"),h(r,"class","chart-title svelte-1oikip4"),h(r,"y",e[10].top/2+1),h(r,"x",f=(e[3]+e[10].left)/2),h(r,"text-anchor","middle"),h(c,"class","axis-line svelte-1oikip4"),h(c,"x1",e[10].left),h(c,"x2",d=e[3]-e[10].right),h(c,"y1",p=e[2]-e[10].bottom),h(c,"y2",g=e[2]-e[10].bottom),h(m,"class","axis-line svelte-1oikip4"),h(m,"x1",e[10].left),h(m,"x2",e[10].left),h(m,"y1",e[10].top),h(m,"y2",_=e[2]-e[10].bottom),h(m,"opacity","0"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","stackedrect-holder"),h(t,"class","svelte-1oikip4"),Me(()=>e[12].call(t))},m($,A){T($,t,A),b(t,n);for(let k=0;k<w.length;k+=1)w[k]&&w[k].m(n,null);b(n,l);for(let k=0;k<M.length;k+=1)M[k]&&M[k].m(n,null);b(n,o);for(let k=0;k<E.length;k+=1)E[k]&&E[k].m(n,null);b(n,r),b(r,s),b(r,a),b(n,c),b(n,m),v=ft(t,e[12].bind(t))},p($,[A]){if(A&1108){y=$[4].map(dr);let k;for(k=0;k<y.length;k+=1){const F=ar($,y,k);w[k]?w[k].p(F,A):(w[k]=ur(F),w[k].c(),w[k].m(n,l))}for(;k<w.length;k+=1)w[k].d(1);w.length=y.length}if(A&1064){S=$[5].ticks();let k;for(k=0;k<S.length;k+=1){const F=sr($,S,k);M[k]?M[k].p(F,A):(M[k]=fr(F),M[k].c(),M[k].m(n,o))}for(;k<M.length;k+=1)M[k].d(1);M.length=S.length}if(A&3828){C=$[4];let k;for(k=0;k<C.length;k+=1){const F=rr($,C,k);E[k]?E[k].p(F,A):(E[k]=cr(F),E[k].c(),E[k].m(n,r))}for(;k<E.length;k+=1)E[k].d(1);E.length=C.length}A&128&&u!==(u=$[8][$[7]]+"")&&K(a,u),A&8&&f!==(f=($[3]+$[10].left)/2)&&h(r,"x",f),A&8&&d!==(d=$[3]-$[10].right)&&h(c,"x2",d),A&4&&p!==(p=$[2]-$[10].bottom)&&h(c,"y1",p),A&4&&g!==(g=$[2]-$[10].bottom)&&h(c,"y2",g),A&4&&_!==(_=$[2]-$[10].bottom)&&h(m,"y2",_),A&2&&h(n,"width",$[1]),A&1&&h(n,"height",$[0])},i:U,o:U,d($){$&&I(t),_e(w,$),_e(M,$),_e(E,$),v()}}}const dr=e=>e.question;function Og(e,t,n){let l,o,r,s,u,a;ue(e,oo,v=>n(4,u=v)),ue(e,at,v=>n(7,a=v));const f={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"},c={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let d=300,p=300,g={top:35,bottom:10,left:25,right:5};const m=vt(".1f");function _(){p=this.offsetWidth,d=this.offsetHeight,n(1,p),n(0,d)}return e.$$.update=()=>{e.$$.dirty&2&&n(3,l=p-g.left-g.right),e.$$.dirty&1&&n(2,o=d-g.top-g.bottom),e.$$.dirty&24&&n(6,r=Vt().rangeRound([g.left,l-g.right]).padding(.05).domain(u.map(v=>v.question))),e.$$.dirty&20&&n(5,s=Xe().rangeRound([o-g.bottom,g.top]).domain([0,mt(u,v=>v.count)])),e.$$.dirty&16&&console.log(u)},[d,p,o,l,u,s,r,a,f,c,g,m,_]}class Ya extends ce{constructor(t){super(),de(this,t,Og,Tg,fe,{})}}function hr(e,t,n){const l=e.slice();l[19]=t[n];const o=l[7](l[19].x1)-l[7](l[19].x0);return l[20]=o,l}function gr(e,t,n){const l=e.slice();return l[23]=t[n],l}function pr(e){let t,n,l,o,r=e[23]+"",s,u;return{c(){t=G("g"),n=G("line"),o=G("text"),s=q(r),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-kz2qh6"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[7](e[23])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&4&&l!==(l=-a[2]+a[9].bottom+a[9].top)&&h(n,"y2",l),f&128&&r!==(r=a[23]+"")&&K(s,r),f&132&&u!==(u=`translate(${a[7](a[23])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&h(t,"transform",u)},d(a){a&&I(t)}}}function mr(e){let t,n,l,o,r,s,u;return{c(){t=G("g"),n=G("rect"),h(n,"x",l=e[7](e[19].x0)+1),h(n,"width",o=e[20]),h(n,"y",r=e[6](e[19].length)),h(n,"height",s=e[6](0)-e[6](e[19].length)),h(n,"fill",u=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n)},p(a,f){f&136&&l!==(l=a[7](a[19].x0)+1)&&h(n,"x",l),f&136&&o!==(o=a[20])&&h(n,"width",o),f&72&&r!==(r=a[6](a[19].length))&&h(n,"y",r),f&72&&s!==(s=a[6](0)-a[6](a[19].length))&&h(n,"height",s),f&32&&u!==(u=a[8][a[5]])&&h(n,"fill",u)},d(a){a&&I(t)}}}function zg(e){let t,n,l,o,r,s,u,a,f,c,d,p=e[7].ticks(),g=[];for(let v=0;v<p.length;v+=1)g[v]=pr(gr(e,p,v));let m=e[3],_=[];for(let v=0;v<m.length;v+=1)_[v]=mr(hr(e,m,v));return{c(){t=R("div"),n=G("svg");for(let v=0;v<g.length;v+=1)g[v].c();l=Ce();for(let v=0;v<_.length;v+=1)_[v].c();o=G("text"),r=q("Answer Length"),u=G("line"),h(o,"class","chart-title svelte-kz2qh6"),h(o,"y",e[9].top/2+5),h(o,"x",s=(e[4]+e[9].left)/2),h(o,"text-anchor","middle"),h(u,"class","axis-line svelte-kz2qh6"),h(u,"x1",e[9].left),h(u,"x2",a=e[4]-e[9].right),h(u,"y1",f=e[2]-e[9].bottom),h(u,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),Me(()=>e[14].call(t))},m(v,y){T(v,t,y),b(t,n);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(n,null);b(n,l);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(n,null);b(n,o),b(o,r),b(n,u),d=ft(t,e[14].bind(t))},p(v,[y]){if(y&644){p=v[7].ticks();let w;for(w=0;w<p.length;w+=1){const S=gr(v,p,w);g[w]?g[w].p(S,y):(g[w]=pr(S),g[w].c(),g[w].m(n,l))}for(;w<g.length;w+=1)g[w].d(1);g.length=p.length}if(y&488){m=v[3];let w;for(w=0;w<m.length;w+=1){const S=hr(v,m,w);_[w]?_[w].p(S,y):(_[w]=mr(S),_[w].c(),_[w].m(n,o))}for(;w<_.length;w+=1)_[w].d(1);_.length=m.length}y&16&&s!==(s=(v[4]+v[9].left)/2)&&h(o,"x",s),y&16&&a!==(a=v[4]-v[9].right)&&h(u,"x2",a),y&4&&f!==(f=v[2]-v[9].bottom)&&h(u,"y1",f),y&4&&c!==(c=v[2]-v[9].bottom)&&h(u,"y2",c),y&2&&h(n,"width",v[1]),y&1&&h(n,"height",v[0])},i:U,o:U,d(v){v&&I(t),_e(g,v),_e(_,v),d()}}}let _r=100;function Vg(e,t,n){let l,o,r,s,u,a,f,c,d,p;ue(e,at,S=>n(5,d=S)),ue(e,Ge,S=>n(13,p=S));const g={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let m=300,_=300,v={top:15,bottom:10,left:25,right:5};vt(".1f");let y=Array.from({length:_r},(S,M)=>M);function w(){_=this.offsetWidth,m=this.offsetHeight,n(1,_),n(0,m)}return e.$$.update=()=>{e.$$.dirty&8224&&n(12,l=d==="all"?p:p.filter(S=>S.vote_status===d)),e.$$.dirty&4096&&n(11,o=Aa(l)),e.$$.dirty&2&&n(4,r=_-v.left-v.right),e.$$.dirty&1&&n(2,s=m-v.top-v.bottom),e.$$.dirty&2048&&n(3,u=Na().thresholds(y).value(S=>S.answer)(o)),e.$$.dirty&16&&n(7,a=Xe().domain([3,_r]).range([v.left,r-v.right])),e.$$.dirty&12&&n(6,f=Xe().domain([0,mt(u,S=>S.length)]).range([s-v.bottom,v.top])),e.$$.dirty&2048&&n(10,c=mt(o,S=>S.length)),e.$$.dirty&1056&&Xe().domain([0,c]).range(["white",g[d]]).interpolate(Tn)},[m,_,s,u,r,d,f,a,g,v,c,o,l,p,w]}class Qa extends ce{constructor(t){super(),de(this,t,Vg,zg,fe,{})}}function vr(e,t,n){const l=e.slice();l[18]=t[n];const o=l[7](l[18].x1)-l[7](l[18].x0);return l[19]=o,l}function br(e,t,n){const l=e.slice();return l[22]=t[n],l}function wr(e){let t,n,l,o,r=e[22]+"",s,u;return{c(){t=G("g"),n=G("line"),o=G("text"),s=q(r),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-kz2qh6"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[7](e[22])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&4&&l!==(l=-a[2]+a[9].bottom+a[9].top)&&h(n,"y2",l),f&128&&r!==(r=a[22]+"")&&K(s,r),f&132&&u!==(u=`translate(${a[7](a[22])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&h(t,"transform",u)},d(a){a&&I(t)}}}function yr(e){let t,n,l,o,r,s,u;return{c(){t=G("g"),n=G("rect"),h(n,"x",l=e[7](e[18].x0)+1),h(n,"width",o=e[19]),h(n,"y",r=e[6](e[18].length)),h(n,"height",s=e[6](0)-e[6](e[18].length)),h(n,"fill",u=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){T(a,t,f),b(t,n)},p(a,f){f&136&&l!==(l=a[7](a[18].x0)+1)&&h(n,"x",l),f&136&&o!==(o=a[19])&&h(n,"width",o),f&72&&r!==(r=a[6](a[18].length))&&h(n,"y",r),f&72&&s!==(s=a[6](0)-a[6](a[18].length))&&h(n,"height",s),f&32&&u!==(u=a[8][a[5]])&&h(n,"fill",u)},d(a){a&&I(t)}}}function Lg(e){let t,n,l,o,r,s,u,a,f,c,d,p=e[7].ticks(),g=[];for(let v=0;v<p.length;v+=1)g[v]=wr(br(e,p,v));let m=e[3],_=[];for(let v=0;v<m.length;v+=1)_[v]=yr(vr(e,m,v));return{c(){t=R("div"),n=G("svg");for(let v=0;v<g.length;v+=1)g[v].c();l=Ce();for(let v=0;v<_.length;v+=1)_[v].c();o=G("text"),r=q("Question Length"),u=G("line"),h(o,"class","chart-title svelte-kz2qh6"),h(o,"y",e[9].top/2+5),h(o,"x",s=(e[4]+e[9].left)/2),h(o,"text-anchor","middle"),h(u,"class","axis-line svelte-kz2qh6"),h(u,"x1",e[9].left),h(u,"x2",a=e[4]-e[9].right),h(u,"y1",f=e[2]-e[9].bottom),h(u,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),Me(()=>e[13].call(t))},m(v,y){T(v,t,y),b(t,n);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(n,null);b(n,l);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(n,null);b(n,o),b(o,r),b(n,u),d=ft(t,e[13].bind(t))},p(v,[y]){if(y&644){p=v[7].ticks();let w;for(w=0;w<p.length;w+=1){const S=br(v,p,w);g[w]?g[w].p(S,y):(g[w]=wr(S),g[w].c(),g[w].m(n,l))}for(;w<g.length;w+=1)g[w].d(1);g.length=p.length}if(y&488){m=v[3];let w;for(w=0;w<m.length;w+=1){const S=vr(v,m,w);_[w]?_[w].p(S,y):(_[w]=yr(S),_[w].c(),_[w].m(n,o))}for(;w<_.length;w+=1)_[w].d(1);_.length=m.length}y&16&&s!==(s=(v[4]+v[9].left)/2)&&h(o,"x",s),y&16&&a!==(a=v[4]-v[9].right)&&h(u,"x2",a),y&4&&f!==(f=v[2]-v[9].bottom)&&h(u,"y1",f),y&4&&c!==(c=v[2]-v[9].bottom)&&h(u,"y2",c),y&2&&h(n,"width",v[1]),y&1&&h(n,"height",v[0])},i:U,o:U,d(v){v&&I(t),_e(g,v),_e(_,v),d()}}}let kr=100;function qg(e,t,n){let l,o,r,s,u,a,f,c,d;ue(e,at,w=>n(5,c=w)),ue(e,Ge,w=>n(12,d=w));const p={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let g=300,m=300,_={top:15,bottom:10,left:25,right:5},v=Array.from({length:kr},(w,S)=>S);Mt().range(["var(--yellow)","var(--red)","var(--green)"]);function y(){m=this.offsetWidth,g=this.offsetHeight,n(1,m),n(0,g)}return e.$$.update=()=>{e.$$.dirty&4128&&n(11,l=c==="all"?d:d.filter(w=>w.vote_status===c)),e.$$.dirty&2048&&n(10,o=Aa(l)),e.$$.dirty&2&&n(4,r=m-_.left-_.right),e.$$.dirty&1&&n(2,s=g-_.top-_.bottom),e.$$.dirty&1024&&n(3,u=Na().thresholds(v).value(w=>w.question)(o)),e.$$.dirty&16&&n(7,a=Xe().domain([3,kr]).range([_.left,r-_.right])),e.$$.dirty&12&&n(6,f=Xe().domain([0,mt(u,w=>w.length)]).range([s-_.bottom,_.top])),e.$$.dirty&1024&&mt(o,w=>w.length)},[g,m,s,u,r,c,f,a,p,_,o,l,d,y]}class Ka extends ce{constructor(t){super(),de(this,t,qg,Lg,fe,{})}}function Hg(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m=Math.round(e[5](e[3]))+"",_,v,y,w,S,M,C,E;return{c(){t=R("div"),n=R("div"),l=R("p"),l.textContent="Questions",o=P(),r=R("select"),s=R("option"),s.textContent="All",u=R("option"),u.textContent="Good",a=R("option"),a.textContent="Bad",f=R("option"),f.textContent="N/A",c=P(),d=R("div"),p=G("svg"),g=G("text"),_=q(m),S=P(),M=R("p"),M.textContent="number of responses",h(l,"class","card-text svelte-1pknxov"),s.__value="all",s.value=s.__value,h(s,"class","svelte-1pknxov"),u.__value="up",u.value=u.__value,h(u,"class","svelte-1pknxov"),a.__value="down",a.value=a.__value,h(a,"class","svelte-1pknxov"),f.__value="n/a",f.value=f.__value,h(f,"class","svelte-1pknxov"),h(r,"id","feedback-dropdown"),h(r,"name","feedback-dropdown"),Ae(r,"background",e[6][e[0]]),h(r,"class","svelte-1pknxov"),e[0]===void 0&&Me(()=>e[9].call(r)),h(n,"class","svelte-1pknxov"),h(g,"dominant-baseline","middle"),h(g,"x",v=e[2]/2),h(g,"y",y=e[1]/2),h(g,"text-anchor","middle"),h(g,"class","svelte-1pknxov"),h(p,"width",e[2]),h(p,"height",e[1]),h(p,"class","svelte-1pknxov"),h(d,"class","svelte-1pknxov"),Me(()=>e[10].call(d)),h(M,"class","small svelte-1pknxov"),h(t,"class","card-container svelte-1pknxov"),Ae(t,"background",e[6][e[0]])},m($,A){T($,t,A),b(t,n),b(n,l),b(n,o),b(n,r),b(r,s),b(r,u),b(r,a),b(r,f),ol(r,e[0],!0),b(t,c),b(t,d),b(d,p),b(p,g),b(g,_),w=ft(d,e[10].bind(d)),b(t,S),b(t,M),C||(E=x(r,"change",e[9]),C=!0)},p($,[A]){A&1&&Ae(r,"background",$[6][$[0]]),A&1&&ol(r,$[0]),A&8&&m!==(m=Math.round($[5]($[3]))+"")&&K(_,m),A&4&&v!==(v=$[2]/2)&&h(g,"x",v),A&2&&y!==(y=$[1]/2)&&h(g,"y",y),A&4&&h(p,"width",$[2]),A&2&&h(p,"height",$[1]),A&1&&Ae(t,"background",$[6][$[0]])},i:U,o:U,d($){$&&I(t),w(),C=!1,E()}}}function Gg(e,t){return t==="all"?e.length:e.filter(l=>l.vote_status===t).length}function Bg(e,t,n){let l,o,r,s;ue(e,at,m=>n(0,o=m)),ue(e,Ge,m=>n(8,r=m));let u,a,f=Do(0);ue(e,f,m=>n(3,s=m));const c=vt(".1f"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function p(){o=aa(this),at.set(o)}function g(){a=this.clientWidth,u=this.clientHeight,n(2,a),n(1,u)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,l=Gg(r,o)),e.$$.dirty&128&&console.log("fbc",l),e.$$.dirty&128&&f.set(l)},[o,u,a,s,f,c,d,l,r,p,g]}class Ja extends ce{constructor(t){super(),de(this,t,Bg,Hg,fe,{})}}function jg(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m=e[5](e[3])+"",_,v,y,w,S,M,C,E;return{c(){t=R("div"),n=R("div"),l=R("p"),l.textContent="Questions",o=P(),r=R("select"),s=R("option"),s.textContent="All",u=R("option"),u.textContent="Good",a=R("option"),a.textContent="Bad",f=R("option"),f.textContent="N/A",c=P(),d=R("div"),p=G("svg"),g=G("text"),_=q(m),S=P(),M=R("p"),M.textContent="percentage of responses",h(l,"class","card-text svelte-mchgj2"),s.__value="all",s.value=s.__value,u.__value="up",u.value=u.__value,a.__value="down",a.value=a.__value,f.__value="n/a",f.value=f.__value,h(r,"id","feedback-dropdown"),h(r,"name","feedback-dropdown"),Ae(r,"background",e[6][e[0]]),h(r,"class","svelte-mchgj2"),e[0]===void 0&&Me(()=>e[9].call(r)),h(g,"dominant-baseline","middle"),h(g,"x",v=e[2]/2),h(g,"y",y=e[1]/2),h(g,"text-anchor","middle"),h(g,"class","svelte-mchgj2"),h(p,"width",e[2]),h(p,"height",e[1]),h(p,"class","svelte-mchgj2"),Me(()=>e[10].call(d)),h(M,"class","small svelte-mchgj2"),h(t,"class","card-container svelte-mchgj2"),Ae(t,"background",e[6][e[0]])},m($,A){T($,t,A),b(t,n),b(n,l),b(n,o),b(n,r),b(r,s),b(r,u),b(r,a),b(r,f),ol(r,e[0],!0),b(t,c),b(t,d),b(d,p),b(p,g),b(g,_),w=ft(d,e[10].bind(d)),b(t,S),b(t,M),C||(E=x(r,"change",e[9]),C=!0)},p($,[A]){A&1&&Ae(r,"background",$[6][$[0]]),A&1&&ol(r,$[0]),A&8&&m!==(m=$[5]($[3])+"")&&K(_,m),A&4&&v!==(v=$[2]/2)&&h(g,"x",v),A&2&&y!==(y=$[1]/2)&&h(g,"y",y),A&4&&h(p,"width",$[2]),A&2&&h(p,"height",$[1]),A&1&&Ae(t,"background",$[6][$[0]])},i:U,o:U,d($){$&&I(t),w(),C=!1,E()}}}function xg(e,t){const n=e.length;return t==="all"?1:e.filter(o=>o.vote_status===t).length/n}function Ug(e,t,n){let l,o,r,s;ue(e,at,m=>n(0,o=m)),ue(e,Ge,m=>n(8,r=m));let u,a,f=Do(0);ue(e,f,m=>n(3,s=m));const c=vt(".1%"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function p(){o=aa(this),at.set(o)}function g(){a=this.clientWidth,u=this.clientHeight,n(2,a),n(1,u)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,l=xg(r,o)),e.$$.dirty&128&&f.set(l)},[o,u,a,s,f,c,d,l,r,p,g]}class Za extends ce{constructor(t){super(),de(this,t,Ug,jg,fe,{})}}function Wg(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m,_,v,y,w,S,M,C,E,$,A,k,F,N;return r=new Ja({}),a=new Za({}),d=new Wa({}),m=new Ya({props:{feedback:"Bad"}}),y=new Ka({}),M=new Qa({}),F=new Xa({}),{c(){t=R("div"),n=R("div"),l=R("div"),o=R("div"),ne(r.$$.fragment),s=P(),u=R("div"),ne(a.$$.fragment),f=P(),c=R("div"),ne(d.$$.fragment),p=P(),g=R("div"),ne(m.$$.fragment),_=P(),v=R("div"),ne(y.$$.fragment),w=P(),S=R("div"),ne(M.$$.fragment),C=P(),E=R("div"),$=R("div"),$.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,A=P(),k=R("div"),ne(F.$$.fragment),h(o,"class","card-1 svelte-14znspc"),h(u,"class","card-2"),h(l,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(g,"class","left-question svelte-14znspc"),h(v,"class","left-filter svelte-14znspc"),h(S,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h($,"class","right-chart svelte-14znspc"),h(k,"class","right-table svelte-14znspc"),h(E,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(D,L){T(D,t,L),b(t,n),b(n,l),b(l,o),ee(r,o,null),b(l,s),b(l,u),ee(a,u,null),b(n,f),b(n,c),ee(d,c,null),b(n,p),b(n,g),ee(m,g,null),b(n,_),b(n,v),ee(y,v,null),b(n,w),b(n,S),ee(M,S,null),b(t,C),b(t,E),b(E,$),b(E,A),b(E,k),ee(F,k,null),N=!0},p:U,i(D){N||(z(r.$$.fragment,D),z(a.$$.fragment,D),z(d.$$.fragment,D),z(m.$$.fragment,D),z(y.$$.fragment,D),z(M.$$.fragment,D),z(F.$$.fragment,D),N=!0)},o(D){V(r.$$.fragment,D),V(a.$$.fragment,D),V(d.$$.fragment,D),V(m.$$.fragment,D),V(y.$$.fragment,D),V(M.$$.fragment,D),V(F.$$.fragment,D),N=!1},d(D){D&&I(t),te(r),te(a),te(d),te(m),te(y),te(M),te(F)}}}function Xg(e,t,n){let l;ue(e,An,r=>n(0,l=r)),ct(()=>{o()});async function o(){const a=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[3]}));De(An,l=[...a],l)}return[]}class eu extends ce{constructor(t){super(),de(this,t,Xg,Wg,fe,{})}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,l)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sr(Object(n),!0).forEach(function(l){Yg(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function Jn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jn=function(t){return typeof t}:Jn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(e)}function Yg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(){return _t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},_t.apply(this,arguments)}function Qg(e,t){if(e==null)return{};var n={},l=Object.keys(e),o,r;for(r=0;r<l.length;r++)o=l[r],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Kg(e,t){if(e==null)return{};var n=Qg(e,t),l,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)l=r[o],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}var Jg="1.15.0";function gt(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var bt=gt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),On=gt(/Edge/i),Cr=gt(/firefox/i),bn=gt(/safari/i)&&!gt(/chrome/i)&&!gt(/android/i),tu=gt(/iP(ad|od|hone)/i),nu=gt(/chrome/i)&&gt(/android/i),lu={capture:!1,passive:!1};function me(e,t,n){e.addEventListener(t,n,!bt&&lu)}function ge(e,t,n){e.removeEventListener(t,n,!bt&&lu)}function pl(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Zg(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function nt(e,t,n,l){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&pl(e,t):pl(e,t))||l&&e===n)return e;if(e===n)break}while(e=Zg(e))}return null}var $r=/\s+/g;function xe(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var l=(" "+e.className+" ").replace($r," ").replace(" "+t+" "," ");e.className=(l+(n?" "+t:"")).replace($r," ")}}function Z(e,t,n){var l=e&&e.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in l)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),l[t]=n+(typeof n=="string"?"":"px")}}function Kt(e,t){var n="";if(typeof e=="string")n=e;else do{var l=Z(e,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function ou(e,t,n){if(e){var l=e.getElementsByTagName(t),o=0,r=l.length;if(n)for(;o<r;o++)n(l[o],o);return l}return[]}function st(){var e=document.scrollingElement;return e||document.documentElement}function Fe(e,t,n,l,o){if(!(!e.getBoundingClientRect&&e!==window)){var r,s,u,a,f,c,d;if(e!==window&&e.parentNode&&e!==st()?(r=e.getBoundingClientRect(),s=r.top,u=r.left,a=r.bottom,f=r.right,c=r.height,d=r.width):(s=0,u=0,a=window.innerHeight,f=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!bt))do if(o&&o.getBoundingClientRect&&(Z(o,"transform")!=="none"||n&&Z(o,"position")!=="static")){var p=o.getBoundingClientRect();s-=p.top+parseInt(Z(o,"border-top-width")),u-=p.left+parseInt(Z(o,"border-left-width")),a=s+r.height,f=u+r.width;break}while(o=o.parentNode);if(l&&e!==window){var g=Kt(o||e),m=g&&g.a,_=g&&g.d;g&&(s/=_,u/=m,d/=m,c/=_,a=s+c,f=u+d)}return{top:s,left:u,bottom:a,right:f,width:d,height:c}}}function Rr(e,t,n){for(var l=Ct(e,!0),o=Fe(e)[t];l;){var r=Fe(l)[n],s=void 0;if(n==="top"||n==="left"?s=o>=r:s=o<=r,!s)return l;if(l===st())break;l=Ct(l,!1)}return!1}function ln(e,t,n,l){for(var o=0,r=0,s=e.children;r<s.length;){if(s[r].style.display!=="none"&&s[r]!==J.ghost&&(l||s[r]!==J.dragged)&&nt(s[r],n.draggable,e,!1)){if(o===t)return s[r];o++}r++}return null}function Lo(e,t){for(var n=e.lastElementChild;n&&(n===J.ghost||Z(n,"display")==="none"||t&&!pl(n,t));)n=n.previousElementSibling;return n||null}function Ye(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==J.clone&&(!t||pl(e,t))&&n++;return n}function Ar(e){var t=0,n=0,l=st();if(e)do{var o=Kt(e),r=o.a,s=o.d;t+=e.scrollLeft*r,n+=e.scrollTop*s}while(e!==l&&(e=e.parentNode));return[t,n]}function ep(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var l in t)if(t.hasOwnProperty(l)&&t[l]===e[n][l])return Number(n)}return-1}function Ct(e,t){if(!e||!e.getBoundingClientRect)return st();var n=e,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=Z(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return st();if(l||t)return n;l=!0}}while(n=n.parentNode);return st()}function tp(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Vl(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var wn;function iu(e,t){return function(){if(!wn){var n=arguments,l=this;n.length===1?e.call(l,n[0]):e.apply(l,n),wn=setTimeout(function(){wn=void 0},t)}}}function np(){clearTimeout(wn),wn=void 0}function ru(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function su(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var We="Sortable"+new Date().getTime();function lp(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(o){if(!(Z(o,"display")==="none"||o===J.ghost)){e.push({target:o,rect:Fe(o)});var r=ut({},e[e.length-1].rect);if(o.thisAnimationDuration){var s=Kt(o,!0);s&&(r.top-=s.f,r.left-=s.e)}o.fromRect=r}})}},addAnimationState:function(l){e.push(l)},removeAnimationState:function(l){e.splice(ep(e,{target:l}),1)},animateAll:function(l){var o=this;if(!this.options.animation){clearTimeout(t),typeof l=="function"&&l();return}var r=!1,s=0;e.forEach(function(u){var a=0,f=u.target,c=f.fromRect,d=Fe(f),p=f.prevFromRect,g=f.prevToRect,m=u.rect,_=Kt(f,!0);_&&(d.top-=_.f,d.left-=_.e),f.toRect=d,f.thisAnimationDuration&&Vl(p,d)&&!Vl(c,d)&&(m.top-d.top)/(m.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(a=ip(m,p,g,o.options)),Vl(d,c)||(f.prevFromRect=c,f.prevToRect=d,a||(a=o.options.animation),o.animate(f,m,d,a)),a&&(r=!0,s=Math.max(s,a),clearTimeout(f.animationResetTimer),f.animationResetTimer=setTimeout(function(){f.animationTime=0,f.prevFromRect=null,f.fromRect=null,f.prevToRect=null,f.thisAnimationDuration=null},a),f.thisAnimationDuration=a)}),clearTimeout(t),r?t=setTimeout(function(){typeof l=="function"&&l()},s):typeof l=="function"&&l(),e=[]},animate:function(l,o,r,s){if(s){Z(l,"transition",""),Z(l,"transform","");var u=Kt(this.el),a=u&&u.a,f=u&&u.d,c=(o.left-r.left)/(a||1),d=(o.top-r.top)/(f||1);l.animatingX=!!c,l.animatingY=!!d,Z(l,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=op(l),Z(l,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Z(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){Z(l,"transition",""),Z(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},s)}}}}function op(e){return e.offsetWidth}function ip(e,t,n,l){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*l.animation}var Gt=[],Ll={initializeByDefault:!0},zn={mount:function(t){for(var n in Ll)Ll.hasOwnProperty(n)&&!(n in t)&&(t[n]=Ll[n]);Gt.forEach(function(l){if(l.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Gt.push(t)},pluginEvent:function(t,n,l){var o=this;this.eventCanceled=!1,l.cancel=function(){o.eventCanceled=!0};var r=t+"Global";Gt.forEach(function(s){n[s.pluginName]&&(n[s.pluginName][r]&&n[s.pluginName][r](ut({sortable:n},l)),n.options[s.pluginName]&&n[s.pluginName][t]&&n[s.pluginName][t](ut({sortable:n},l)))})},initializePlugins:function(t,n,l,o){Gt.forEach(function(u){var a=u.pluginName;if(!(!t.options[a]&&!u.initializeByDefault)){var f=new u(t,n,t.options);f.sortable=t,f.options=t.options,t[a]=f,_t(l,f.defaults)}});for(var r in t.options)if(t.options.hasOwnProperty(r)){var s=this.modifyOption(t,r,t.options[r]);typeof s<"u"&&(t.options[r]=s)}},getEventProperties:function(t,n){var l={};return Gt.forEach(function(o){typeof o.eventProperties=="function"&&_t(l,o.eventProperties.call(n[o.pluginName],t))}),l},modifyOption:function(t,n,l){var o;return Gt.forEach(function(r){t[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(o=r.optionListeners[n].call(t[r.pluginName],l))}),o}};function rp(e){var t=e.sortable,n=e.rootEl,l=e.name,o=e.targetEl,r=e.cloneEl,s=e.toEl,u=e.fromEl,a=e.oldIndex,f=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,p=e.originalEvent,g=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[We],!!t){var _,v=t.options,y="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!bt&&!On?_=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent(l,!0,!0)),_.to=s||n,_.from=u||n,_.item=o||n,_.clone=r,_.oldIndex=a,_.newIndex=f,_.oldDraggableIndex=c,_.newDraggableIndex=d,_.originalEvent=p,_.pullMode=g?g.lastPutMode:void 0;var w=ut(ut({},m),zn.getEventProperties(l,t));for(var S in w)_[S]=w[S];n&&n.dispatchEvent(_),v[y]&&v[y].call(t,_)}}var sp=["evt"],qe=function(t,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=l.evt,r=Kg(l,sp);zn.pluginEvent.bind(J)(t,n,ut({dragEl:H,parentEl:Re,ghostEl:re,rootEl:ke,nextEl:Pt,lastDownEl:Zn,cloneEl:Se,cloneHidden:yt,dragStarted:hn,putSortable:Ne,activeSortable:J.active,originalEvent:o,oldIndex:Ut,oldDraggableIndex:yn,newIndex:Ue,newDraggableIndex:wt,hideGhostForTarget:cu,unhideGhostForTarget:du,cloneNowHidden:function(){yt=!0},cloneNowShown:function(){yt=!1},dispatchSortableEvent:function(u){Te({sortable:n,name:u,originalEvent:o})}},r))};function Te(e){rp(ut({putSortable:Ne,cloneEl:Se,targetEl:H,rootEl:ke,oldIndex:Ut,oldDraggableIndex:yn,newIndex:Ue,newDraggableIndex:wt},e))}var H,Re,re,ke,Pt,Zn,Se,yt,Ut,Ue,yn,wt,jn,Ne,xt=!1,ml=!1,_l=[],Ft,Je,ql,Hl,Mr,Er,hn,Bt,kn,Sn=!1,xn=!1,el,Pe,Gl=[],_o=!1,vl=[],Ml=typeof document<"u",Un=tu,Fr=On||bt?"cssFloat":"float",ap=Ml&&!nu&&!tu&&"draggable"in document.createElement("div"),au=function(){if(Ml){if(bt)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),uu=function(t,n){var l=Z(t),o=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),r=ln(t,0,n),s=ln(t,1,n),u=r&&Z(r),a=s&&Z(s),f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Fe(r).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Fe(s).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&u.float&&u.float!=="none"){var d=u.float==="left"?"left":"right";return s&&(a.clear==="both"||a.clear===d)?"vertical":"horizontal"}return r&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||f>=o&&l[Fr]==="none"||s&&l[Fr]==="none"&&f+c>o)?"vertical":"horizontal"},up=function(t,n,l){var o=l?t.left:t.top,r=l?t.right:t.bottom,s=l?t.width:t.height,u=l?n.left:n.top,a=l?n.right:n.bottom,f=l?n.width:n.height;return o===u||r===a||o+s/2===u+f/2},fp=function(t,n){var l;return _l.some(function(o){var r=o[We].options.emptyInsertThreshold;if(!(!r||Lo(o))){var s=Fe(o),u=t>=s.left-r&&t<=s.right+r,a=n>=s.top-r&&n<=s.bottom+r;if(u&&a)return l=o}}),l},fu=function(t){function n(r,s){return function(u,a,f,c){var d=u.options.group.name&&a.options.group.name&&u.options.group.name===a.options.group.name;if(r==null&&(s||d))return!0;if(r==null||r===!1)return!1;if(s&&r==="clone")return r;if(typeof r=="function")return n(r(u,a,f,c),s)(u,a,f,c);var p=(s?u:a).options.group.name;return r===!0||typeof r=="string"&&r===p||r.join&&r.indexOf(p)>-1}}var l={},o=t.group;(!o||Jn(o)!="object")&&(o={name:o}),l.name=o.name,l.checkPull=n(o.pull,!0),l.checkPut=n(o.put),l.revertClone=o.revertClone,t.group=l},cu=function(){!au&&re&&Z(re,"display","none")},du=function(){!au&&re&&Z(re,"display","")};Ml&&!nu&&document.addEventListener("click",function(e){if(ml)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ml=!1,!1},!0);var Dt=function(t){if(H){t=t.touches?t.touches[0]:t;var n=fp(t.clientX,t.clientY);if(n){var l={};for(var o in t)t.hasOwnProperty(o)&&(l[o]=t[o]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[We]._onDragOver(l)}}},cp=function(t){H&&H.parentNode[We]._isOutsideThisEl(t.target)};function J(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=_t({},t),e[We]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return uu(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,u){s.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:J.supportPointer!==!1&&"PointerEvent"in window&&!bn,emptyInsertThreshold:5};zn.initializePlugins(this,e,n);for(var l in n)!(l in t)&&(t[l]=n[l]);fu(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:ap,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?me(e,"pointerdown",this._onTapStart):(me(e,"mousedown",this._onTapStart),me(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(me(e,"dragover",this),me(e,"dragenter",this)),_l.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),_t(this,lp())}J.prototype={constructor:J,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Bt=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,H):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,l=this.el,o=this.options,r=o.preventOnFilter,s=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,a=(u||t).target,f=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,c=o.filter;if(bp(l),!H&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||o.disabled)&&!f.isContentEditable&&!(!this.nativeDraggable&&bn&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=nt(a,o.draggable,l,!1),!(a&&a.animated)&&Zn!==a)){if(Ut=Ye(a),yn=Ye(a,o.draggable),typeof c=="function"){if(c.call(this,t,a,this)){Te({sortable:n,rootEl:f,name:"filter",targetEl:a,toEl:l,fromEl:l}),qe("filter",n,{evt:t}),r&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=nt(f,d.trim(),l,!1),d)return Te({sortable:n,rootEl:d,name:"filter",targetEl:a,fromEl:l,toEl:l}),qe("filter",n,{evt:t}),!0}),c)){r&&t.cancelable&&t.preventDefault();return}o.handle&&!nt(f,o.handle,l,!1)||this._prepareDragStart(t,u,a)}}},_prepareDragStart:function(t,n,l){var o=this,r=o.el,s=o.options,u=r.ownerDocument,a;if(l&&!H&&l.parentNode===r){var f=Fe(l);if(ke=r,H=l,Re=H.parentNode,Pt=H.nextSibling,Zn=l,jn=s.group,J.dragged=H,Ft={target:H,clientX:(n||t).clientX,clientY:(n||t).clientY},Mr=Ft.clientX-f.left,Er=Ft.clientY-f.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,H.style["will-change"]="all",a=function(){if(qe("delayEnded",o,{evt:t}),J.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Cr&&o.nativeDraggable&&(H.draggable=!0),o._triggerDragStart(t,n),Te({sortable:o,name:"choose",originalEvent:t}),xe(H,s.chosenClass,!0)},s.ignore.split(",").forEach(function(c){ou(H,c.trim(),Bl)}),me(u,"dragover",Dt),me(u,"mousemove",Dt),me(u,"touchmove",Dt),me(u,"mouseup",o._onDrop),me(u,"touchend",o._onDrop),me(u,"touchcancel",o._onDrop),Cr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,H.draggable=!0),qe("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(On||bt))){if(J.eventCanceled){this._onDrop();return}me(u,"mouseup",o._disableDelayedDrag),me(u,"touchend",o._disableDelayedDrag),me(u,"touchcancel",o._disableDelayedDrag),me(u,"mousemove",o._delayedDragTouchMoveHandler),me(u,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&me(u,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,s.delay)}else a()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){H&&Bl(H),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ge(t,"mouseup",this._disableDelayedDrag),ge(t,"touchend",this._disableDelayedDrag),ge(t,"touchcancel",this._disableDelayedDrag),ge(t,"mousemove",this._delayedDragTouchMoveHandler),ge(t,"touchmove",this._delayedDragTouchMoveHandler),ge(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?me(document,"pointermove",this._onTouchMove):n?me(document,"touchmove",this._onTouchMove):me(document,"mousemove",this._onTouchMove):(me(H,"dragend",this),me(ke,"dragstart",this._onDragStart));try{document.selection?tl(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(xt=!1,ke&&H){qe("dragStarted",this,{evt:n}),this.nativeDraggable&&me(document,"dragover",cp);var l=this.options;!t&&xe(H,l.dragClass,!1),xe(H,l.ghostClass,!0),J.active=this,t&&this._appendGhost(),Te({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Je){this._lastX=Je.clientX,this._lastY=Je.clientY,cu();for(var t=document.elementFromPoint(Je.clientX,Je.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Je.clientX,Je.clientY),t!==n);)n=t;if(H.parentNode[We]._isOutsideThisEl(t),n)do{if(n[We]){var l=void 0;if(l=n[We]._onDragOver({clientX:Je.clientX,clientY:Je.clientY,target:t,rootEl:n}),l&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);du()}},_onTouchMove:function(t){if(Ft){var n=this.options,l=n.fallbackTolerance,o=n.fallbackOffset,r=t.touches?t.touches[0]:t,s=re&&Kt(re,!0),u=re&&s&&s.a,a=re&&s&&s.d,f=Un&&Pe&&Ar(Pe),c=(r.clientX-Ft.clientX+o.x)/(u||1)+(f?f[0]-Gl[0]:0)/(u||1),d=(r.clientY-Ft.clientY+o.y)/(a||1)+(f?f[1]-Gl[1]:0)/(a||1);if(!J.active&&!xt){if(l&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<l)return;this._onDragStart(t,!0)}if(re){s?(s.e+=c-(ql||0),s.f+=d-(Hl||0)):s={a:1,b:0,c:0,d:1,e:c,f:d};var p="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Z(re,"webkitTransform",p),Z(re,"mozTransform",p),Z(re,"msTransform",p),Z(re,"transform",p),ql=c,Hl=d,Je=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!re){var t=this.options.fallbackOnBody?document.body:ke,n=Fe(H,!0,Un,!0,t),l=this.options;if(Un){for(Pe=t;Z(Pe,"position")==="static"&&Z(Pe,"transform")==="none"&&Pe!==document;)Pe=Pe.parentNode;Pe!==document.body&&Pe!==document.documentElement?(Pe===document&&(Pe=st()),n.top+=Pe.scrollTop,n.left+=Pe.scrollLeft):Pe=st(),Gl=Ar(Pe)}re=H.cloneNode(!0),xe(re,l.ghostClass,!1),xe(re,l.fallbackClass,!0),xe(re,l.dragClass,!0),Z(re,"transition",""),Z(re,"transform",""),Z(re,"box-sizing","border-box"),Z(re,"margin",0),Z(re,"top",n.top),Z(re,"left",n.left),Z(re,"width",n.width),Z(re,"height",n.height),Z(re,"opacity","0.8"),Z(re,"position",Un?"absolute":"fixed"),Z(re,"zIndex","100000"),Z(re,"pointerEvents","none"),J.ghost=re,t.appendChild(re),Z(re,"transform-origin",Mr/parseInt(re.style.width)*100+"% "+Er/parseInt(re.style.height)*100+"%")}},_onDragStart:function(t,n){var l=this,o=t.dataTransfer,r=l.options;if(qe("dragStart",this,{evt:t}),J.eventCanceled){this._onDrop();return}qe("setupClone",this),J.eventCanceled||(Se=su(H),Se.removeAttribute("id"),Se.draggable=!1,Se.style["will-change"]="",this._hideClone(),xe(Se,this.options.chosenClass,!1),J.clone=Se),l.cloneId=tl(function(){qe("clone",l),!J.eventCanceled&&(l.options.removeCloneOnHide||ke.insertBefore(Se,H),l._hideClone(),Te({sortable:l,name:"clone"}))}),!n&&xe(H,r.dragClass,!0),n?(ml=!0,l._loopId=setInterval(l._emulateDragOver,50)):(ge(document,"mouseup",l._onDrop),ge(document,"touchend",l._onDrop),ge(document,"touchcancel",l._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(l,o,H)),me(document,"drop",l),Z(H,"transform","translateZ(0)")),xt=!0,l._dragStartId=tl(l._dragStarted.bind(l,n,t)),me(document,"selectstart",l),hn=!0,bn&&Z(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,l=t.target,o,r,s,u=this.options,a=u.group,f=J.active,c=jn===a,d=u.sort,p=Ne||f,g,m=this,_=!1;if(_o)return;function v(pe,X){qe(pe,m,ut({evt:t,isOwner:c,axis:g?"vertical":"horizontal",revert:s,dragRect:o,targetRect:r,canSort:d,fromSortable:p,target:l,completed:w,onMove:function(Y,Q){return Wn(ke,n,H,o,Y,Fe(Y),t,Q)},changed:S},X))}function y(){v("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function w(pe){return v("dragOverCompleted",{insertion:pe}),pe&&(c?f._hideClone():f._showClone(m),m!==p&&(xe(H,Ne?Ne.options.ghostClass:f.options.ghostClass,!1),xe(H,u.ghostClass,!0)),Ne!==m&&m!==J.active?Ne=m:m===J.active&&Ne&&(Ne=null),p===m&&(m._ignoreWhileAnimating=l),m.animateAll(function(){v("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(l===H&&!H.animated||l===n&&!l.animated)&&(Bt=null),!u.dragoverBubble&&!t.rootEl&&l!==document&&(H.parentNode[We]._isOutsideThisEl(t.target),!pe&&Dt(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),_=!0}function S(){Ue=Ye(H),wt=Ye(H,u.draggable),Te({sortable:m,name:"change",toEl:n,newIndex:Ue,newDraggableIndex:wt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),l=nt(l,u.draggable,n,!0),v("dragOver"),J.eventCanceled)return _;if(H.contains(t.target)||l.animated&&l.animatingX&&l.animatingY||m._ignoreWhileAnimating===l)return w(!1);if(ml=!1,f&&!u.disabled&&(c?d||(s=Re!==ke):Ne===this||(this.lastPutMode=jn.checkPull(this,f,H,t))&&a.checkPut(this,f,H,t))){if(g=this._getDirection(t,l)==="vertical",o=Fe(H),v("dragOverValid"),J.eventCanceled)return _;if(s)return Re=ke,y(),this._hideClone(),v("revert"),J.eventCanceled||(Pt?ke.insertBefore(H,Pt):ke.appendChild(H)),w(!0);var M=Lo(n,u.draggable);if(!M||pp(t,g,this)&&!M.animated){if(M===H)return w(!1);if(M&&n===t.target&&(l=M),l&&(r=Fe(l)),Wn(ke,n,H,o,l,r,t,!!l)!==!1)return y(),M&&M.nextSibling?n.insertBefore(H,M.nextSibling):n.appendChild(H),Re=n,S(),w(!0)}else if(M&&gp(t,g,this)){var C=ln(n,0,u,!0);if(C===H)return w(!1);if(l=C,r=Fe(l),Wn(ke,n,H,o,l,r,t,!1)!==!1)return y(),n.insertBefore(H,C),Re=n,S(),w(!0)}else if(l.parentNode===n){r=Fe(l);var E=0,$,A=H.parentNode!==n,k=!up(H.animated&&H.toRect||o,l.animated&&l.toRect||r,g),F=g?"top":"left",N=Rr(l,"top","top")||Rr(H,"top","top"),D=N?N.scrollTop:void 0;Bt!==l&&($=r[F],Sn=!1,xn=!k&&u.invertSwap||A),E=mp(t,l,r,g,k?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,xn,Bt===l);var L;if(E!==0){var O=Ye(H);do O-=E,L=Re.children[O];while(L&&(Z(L,"display")==="none"||L===re))}if(E===0||L===l)return w(!1);Bt=l,kn=E;var B=l.nextElementSibling,j=!1;j=E===1;var ae=Wn(ke,n,H,o,l,r,t,j);if(ae!==!1)return(ae===1||ae===-1)&&(j=ae===1),_o=!0,setTimeout(hp,30),y(),j&&!B?n.appendChild(H):l.parentNode.insertBefore(H,j?B:l),N&&ru(N,0,D-N.scrollTop),Re=H.parentNode,$!==void 0&&!xn&&(el=Math.abs($-Fe(l)[F])),S(),w(!0)}if(n.contains(H))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ge(document,"mousemove",this._onTouchMove),ge(document,"touchmove",this._onTouchMove),ge(document,"pointermove",this._onTouchMove),ge(document,"dragover",Dt),ge(document,"mousemove",Dt),ge(document,"touchmove",Dt)},_offUpEvents:function(){var t=this.el.ownerDocument;ge(t,"mouseup",this._onDrop),ge(t,"touchend",this._onDrop),ge(t,"pointerup",this._onDrop),ge(t,"touchcancel",this._onDrop),ge(document,"selectstart",this)},_onDrop:function(t){var n=this.el,l=this.options;if(Ue=Ye(H),wt=Ye(H,l.draggable),qe("drop",this,{evt:t}),Re=H&&H.parentNode,Ue=Ye(H),wt=Ye(H,l.draggable),J.eventCanceled){this._nulling();return}xt=!1,xn=!1,Sn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),vo(this.cloneId),vo(this._dragStartId),this.nativeDraggable&&(ge(document,"drop",this),ge(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),bn&&Z(document.body,"user-select",""),Z(H,"transform",""),t&&(hn&&(t.cancelable&&t.preventDefault(),!l.dropBubble&&t.stopPropagation()),re&&re.parentNode&&re.parentNode.removeChild(re),(ke===Re||Ne&&Ne.lastPutMode!=="clone")&&Se&&Se.parentNode&&Se.parentNode.removeChild(Se),H&&(this.nativeDraggable&&ge(H,"dragend",this),Bl(H),H.style["will-change"]="",hn&&!xt&&xe(H,Ne?Ne.options.ghostClass:this.options.ghostClass,!1),xe(H,this.options.chosenClass,!1),Te({sortable:this,name:"unchoose",toEl:Re,newIndex:null,newDraggableIndex:null,originalEvent:t}),ke!==Re?(Ue>=0&&(Te({rootEl:Re,name:"add",toEl:Re,fromEl:ke,originalEvent:t}),Te({sortable:this,name:"remove",toEl:Re,originalEvent:t}),Te({rootEl:Re,name:"sort",toEl:Re,fromEl:ke,originalEvent:t}),Te({sortable:this,name:"sort",toEl:Re,originalEvent:t})),Ne&&Ne.save()):Ue!==Ut&&Ue>=0&&(Te({sortable:this,name:"update",toEl:Re,originalEvent:t}),Te({sortable:this,name:"sort",toEl:Re,originalEvent:t})),J.active&&((Ue==null||Ue===-1)&&(Ue=Ut,wt=yn),Te({sortable:this,name:"end",toEl:Re,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){qe("nulling",this),ke=H=Re=re=Pt=Se=Zn=yt=Ft=Je=hn=Ue=wt=Ut=yn=Bt=kn=Ne=jn=J.dragged=J.ghost=J.clone=J.active=null,vl.forEach(function(t){t.checked=!0}),vl.length=ql=Hl=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":H&&(this._onDragOver(t),dp(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,l=this.el.children,o=0,r=l.length,s=this.options;o<r;o++)n=l[o],nt(n,s.draggable,this.el,!1)&&t.push(n.getAttribute(s.dataIdAttr)||vp(n));return t},sort:function(t,n){var l={},o=this.el;this.toArray().forEach(function(r,s){var u=o.children[s];nt(u,this.options.draggable,o,!1)&&(l[r]=u)},this),n&&this.captureAnimationState(),t.forEach(function(r){l[r]&&(o.removeChild(l[r]),o.appendChild(l[r]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return nt(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var l=this.options;if(n===void 0)return l[t];var o=zn.modifyOption(this,t,n);typeof o<"u"?l[t]=o:l[t]=n,t==="group"&&fu(l)},destroy:function(){qe("destroy",this);var t=this.el;t[We]=null,ge(t,"mousedown",this._onTapStart),ge(t,"touchstart",this._onTapStart),ge(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ge(t,"dragover",this),ge(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_l.splice(_l.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!yt){if(qe("hideClone",this),J.eventCanceled)return;Z(Se,"display","none"),this.options.removeCloneOnHide&&Se.parentNode&&Se.parentNode.removeChild(Se),yt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(yt){if(qe("showClone",this),J.eventCanceled)return;H.parentNode==ke&&!this.options.group.revertClone?ke.insertBefore(Se,H):Pt?ke.insertBefore(Se,Pt):ke.appendChild(Se),this.options.group.revertClone&&this.animate(H,Se),Z(Se,"display",""),yt=!1}}};function dp(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Wn(e,t,n,l,o,r,s,u){var a,f=e[We],c=f.options.onMove,d;return window.CustomEvent&&!bt&&!On?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=t,a.from=e,a.dragged=n,a.draggedRect=l,a.related=o||t,a.relatedRect=r||Fe(t),a.willInsertAfter=u,a.originalEvent=s,e.dispatchEvent(a),c&&(d=c.call(f,a,s)),d}function Bl(e){e.draggable=!1}function hp(){_o=!1}function gp(e,t,n){var l=Fe(ln(n.el,0,n.options,!0)),o=10;return t?e.clientX<l.left-o||e.clientY<l.top&&e.clientX<l.right:e.clientY<l.top-o||e.clientY<l.bottom&&e.clientX<l.left}function pp(e,t,n){var l=Fe(Lo(n.el,n.options.draggable)),o=10;return t?e.clientX>l.right+o||e.clientX<=l.right&&e.clientY>l.bottom&&e.clientX>=l.left:e.clientX>l.right&&e.clientY>l.top||e.clientX<=l.right&&e.clientY>l.bottom+o}function mp(e,t,n,l,o,r,s,u){var a=l?e.clientY:e.clientX,f=l?n.height:n.width,c=l?n.top:n.left,d=l?n.bottom:n.right,p=!1;if(!s){if(u&&el<f*o){if(!Sn&&(kn===1?a>c+f*r/2:a<d-f*r/2)&&(Sn=!0),Sn)p=!0;else if(kn===1?a<c+el:a>d-el)return-kn}else if(a>c+f*(1-o)/2&&a<d-f*(1-o)/2)return _p(t)}return p=p||s,p&&(a<c+f*r/2||a>d-f*r/2)?a>c+f/2?1:-1:0}function _p(e){return Ye(H)<Ye(e)?1:-1}function vp(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,l=0;n--;)l+=t.charCodeAt(n);return l.toString(36)}function bp(e){vl.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var l=t[n];l.checked&&vl.push(l)}}function tl(e){return setTimeout(e,0)}function vo(e){return clearTimeout(e)}Ml&&me(document,"touchmove",function(e){(J.active||xt)&&e.cancelable&&e.preventDefault()});J.utils={on:me,off:ge,css:Z,find:ou,is:function(t,n){return!!nt(t,n,t,!1)},extend:tp,throttle:iu,closest:nt,toggleClass:xe,clone:su,index:Ye,nextTick:tl,cancelNextTick:vo,detectDirection:uu,getChild:ln};J.get=function(e){return e[We]};J.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(J.utils=ut(ut({},J.utils),l.utils)),zn.mount(l)})};J.create=function(e,t){return new J(e,t)};J.version=Jg;var Ee=[],gn,bo,wo=!1,jl,xl,bl,pn;function wp(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?me(document,"dragover",this._handleAutoScroll):this.options.supportPointer?me(document,"pointermove",this._handleFallbackAutoScroll):l.touches?me(document,"touchmove",this._handleFallbackAutoScroll):me(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?ge(document,"dragover",this._handleAutoScroll):(ge(document,"pointermove",this._handleFallbackAutoScroll),ge(document,"touchmove",this._handleFallbackAutoScroll),ge(document,"mousemove",this._handleFallbackAutoScroll)),Dr(),nl(),np()},nulling:function(){bl=bo=gn=wo=pn=jl=xl=null,Ee.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var o=this,r=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(r,s);if(bl=n,l||this.options.forceAutoScrollFallback||On||bt||bn){Ul(n,this.options,u,l);var a=Ct(u,!0);wo&&(!pn||r!==jl||s!==xl)&&(pn&&Dr(),pn=setInterval(function(){var f=Ct(document.elementFromPoint(r,s),!0);f!==a&&(a=f,nl()),Ul(n,o.options,f,l)},10),jl=r,xl=s)}else{if(!this.options.bubbleScroll||Ct(u,!0)===st()){nl();return}Ul(n,this.options,Ct(u,!1),!1)}}},_t(e,{pluginName:"scroll",initializeByDefault:!0})}function nl(){Ee.forEach(function(e){clearInterval(e.pid)}),Ee=[]}function Dr(){clearInterval(pn)}var Ul=iu(function(e,t,n,l){if(t.scroll){var o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,u=t.scrollSpeed,a=st(),f=!1,c;bo!==n&&(bo=n,nl(),gn=t.scroll,c=t.scrollFn,gn===!0&&(gn=Ct(n,!0)));var d=0,p=gn;do{var g=p,m=Fe(g),_=m.top,v=m.bottom,y=m.left,w=m.right,S=m.width,M=m.height,C=void 0,E=void 0,$=g.scrollWidth,A=g.scrollHeight,k=Z(g),F=g.scrollLeft,N=g.scrollTop;g===a?(C=S<$&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),E=M<A&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(C=S<$&&(k.overflowX==="auto"||k.overflowX==="scroll"),E=M<A&&(k.overflowY==="auto"||k.overflowY==="scroll"));var D=C&&(Math.abs(w-o)<=s&&F+S<$)-(Math.abs(y-o)<=s&&!!F),L=E&&(Math.abs(v-r)<=s&&N+M<A)-(Math.abs(_-r)<=s&&!!N);if(!Ee[d])for(var O=0;O<=d;O++)Ee[O]||(Ee[O]={});(Ee[d].vx!=D||Ee[d].vy!=L||Ee[d].el!==g)&&(Ee[d].el=g,Ee[d].vx=D,Ee[d].vy=L,clearInterval(Ee[d].pid),(D!=0||L!=0)&&(f=!0,Ee[d].pid=setInterval((function(){l&&this.layer===0&&J.active._onTouchMove(bl);var B=Ee[this.layer].vy?Ee[this.layer].vy*u:0,j=Ee[this.layer].vx?Ee[this.layer].vx*u:0;typeof c=="function"&&c.call(J.dragged.parentNode[We],j,B,e,bl,Ee[this.layer].el)!=="continue"||ru(Ee[this.layer].el,j,B)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&p!==a&&(p=Ct(p,!1)));wo=f}},30),hu=function(t){var n=t.originalEvent,l=t.putSortable,o=t.dragEl,r=t.activeSortable,s=t.dispatchSortableEvent,u=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(n){var f=l||r;u();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);a(),f&&!f.el.contains(d)&&(s("spill"),this.onSpill({dragEl:o,putSortable:l}))}};function qo(){}qo.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,l=t.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var o=ln(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:hu};_t(qo,{pluginName:"revertOnSpill"});function Ho(){}Ho.prototype={onSpill:function(t){var n=t.dragEl,l=t.putSortable,o=l||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:hu};_t(Ho,{pluginName:"removeOnSpill"});J.mount(new wp);J.mount(Ho,qo);function Ir(e,t,n){const l=e.slice();return l[23]=t[n],l[25]=n,l}function Nr(e,t,n){const l=e.slice();return l[26]=t[n],l[28]=n,l}function Pr(e,t,n){const l=e.slice();return l[29]=t[n],l[28]=n,l}function Tr(e){let t,n=e[28]+1+"",l;return{c(){t=R("option"),l=q(n),t.__value=e[28]+1,t.value=t.__value,h(t,"class","svelte-1nj8mt0")},m(o,r){T(o,t,r),b(t,l)},p:U,d(o){o&&I(t)}}}function Or(e,t){let n,l,o=t[1][t[28]]+"",r,s,u,a,f=t[23][t[1][t[28]]]+"",c,d,p,g,m,_,v,y,w,S=Array(t[0]).fill(),M=[];for(let $=0;$<S.length;$+=1)M[$]=Tr(Pr(t,S,$));function C(...$){return t[16](t[23],t[28],...$)}function E(...$){return t[17](t[23],...$)}return{key:e,first:null,c(){n=R("div"),l=R("h5"),r=q(o),s=q(":"),u=P(),a=R("p"),c=q(f),d=P(),p=R("div"),g=q(`Rank:
                        `),m=R("select");for(let $=0;$<M.length;$+=1)M[$].c();_=P(),h(l,"class","bold underline svelte-1nj8mt0"),h(a,"class","svelte-1nj8mt0"),h(m,"class","answer-rank"),h(n,"class","answer svelte-1nj8mt0"),h(n,"id",v=`answer-${t[28]}-${t[23].qid}`),this.first=n},m($,A){T($,n,A),b(n,l),b(l,r),b(l,s),b(n,u),b(n,a),b(a,c),b(n,d),b(n,p),b(p,g),b(p,m);for(let k=0;k<M.length;k+=1)M[k]&&M[k].m(m,null);b(n,_),y||(w=[x(m,"change",C),x(n,"dragend",E)],y=!0)},p($,A){if(t=$,A&3&&o!==(o=t[1][t[28]]+"")&&K(r,o),A&259&&f!==(f=t[23][t[1][t[28]]]+"")&&K(c,f),A&1){S=Array(t[0]).fill();let k;for(k=0;k<S.length;k+=1){const F=Pr(t,S,k);M[k]?M[k].p(F,A):(M[k]=Tr(F),M[k].c(),M[k].m(m,null))}for(;k<M.length;k+=1)M[k].d(1);M.length=S.length}A&257&&v!==(v=`answer-${t[28]}-${t[23].qid}`)&&h(n,"id",v)},d($){$&&I(n),_e(M,$),y=!1,ve(w)}}}function zr(e,t){let n,l,o,r,s,u,a=t[23].qid+"",f,c,d,p=t[23].question+"",g,m,_,v=[],y=new Map,w,S,M,C,E=Array(t[0]).fill();const $=A=>A[28];for(let A=0;A<E.length;A+=1){let k=Nr(t,E,A),F=$(k);y.set(F,v[A]=Or(F,k))}return{key:e,first:null,c(){n=R("div"),l=R("div"),o=R("div"),r=R("div"),s=R("h5"),u=q("Question: "),f=q(a),c=P(),d=R("p"),g=q(p),m=P(),_=R("div");for(let A=0;A<v.length;A+=1)v[A].c();w=P(),h(s,"class","bold svelte-1nj8mt0"),h(d,"class","svelte-1nj8mt0"),h(r,"class","question svelte-1nj8mt0"),h(_,"class","answers"),Ae(_,"display","grid"),Ae(_,"grid-template-columns",t[7]),Ae(_,"gap",".25%"),Ae(_,"width","100%"),Ae(_,"margin","auto"),h(o,"class","message-content svelte-1nj8mt0"),h(l,"class","chat-message-center svelte-1nj8mt0"),h(n,"class","chat-message svelte-1nj8mt0"),this.first=n},m(A,k){T(A,n,k),b(n,l),b(l,o),b(o,r),b(r,s),b(s,u),b(s,f),b(r,c),b(r,d),b(d,g),b(o,m),b(o,_);for(let F=0;F<v.length;F+=1)v[F]&&v[F].m(_,null);t[18](_),b(n,w),M||(C=Jt(S=kp.call(null,n,t[25]===t[8].length-1)),M=!0)},p(A,k){t=A,k&256&&a!==(a=t[23].qid+"")&&K(f,a),k&256&&p!==(p=t[23].question+"")&&K(g,p),k&3331&&(E=Array(t[0]).fill(),v=pt(v,k,$,1,t,E,y,_,en,Or,null,Nr)),k&128&&Ae(_,"grid-template-columns",t[7]),S&&Ve(S.update)&&k&256&&S.update.call(null,t[25]===t[8].length-1)},d(A){A&&I(n);for(let k=0;k<v.length;k+=1)v[k].d();t[18](null),M=!1,C()}}}function yp(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m,_,v,y,w,S=[],M=new Map,C,E,$,A,k,F,N=(e[4]?e[6]:"Send")+"",D,L,O,B,j;function ae(Y){e[15](Y)}let pe={table:"comparator/db"};e[5]!==void 0&&(pe.showModal=e[5]),t=new No({props:pe}),tt.push(()=>Rn(t,"showModal",ae));let X=e[8];const W=Y=>Y[25];for(let Y=0;Y<X.length;Y+=1){let Q=Ir(e,X,Y),le=W(Q);M.set(le,S[Y]=zr(le,Q))}return{c(){ne(t.$$.fragment),l=P(),o=R("div"),r=R("div"),s=R("h5"),s.textContent="Q & A Comparison Instructions",u=P(),a=R("br"),f=P(),c=R("p"),c.textContent=`Ask a question and rank the answers across the models. Drag each answer to
      rank it, in ascending order, from left-to-right. Optionally, select the
      rank for each via the corresponding dropdown.`,d=P(),p=R("br"),g=P(),m=R("button"),m.textContent="Download Data",_=P(),v=R("div"),y=R("section"),w=R("div");for(let Y=0;Y<S.length;Y+=1)S[Y].c();C=P(),E=R("div"),$=R("form"),A=R("input"),k=P(),F=R("button"),D=q(N),h(s,"class","underline bold svelte-1nj8mt0"),h(c,"class","svelte-1nj8mt0"),h(m,"class","svelte-1nj8mt0"),h(r,"class","instructions svelte-1nj8mt0"),h(w,"class","chat-log svelte-1nj8mt0"),h(y,"class","chatbox svelte-1nj8mt0"),h(A,"class","chat-input-textarea svelte-1nj8mt0"),h(A,"placeholder","Type Message Here"),h(F,"class",L="btnyousend "+(e[3]===""?"":"active")+" svelte-1nj8mt0"),h(F,"type","submit"),h($,"class","chat-input-form svelte-1nj8mt0"),h(E,"class","chat-input-holder svelte-1nj8mt0"),h(v,"class","ranked-chat svelte-1nj8mt0"),h(o,"class","ranked-feedback-container svelte-1nj8mt0")},m(Y,Q){ee(t,Y,Q),T(Y,l,Q),T(Y,o,Q),b(o,r),b(r,s),b(r,u),b(r,a),b(r,f),b(r,c),b(r,d),b(r,p),b(r,g),b(r,m),b(o,_),b(o,v),b(v,y),b(y,w);for(let le=0;le<S.length;le+=1)S[le]&&S[le].m(w,null);b(v,C),b(v,E),b(E,$),b($,A),Qe(A,e[3]),b($,k),b($,F),b(F,D),O=!0,B||(j=[x(m,"click",e[12]),x(A,"input",e[19]),x($,"submit",e[9])],B=!0)},p(Y,[Q]){const le={};!n&&Q&32&&(n=!0,le.showModal=Y[5],$n(()=>n=!1)),t.$set(le),Q&3463&&(X=Y[8],S=pt(S,Q,W,1,Y,X,M,w,en,zr,null,Ir)),Q&8&&A.value!==Y[3]&&Qe(A,Y[3]),(!O||Q&80)&&N!==(N=(Y[4]?Y[6]:"Send")+"")&&K(D,N),(!O||Q&8&&L!==(L="btnyousend "+(Y[3]===""?"":"active")+" svelte-1nj8mt0"))&&h(F,"class",L)},i(Y){O||(z(t.$$.fragment,Y),O=!0)},o(Y){V(t.$$.fragment,Y),O=!1},d(Y){te(t,Y),Y&&I(l),Y&&I(o);for(let Q=0;Q<S.length;Q+=1)S[Q].d();B=!1,ve(j)}}}function kp(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function Vr(e){console.log("run update",e);const n=await fetch("/chat/comparator/db/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})});if(n.ok)console.log("ok",n);else{const l=await n.text();alert(l)}}function Sp(e,t,n){let l,o,r;ue(e,un,k=>n(8,r=k));let{numModels:s=1}=t,{models:u=[0]}=t,a="",f="",c=!1,d=!1;ct(async()=>{if(await new Promise(k=>setTimeout(k,200)),_){const k=new J(_,{animation:150,onUpdate(F){k.toArray()}});k.toArray()}p()});async function p(){const F=await(await fetch("/chat/comparator/db/retrieve")).json();console.log(F);const N=F.data;let D={},L=new Set;for(const O of N)L.add(O.model),D[O.qid]||(D[O.qid]={},D[O.qid].qid=O.qid,D[O.qid].question=O.question),D[O.qid][O.model]=O.answer,console.log(D);n(1,u=Array.from(L)),n(0,s=u.length),console.log(Object.values(D)),De(un,r=[...Object.values(D)],r)}const g=async k=>{k.preventDefault(),a=f,n(3,f=""),n(4,c=!0);let F={question:a};for(let D of u)F[D]="Loading...";De(un,r=[...r,F],r),console.log("compare chat log",un);const N=await fetch(`/chat/comparator/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})});if(N.ok){const D=await N.json();n(1,u=Object.keys(D.answer)),n(0,s=u.length);for(let L of u)F[L]=D.answer[L];F.qid=D.qid,un.update(L=>(L[L.length-1]=F,L))}else{const D=await N.text();alert(D)}n(4,c=!1)};let m=0;setInterval(()=>{n(13,m=(m+1)%4)},200);let _,v;function y(k,F){const N=F,L=Mn(k.currentTarget.parentNode).selectAll("div.answer").nodes().map(ae=>ae.id);L.forEach((ae,pe)=>{Mn(`#${ae}`).select(".answer-rank").property("value",pe+1)});let O=[];for(let[ae,pe]of L.entries()){const X=parseInt(pe.split("-")[1]),W=u[X],Y={rank:ae,model:W};O.push(Y)}let B=r.filter(ae=>ae.qid===N),j=[];for(let ae of O){const pe={model:ae.model,qid:parseInt(N),rank:parseInt(ae.rank)+1,answer:B[0][ae.model]};j.push(pe)}Vr(j)}function w(k,F,N){const D=F,L=parseInt(k.target.value),O=u[N],B={qid:D,rank:parseInt(L),model:O};let j=[],pe=r.filter(W=>W.qid===B.qid)[0][B.model];const X={model:B.model,qid:parseInt(B.qid),rank:parseInt(B.rank),answer:pe};j.push(X),Vr(j)}function S(){n(5,d=!0)}function M(k){d=k,n(5,d)}const C=(k,F,N)=>w(N,k.qid,F),E=(k,F)=>y(F,k.qid);function $(k){tt[k?"unshift":"push"](()=>{_=k,n(2,_)})}function A(){f=this.value,n(3,f)}return e.$$set=k=>{"numModels"in k&&n(0,s=k.numModels),"models"in k&&n(1,u=k.models)},e.$$.update=()=>{e.$$.dirty&1&&n(7,l="1fr ".repeat(s).trim()),e.$$.dirty&8192&&n(6,o=".".repeat(m).padEnd(3)),e.$$.dirty&16388&&_&&(n(14,v=new J(_,{animation:150,dataIdAttr:"id",onUpdate(k){v.toArray()}})),v.toArray())},[s,u,_,f,c,d,o,l,r,g,y,w,S,m,v,M,C,E,$,A]}class Cp extends ce{constructor(t){super(),de(this,t,Sp,yp,fe,{numModels:0,models:1})}}const on=Ie([{model:"llama",qid:1,rank:1,answer:"Llama's first unique answer."},{model:"gpt3.5",qid:1,rank:2,answer:"GPT-3.5's first unique answer."},{model:"gpt4",qid:1,rank:3,answer:"GPT-4's first unique answer."},{model:"claude",qid:1,rank:4,answer:"Claude's first unique answer."},{model:"llama",qid:2,rank:4,answer:"Llama's second unique answer."},{model:"gpt3.5",qid:2,rank:2,answer:"GPT-3.5's second unique answer."},{model:"gpt4",qid:2,rank:4,answer:"GPT-4's second unique answer."},{model:"claude",qid:2,rank:3,answer:"'s second unique answer."}]);function Lr(e,t,n){const l=e.slice();return l[20]=t[n],l}function qr(e,t,n){const l=e.slice();return l[20]=t[n],l[24]=n,l}function Hr(e,t,n){const l=e.slice();return l[25]=t[n],l}function Gr(e){let t,n,l,o,r=`Q.${e[25]}`,s,u;return{c(){t=G("g"),n=G("line"),o=G("text"),s=q(r),h(n,"class","axis-tick svelte-1nna9rx"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",l=-e[5]+e[12].bottom+e[12].top),h(n,"stroke","black"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-1nna9rx"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",u=`translate(${e[3](e[25])+0} ${e[5]-e[12].bottom})`),h(t,"class","svelte-1nna9rx")},m(a,f){T(a,t,f),b(t,n),b(t,o),b(o,s)},p(a,f){f&32&&l!==(l=-a[5]+a[12].bottom+a[12].top)&&h(n,"y2",l),f&256&&r!==(r=`Q.${a[25]}`)&&K(s,r),f&296&&u!==(u=`translate(${a[3](a[25])+0} ${a[5]-a[12].bottom})`)&&h(t,"transform",u)},d(a){a&&I(t)}}}function Br(e){let t=Number.isInteger(e[25]),n,l=t&&Gr(e);return{c(){l&&l.c(),n=Ce()},m(o,r){l&&l.m(o,r),T(o,n,r)},p(o,r){r&256&&(t=Number.isInteger(o[25])),t?l?l.p(o,r):(l=Gr(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){l&&l.d(o),o&&I(n)}}}function jr(e,t){let n,l,o,r,s,u,a,f,c;function d(){return t[15](t[24])}function p(){return t[16](t[24])}return{key:e,first:null,c(){n=G("path"),r=G("path"),h(n,"class","model-path-outer svelte-1nna9rx"),h(n,"d",l=t[10](t[20])),h(n,"stroke","white"),h(n,"data-model",o=t[2][t[24]]),h(r,"class","model-path svelte-1nna9rx"),h(r,"d",s=t[10](t[20])),h(r,"role","img"),h(r,"stroke",u=t[11](t[2][t[24]])),h(r,"data-model",a=t[2][t[24]]),this.first=n},m(g,m){T(g,n,m),T(g,r,m),f||(c=[x(r,"mouseover",d),x(r,"focus",p),x(r,"mouseout",wl),x(r,"blur",wl)],f=!0)},p(g,m){t=g,m&1536&&l!==(l=t[10](t[20]))&&h(n,"d",l),m&516&&o!==(o=t[2][t[24]])&&h(n,"data-model",o),m&1536&&s!==(s=t[10](t[20]))&&h(r,"d",s),m&2564&&u!==(u=t[11](t[2][t[24]]))&&h(r,"stroke",u),m&516&&a!==(a=t[2][t[24]])&&h(r,"data-model",a)},d(g){g&&I(n),g&&I(r),f=!1,ve(c)}}}function xr(e,t){let n,l,o,r,s,u,a=t[20].rank+"",f,c,d,p;return{key:e,first:null,c(){n=G("g"),l=G("circle"),u=G("text"),f=q(a),h(l,"r",o=t[20].answer.length/2*0+12),h(l,"fill",r=t[11](t[20].model)),h(l,"stroke","white"),h(l,"class","model-circle svelte-1nna9rx"),h(l,"role","img"),h(l,"data-model",s=t[20].model),h(u,"class","bump-text svelte-1nna9rx"),h(u,"text-anchor","middle"),h(u,"alignment-baseline","middle"),h(u,"color","white"),h(u,"fill","white"),h(n,"transform",c=`translate(${t[3](t[20].qid)}, ${t[4](t[20].rank)})`),h(n,"class","svelte-1nna9rx"),this.first=n},m(g,m){T(g,n,m),b(n,l),b(n,u),b(u,f),d||(p=[x(l,"mouseover",t[17]),x(l,"focus",t[18]),x(l,"mouseout",wl),x(l,"blur",wl)],d=!0)},p(g,m){t=g,m&128&&o!==(o=t[20].answer.length/2*0+12)&&h(l,"r",o),m&2176&&r!==(r=t[11](t[20].model))&&h(l,"fill",r),m&128&&s!==(s=t[20].model)&&h(l,"data-model",s),m&128&&a!==(a=t[20].rank+"")&&K(f,a),m&152&&c!==(c=`translate(${t[3](t[20].qid)}, ${t[4](t[20].rank)})`)&&h(n,"transform",c)},d(g){g&&I(n),d=!1,ve(p)}}}function $p(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m=[],_=new Map,v,y=[],w=new Map,S,M,C,E,$,A=e[8],k=[];for(let O=0;O<A.length;O+=1)k[O]=Br(Hr(e,A,O));let F=e[9];const N=O=>O[24];for(let O=0;O<F.length;O+=1){let B=qr(e,F,O),j=N(B);_.set(j,m[O]=jr(j,B))}let D=e[7];const L=O=>O[20].model+O[20].qid;for(let O=0;O<D.length;O+=1){let B=Lr(e,D,O),j=L(B);w.set(j,y[O]=xr(j,B))}return{c(){t=R("div"),n=G("svg"),l=G("line");for(let O=0;O<k.length;O+=1)k[O].c();u=G("text"),f=G("text"),p=G("text");for(let O=0;O<m.length;O+=1)m[O].c();v=Ce();for(let O=0;O<y.length;O+=1)y[O].c();S=G("text"),M=q("Per-Question Ranks"),C=G("text"),E=q("Answer ranks over time, by model."),h(l,"class","axis-line svelte-1nna9rx"),h(l,"x1",e[12].left),h(l,"x2",o=e[6]-e[12].right),h(l,"y1",r=e[5]-e[12].bottom),h(l,"y2",s=e[5]-e[12].bottom),h(u,"class","chart-title svelte-1nna9rx"),h(u,"y",e[12].top/2),h(u,"x",a=(e[6]+e[12].left)/2),h(u,"text-anchor","middle"),h(f,"class","axis-label svelte-1nna9rx"),h(f,"y",c=e[5]+e[12].bottom+10),h(f,"x",d=(e[6]+e[12].left)/2),h(f,"text-anchor","middle"),h(p,"class","axis-label svelte-1nna9rx"),h(p,"y",e[12].left/2),h(p,"x",g=-(e[5]/2)),h(p,"text-anchor","middle"),h(p,"transform","rotate(-90)"),h(S,"class","chart-title svelte-1nna9rx"),h(S,"y",e[12].top/2),h(S,"x",e[12].left),h(S,"text-anchor","start"),h(C,"class","chart-subtitle svelte-1nna9rx"),h(C,"y",e[12].top/2+15),h(C,"x",e[12].left),h(C,"opacity",".6"),h(C,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-1nna9rx"),h(t,"id","chart-holder"),h(t,"class","svelte-1nna9rx"),Me(()=>e[19].call(t))},m(O,B){T(O,t,B),b(t,n),b(n,l);for(let j=0;j<k.length;j+=1)k[j]&&k[j].m(n,null);b(n,u),b(n,f),b(n,p);for(let j=0;j<m.length;j+=1)m[j]&&m[j].m(n,null);b(n,v);for(let j=0;j<y.length;j+=1)y[j]&&y[j].m(n,null);b(n,S),b(S,M),b(n,C),b(C,E),$=ft(t,e[19].bind(t))},p(O,[B]){if(B&64&&o!==(o=O[6]-O[12].right)&&h(l,"x2",o),B&32&&r!==(r=O[5]-O[12].bottom)&&h(l,"y1",r),B&32&&s!==(s=O[5]-O[12].bottom)&&h(l,"y2",s),B&4392){A=O[8];let j;for(j=0;j<A.length;j+=1){const ae=Hr(O,A,j);k[j]?k[j].p(ae,B):(k[j]=Br(ae),k[j].c(),k[j].m(n,u))}for(;j<k.length;j+=1)k[j].d(1);k.length=A.length}B&64&&a!==(a=(O[6]+O[12].left)/2)&&h(u,"x",a),B&32&&c!==(c=O[5]+O[12].bottom+10)&&h(f,"y",c),B&64&&d!==(d=(O[6]+O[12].left)/2)&&h(f,"x",d),B&32&&g!==(g=-(O[5]/2))&&h(p,"x",g),B&11780&&(F=O[9],m=pt(m,B,N,1,O,F,_,n,en,jr,v,qr)),B&16787608&&(D=O[7],y=pt(y,B,L,1,O,D,w,n,en,xr,S,Lr)),B&2&&h(n,"width",O[1]),B&1&&h(n,"height",O[0])},i:U,o:U,d(O){O&&I(t),_e(k,O);for(let B=0;B<m.length;B+=1)m[B].d();for(let B=0;B<y.length;B+=1)y[B].d();$()}}}function wl(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function Rp(e,t,n){let l,o,r,s,u,a,f,c,d,p,g;ue(e,on,$=>n(7,g=$));let m,_,v={top:35,bottom:15,left:10,right:0};function y($){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(A=>{A.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${l[$]}"], .model-circle[data-model="${l[$]}"]`).forEach(A=>{A.style.opacity=1})}const w=$=>y($),S=$=>y($),M=()=>y(i),C=()=>y(i);function E(){_=this.offsetWidth,m=this.offsetHeight,n(1,_),n(0,m)}return e.$$.update=()=>{e.$$.dirty&128&&n(2,l=Array.from(new Set(g.map($=>$.model)))),e.$$.dirty&2&&n(6,o=_-v.left-v.right),e.$$.dirty&1&&n(5,r=m-v.top-v.bottom),e.$$.dirty&192&&n(3,s=ji().domain(g.map($=>$.qid)).padding(.3).range([v.left,o-v.right])),e.$$.dirty&128&&n(14,u=g.map($=>$.rank).sort(($,A)=>$-A)),e.$$.dirty&16416&&n(4,a=ji().domain(u).padding(1).range([v.top,r-v.bottom])),e.$$.dirty&128&&n(11,f=Mt().domain(g.map($=>$.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"])),e.$$.dirty&24&&n(10,c=Cg().x($=>s($.qid)).y($=>a($.rank))),e.$$.dirty&132&&n(9,d=l.map($=>g.filter(A=>A.model===$))),e.$$.dirty&8&&n(8,p=s.domain().length>10?s.domain().filter(($,A)=>A%2===0):s.domain())},[m,_,l,s,a,r,o,g,p,d,c,f,v,y,u,w,S,M,C,E]}class Ap extends ce{constructor(t){super(),de(this,t,Rp,$p,fe,{})}}function Ur(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function Wr(e,t,n){const l=e.slice();return l[16]=t[n],l}function Xr(e,t,n){const l=e.slice();return l[16]=t[n],l}function Yr(e){let t,n,l=e[16]+"",o,r;return{c(){t=G("g"),n=G("text"),o=q(l),h(n,"class","axis-text svelte-1y9gffu"),h(n,"x","-5"),h(n,"y","0"),h(n,"text-anchor","end"),h(t,"transform",r=`translate(${e[9].left} ${e[8](e[16])+e[8].bandwidth()/2})`)},m(s,u){T(s,t,u),b(t,n),b(n,o)},p(s,u){u&4&&l!==(l=s[16]+"")&&K(o,l),u&260&&r!==(r=`translate(${s[9].left} ${s[8](s[16])+s[8].bandwidth()/2})`)&&h(t,"transform",r)},d(s){s&&I(t)}}}function Qr(e){let t,n,l=e[16]+"",o,r;return{c(){t=G("g"),n=G("text"),o=q(l),h(n,"class","axis-text svelte-1y9gffu"),h(n,"y","15"),h(n,"text-anchor","middle"),h(t,"transform",r=`translate(${e[7](e[16])}, ${e[4]-e[9].bottom})`)},m(s,u){T(s,t,u),b(t,n),b(n,o)},p(s,u){u&128&&l!==(l=s[16]+"")&&K(o,l),u&144&&r!==(r=`translate(${s[7](s[16])}, ${s[4]-s[9].bottom})`)&&h(t,"transform",r)},d(s){s&&I(t)}}}function Kr(e){let t,n=e[16]%2==0&&Qr(e);return{c(){n&&n.c(),t=Ce()},m(l,o){n&&n.m(l,o),T(l,t,o)},p(l,o){l[16]%2==0?n?n.p(l,o):(n=Qr(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){n&&n.d(l),l&&I(t)}}}function Jr(e){let t,n,l,o,r,s,u,a=e[13].avgRank.toFixed(2)+"",f,c,d;return{c(){t=G("rect"),u=G("text"),f=q(a),h(t,"y",n=e[8](e[13].model)),h(t,"x",e[9].left),h(t,"width",l=e[7](e[13].avgRank)-e[9].left),h(t,"height",o=e[8].bandwidth()),h(t,"fill",r=e[6](e[13].model)),h(t,"class","model-path"),h(t,"data-model",s=e[5][e[15]]),h(u,"class","label-text svelte-1y9gffu"),h(u,"y",c=e[8](e[13].model)+e[8].bandwidth()/2),h(u,"x",d=e[7](e[13].avgRank)+5),h(u,"text-anchor","start"),h(u,"dominant-baseline","middle")},m(p,g){T(p,t,g),T(p,u,g),b(u,f)},p(p,g){g&260&&n!==(n=p[8](p[13].model))&&h(t,"y",n),g&132&&l!==(l=p[7](p[13].avgRank)-p[9].left)&&h(t,"width",l),g&256&&o!==(o=p[8].bandwidth())&&h(t,"height",o),g&68&&r!==(r=p[6](p[13].model))&&h(t,"fill",r),g&32&&s!==(s=p[5][p[15]])&&h(t,"data-model",s),g&4&&a!==(a=p[13].avgRank.toFixed(2)+"")&&K(f,a),g&260&&c!==(c=p[8](p[13].model)+p[8].bandwidth()/2)&&h(u,"y",c),g&132&&d!==(d=p[7](p[13].avgRank)+5)&&h(u,"x",d)},d(p){p&&I(t),p&&I(u)}}}function Mp(e){let t,n,l,o,r,s,u,a,f,c,d,p,g=e[2].map(Zr),m=[];for(let S=0;S<g.length;S+=1)m[S]=Yr(Xr(e,g,S));let _=e[7].ticks(),v=[];for(let S=0;S<_.length;S+=1)v[S]=Kr(Wr(e,_,S));let y=e[2],w=[];for(let S=0;S<y.length;S+=1)w[S]=Jr(Ur(e,y,S));return{c(){t=R("div"),n=G("svg");for(let S=0;S<m.length;S+=1)m[S].c();l=Ce();for(let S=0;S<v.length;S+=1)v[S].c();o=Ce();for(let S=0;S<w.length;S+=1)w[S].c();r=G("line"),f=G("text"),c=q("Average Rank"),d=G("text"),h(r,"class","axis-line svelte-1y9gffu"),h(r,"x1",e[9].left),h(r,"x2",s=e[3]-e[9].right),h(r,"y1",u=e[4]-e[9].bottom),h(r,"y2",a=e[4]-e[9].bottom),h(f,"class","chart-title"),h(f,"y",e[9].top/2),h(f,"x",e[9].left),h(f,"text-anchor","start"),h(d,"class","chart-subtitle"),h(d,"y",e[9].top/2+15),h(d,"x",e[9].left),h(d,"opacity",".6"),h(d,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","bar-chart-holder"),h(t,"class","svelte-1y9gffu"),Me(()=>e[12].call(t))},m(S,M){T(S,t,M),b(t,n);for(let C=0;C<m.length;C+=1)m[C]&&m[C].m(n,null);b(n,l);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(n,null);b(n,o);for(let C=0;C<w.length;C+=1)w[C]&&w[C].m(n,null);b(n,r),b(n,f),b(f,c),b(n,d),p=ft(t,e[12].bind(t))},p(S,[M]){if(M&772){g=S[2].map(Zr);let C;for(C=0;C<g.length;C+=1){const E=Xr(S,g,C);m[C]?m[C].p(E,M):(m[C]=Yr(E),m[C].c(),m[C].m(n,l))}for(;C<m.length;C+=1)m[C].d(1);m.length=g.length}if(M&656){_=S[7].ticks();let C;for(C=0;C<_.length;C+=1){const E=Wr(S,_,C);v[C]?v[C].p(E,M):(v[C]=Kr(E),v[C].c(),v[C].m(n,o))}for(;C<v.length;C+=1)v[C].d(1);v.length=_.length}if(M&996){y=S[2];let C;for(C=0;C<y.length;C+=1){const E=Ur(S,y,C);w[C]?w[C].p(E,M):(w[C]=Jr(E),w[C].c(),w[C].m(n,r))}for(;C<w.length;C+=1)w[C].d(1);w.length=y.length}M&8&&s!==(s=S[3]-S[9].right)&&h(r,"x2",s),M&16&&u!==(u=S[4]-S[9].bottom)&&h(r,"y1",u),M&16&&a!==(a=S[4]-S[9].bottom)&&h(r,"y2",a),M&2&&h(n,"width",S[1]),M&1&&h(n,"height",S[0])},i:U,o:U,d(S){S&&I(t),_e(m,S),_e(v,S),_e(w,S),p()}}}const Zr=e=>e.model;function Ep(e,t,n){let l,o,r,s,u,a,f,c,d;ue(e,on,v=>n(11,d=v));let p=300,g=500,m={top:50,bottom:0,left:100,right:0};function _(){g=this.offsetWidth,p=this.offsetHeight,n(1,g),n(0,p)}return e.$$.update=()=>{e.$$.dirty&2048&&n(10,l=d.reduce((v,y)=>(v[y.model]?(v[y.model].sum+=y.rank,v[y.model].count++):v[y.model]={sum:y.rank,count:1},v),{})),e.$$.dirty&1024&&n(2,o=Object.keys(l).map(v=>({model:v,avgRank:l[v].sum/l[v].count}))),e.$$.dirty&2&&n(3,r=g-m.left-m.right),e.$$.dirty&1&&n(4,s=p-m.top-m.bottom),e.$$.dirty&20&&n(8,u=Vt().rangeRound([m.top,s-m.bottom]).padding(.05).domain(o.map(v=>v.model))),e.$$.dirty&12&&n(7,a=Xe().rangeRound([m.left,r-m.right]).domain([0,mt(o,v=>v.avgRank)])),e.$$.dirty&4&&n(6,f=Mt().domain(o.map(v=>v.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&2048&&n(5,c=Array.from(new Set(d.map(v=>v.model))))},[p,g,o,r,s,c,f,a,u,m,l,d,_]}class Fp extends ce{constructor(t){super(),de(this,t,Ep,Mp,fe,{})}}function es(e,t,n){const l=e.slice();return l[20]=t[n],l[22]=n,l}function ts(e,t,n){const l=e.slice();return l[23]=t[n],l[25]=n,l}function ns(e,t,n){const l=e.slice();return l[23]=t[n],l}function ls(e){let t,n=e[23].key+"",l,o,r;function s(){return e[10](e[23])}return{c(){t=R("th"),l=q(n),h(t,"class","svelte-owgjbp")},m(u,a){T(u,t,a),b(t,l),o||(r=x(t,"click",s),o=!0)},p(u,a){e=u,a&64&&n!==(n=e[23].key+"")&&K(l,n)},d(u){u&&I(t),o=!1,r()}}}function os(e,t){let n,l=(t[20][t[23].key].length>rs&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"",o,r,s,u;function a(){return t[11](t[22],t[25])}return{key:e,first:null,c(){n=R("td"),o=q(l),h(n,"class",r="cell-type-"+t[23].type+" svelte-owgjbp"),Ae(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),Oe(n,"active",t[4]===`${t[22]}-${t[25]}`),this.first=n},m(f,c){T(f,n,c),b(n,o),s||(u=x(n,"click",a),s=!0)},p(f,c){t=f,c&112&&l!==(l=(t[20][t[23].key].length>rs&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"")&&K(o,l),c&64&&r!==(r="cell-type-"+t[23].type+" svelte-owgjbp")&&h(n,"class",r),c&96&&Ae(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),c&80&&Oe(n,"active",t[4]===`${t[22]}-${t[25]}`)},d(f){f&&I(n),s=!1,u()}}}function is(e){let t,n=[],l=new Map,o,r=e[6];const s=u=>u[23].key;for(let u=0;u<r.length;u+=1){let a=ts(e,r,u),f=s(a);l.set(f,n[u]=os(f,a))}return{c(){t=R("tr");for(let u=0;u<n.length;u+=1)n[u].c();o=P(),h(t,"class","svelte-owgjbp")},m(u,a){T(u,t,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);b(t,o)},p(u,a){a&240&&(r=u[6],n=pt(n,a,s,1,u,r,l,t,en,os,o,ts))},d(u){u&&I(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Dp(e){let t,n,l,o,r,s,u,a,f,c=e[6],d=[];for(let m=0;m<c.length;m+=1)d[m]=ls(ns(e,c,m));let p=e[5],g=[];for(let m=0;m<p.length;m+=1)g[m]=is(es(e,p,m));return{c(){t=R("div"),n=R("div"),l=R("table"),o=R("thead");for(let m=0;m<d.length;m+=1)d[m].c();r=P(),s=R("tbody");for(let m=0;m<g.length;m+=1)g[m].c();a=P(),f=R("br"),h(o,"class","svelte-owgjbp"),h(s,"class","svelte-owgjbp"),h(l,"class",u="pretty-table "+e[0].style+" svelte-owgjbp"),h(n,"class","svelte-owgjbp"),h(f,"class","svelte-owgjbp"),h(t,"class","table svelte-owgjbp")},m(m,_){T(m,t,_),b(t,n),b(n,l),b(l,o);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(o,null);b(l,r),b(l,s);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(s,null);b(t,a),b(t,f)},p(m,[_]){if(_&78){c=m[6];let v;for(v=0;v<c.length;v+=1){const y=ns(m,c,v);d[v]?d[v].p(y,_):(d[v]=ls(y),d[v].c(),d[v].m(o,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=c.length}if(_&240){p=m[5];let v;for(v=0;v<p.length;v+=1){const y=es(m,p,v);g[v]?g[v].p(y,_):(g[v]=is(y),g[v].c(),g[v].m(s,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=p.length}_&1&&u!==(u="pretty-table "+m[0].style+" svelte-owgjbp")&&h(l,"class",u)},i:U,o:U,d(m){m&&I(t),_e(d,m),_e(g,m)}}}let rs=25,Ip=0;function Np(e,t,n){let l,o,r,s;ue(e,on,M=>n(9,s=M));let u={};const a=vt(".2f");function f(M){let C=M.reduce(($,A)=>($[A.model]||($[A.model]=[]),$[A.model].push(A.rank),$),{});return Object.entries(C).map(([$,A])=>{let k=A.reduce((N,D)=>(N[D]=(N[D]||0)+1,N),{}),F=Object.entries(k).reduce((N,D)=>D[1]>N[1]?D:N)[0];return{model:$,overall_rank:Number(F),average_rank:a(Sh(A)),standard_deviation_rank:a(ah(A))}})}u={...{columns:{},style:"normal",paged:25},...u};const d=Xe().domain([-1,0,1]).range(["#FF5470","#f8f8f8","#00ebc7"]);let{sortable:p,index:g,paged:m}=u,_,v=!0;if(p&&g)throw new Error("A table can either be ranked or sortable, but not both");g=1,p=1;let y=null;const w=M=>{p&&(_===M.key&&n(2,v=!v),n(1,_=M.key))},S=(M,C)=>{n(4,y=y===`${M}-${C}`?null:`${M}-${C}`)};return e.$$.update=()=>{if(e.$$.dirty&512,e.$$.dirty&512&&n(8,l=f(s)),e.$$.dirty&774){_&&n(8,l=l.slice().sort((C,E)=>{let $=C[_],A=E[_];if($==A)return JSON.stringify(C).localeCompare(JSON.stringify(E));let k=$>A?1:$<A?-1:0;return v&&(k=-k),k}));let M=Ip*m;n(5,r=l.slice(M,M+(m||l.length))),m&&Math.ceil(s.length/m)}e.$$.dirty&257&&n(6,o=Object.keys(l[0]).map(M=>{const C=u.columns[M]||{};return{key:M,type:C.type||typeof l[0][M],options:C}}))},n(5,r=[]),[u,_,v,p,y,r,o,d,l,s,w,S]}let Pp=class extends ce{constructor(t){super(),de(this,t,Np,Dp,fe,{})}};function ss(e,t,n){const l=e.slice();return l[19]=t[n],l}function as(e,t,n){const l=e.slice();return l[22]=t[n],l}function us(e,t,n){const l=e.slice();return l[25]=t[n],l[27]=n,l}function fs(e){let t,n=e[25]+"",l,o,r,s=e[25]+"",u,a;return{c(){t=G("text"),l=q(n),r=G("text"),u=q(s),h(t,"class","axis-text svelte-t6wv8i"),h(t,"x",o=e[7].left+e[5](e[25])+e[5].bandwidth()/2),h(t,"y",e[7].top-10),h(t,"text-anchor","middle"),h(r,"class","axis-text svelte-t6wv8i"),h(r,"x",e[7].left-10),h(r,"y",a=e[7].top+e[4](e[25])+e[4].bandwidth()/2),h(r,"text-anchor","end"),h(r,"dominant-baseline","middle")},m(f,c){T(f,t,c),b(t,l),T(f,r,c),b(r,u)},p(f,c){c&8&&n!==(n=f[25]+"")&&K(l,n),c&40&&o!==(o=f[7].left+f[5](f[25])+f[5].bandwidth()/2)&&h(t,"x",o),c&8&&s!==(s=f[25]+"")&&K(u,s),c&24&&a!==(a=f[7].top+f[4](f[25])+f[4].bandwidth()/2)&&h(r,"y",a)},d(f){f&&I(t),f&&I(r)}}}function cs(e){let t,n,l,o,r,s,u,a,f=e[6](e[2][e[19]][e[22]])+"",c,d,p,g;return{c(){t=G("rect"),a=G("text"),c=q(f),h(t,"x",n=e[7].left+e[5](e[22])),h(t,"y",l=e[7].top+e[4](e[19])),h(t,"width",o=e[5].bandwidth()),h(t,"height",r=e[4].bandwidth()),h(t,"fill",s=e[8](e[19],e[22])),h(t,"rx","4"),h(t,"ry","4"),h(t,"class","model-path"),h(t,"data-model",u=e[19]),h(a,"x",d=e[7].left+e[5](e[22])+e[5].bandwidth()/2),h(a,"y",p=e[7].top+e[4](e[19])+e[4].bandwidth()/2),h(a,"text-anchor","middle"),h(a,"dominant-baseline","middle"),h(a,"class","model-path"),h(a,"data-model",g=e[19])},m(m,_){T(m,t,_),T(m,a,_),b(a,c)},p(m,_){_&40&&n!==(n=m[7].left+m[5](m[22]))&&h(t,"x",n),_&24&&l!==(l=m[7].top+m[4](m[19]))&&h(t,"y",l),_&32&&o!==(o=m[5].bandwidth())&&h(t,"width",o),_&16&&r!==(r=m[4].bandwidth())&&h(t,"height",r),_&8&&s!==(s=m[8](m[19],m[22]))&&h(t,"fill",s),_&8&&u!==(u=m[19])&&h(t,"data-model",u),_&12&&f!==(f=m[6](m[2][m[19]][m[22]])+"")&&K(c,f),_&40&&d!==(d=m[7].left+m[5](m[22])+m[5].bandwidth()/2)&&h(a,"x",d),_&24&&p!==(p=m[7].top+m[4](m[19])+m[4].bandwidth()/2)&&h(a,"y",p),_&8&&g!==(g=m[19])&&h(a,"data-model",g)},d(m){m&&I(t),m&&I(a)}}}function ds(e){let t,n=e[3],l=[];for(let o=0;o<n.length;o+=1)l[o]=cs(as(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=Ce()},m(o,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(o,r);T(o,t,r)},p(o,r){if(r&508){n=o[3];let s;for(s=0;s<n.length;s+=1){const u=as(o,n,s);l[s]?l[s].p(u,r):(l[s]=cs(u),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(o){_e(l,o),o&&I(t)}}}function Tp(e){let t,n,l,o,r,s,u,a=e[3],f=[];for(let p=0;p<a.length;p+=1)f[p]=fs(us(e,a,p));let c=e[3],d=[];for(let p=0;p<c.length;p+=1)d[p]=ds(ss(e,c,p));return{c(){t=R("div"),n=G("svg");for(let p=0;p<f.length;p+=1)f[p].c();l=Ce();for(let p=0;p<d.length;p+=1)d[p].c();o=G("text"),r=q("Relative Performance"),s=G("text"),h(o,"class","chart-title"),h(o,"y",e[7].top/2),h(o,"x",e[7].left),h(o,"text-anchor","start"),h(s,"class","chart-subtitle svelte-t6wv8i"),h(s,"y",e[7].top/2+15),h(s,"x",e[7].left),h(s,"opacity",".6"),h(s,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","heatmap-holder"),h(t,"class","svelte-t6wv8i"),Me(()=>e[16].call(t))},m(p,g){T(p,t,g),b(t,n);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(n,null);b(n,l);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(n,null);b(n,o),b(o,r),b(n,s),u=ft(t,e[16].bind(t))},p(p,[g]){if(g&184){a=p[3];let m;for(m=0;m<a.length;m+=1){const _=us(p,a,m);f[m]?f[m].p(_,g):(f[m]=fs(_),f[m].c(),f[m].m(n,l))}for(;m<f.length;m+=1)f[m].d(1);f.length=a.length}if(g&508){c=p[3];let m;for(m=0;m<c.length;m+=1){const _=ss(p,c,m);d[m]?d[m].p(_,g):(d[m]=ds(_),d[m].c(),d[m].m(n,o))}for(;m<d.length;m+=1)d[m].d(1);d.length=c.length}g&2&&h(n,"width",p[1]),g&1&&h(n,"height",p[0])},i:U,o:U,d(p){p&&I(t),_e(f,p),_e(d,p),u()}}}function Op(e,t,n){let l,o,r,s,u,a,f,c,d,p,g;ue(e,on,C=>n(15,g=C));const m=vt(".1f");function _(C){let E=C.reduce((k,F)=>(k[F.qid]||(k[F.qid]=[]),k[F.qid].push(F),k),{}),$=Array.from(new Set(C.map(k=>k.model))),A=$.reduce((k,F)=>(k[F]=$.reduce((N,D)=>(N[D]={sum:0,count:0},N),{}),k),{});for(let k in E){let F=E[k];for(let N of $)for(let D of $){let L=F.find(B=>B.model===N),O=F.find(B=>B.model===D);L&&O&&(A[N][D].sum+=O.rank-L.rank,A[N][D].count++)}}for(let k in A)for(let F in A[k])A[k][F].count>0?A[k][F]=A[k][F].sum/A[k][F].count:A[k][F]=0;return A}let v=500,y=500,w={top:50,bottom:0,left:65,right:25};function S(C,E){let $=l[C][E];return $===0?"white":$>=0?p(C):p(E)}function M(){y=this.offsetWidth,v=this.offsetHeight,n(1,y),n(0,v)}return e.$$.update=()=>{e.$$.dirty&32768&&n(2,l=_(g)),e.$$.dirty&32768&&n(3,o=Array.from(new Set(g.map(C=>C.model)))),e.$$.dirty&2&&n(14,r=y-w.left-w.right),e.$$.dirty&1&&n(13,s=v-w.top-w.bottom),e.$$.dirty&16392&&n(5,u=Vt().range([0,r]).domain(o).padding(.05)),e.$$.dirty&8200&&n(4,a=Vt().range([0,s]).domain(o).padding(.05)),e.$$.dirty&4&&n(12,f=Object.values(l).flatMap(C=>Object.values(C))),e.$$.dirty&4096&&n(11,c=so(f)),e.$$.dirty&4096&&n(10,d=mt(f)),e.$$.dirty&8&&n(9,p=Mt().domain(o).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&3592&&o.reduce((C,E)=>(C[E]=Ba().domain([c,d]).interpolator(uo("white",p(E))),C),{})},[v,y,l,o,a,u,m,w,S,p,d,c,f,s,r,g,M]}class zp extends ce{constructor(t){super(),de(this,t,Op,Tp,fe,{})}}function hs(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function Vp(e){let t;return{c(){t=R("div"),t.innerHTML="<h5>To view the comparison dashboard, you must first rank some comparisons!</h5>",h(t,"class","holder svelte-7imt18")},m(n,l){T(n,t,l)},p:U,i:U,o:U,d(n){n&&I(t)}}}function Lp(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m,_,v,y,w,S,M,C,E=e[1],$=[];for(let A=0;A<E.length;A+=1)$[A]=gs(hs(e,E,A));return a=new Ap({}),d=new Pp({}),y=new Fp({}),M=new zp({}),{c(){t=R("div"),n=R("div"),l=R("div"),o=R("h4"),o.textContent="Model Comparisons",r=P();for(let A=0;A<$.length;A+=1)$[A].c();s=P(),u=R("div"),ne(a.$$.fragment),f=P(),c=R("div"),ne(d.$$.fragment),p=P(),g=R("div"),m=R("div"),_=P(),v=R("div"),ne(y.$$.fragment),w=P(),S=R("div"),ne(M.$$.fragment),h(o,"class","svelte-7imt18"),h(l,"class","chart-captions svelte-7imt18"),h(u,"class","eval-main"),h(c,"class","eval-table svelte-7imt18"),h(n,"class","left-charts svelte-7imt18"),h(m,"class","right-chart-1"),h(v,"class","right-chart-2"),h(S,"class","right-chart-3"),h(g,"class","right-charts svelte-7imt18"),h(t,"class","eval-container svelte-7imt18")},m(A,k){T(A,t,k),b(t,n),b(n,l),b(l,o),b(l,r);for(let F=0;F<$.length;F+=1)$[F]&&$[F].m(l,null);b(n,s),b(n,u),ee(a,u,null),b(n,f),b(n,c),ee(d,c,null),b(t,p),b(t,g),b(g,m),b(g,_),b(g,v),ee(y,v,null),b(g,w),b(g,S),ee(M,S,null),C=!0},p(A,k){if(k&14){E=A[1];let F;for(F=0;F<E.length;F+=1){const N=hs(A,E,F);$[F]?$[F].p(N,k):($[F]=gs(N),$[F].c(),$[F].m(l,null))}for(;F<$.length;F+=1)$[F].d(1);$.length=E.length}},i(A){C||(z(a.$$.fragment,A),z(d.$$.fragment,A),z(y.$$.fragment,A),z(M.$$.fragment,A),C=!0)},o(A){V(a.$$.fragment,A),V(d.$$.fragment,A),V(y.$$.fragment,A),V(M.$$.fragment,A),C=!1},d(A){A&&I(t),_e($,A),te(a),te(d),te(y),te(M)}}}function gs(e){let t,n=e[7]+"",l,o,r,s;function u(){return e[4](e[9])}function a(){return e[5](e[9])}return{c(){t=R("button"),l=q(n),h(t,"data-model",o=e[7]),h(t,"class","model-path svelte-7imt18"),Ae(t,"color","white"),Ae(t,"background",e[2](e[7]))},m(f,c){T(f,t,c),b(t,l),r||(s=[x(t,"mouseover",u),x(t,"focus",a),x(t,"mouseout",ps),x(t,"blur",ps)],r=!0)},p(f,c){e=f,c&2&&n!==(n=e[7]+"")&&K(l,n),c&2&&o!==(o=e[7])&&h(t,"data-model",o),c&6&&Ae(t,"background",e[2](e[7]))},d(f){f&&I(t),r=!1,ve(s)}}}function qp(e){let t,n,l,o;const r=[Lp,Vp],s=[];function u(a,f){return a[0].length>0?0:1}return n=u(e),l=s[n]=r[n](e),{c(){t=R("div"),l.c(),h(t,"class","main-container svelte-7imt18")},m(a,f){T(a,t,f),s[n].m(t,null),o=!0},p(a,[f]){let c=n;n=u(a),n===c?s[n].p(a,f):(we(),V(s[c],1,1,()=>{s[c]=null}),ye(),l=s[n],l?l.p(a,f):(l=s[n]=r[n](a),l.c()),z(l,1),l.m(t,null))},i(a){o||(z(l),o=!0)},o(a){V(l),o=!1},d(a){a&&I(t),s[n].d()}}}function ps(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function Hp(e,t,n){let l,o,r;ue(e,on,c=>n(0,r=c));async function s(){const d=await(await fetch("/chat/comparator/db/retrieve")).json();console.log("uploooo",d);const g=d.data.map(m=>({model:m.model,answer:m.answer,qid:parseInt(m.qid),rank:parseInt(m.rank)}));De(on,r=[...g],r)}ct(()=>{s()});function u(c){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(d=>{d.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${l[c]}"], .model-circle[data-model="${l[c]}"]`).forEach(d=>{d.style.opacity=1})}const a=c=>u(c),f=c=>u(c);return e.$$.update=()=>{e.$$.dirty&1&&n(1,l=Array.from(new Set(r.map(c=>c.model)))),e.$$.dirty&1&&n(2,o=Mt().domain(r.map(c=>c.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"]))},[r,l,o,u,a,f]}class Gp extends ce{constructor(t){super(),de(this,t,Hp,qp,fe,{})}}function Bp(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return gu(this.cover(t,n),t,n,e)}function gu(e,t,n,l){if(isNaN(t)||isNaN(n))return e;var o,r=e._root,s={data:l},u=e._x0,a=e._y0,f=e._x1,c=e._y1,d,p,g,m,_,v,y,w;if(!r)return e._root=s,e;for(;r.length;)if((_=t>=(d=(u+f)/2))?u=d:f=d,(v=n>=(p=(a+c)/2))?a=p:c=p,o=r,!(r=r[y=v<<1|_]))return o[y]=s,e;if(g=+e._x.call(null,r.data),m=+e._y.call(null,r.data),t===g&&n===m)return s.next=r,o?o[y]=s:e._root=s,e;do o=o?o[y]=new Array(4):e._root=new Array(4),(_=t>=(d=(u+f)/2))?u=d:f=d,(v=n>=(p=(a+c)/2))?a=p:c=p;while((y=v<<1|_)===(w=(m>=p)<<1|g>=d));return o[w]=r,o[y]=s,e}function jp(e){var t,n,l=e.length,o,r,s=new Array(l),u=new Array(l),a=1/0,f=1/0,c=-1/0,d=-1/0;for(n=0;n<l;++n)isNaN(o=+this._x.call(null,t=e[n]))||isNaN(r=+this._y.call(null,t))||(s[n]=o,u[n]=r,o<a&&(a=o),o>c&&(c=o),r<f&&(f=r),r>d&&(d=r));if(a>c||f>d)return this;for(this.cover(a,f).cover(c,d),n=0;n<l;++n)gu(this,s[n],u[n],e[n]);return this}function xp(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,l=this._y0,o=this._x1,r=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,r=(l=Math.floor(t))+1;else{for(var s=o-n||1,u=this._root,a,f;n>e||e>=o||l>t||t>=r;)switch(f=(t<l)<<1|e<n,a=new Array(4),a[f]=u,u=a,s*=2,f){case 0:o=n+s,r=l+s;break;case 1:n=o-s,r=l+s;break;case 2:o=n+s,l=r-s;break;case 3:n=o-s,l=r-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=l,this._x1=o,this._y1=r,this}function Up(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Wp(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ze(e,t,n,l,o){this.node=e,this.x0=t,this.y0=n,this.x1=l,this.y1=o}function Xp(e,t,n){var l,o=this._x0,r=this._y0,s,u,a,f,c=this._x1,d=this._y1,p=[],g=this._root,m,_;for(g&&p.push(new ze(g,o,r,c,d)),n==null?n=1/0:(o=e-n,r=t-n,c=e+n,d=t+n,n*=n);m=p.pop();)if(!(!(g=m.node)||(s=m.x0)>c||(u=m.y0)>d||(a=m.x1)<o||(f=m.y1)<r))if(g.length){var v=(s+a)/2,y=(u+f)/2;p.push(new ze(g[3],v,y,a,f),new ze(g[2],s,y,v,f),new ze(g[1],v,u,a,y),new ze(g[0],s,u,v,y)),(_=(t>=y)<<1|e>=v)&&(m=p[p.length-1],p[p.length-1]=p[p.length-1-_],p[p.length-1-_]=m)}else{var w=e-+this._x.call(null,g.data),S=t-+this._y.call(null,g.data),M=w*w+S*S;if(M<n){var C=Math.sqrt(n=M);o=e-C,r=t-C,c=e+C,d=t+C,l=g.data}}return l}function Yp(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,l,o,r,s=this._x0,u=this._y0,a=this._x1,f=this._y1,c,d,p,g,m,_,v,y;if(!n)return this;if(n.length)for(;;){if((m=c>=(p=(s+a)/2))?s=p:a=p,(_=d>=(g=(u+f)/2))?u=g:f=g,t=n,!(n=n[v=_<<1|m]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(l=t,y=v)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(r=n.next)&&delete n.next,o?(r?o.next=r:delete o.next,this):t?(r?t[v]=r:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(l?l[y]=n:this._root=n),this):(this._root=r,this)}function Qp(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Kp(){return this._root}function Jp(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Zp(e){var t=[],n,l=this._root,o,r,s,u,a;for(l&&t.push(new ze(l,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(l=n.node,r=n.x0,s=n.y0,u=n.x1,a=n.y1)&&l.length){var f=(r+u)/2,c=(s+a)/2;(o=l[3])&&t.push(new ze(o,f,c,u,a)),(o=l[2])&&t.push(new ze(o,r,c,f,a)),(o=l[1])&&t.push(new ze(o,f,s,u,c)),(o=l[0])&&t.push(new ze(o,r,s,f,c))}return this}function em(e){var t=[],n=[],l;for(this._root&&t.push(new ze(this._root,this._x0,this._y0,this._x1,this._y1));l=t.pop();){var o=l.node;if(o.length){var r,s=l.x0,u=l.y0,a=l.x1,f=l.y1,c=(s+a)/2,d=(u+f)/2;(r=o[0])&&t.push(new ze(r,s,u,c,d)),(r=o[1])&&t.push(new ze(r,c,u,a,d)),(r=o[2])&&t.push(new ze(r,s,d,c,f)),(r=o[3])&&t.push(new ze(r,c,d,a,f))}n.push(l)}for(;l=n.pop();)e(l.node,l.x0,l.y0,l.x1,l.y1);return this}function tm(e){return e[0]}function nm(e){return arguments.length?(this._x=e,this):this._x}function lm(e){return e[1]}function om(e){return arguments.length?(this._y=e,this):this._y}function pu(e,t,n){var l=new Go(t??tm,n??lm,NaN,NaN,NaN,NaN);return e==null?l:l.addAll(e)}function Go(e,t,n,l,o,r){this._x=e,this._y=t,this._x0=n,this._y0=l,this._x1=o,this._y1=r,this._root=void 0}function ms(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Le=pu.prototype=Go.prototype;Le.copy=function(){var e=new Go(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,l;if(!t)return e;if(!t.length)return e._root=ms(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var o=0;o<4;++o)(l=t.source[o])&&(l.length?n.push({source:l,target:t.target[o]=new Array(4)}):t.target[o]=ms(l));return e};Le.add=Bp;Le.addAll=jp;Le.cover=xp;Le.data=Up;Le.extent=Wp;Le.find=Xp;Le.remove=Yp;Le.removeAll=Qp;Le.root=Kp;Le.size=Jp;Le.visit=Zp;Le.visitAfter=em;Le.x=nm;Le.y=om;function it(e){return function(){return e}}function _s(e){return(e()-.5)*1e-6}function im(e){return e.x+e.vx}function rm(e){return e.y+e.vy}function sm(e){var t,n,l,o=1,r=1;typeof e!="function"&&(e=it(e==null?1:+e));function s(){for(var f,c=t.length,d,p,g,m,_,v,y=0;y<r;++y)for(d=pu(t,im,rm).visitAfter(u),f=0;f<c;++f)p=t[f],_=n[p.index],v=_*_,g=p.x+p.vx,m=p.y+p.vy,d.visit(w);function w(S,M,C,E,$){var A=S.data,k=S.r,F=_+k;if(A){if(A.index>p.index){var N=g-A.x-A.vx,D=m-A.y-A.vy,L=N*N+D*D;L<F*F&&(N===0&&(N=_s(l),L+=N*N),D===0&&(D=_s(l),L+=D*D),L=(F-(L=Math.sqrt(L)))/L*o,p.vx+=(N*=L)*(F=(k*=k)/(v+k)),p.vy+=(D*=L)*F,A.vx-=N*(F=1-F),A.vy-=D*F)}return}return M>g+F||E<g-F||C>m+F||$<m-F}}function u(f){if(f.data)return f.r=n[f.data.index];for(var c=f.r=0;c<4;++c)f[c]&&f[c].r>f.r&&(f.r=f[c].r)}function a(){if(t){var f,c=t.length,d;for(n=new Array(c),f=0;f<c;++f)d=t[f],n[d.index]=+e(d,f,t)}}return s.initialize=function(f,c){t=f,l=c,a()},s.iterations=function(f){return arguments.length?(r=+f,s):r},s.strength=function(f){return arguments.length?(o=+f,s):o},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:it(+f),a(),s):e},s}var am={value:()=>{}};function mu(){for(var e=0,t=arguments.length,n={},l;e<t;++e){if(!(l=arguments[e]+"")||l in n||/[\s.]/.test(l))throw new Error("illegal type: "+l);n[l]=[]}return new ll(n)}function ll(e){this._=e}function um(e,t){return e.trim().split(/^|\s+/).map(function(n){var l="",o=n.indexOf(".");if(o>=0&&(l=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:l}})}ll.prototype=mu.prototype={constructor:ll,on:function(e,t){var n=this._,l=um(e+"",n),o,r=-1,s=l.length;if(arguments.length<2){for(;++r<s;)if((o=(e=l[r]).type)&&(o=fm(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<s;)if(o=(e=l[r]).type)n[o]=vs(n[o],e.name,t);else if(t==null)for(o in n)n[o]=vs(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ll(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),l=0,o,r;l<o;++l)n[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],l=0,o=r.length;l<o;++l)r[l].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],o=0,r=l.length;o<r;++o)l[o].value.apply(t,n)}};function fm(e,t){for(var n=0,l=e.length,o;n<l;++n)if((o=e[n]).name===t)return o.value}function vs(e,t,n){for(var l=0,o=e.length;l<o;++l)if(e[l].name===t){e[l]=am,e=e.slice(0,l).concat(e.slice(l+1));break}return n!=null&&e.push({name:t,value:n}),e}var rn=0,mn=0,cn=0,_u=1e3,yl,_n,kl=0,Lt=0,El=0,Nn=typeof performance=="object"&&performance.now?performance:Date,vu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bu(){return Lt||(vu(cm),Lt=Nn.now()+El)}function cm(){Lt=0}function yo(){this._call=this._time=this._next=null}yo.prototype=wu.prototype={constructor:yo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?bu():+n)+(t==null?0:+t),!this._next&&_n!==this&&(_n?_n._next=this:yl=this,_n=this),this._call=e,this._time=n,ko()},stop:function(){this._call&&(this._call=null,this._time=1/0,ko())}};function wu(e,t,n){var l=new yo;return l.restart(e,t,n),l}function dm(){bu(),++rn;for(var e=yl,t;e;)(t=Lt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--rn}function bs(){Lt=(kl=Nn.now())+El,rn=mn=0;try{dm()}finally{rn=0,gm(),Lt=0}}function hm(){var e=Nn.now(),t=e-kl;t>_u&&(El-=t,kl=e)}function gm(){for(var e,t=yl,n,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yl=n);_n=e,ko(l)}function ko(e){if(!rn){mn&&(mn=clearTimeout(mn));var t=e-Lt;t>24?(e<1/0&&(mn=setTimeout(bs,e-Nn.now()-El)),cn&&(cn=clearInterval(cn))):(cn||(kl=Nn.now(),cn=setInterval(hm,_u)),rn=1,vu(bs))}}const pm=1664525,mm=1013904223,ws=4294967296;function _m(){let e=1;return()=>(e=(pm*e+mm)%ws)/ws}var vm=10,bm=Math.PI*(3-Math.sqrt(5));function wm(e){var t,n=1,l=.001,o=1-Math.pow(l,1/300),r=0,s=.6,u=new Map,a=wu(d),f=mu("tick","end"),c=_m();e==null&&(e=[]);function d(){p(),f.call("tick",t),n<l&&(a.stop(),f.call("end",t))}function p(_){var v,y=e.length,w;_===void 0&&(_=1);for(var S=0;S<_;++S)for(n+=(r-n)*o,u.forEach(function(M){M(n)}),v=0;v<y;++v)w=e[v],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function g(){for(var _=0,v=e.length,y;_<v;++_){if(y=e[_],y.index=_,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var w=vm*Math.sqrt(.5+_),S=_*bm;y.x=w*Math.cos(S),y.y=w*Math.sin(S)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function m(_){return _.initialize&&_.initialize(e,c),_}return g(),t={tick:p,restart:function(){return a.restart(d),t},stop:function(){return a.stop(),t},nodes:function(_){return arguments.length?(e=_,g(),u.forEach(m),t):e},alpha:function(_){return arguments.length?(n=+_,t):n},alphaMin:function(_){return arguments.length?(l=+_,t):l},alphaDecay:function(_){return arguments.length?(o=+_,t):+o},alphaTarget:function(_){return arguments.length?(r=+_,t):r},velocityDecay:function(_){return arguments.length?(s=1-_,t):1-s},randomSource:function(_){return arguments.length?(c=_,u.forEach(m),t):c},force:function(_,v){return arguments.length>1?(v==null?u.delete(_):u.set(_,m(v)),t):u.get(_)},find:function(_,v,y){var w=0,S=e.length,M,C,E,$,A;for(y==null?y=1/0:y*=y,w=0;w<S;++w)$=e[w],M=_-$.x,C=v-$.y,E=M*M+C*C,E<y&&(A=$,y=E);return A},on:function(_,v){return arguments.length>1?(f.on(_,v),t):f.on(_)}}}function ym(e){var t=it(.1),n,l,o;typeof e!="function"&&(e=it(e==null?0:+e));function r(u){for(var a=0,f=n.length,c;a<f;++a)c=n[a],c.vx+=(o[a]-c.x)*l[a]*u}function s(){if(n){var u,a=n.length;for(l=new Array(a),o=new Array(a),u=0;u<a;++u)l[u]=isNaN(o[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return r.initialize=function(u){n=u,s()},r.strength=function(u){return arguments.length?(t=typeof u=="function"?u:it(+u),s(),r):t},r.x=function(u){return arguments.length?(e=typeof u=="function"?u:it(+u),s(),r):e},r}function km(e){var t=it(.1),n,l,o;typeof e!="function"&&(e=it(e==null?0:+e));function r(u){for(var a=0,f=n.length,c;a<f;++a)c=n[a],c.vy+=(o[a]-c.y)*l[a]*u}function s(){if(n){var u,a=n.length;for(l=new Array(a),o=new Array(a),u=0;u<a;++u)l[u]=isNaN(o[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return r.initialize=function(u){n=u,s()},r.strength=function(u){return arguments.length?(t=typeof u=="function"?u:it(+u),s(),r):t},r.y=function(u){return arguments.length?(e=typeof u=="function"?u:it(+u),s(),r):e},r}const Sl=Ie([]),ys=Ie({labelNames:["txt2.txt","pdf2.txt"],labels:[0,3],projection:[[.1443715864989249,.00463214192040876,.11292804485781914],[-.05626482326843836,-.013694651798983428,.01709368313171561]]});function ks(e,t,n){const l=e.slice();return l[20]=t[n],l[22]=n,l}function Ss(e){let t,n,l,o,r,s=e[20].file+"",u,a,f=ro(e[20].size)+"",c,d,p,g,m,_,v,y;return{c(){t=G("g"),n=G("circle"),r=G("text"),u=q(s),a=G("tspan"),c=q(f),h(n,"r",l=e[3](e[20].size)),h(n,"fill","var(--primary"),h(n,"stroke","var(--white)"),h(n,"stroke-width","1"),h(n,"fill-opacity",.95),h(n,"class","svelte-h2ab3o"),h(a,"x","0"),h(a,"y","15"),h(r,"class","bubble-file-text svelte-h2ab3o"),h(r,"text-anchor","middle"),h(r,"opacity",d=e[20].size>e[4]?1:0),h(t,"class",g="file-circle-g "+(e[20].size>e[4]?"large":"")+" svelte-h2ab3o"),h(t,"style",m=e[5](e[20].x,e[20].y)),h(t,"role","img")},m(w,S){T(w,t,S),b(t,n),b(t,r),b(r,u),b(r,a),b(a,c),_=!0,v||(y=[x(t,"mouseover",e[6]),x(t,"mouseout",e[7]),x(t,"focus",e[6]),x(t,"blur",e[7])],v=!0)},p(w,S){(!_||S&12&&l!==(l=w[3](w[20].size)))&&h(n,"r",l),(!_||S&4)&&s!==(s=w[20].file+"")&&K(u,s),(!_||S&4)&&f!==(f=ro(w[20].size)+"")&&K(c,f),(!_||S&20&&d!==(d=w[20].size>w[4]?1:0))&&h(r,"opacity",d),(!_||S&20&&g!==(g="file-circle-g "+(w[20].size>w[4]?"large":"")+" svelte-h2ab3o"))&&h(t,"class",g),(!_||S&4&&m!==(m=w[5](w[20].x,w[20].y)))&&h(t,"style",m)},i(w){_||(w&&Me(()=>{_&&(o||(o=ot(n,qn,{duration:1e3},!0)),o.run(1))}),w&&Me(()=>{_&&(p||(p=ot(r,qn,{duration:1e3},!0)),p.run(1))}),_=!0)},o(w){w&&(o||(o=ot(n,qn,{duration:1e3},!1)),o.run(0)),w&&(p||(p=ot(r,qn,{duration:1e3},!1)),p.run(0)),_=!1},d(w){w&&I(t),w&&o&&o.end(),w&&p&&p.end(),v=!1,ve(y)}}}function Sm(e){let t,n,l,o,r=e[2],s=[];for(let a=0;a<r.length;a+=1)s[a]=Ss(ks(e,r,a));const u=a=>V(s[a],1,1,()=>{s[a]=null});return{c(){t=R("div"),n=G("svg");for(let a=0;a<s.length;a+=1)s[a].c();h(n,"width",e[0]),h(n,"height",e[1]),h(n,"class","svelte-h2ab3o"),h(t,"id","network-chart"),Me(()=>e[15].call(t))},m(a,f){T(a,t,f),b(t,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null);l=ft(t,e[15].bind(t)),o=!0},p(a,[f]){if(f&252){r=a[2];let c;for(c=0;c<r.length;c+=1){const d=ks(a,r,c);s[c]?(s[c].p(d,f),z(s[c],1)):(s[c]=Ss(d),s[c].c(),z(s[c],1),s[c].m(n,null))}for(we(),c=r.length;c<s.length;c+=1)u(c);ye()}(!o||f&1)&&h(n,"width",a[0]),(!o||f&2)&&h(n,"height",a[1])},i(a){if(!o){for(let f=0;f<r.length;f+=1)z(s[f]);o=!0}},o(a){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)V(s[f]);o=!1},d(a){a&&I(t),_e(s,a),l()}}}function Cm(e,t,n){let l,o,r,s,u,a,f,c;ue(e,Sl,C=>n(14,c=C));let d=600,p=350,g=!0,m=!1;const _=(C,E)=>`transform: translate(${C}px, ${E}px)`,v=[-4,4],y=[-1,1];function w(){n(8,g=!0),n(9,m=!0);const C=Mn(this);Pl(".file-circle-g").select("text").style("opacity",0),C.raise(),C.select("circle").attr("fill","var(--red)"),C.select("text").style("opacity",1)}const S=()=>{const C=Pl(".file-circle-g");C.select("circle").attr("fill","var(--yellow)"),C.select("text").style("opacity",0),n(9,m=!1),setTimeout(()=>{n(8,g=!1)},1e3)};function M(){d=this.offsetWidth,p=this.offsetHeight,n(0,d),n(1,p)}return e.$$.update=()=>{e.$$.dirty&16387&&n(2,l=c.map(C=>({...C,x:d/2,y:p/2,tickCount:0}))),e.$$.dirty&16384&&console.log(c.map(C=>C.size).sort((C,E)=>C-E)),e.$$.dirty&1&&n(13,o=ym().x(d/2)),e.$$.dirty&2&&n(12,r=km().y(p/2)),e.$$.dirty&16384&&n(3,a=Xe().domain(vn(c,C=>C.size)).range([12,60])),e.$$.dirty&8&&n(10,s=sm().radius(C=>a(C.size)+1).iterations(3)),e.$$.dirty&16384&&n(4,u=kh(c.map(C=>C.size).sort((C,E)=>C-E),.85)),e.$$.dirty&1&&Xe().domain(v).range([5,d]),e.$$.dirty&2&&Xe().domain(y).range([p,5]),e.$$.dirty&4&&n(11,f=wm().nodes(l).on("tick",()=>{n(2,l=[...l])})),e.$$.dirty&15360&&(f.force("x",o),f.force("y",r),f.force("collide",s),f.alpha(.02),f.restart()),e.$$.dirty&19468&&(a.domain(vn(c,C=>C.size)),l.forEach(C=>C.radius=a(C.size)),f.nodes(l),s.radius(C=>C.radius+.5)),e.$$.dirty&768&&g===!1&&(m||Pl(".large").select("text").style("opacity",1))},[d,p,l,a,u,_,w,S,g,m,s,f,r,o,c,M]}class $m extends ce{constructor(t){super(),de(this,t,Cm,Sm,fe,{})}}/**
 * table-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $t(e,t){return typeof e=="function"?e(t):e}function Ke(e,t){return n=>{t.setState(l=>({...l,[e]:$t(n,l[e])}))}}function Cl(e){return e instanceof Function}function Rm(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Am(e,t){const n=[],l=o=>{o.forEach(r=>{n.push(r);const s=t(r);s!=null&&s.length&&l(s)})};return l(e),n}function oe(e,t,n){let l=[],o;return()=>{let r;n.key&&n.debug&&(r=Date.now());const s=e();if(!(s.length!==l.length||s.some((f,c)=>l[c]!==f)))return o;l=s;let a;if(n.key&&n.debug&&(a=Date.now()),o=t(...s),n==null||n.onChange==null||n.onChange(o),n.key&&n.debug&&n!=null&&n.debug()){const f=Math.round((Date.now()-r)*100)/100,c=Math.round((Date.now()-a)*100)/100,d=c/16,p=(g,m)=>{for(g=String(g);g.length<m;)g=" "+g;return g};console.info(`%c⏱ ${p(c,5)} /${p(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,n==null?void 0:n.key)}return o}}function Mm(e,t,n,l){var o,r;const u={...e._getDefaultColumnDef(),...t},a=u.accessorKey;let f=(o=(r=u.id)!=null?r:a?a.replace(".","_"):void 0)!=null?o:typeof u.header=="string"?u.header:void 0,c;if(u.accessorFn?c=u.accessorFn:a&&(a.includes(".")?c=p=>{let g=p;for(const _ of a.split(".")){var m;g=(m=g)==null?void 0:m[_]}return g}:c=p=>p[u.accessorKey]),!f)throw new Error;let d={id:`${String(f)}`,accessorFn:c,parent:l,depth:n,columnDef:u,columns:[],getFlatColumns:oe(()=>[!0],()=>{var p;return[d,...(p=d.columns)==null?void 0:p.flatMap(g=>g.getFlatColumns())]},{key:"column.getFlatColumns",debug:()=>{var p;return(p=e.options.debugAll)!=null?p:e.options.debugColumns}}),getLeafColumns:oe(()=>[e._getOrderColumnsFn()],p=>{var g;if((g=d.columns)!=null&&g.length){let m=d.columns.flatMap(_=>_.getLeafColumns());return p(m)}return[d]},{key:"column.getLeafColumns",debug:()=>{var p;return(p=e.options.debugAll)!=null?p:e.options.debugColumns}})};return d=e._features.reduce((p,g)=>Object.assign(p,g.createColumn==null?void 0:g.createColumn(d,e)),d),d}function Cs(e,t,n){var l;let r={id:(l=n.id)!=null?l:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],u=a=>{a.subHeaders&&a.subHeaders.length&&a.subHeaders.map(u),s.push(a)};return u(r),s},getContext:()=>({table:e,header:r,column:t})};return e._features.forEach(s=>{Object.assign(r,s.createHeader==null?void 0:s.createHeader(r,e))}),r}const Em={createTable:e=>({getHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l,o)=>{var r,s;const u=(r=l==null?void 0:l.map(d=>n.find(p=>p.id===d)).filter(Boolean))!=null?r:[],a=(s=o==null?void 0:o.map(d=>n.find(p=>p.id===d)).filter(Boolean))!=null?s:[],f=n.filter(d=>!(l!=null&&l.includes(d.id))&&!(o!=null&&o.includes(d.id)));return Xn(t,[...u,...f,...a],e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l,o)=>(n=n.filter(r=>!(l!=null&&l.includes(r.id))&&!(o!=null&&o.includes(r.id))),Xn(t,n,e,"center")),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,l)=>{var o;const r=(o=l==null?void 0:l.map(s=>n.find(u=>u.id===s)).filter(Boolean))!=null?o:[];return Xn(t,r,e,"left")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightHeaderGroups:oe(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,l)=>{var o;const r=(o=l==null?void 0:l.map(s=>n.find(u=>u.id===s)).filter(Boolean))!=null?o:[];return Xn(t,r,e,"right")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFooterGroups:oe(()=>[e.getHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFooterGroups:oe(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFooterGroups:oe(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFooterGroups:oe(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFlatHeaders:oe(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFlatHeaders:oe(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFlatHeaders:oe(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFlatHeaders:oe(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterLeafHeaders:oe(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftLeafHeaders:oe(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightLeafHeaders:oe(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeafHeaders:oe(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,l)=>{var o,r,s,u,a,f;return[...(o=(r=t[0])==null?void 0:r.headers)!=null?o:[],...(s=(u=n[0])==null?void 0:u.headers)!=null?s:[],...(a=(f=l[0])==null?void 0:f.headers)!=null?a:[]].map(c=>c.getLeafHeaders()).flat()},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}})})};function Xn(e,t,n,l){var o,r;let s=0;const u=function(p,g){g===void 0&&(g=1),s=Math.max(s,g),p.filter(m=>m.getIsVisible()).forEach(m=>{var _;(_=m.columns)!=null&&_.length&&u(m.columns,g+1)},0)};u(e);let a=[];const f=(p,g)=>{const m={depth:g,id:[l,`${g}`].filter(Boolean).join("_"),headers:[]},_=[];p.forEach(v=>{const y=[..._].reverse()[0],w=v.column.depth===m.depth;let S,M=!1;if(w&&v.column.parent?S=v.column.parent:(S=v.column,M=!0),y&&(y==null?void 0:y.column)===S)y.subHeaders.push(v);else{const C=Cs(n,S,{id:[l,g,S.id,v==null?void 0:v.id].filter(Boolean).join("_"),isPlaceholder:M,placeholderId:M?`${_.filter(E=>E.column===S).length}`:void 0,depth:g,index:_.length});C.subHeaders.push(v),_.push(C)}m.headers.push(v),v.headerGroup=m}),a.push(m),g>0&&f(_,g-1)},c=t.map((p,g)=>Cs(n,p,{depth:s,index:g}));f(c,s-1),a.reverse();const d=p=>p.filter(m=>m.column.getIsVisible()).map(m=>{let _=0,v=0,y=[0];m.subHeaders&&m.subHeaders.length?(y=[],d(m.subHeaders).forEach(S=>{let{colSpan:M,rowSpan:C}=S;_+=M,y.push(C)})):_=1;const w=Math.min(...y);return v=v+w,m.colSpan=_,m.rowSpan=v,{colSpan:_,rowSpan:v}});return d((o=(r=a[0])==null?void 0:r.headers)!=null?o:[]),a}const Yn={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Wl=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Fm={getDefaultColumnDef:()=>Yn,getInitialState:e=>({columnSizing:{},columnSizingInfo:Wl(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",onColumnSizingChange:Ke("columnSizing",e),onColumnSizingInfoChange:Ke("columnSizingInfo",e)}),createColumn:(e,t)=>({getSize:()=>{var n,l,o;const r=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Yn.minSize,(l=r??e.columnDef.size)!=null?l:Yn.size),(o=e.columnDef.maxSize)!=null?o:Yn.maxSize)},getStart:n=>{const l=n?n==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns(),o=l.findIndex(r=>r.id===e.id);if(o>0){const r=l[o-1];return r.getStart(n)+r.getSize()}return 0},resetSize:()=>{t.setColumnSizing(n=>{let{[e.id]:l,...o}=n;return o})},getCanResize:()=>{var n,l;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((l=t.options.enableColumnResizing)!=null?l:!0)},getIsResizing:()=>t.getState().columnSizingInfo.isResizingColumn===e.id}),createHeader:(e,t)=>({getSize:()=>{let n=0;const l=o=>{if(o.subHeaders.length)o.subHeaders.forEach(l);else{var r;n+=(r=o.column.getSize())!=null?r:0}};return l(e),n},getStart:()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},getResizeHandler:()=>{const n=t.getColumn(e.column.id),l=n==null?void 0:n.getCanResize();return o=>{if(!n||!l||(o.persist==null||o.persist(),Xl(o)&&o.touches&&o.touches.length>1))return;const r=e.getSize(),s=e?e.getLeafHeaders().map(_=>[_.column.id,_.column.getSize()]):[[n.id,n.getSize()]],u=Xl(o)?Math.round(o.touches[0].clientX):o.clientX,a={},f=(_,v)=>{typeof v=="number"&&(t.setColumnSizingInfo(y=>{var w,S;const M=v-((w=y==null?void 0:y.startOffset)!=null?w:0),C=Math.max(M/((S=y==null?void 0:y.startSize)!=null?S:0),-.999999);return y.columnSizingStart.forEach(E=>{let[$,A]=E;a[$]=Math.round(Math.max(A+A*C,0)*100)/100}),{...y,deltaOffset:M,deltaPercentage:C}}),(t.options.columnResizeMode==="onChange"||_==="end")&&t.setColumnSizing(y=>({...y,...a})))},c=_=>f("move",_),d=_=>{f("end",_),t.setColumnSizingInfo(v=>({...v,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p={moveHandler:_=>c(_.clientX),upHandler:_=>{document.removeEventListener("mousemove",p.moveHandler),document.removeEventListener("mouseup",p.upHandler),d(_.clientX)}},g={moveHandler:_=>(_.cancelable&&(_.preventDefault(),_.stopPropagation()),c(_.touches[0].clientX),!1),upHandler:_=>{var v;document.removeEventListener("touchmove",g.moveHandler),document.removeEventListener("touchend",g.upHandler),_.cancelable&&(_.preventDefault(),_.stopPropagation()),d((v=_.touches[0])==null?void 0:v.clientX)}},m=Dm()?{passive:!1}:!1;Xl(o)?(document.addEventListener("touchmove",g.moveHandler,m),document.addEventListener("touchend",g.upHandler,m)):(document.addEventListener("mousemove",p.moveHandler,m),document.addEventListener("mouseup",p.upHandler,m)),t.setColumnSizingInfo(_=>({..._,startOffset:u,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:n.id}))}}}),createTable:e=>({setColumnSizing:t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),setColumnSizingInfo:t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),resetColumnSizing:t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},resetHeaderSizeInfo:t=>{var n;e.setColumnSizingInfo(t?Wl():(n=e.initialState.columnSizingInfo)!=null?n:Wl())},getTotalSize:()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0},getLeftTotalSize:()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0},getCenterTotalSize:()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0},getRightTotalSize:()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((l,o)=>l+o.getSize(),0))!=null?t:0}})};let Qn=null;function Dm(){if(typeof Qn=="boolean")return Qn;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return Qn=e,Qn}function Xl(e){return e.type==="touchstart"}const Im={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Ke("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;return{_autoResetExpanded:()=>{var l,o;if(!t){e._queue(()=>{t=!0});return}if((l=(o=e.options.autoResetAll)!=null?o:e.options.autoResetExpanded)!=null?l:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},setExpanded:l=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(l),toggleAllRowsExpanded:l=>{l??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},resetExpanded:l=>{var o,r;e.setExpanded(l?{}:(o=(r=e.initialState)==null?void 0:r.expanded)!=null?o:{})},getCanSomeRowsExpand:()=>e.getPrePaginationRowModel().flatRows.some(l=>l.getCanExpand()),getToggleAllRowsExpandedHandler:()=>l=>{l.persist==null||l.persist(),e.toggleAllRowsExpanded()},getIsSomeRowsExpanded:()=>{const l=e.getState().expanded;return l===!0||Object.values(l).some(Boolean)},getIsAllRowsExpanded:()=>{const l=e.getState().expanded;return typeof l=="boolean"?l===!0:!(!Object.keys(l).length||e.getRowModel().flatRows.some(o=>!o.getIsExpanded()))},getExpandedDepth:()=>{let l=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(r=>{const s=r.split(".");l=Math.max(l,s.length)}),l},getPreExpandedRowModel:()=>e.getSortedRowModel(),getExpandedRowModel:()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())}},createRow:(e,t)=>({toggleExpanded:n=>{t.setExpanded(l=>{var o;const r=l===!0?!0:!!(l!=null&&l[e.id]);let s={};if(l===!0?Object.keys(t.getRowModel().rowsById).forEach(u=>{s[u]=!0}):s=l,n=(o=n)!=null?o:!r,!r&&n)return{...s,[e.id]:!0};if(r&&!n){const{[e.id]:u,...a}=s;return a}return l})},getIsExpanded:()=>{var n;const l=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:l===!0||l!=null&&l[e.id])},getCanExpand:()=>{var n,l,o;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((l=t.options.enableExpanding)!=null?l:!0)&&!!((o=e.subRows)!=null&&o.length)},getToggleExpandedHandler:()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}})},yu=(e,t,n)=>{var l,o,r;const s=n.toLowerCase();return!!(!((l=e.getValue(t))==null||(o=l.toString())==null||(r=o.toLowerCase())==null)&&r.includes(s))};yu.autoRemove=e=>et(e);const ku=(e,t,n)=>{var l,o;return!!(!((l=e.getValue(t))==null||(o=l.toString())==null)&&o.includes(n))};ku.autoRemove=e=>et(e);const Su=(e,t,n)=>{var l,o;return((l=e.getValue(t))==null||(o=l.toString())==null?void 0:o.toLowerCase())===(n==null?void 0:n.toLowerCase())};Su.autoRemove=e=>et(e);const Cu=(e,t,n)=>{var l;return(l=e.getValue(t))==null?void 0:l.includes(n)};Cu.autoRemove=e=>et(e)||!(e!=null&&e.length);const $u=(e,t,n)=>!n.some(l=>{var o;return!((o=e.getValue(t))!=null&&o.includes(l))});$u.autoRemove=e=>et(e)||!(e!=null&&e.length);const Ru=(e,t,n)=>n.some(l=>{var o;return(o=e.getValue(t))==null?void 0:o.includes(l)});Ru.autoRemove=e=>et(e)||!(e!=null&&e.length);const Au=(e,t,n)=>e.getValue(t)===n;Au.autoRemove=e=>et(e);const Mu=(e,t,n)=>e.getValue(t)==n;Mu.autoRemove=e=>et(e);const Bo=(e,t,n)=>{let[l,o]=n;const r=e.getValue(t);return r>=l&&r<=o};Bo.resolveFilterValue=e=>{let[t,n]=e,l=typeof t!="number"?parseFloat(t):t,o=typeof n!="number"?parseFloat(n):n,r=t===null||Number.isNaN(l)?-1/0:l,s=n===null||Number.isNaN(o)?1/0:o;if(r>s){const u=r;r=s,s=u}return[r,s]};Bo.autoRemove=e=>et(e)||et(e[0])&&et(e[1]);const dt={includesString:yu,includesStringSensitive:ku,equalsString:Su,arrIncludes:Cu,arrIncludesAll:$u,arrIncludesSome:Ru,equals:Au,weakEquals:Mu,inNumberRange:Bo};function et(e){return e==null||e===""}const Nm={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],globalFilter:void 0,...e}),getDefaultOptions:e=>({onColumnFiltersChange:Ke("columnFilters",e),onGlobalFilterChange:Ke("globalFilter",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100,globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n,l;const o=(n=e.getCoreRowModel().flatRows[0])==null||(l=n._getAllCellsByColumnId()[t.id])==null?void 0:l.getValue();return typeof o=="string"||typeof o=="number"}}),createColumn:(e,t)=>({getAutoFilterFn:()=>{const n=t.getCoreRowModel().flatRows[0],l=n==null?void 0:n.getValue(e.id);return typeof l=="string"?dt.includesString:typeof l=="number"?dt.inNumberRange:typeof l=="boolean"||l!==null&&typeof l=="object"?dt.equals:Array.isArray(l)?dt.arrIncludes:dt.weakEquals},getFilterFn:()=>{var n,l;return Cl(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(l=t.options.filterFns)==null?void 0:l[e.columnDef.filterFn])!=null?n:dt[e.columnDef.filterFn]},getCanFilter:()=>{var n,l,o;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((l=t.options.enableColumnFilters)!=null?l:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&!!e.accessorFn},getCanGlobalFilter:()=>{var n,l,o,r;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((l=t.options.enableGlobalFilter)!=null?l:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&((r=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?r:!0)&&!!e.accessorFn},getIsFiltered:()=>e.getFilterIndex()>-1,getFilterValue:()=>{var n,l;return(n=t.getState().columnFilters)==null||(l=n.find(o=>o.id===e.id))==null?void 0:l.value},getFilterIndex:()=>{var n,l;return(n=(l=t.getState().columnFilters)==null?void 0:l.findIndex(o=>o.id===e.id))!=null?n:-1},setFilterValue:n=>{t.setColumnFilters(l=>{const o=e.getFilterFn(),r=l==null?void 0:l.find(c=>c.id===e.id),s=$t(n,r?r.value:void 0);if($s(o,s,e)){var u;return(u=l==null?void 0:l.filter(c=>c.id!==e.id))!=null?u:[]}const a={id:e.id,value:s};if(r){var f;return(f=l==null?void 0:l.map(c=>c.id===e.id?a:c))!=null?f:[]}return l!=null&&l.length?[...l,a]:[a]})},_getFacetedRowModel:t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),getFacetedRowModel:()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),_getFacetedUniqueValues:t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),getFacetedUniqueValues:()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,_getFacetedMinMaxValues:t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),getFacetedMinMaxValues:()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}),createRow:(e,t)=>({columnFilters:{},columnFiltersMeta:{}}),createTable:e=>({getGlobalAutoFilterFn:()=>dt.includesString,getGlobalFilterFn:()=>{var t,n;const{globalFilterFn:l}=e.options;return Cl(l)?l:l==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[l])!=null?t:dt[l]},setColumnFilters:t=>{const n=e.getAllLeafColumns(),l=o=>{var r;return(r=$t(t,o))==null?void 0:r.filter(s=>{const u=n.find(a=>a.id===s.id);if(u){const a=u.getFilterFn();if($s(a,s.value,u))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(l)},setGlobalFilter:t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},resetGlobalFilter:t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)},resetColumnFilters:t=>{var n,l;e.setColumnFilters(t?[]:(n=(l=e.initialState)==null?void 0:l.columnFilters)!=null?n:[])},getPreFilteredRowModel:()=>e.getCoreRowModel(),getFilteredRowModel:()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel()),_getGlobalFacetedRowModel:e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),getGlobalFacetedRowModel:()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),_getGlobalFacetedUniqueValues:e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),getGlobalFacetedUniqueValues:()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,_getGlobalFacetedMinMaxValues:e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),getGlobalFacetedMinMaxValues:()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}})};function $s(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Pm=(e,t,n)=>n.reduce((l,o)=>{const r=o.getValue(e);return l+(typeof r=="number"?r:0)},0),Tm=(e,t,n)=>{let l;return n.forEach(o=>{const r=o.getValue(e);r!=null&&(l>r||l===void 0&&r>=r)&&(l=r)}),l},Om=(e,t,n)=>{let l;return n.forEach(o=>{const r=o.getValue(e);r!=null&&(l<r||l===void 0&&r>=r)&&(l=r)}),l},zm=(e,t,n)=>{let l,o;return n.forEach(r=>{const s=r.getValue(e);s!=null&&(l===void 0?s>=s&&(l=o=s):(l>s&&(l=s),o<s&&(o=s)))}),[l,o]},Vm=(e,t)=>{let n=0,l=0;if(t.forEach(o=>{let r=o.getValue(e);r!=null&&(r=+r)>=r&&(++n,l+=r)}),n)return l/n},Lm=(e,t)=>{if(!t.length)return;const n=t.map(r=>r.getValue(e));if(!Rm(n))return;if(n.length===1)return n[0];const l=Math.floor(n.length/2),o=n.sort((r,s)=>r-s);return n.length%2!==0?o[l]:(o[l-1]+o[l])/2},qm=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),Hm=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Gm=(e,t)=>t.length,Yl={sum:Pm,min:Tm,max:Om,extent:zm,mean:Vm,median:Lm,unique:qm,uniqueCount:Hm,count:Gm},Bm={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Ke("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>({toggleGrouping:()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(l=>l!==e.id):[...n??[],e.id])},getCanGroup:()=>{var n,l,o,r;return(n=(l=(o=(r=e.columnDef.enableGrouping)!=null?r:!0)!=null?o:t.options.enableGrouping)!=null?l:!0)!=null?n:!!e.accessorFn},getIsGrouped:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},getGroupedIndex:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},getToggleGroupingHandler:()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},getAutoAggregationFn:()=>{const n=t.getCoreRowModel().flatRows[0],l=n==null?void 0:n.getValue(e.id);if(typeof l=="number")return Yl.sum;if(Object.prototype.toString.call(l)==="[object Date]")return Yl.extent},getAggregationFn:()=>{var n,l;if(!e)throw new Error;return Cl(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(l=t.options.aggregationFns)==null?void 0:l[e.columnDef.aggregationFn])!=null?n:Yl[e.columnDef.aggregationFn]}}),createTable:e=>({setGrouping:t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),resetGrouping:t=>{var n,l;e.setGrouping(t?[]:(n=(l=e.initialState)==null?void 0:l.grouping)!=null?n:[])},getPreGroupedRowModel:()=>e.getFilteredRowModel(),getGroupedRowModel:()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())}),createRow:(e,t)=>({getIsGrouped:()=>!!e.groupingColumnId,getGroupingValue:n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const l=t.getColumn(n);return l!=null&&l.columnDef.getGroupingValue?(e._groupingValuesCache[n]=l.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},_groupingValuesCache:{}}),createCell:(e,t,n,l)=>({getIsGrouped:()=>t.getIsGrouped()&&t.id===n.groupingColumnId,getIsPlaceholder:()=>!e.getIsGrouped()&&t.getIsGrouped(),getIsAggregated:()=>{var o;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((o=n.subRows)!=null&&o.length)}})};function jm(e,t,n){if(!(t!=null&&t.length)||!n)return e;const l=e.filter(r=>!t.includes(r.id));return n==="remove"?l:[...t.map(r=>e.find(s=>s.id===r)).filter(Boolean),...l]}const xm={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Ke("columnOrder",e)}),createTable:e=>({setColumnOrder:t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),resetColumnOrder:t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},_getOrderColumnsFn:oe(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,l)=>o=>{let r=[];if(!(t!=null&&t.length))r=o;else{const s=[...t],u=[...o];for(;u.length&&s.length;){const a=s.shift(),f=u.findIndex(c=>c.id===a);f>-1&&r.push(u.splice(f,1)[0])}r=[...r,...u]}return jm(r,n,l)},{key:!1})})},So=0,Co=10,Ql=()=>({pageIndex:So,pageSize:Co}),Um={getInitialState:e=>({...e,pagination:{...Ql(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:Ke("pagination",e)}),createTable:e=>{let t=!1,n=!1;return{_autoResetPageIndex:()=>{var l,o;if(!t){e._queue(()=>{t=!0});return}if((l=(o=e.options.autoResetAll)!=null?o:e.options.autoResetPageIndex)!=null?l:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},setPagination:l=>{const o=r=>$t(l,r);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(o)},resetPagination:l=>{var o;e.setPagination(l?Ql():(o=e.initialState.pagination)!=null?o:Ql())},setPageIndex:l=>{e.setPagination(o=>{let r=$t(l,o.pageIndex);const s=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return r=Math.max(0,Math.min(r,s)),{...o,pageIndex:r}})},resetPageIndex:l=>{var o,r,s;e.setPageIndex(l?So:(o=(r=e.initialState)==null||(s=r.pagination)==null?void 0:s.pageIndex)!=null?o:So)},resetPageSize:l=>{var o,r,s;e.setPageSize(l?Co:(o=(r=e.initialState)==null||(s=r.pagination)==null?void 0:s.pageSize)!=null?o:Co)},setPageSize:l=>{e.setPagination(o=>{const r=Math.max(1,$t(l,o.pageSize)),s=o.pageSize*o.pageIndex,u=Math.floor(s/r);return{...o,pageIndex:u,pageSize:r}})},setPageCount:l=>e.setPagination(o=>{var r;let s=$t(l,(r=e.options.pageCount)!=null?r:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...o,pageCount:s}}),getPageOptions:oe(()=>[e.getPageCount()],l=>{let o=[];return l&&l>0&&(o=[...new Array(l)].fill(null).map((r,s)=>s)),o},{key:!1,debug:()=>{var l;return(l=e.options.debugAll)!=null?l:e.options.debugTable}}),getCanPreviousPage:()=>e.getState().pagination.pageIndex>0,getCanNextPage:()=>{const{pageIndex:l}=e.getState().pagination,o=e.getPageCount();return o===-1?!0:o===0?!1:l<o-1},previousPage:()=>e.setPageIndex(l=>l-1),nextPage:()=>e.setPageIndex(l=>l+1),getPrePaginationRowModel:()=>e.getExpandedRowModel(),getPaginationRowModel:()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),getPageCount:()=>{var l;return(l=e.options.pageCount)!=null?l:Math.ceil(e.getPrePaginationRowModel().rows.length/e.getState().pagination.pageSize)}}}},Kl=()=>({left:[],right:[]}),Wm={getInitialState:e=>({columnPinning:Kl(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Ke("columnPinning",e)}),createColumn:(e,t)=>({pin:n=>{const l=e.getLeafColumns().map(o=>o.id).filter(Boolean);t.setColumnPinning(o=>{var r,s;if(n==="right"){var u,a;return{left:((u=o==null?void 0:o.left)!=null?u:[]).filter(d=>!(l!=null&&l.includes(d))),right:[...((a=o==null?void 0:o.right)!=null?a:[]).filter(d=>!(l!=null&&l.includes(d))),...l]}}if(n==="left"){var f,c;return{left:[...((f=o==null?void 0:o.left)!=null?f:[]).filter(d=>!(l!=null&&l.includes(d))),...l],right:((c=o==null?void 0:o.right)!=null?c:[]).filter(d=>!(l!=null&&l.includes(d)))}}return{left:((r=o==null?void 0:o.left)!=null?r:[]).filter(d=>!(l!=null&&l.includes(d))),right:((s=o==null?void 0:o.right)!=null?s:[]).filter(d=>!(l!=null&&l.includes(d)))}})},getCanPin:()=>e.getLeafColumns().some(l=>{var o,r;return((o=l.columnDef.enablePinning)!=null?o:!0)&&((r=t.options.enablePinning)!=null?r:!0)}),getIsPinned:()=>{const n=e.getLeafColumns().map(u=>u.id),{left:l,right:o}=t.getState().columnPinning,r=n.some(u=>l==null?void 0:l.includes(u)),s=n.some(u=>o==null?void 0:o.includes(u));return r?"left":s?"right":!1},getPinnedIndex:()=>{var n,l,o;const r=e.getIsPinned();return r?(n=(l=t.getState().columnPinning)==null||(o=l[r])==null?void 0:o.indexOf(e.id))!=null?n:-1:0}}),createRow:(e,t)=>({getCenterVisibleCells:oe(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,l,o)=>{const r=[...l??[],...o??[]];return n.filter(s=>!r.includes(s.column.id))},{key:"row.getCenterVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getLeftVisibleCells:oe(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,,],(n,l)=>(l??[]).map(r=>n.find(s=>s.column.id===r)).filter(Boolean).map(r=>({...r,position:"left"})),{key:"row.getLeftVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getRightVisibleCells:oe(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,l)=>(l??[]).map(r=>n.find(s=>s.column.id===r)).filter(Boolean).map(r=>({...r,position:"right"})),{key:"row.getRightVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>({setColumnPinning:t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),resetColumnPinning:t=>{var n,l;return e.setColumnPinning(t?Kl():(n=(l=e.initialState)==null?void 0:l.columnPinning)!=null?n:Kl())},getIsSomeColumnsPinned:t=>{var n;const l=e.getState().columnPinning;if(!t){var o,r;return!!((o=l.left)!=null&&o.length||(r=l.right)!=null&&r.length)}return!!((n=l[t])!=null&&n.length)},getLeftLeafColumns:oe(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(l=>t.find(o=>o.id===l)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getRightLeafColumns:oe(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(l=>t.find(o=>o.id===l)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getCenterLeafColumns:oe(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,l)=>{const o=[...n??[],...l??[]];return t.filter(r=>!o.includes(r.id))},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}})})},Xm={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Ke("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>({setRowSelection:t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),resetRowSelection:t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},toggleAllRowsSelected:t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const l={...n},o=e.getPreGroupedRowModel().flatRows;return t?o.forEach(r=>{r.getCanSelect()&&(l[r.id]=!0)}):o.forEach(r=>{delete l[r.id]}),l})},toggleAllPageRowsSelected:t=>e.setRowSelection(n=>{const l=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),o={...n};return e.getRowModel().rows.forEach(r=>{$o(o,r.id,l,e)}),o}),getPreSelectedRowModel:()=>e.getCoreRowModel(),getSelectedRowModel:oe(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Jl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getFilteredSelectedRowModel:oe(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Jl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getFilteredSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getGroupedSelectedRowModel:oe(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Jl(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getGroupedSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getIsAllRowsSelected:()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let l=!!(t.length&&Object.keys(n).length);return l&&t.some(o=>o.getCanSelect()&&!n[o.id])&&(l=!1),l},getIsAllPageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows.filter(o=>o.getCanSelect()),{rowSelection:n}=e.getState();let l=!!t.length;return l&&t.some(o=>!n[o.id])&&(l=!1),l},getIsSomeRowsSelected:()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},getIsSomePageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},getToggleAllRowsSelectedHandler:()=>t=>{e.toggleAllRowsSelected(t.target.checked)},getToggleAllPageRowsSelectedHandler:()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}}),createRow:(e,t)=>({toggleSelected:n=>{const l=e.getIsSelected();t.setRowSelection(o=>{if(n=typeof n<"u"?n:!l,l===n)return o;const r={...o};return $o(r,e.id,n,t),r})},getIsSelected:()=>{const{rowSelection:n}=t.getState();return jo(e,n)},getIsSomeSelected:()=>{const{rowSelection:n}=t.getState();return Rs(e,n)==="some"},getIsAllSubRowsSelected:()=>{const{rowSelection:n}=t.getState();return Rs(e,n)==="all"},getCanSelect:()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},getCanSelectSubRows:()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},getCanMultiSelect:()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},getToggleSelectedHandler:()=>{const n=e.getCanSelect();return l=>{var o;n&&e.toggleSelected((o=l.target)==null?void 0:o.checked)}}})},$o=(e,t,n,l)=>{var o;const r=l.getRow(t);n?(r.getCanMultiSelect()||Object.keys(e).forEach(s=>delete e[s]),r.getCanSelect()&&(e[t]=!0)):delete e[t],(o=r.subRows)!=null&&o.length&&r.getCanSelectSubRows()&&r.subRows.forEach(s=>$o(e,s.id,n,l))};function Jl(e,t){const n=e.getState().rowSelection,l=[],o={},r=function(s,u){return s.map(a=>{var f;const c=jo(a,n);if(c&&(l.push(a),o[a.id]=a),(f=a.subRows)!=null&&f.length&&(a={...a,subRows:r(a.subRows)}),c)return a}).filter(Boolean)};return{rows:r(t.rows),flatRows:l,rowsById:o}}function jo(e,t){var n;return(n=t[e.id])!=null?n:!1}function Rs(e,t,n){if(e.subRows&&e.subRows.length){let l=!0,o=!1;return e.subRows.forEach(r=>{o&&!l||(jo(r,t)?o=!0:l=!1)}),l?"all":o?"some":!1}return!1}const Ro=/([0-9]+)/gm,Ym=(e,t,n)=>Eu(At(e.getValue(n)).toLowerCase(),At(t.getValue(n)).toLowerCase()),Qm=(e,t,n)=>Eu(At(e.getValue(n)),At(t.getValue(n))),Km=(e,t,n)=>xo(At(e.getValue(n)).toLowerCase(),At(t.getValue(n)).toLowerCase()),Jm=(e,t,n)=>xo(At(e.getValue(n)),At(t.getValue(n))),Zm=(e,t,n)=>{const l=e.getValue(n),o=t.getValue(n);return l>o?1:l<o?-1:0},e_=(e,t,n)=>xo(e.getValue(n),t.getValue(n));function xo(e,t){return e===t?0:e>t?1:-1}function At(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Eu(e,t){const n=e.split(Ro).filter(Boolean),l=t.split(Ro).filter(Boolean);for(;n.length&&l.length;){const o=n.shift(),r=l.shift(),s=parseInt(o,10),u=parseInt(r,10),a=[s,u].sort();if(isNaN(a[0])){if(o>r)return 1;if(r>o)return-1;continue}if(isNaN(a[1]))return isNaN(s)?-1:1;if(s>u)return 1;if(u>s)return-1}return n.length-l.length}const dn={alphanumeric:Ym,alphanumericCaseSensitive:Qm,text:Km,textCaseSensitive:Jm,datetime:Zm,basic:e_},t_={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:Ke("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>({getAutoSortingFn:()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let l=!1;for(const o of n){const r=o==null?void 0:o.getValue(e.id);if(Object.prototype.toString.call(r)==="[object Date]")return dn.datetime;if(typeof r=="string"&&(l=!0,r.split(Ro).length>1))return dn.alphanumeric}return l?dn.text:dn.basic},getAutoSortDir:()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},getSortingFn:()=>{var n,l;if(!e)throw new Error;return Cl(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(l=t.options.sortingFns)==null?void 0:l[e.columnDef.sortingFn])!=null?n:dn[e.columnDef.sortingFn]},toggleSorting:(n,l)=>{const o=e.getNextSortingOrder(),r=typeof n<"u"&&n!==null;t.setSorting(s=>{const u=s==null?void 0:s.find(g=>g.id===e.id),a=s==null?void 0:s.findIndex(g=>g.id===e.id);let f=[],c,d=r?n:o==="desc";if(s!=null&&s.length&&e.getCanMultiSort()&&l?u?c="toggle":c="add":s!=null&&s.length&&a!==s.length-1?c="replace":u?c="toggle":c="replace",c==="toggle"&&(r||o||(c="remove")),c==="add"){var p;f=[...s,{id:e.id,desc:d}],f.splice(0,f.length-((p=t.options.maxMultiSortColCount)!=null?p:Number.MAX_SAFE_INTEGER))}else c==="toggle"?f=s.map(g=>g.id===e.id?{...g,desc:d}:g):c==="remove"?f=s.filter(g=>g.id!==e.id):f=[{id:e.id,desc:d}];return f})},getFirstSortDir:()=>{var n,l;return((n=(l=e.columnDef.sortDescFirst)!=null?l:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},getNextSortingOrder:n=>{var l,o;const r=e.getFirstSortDir(),s=e.getIsSorted();return s?s!==r&&((l=t.options.enableSortingRemoval)==null||l)&&(!(n&&(o=t.options.enableMultiRemove)!=null)||o)?!1:s==="desc"?"asc":"desc":r},getCanSort:()=>{var n,l;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((l=t.options.enableSorting)!=null?l:!0)&&!!e.accessorFn},getCanMultiSort:()=>{var n,l;return(n=(l=e.columnDef.enableMultiSort)!=null?l:t.options.enableMultiSort)!=null?n:!!e.accessorFn},getIsSorted:()=>{var n;const l=(n=t.getState().sorting)==null?void 0:n.find(o=>o.id===e.id);return l?l.desc?"desc":"asc":!1},getSortIndex:()=>{var n,l;return(n=(l=t.getState().sorting)==null?void 0:l.findIndex(o=>o.id===e.id))!=null?n:-1},clearSorting:()=>{t.setSorting(n=>n!=null&&n.length?n.filter(l=>l.id!==e.id):[])},getToggleSortingHandler:()=>{const n=e.getCanSort();return l=>{n&&(l.persist==null||l.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(l):!1))}}}),createTable:e=>({setSorting:t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),resetSorting:t=>{var n,l;e.setSorting(t?[]:(n=(l=e.initialState)==null?void 0:l.sorting)!=null?n:[])},getPreSortedRowModel:()=>e.getGroupedRowModel(),getSortedRowModel:()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())})},n_={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Ke("columnVisibility",e)}),createColumn:(e,t)=>({toggleVisibility:n=>{e.getCanHide()&&t.setColumnVisibility(l=>({...l,[e.id]:n??!e.getIsVisible()}))},getIsVisible:()=>{var n,l;return(n=(l=t.getState().columnVisibility)==null?void 0:l[e.id])!=null?n:!0},getCanHide:()=>{var n,l;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((l=t.options.enableHiding)!=null?l:!0)},getToggleVisibilityHandler:()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}}),createRow:(e,t)=>({_getAllVisibleCells:oe(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(l=>l.column.getIsVisible()),{key:"row._getAllVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getVisibleCells:oe(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,l,o)=>[...n,...l,...o],{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>{const t=(n,l)=>oe(()=>[l(),l().filter(o=>o.getIsVisible()).map(o=>o.id).join("_")],o=>o.filter(r=>r.getIsVisible==null?void 0:r.getIsVisible()),{key:n,debug:()=>{var o;return(o=e.options.debugAll)!=null?o:e.options.debugColumns}});return{getVisibleFlatColumns:t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),getVisibleLeafColumns:t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),getLeftVisibleLeafColumns:t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),getRightVisibleLeafColumns:t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),getCenterVisibleLeafColumns:t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),setColumnVisibility:n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),resetColumnVisibility:n=>{var l;e.setColumnVisibility(n?{}:(l=e.initialState.columnVisibility)!=null?l:{})},toggleAllColumnsVisible:n=>{var l;n=(l=n)!=null?l:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((o,r)=>({...o,[r.id]:n||!(r.getCanHide!=null&&r.getCanHide())}),{}))},getIsAllColumnsVisible:()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),getIsSomeColumnsVisible:()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),getToggleAllColumnsVisibilityHandler:()=>n=>{var l;e.toggleAllColumnsVisible((l=n.target)==null?void 0:l.checked)}}}},As=[Em,n_,xm,Wm,Nm,t_,Bm,Im,Um,Xm,Fm];function l_(e){var t;(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");let n={_features:As};const l=n._features.reduce((c,d)=>Object.assign(c,d.getDefaultOptions==null?void 0:d.getDefaultOptions(n)),{}),o=c=>n.options.mergeOptions?n.options.mergeOptions(l,c):{...l,...c};let s={...{},...(t=e.initialState)!=null?t:{}};n._features.forEach(c=>{var d;s=(d=c.getInitialState==null?void 0:c.getInitialState(s))!=null?d:s});const u=[];let a=!1;const f={_features:As,options:{...l,...e},initialState:s,_queue:c=>{u.push(c),a||(a=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();a=!1}).catch(d=>setTimeout(()=>{throw d})))},reset:()=>{n.setState(n.initialState)},setOptions:c=>{const d=$t(c,n.options);n.options=o(d)},getState:()=>n.options.state,setState:c=>{n.options.onStateChange==null||n.options.onStateChange(c)},_getRowId:(c,d,p)=>{var g;return(g=n.options.getRowId==null?void 0:n.options.getRowId(c,d,p))!=null?g:`${p?[p.id,d].join("."):d}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:c=>{const d=n.getRowModel().rowsById[c];if(!d)throw new Error;return d},_getDefaultColumnDef:oe(()=>[n.options.defaultColumn],c=>{var d;return c=(d=c)!=null?d:{},{header:p=>{const g=p.header.column.columnDef;return g.accessorKey?g.accessorKey:g.accessorFn?g.id:null},cell:p=>{var g,m;return(g=(m=p.renderValue())==null||m.toString==null?void 0:m.toString())!=null?g:null},...n._features.reduce((p,g)=>Object.assign(p,g.getDefaultColumnDef==null?void 0:g.getDefaultColumnDef()),{}),...c}},{debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns},key:!1}),_getColumnDefs:()=>n.options.columns,getAllColumns:oe(()=>[n._getColumnDefs()],c=>{const d=function(p,g,m){return m===void 0&&(m=0),p.map(_=>{const v=Mm(n,_,m,g),y=_;return v.columns=y.columns?d(y.columns,v,m+1):[],v})};return d(c)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllFlatColumns:oe(()=>[n.getAllColumns()],c=>c.flatMap(d=>d.getFlatColumns()),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),_getAllFlatColumnsById:oe(()=>[n.getAllFlatColumns()],c=>c.reduce((d,p)=>(d[p.id]=p,d),{}),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllLeafColumns:oe(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(c,d)=>{let p=c.flatMap(g=>g.getLeafColumns());return d(p)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getColumn:c=>n._getAllFlatColumnsById()[c]};return Object.assign(n,f),n._features.forEach(c=>Object.assign(n,c.createTable==null?void 0:c.createTable(n))),n}function o_(e,t,n,l){const o=()=>{var s;return(s=r.getValue())!=null?s:e.options.renderFallbackValue},r={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(l),renderValue:o,getContext:oe(()=>[e,n,t,r],(s,u,a,f)=>({table:s,column:u,row:a,cell:f,getValue:f.getValue,renderValue:f.renderValue}),{key:!1,debug:()=>e.options.debugAll})};return e._features.forEach(s=>{Object.assign(r,s.createCell==null?void 0:s.createCell(r,n,t,e))},{}),r}const Uo=(e,t,n,l,o,r,s)=>{let u={id:t,index:l,original:n,depth:o,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:a=>{if(u._valuesCache.hasOwnProperty(a))return u._valuesCache[a];const f=e.getColumn(a);if(f!=null&&f.accessorFn)return u._valuesCache[a]=f.accessorFn(u.original,l),u._valuesCache[a]},getUniqueValues:a=>{if(u._uniqueValuesCache.hasOwnProperty(a))return u._uniqueValuesCache[a];const f=e.getColumn(a);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(u._uniqueValuesCache[a]=f.columnDef.getUniqueValues(u.original,l),u._uniqueValuesCache[a]):(u._uniqueValuesCache[a]=[u.getValue(a)],u._uniqueValuesCache[a])},renderValue:a=>{var f;return(f=u.getValue(a))!=null?f:e.options.renderFallbackValue},subRows:r??[],getLeafRows:()=>Am(u.subRows,a=>a.subRows),getParentRow:()=>u.parentId?e.getRow(u.parentId):void 0,getParentRows:()=>{let a=[],f=u;for(;;){const c=f.getParentRow();if(!c)break;a.push(c),f=c}return a.reverse()},getAllCells:oe(()=>[e.getAllLeafColumns()],a=>a.map(f=>o_(e,u,f,f.id)),{key:!1,debug:()=>{var a;return(a=e.options.debugAll)!=null?a:e.options.debugRows}}),_getAllCellsByColumnId:oe(()=>[u.getAllCells()],a=>a.reduce((f,c)=>(f[c.column.id]=c,f),{}),{key:"row.getAllCellsByColumnId",debug:()=>{var a;return(a=e.options.debugAll)!=null?a:e.options.debugRows}})};for(let a=0;a<e._features.length;a++){const f=e._features[a];Object.assign(u,f==null||f.createRow==null?void 0:f.createRow(u,e))}return u};function i_(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function Ms(){return e=>oe(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},l=function(o,r,s){r===void 0&&(r=0);const u=[];for(let f=0;f<o.length;f++){const c=Uo(e,e._getRowId(o[f],f,s),o[f],f,r,void 0,s==null?void 0:s.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,u.push(c),e.options.getSubRows){var a;c.originalSubRows=e.options.getSubRows(o[f],f),(a=c.originalSubRows)!=null&&a.length&&(c.subRows=l(c.originalSubRows,r+1,c))}}return u};return n.rows=l(t),n},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function Fu(e,t,n){return n.options.filterFromLeafRows?r_(e,t,n):s_(e,t,n)}function r_(e,t,n){var l;const o=[],r={},s=(l=n.options.maxLeafRowFilterDepth)!=null?l:100,u=function(a,f){f===void 0&&(f=0);const c=[];for(let p=0;p<a.length;p++){var d;let g=a[p];const m=Uo(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(m.columnFilters=g.columnFilters,(d=g.subRows)!=null&&d.length&&f<s){if(m.subRows=u(g.subRows,f+1),g=m,t(g)&&!m.subRows.length){c.push(g),r[g.id]=g,r[p]=g;continue}if(t(g)||m.subRows.length){c.push(g),r[g.id]=g,r[p]=g;continue}}else g=m,t(g)&&(c.push(g),r[g.id]=g,r[p]=g)}return c};return{rows:u(e),flatRows:o,rowsById:r}}function s_(e,t,n){var l;const o=[],r={},s=(l=n.options.maxLeafRowFilterDepth)!=null?l:100,u=function(a,f){f===void 0&&(f=0);const c=[];for(let p=0;p<a.length;p++){let g=a[p];if(t(g)){var d;if((d=g.subRows)!=null&&d.length&&f<s){const _=Uo(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);_.subRows=u(g.subRows,f+1),g=_}c.push(g),o.push(g),r[g.id]=g}}return c};return{rows:u(e),flatRows:o,rowsById:r}}function Es(){return e=>oe(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,l)=>{if(!t.rows.length||!(n!=null&&n.length)&&!l){for(let p=0;p<t.flatRows.length;p++)t.flatRows[p].columnFilters={},t.flatRows[p].columnFiltersMeta={};return t}const o=[],r=[];(n??[]).forEach(p=>{var g;const m=e.getColumn(p.id);if(!m)return;const _=m.getFilterFn();_&&o.push({id:p.id,filterFn:_,resolvedValue:(g=_.resolveFilterValue==null?void 0:_.resolveFilterValue(p.value))!=null?g:p.value})});const s=n.map(p=>p.id),u=e.getGlobalFilterFn(),a=e.getAllLeafColumns().filter(p=>p.getCanGlobalFilter());l&&u&&a.length&&(s.push("__global__"),a.forEach(p=>{var g;r.push({id:p.id,filterFn:u,resolvedValue:(g=u.resolveFilterValue==null?void 0:u.resolveFilterValue(l))!=null?g:l})}));let f,c;for(let p=0;p<t.flatRows.length;p++){const g=t.flatRows[p];if(g.columnFilters={},o.length)for(let m=0;m<o.length;m++){f=o[m];const _=f.id;g.columnFilters[_]=f.filterFn(g,_,f.resolvedValue,v=>{g.columnFiltersMeta[_]=v})}if(r.length){for(let m=0;m<r.length;m++){c=r[m];const _=c.id;if(c.filterFn(g,_,c.resolvedValue,v=>{g.columnFiltersMeta[_]=v})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const d=p=>{for(let g=0;g<s.length;g++)if(p.columnFilters[s[g]]===!1)return!1;return!0};return Fu(t.rows,d,e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function Fs(){return(e,t)=>oe(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,l,o)=>{if(!n.rows.length||!(l!=null&&l.length)&&!o)return n;const r=[...l.map(u=>u.id).filter(u=>u!==t),o?"__global__":void 0].filter(Boolean),s=u=>{for(let a=0;a<r.length;a++)if(u.columnFilters[r[a]]===!1)return!1;return!0};return Fu(n.rows,s,e)},{key:!1,debug:()=>{var n;return(n=e.options.debugAll)!=null?n:e.options.debugTable},onChange:()=>{}})}function Ds(){return e=>oe(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const l=e.getState().sorting,o=[],r=l.filter(a=>{var f;return(f=e.getColumn(a.id))==null?void 0:f.getCanSort()}),s={};r.forEach(a=>{const f=e.getColumn(a.id);f&&(s[a.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const u=a=>{const f=[...a];return f.sort((c,d)=>{for(let g=0;g<r.length;g+=1){var p;const m=r[g],_=s[m.id],v=(p=m==null?void 0:m.desc)!=null?p:!1;let y=0;if(_.sortUndefined){const w=c.getValue(m.id),S=d.getValue(m.id),M=w===void 0,C=S===void 0;(M||C)&&(y=M&&C?0:M?_.sortUndefined:-_.sortUndefined)}if(y===0&&(y=_.sortingFn(c,d,m.id)),y!==0)return v&&(y*=-1),_.invertSorting&&(y*=-1),y}return c.index-d.index}),f.forEach(c=>{var d;o.push(c),(d=c.subRows)!=null&&d.length&&(c.subRows=u(c.subRows))}),f};return{rows:u(n.rows),flatRows:o,rowsById:n.rowsById}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function a_(e){const t=[],n=l=>{var o;t.push(l),(o=l.subRows)!=null&&o.length&&l.getIsExpanded()&&l.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function Is(e){return t=>oe(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,l)=>{if(!l.rows.length)return l;const{pageSize:o,pageIndex:r}=n;let{rows:s,flatRows:u,rowsById:a}=l;const f=o*r,c=f+o;s=s.slice(f,c);let d;t.options.paginateExpandedRows?d={rows:s,flatRows:u,rowsById:a}:d=a_({rows:s,flatRows:u,rowsById:a}),d.flatRows=[];const p=g=>{d.flatRows.push(g),g.subRows.length&&g.subRows.forEach(p)};return d.rows.forEach(p),d},{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugTable}})}/**
 * svelte-table
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function u_(e){let t;return{c(){t=q(e[0])},l(n){t=Xu(n,e[0])},m(n,l){Gu(n,t,l)},p(n,[l]){l&1&&K(t,n[0])},i:U,o:U,d(n){n&&I(t)}}}function f_(e,t,n){let{content:l}=t;return e.$$set=o=>{"content"in o&&n(0,l=o.content)},[l]}class c_ extends ce{constructor(t){super(),de(this,t,f_,u_,fe,{content:0})}}const d_=da((e,t,n,l)=>`${df(t.content)}`);var h_=typeof document>"u"?d_:c_;function g_(e,t,n){let l,o;return l=new t({props:n,$$inline:!0}),{c(){ne(l.$$.fragment)},l(r){gf(l.$$.fragment,r)},m(r,s){ee(l,r,s),o=!0},p:U,i(r){o||(z(l.$$.fragment,r),o=!0)},o(r){V(l.$$.fragment,r),o=!1},d(r){te(l,r)}}}function p_(e,t){return class extends ce{constructor(l){super(),de(this,l,null,o=>g_(o,e,t),fe,{},void 0)}}}function m_(e,t){return da((l,o,r,s)=>`${hf(e,"TableComponent").$$render(l,t,{},{})}`)}const Ao=typeof window>"u"?m_:p_;function __(e){return typeof e=="object"&&typeof e.$$render=="function"&&typeof e.render=="function"}function v_(e){var t,n;let l="__SVELTE_HMR"in window;return e.prototype instanceof ce||l&&((t=e.name)==null?void 0:t.startsWith("Proxy<"))&&((n=e.name)==null?void 0:n.endsWith(">"))}function Ns(e){return typeof document>"u"?__(e):v_(e)}function Ps(e){return Ao(h_,{content:e})}function $l(e,t){if(!e)return null;if(Ns(e))return Ao(e,t);if(typeof e=="function"){const n=e(t);return n==null?null:Ns(n)?Ao(n,t):Ps(n)}return Ps(e)}function Ts(e){let t;"subscribe"in e?t=e:t=no(e);let n={state:{},onStateChange:()=>{},renderFallbackValue:null,...Pu(t)},l=l_(n),o=Ie(l.initialState),r=mf([o,t],u=>u);return no(l,function(a){const f=r.subscribe(c=>{let[d,p]=c;l.setOptions(g=>({...g,...p,state:{...d,...p.state},onStateChange:m=>{m instanceof Function?o.update(m):o.set(m),n.onStateChange==null||n.onStateChange(m)}})),a(l)});return function(){f()}})}/**
 * match-sorter-utils
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Du={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},b_=Object.keys(Du).join("|"),w_=new RegExp(b_,"g");function y_(e){return e.replace(w_,t=>Du[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const He={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function k_(e,t,n){var l;if(n=n||{},n.threshold=(l=n.threshold)!=null?l:He.MATCHES,!n.accessors){const s=Os(e,t,n);return{rankedValue:e,rank:s,accessorIndex:-1,accessorThreshold:n.threshold,passed:s>=n.threshold}}const o=R_(e,n.accessors),r={rankedValue:e,rank:He.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let s=0;s<o.length;s++){const u=o[s];let a=Os(u.itemValue,t,n);const{minRanking:f,maxRanking:c,threshold:d=n.threshold}=u.attributes;a<f&&a>=He.MATCHES?a=f:a>c&&(a=c),a=Math.min(a,c),a>=d&&a>r.rank&&(r.rank=a,r.passed=!0,r.accessorIndex=s,r.accessorThreshold=d,r.rankedValue=u.itemValue)}return r}function Os(e,t,n){return e=zs(e,n),t=zs(t,n),t.length>e.length?He.NO_MATCH:e===t?He.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?He.EQUAL:e.startsWith(t)?He.STARTS_WITH:e.includes(` ${t}`)?He.WORD_STARTS_WITH:e.includes(t)?He.CONTAINS:t.length===1?He.NO_MATCH:S_(e).includes(t)?He.ACRONYM:C_(e,t))}function S_(e){let t="";return e.split(" ").forEach(l=>{l.split("-").forEach(r=>{t+=r.substr(0,1)})}),t}function C_(e,t){let n=0,l=0;function o(a,f,c){for(let d=c,p=f.length;d<p;d++)if(f[d]===a)return n+=1,d+1;return-1}function r(a){const f=1/a,c=n/t.length;return He.MATCHES+c*f}const s=o(t[0],e,0);if(s<0)return He.NO_MATCH;l=s;for(let a=1,f=t.length;a<f;a++){const c=t[a];if(l=o(c,e,l),!(l>-1))return He.NO_MATCH}const u=l-s;return r(u)}function zs(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=y_(e)),e}function $_(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const l=n(e);return l==null?[]:Array.isArray(l)?l:[String(l)]}function R_(e,t){const n=[];for(let l=0,o=t.length;l<o;l++){const r=t[l],s=A_(r),u=$_(e,r);for(let a=0,f=u.length;a<f;a++)n.push({itemValue:u[a],attributes:s})}return n}const Vs={maxRanking:1/0,minRanking:-1/0};function A_(e){return typeof e=="function"?Vs:{...Vs,...e}}function Ls(e,t,n){const l=e.slice();return l[17]=t[n],l}function qs(e,t,n){const l=e.slice();return l[20]=t[n],l}function Hs(e,t,n){const l=e.slice();return l[23]=t[n],l}function Gs(e,t,n){const l=e.slice();return l[26]=t[n],l}function M_(e){let t,n,l,o,r=F_(e[26].column.getIsSorted())+"",s,u,a,f;var c=$l(e[26].column.columnDef.header,e[26].getContext());function d(p){return{}}return c&&(n=Rt(c,d())),{c(){t=R("button"),n&&ne(n.$$.fragment),l=P(),o=R("span"),s=q(r),t.disabled=!e[26].column.getCanSort(),Oe(t,"is-disabled",!e[26].column.getCanSort())},m(p,g){T(p,t,g),n&&ee(n,t,null),b(t,l),b(t,o),b(o,s),u=!0,a||(f=x(t,"click",e[26].column.getToggleSortingHandler()),a=!0)},p(p,g){if(e=p,c!==(c=$l(e[26].column.columnDef.header,e[26].getContext()))){if(n){we();const m=n;V(m.$$.fragment,1,0,()=>{te(m,1)}),ye()}c?(n=Rt(c,d()),ne(n.$$.fragment),z(n.$$.fragment,1),ee(n,t,l)):n=null}},i(p){u||(n&&z(n.$$.fragment,p),u=!0)},o(p){n&&V(n.$$.fragment,p),u=!1},d(p){p&&I(t),n&&te(n),a=!1,f()}}}function Bs(e){let t,n,l=!e[26].isPlaceholder&&M_(e);return{c(){t=R("th"),l&&l.c(),h(t,"colspan",e[26].colSpan),h(t,"class","svelte-16fb3tv")},m(o,r){T(o,t,r),l&&l.m(t,null),n=!0},p(o,r){o[26].isPlaceholder||l.p(o,r)},i(o){n||(z(l),n=!0)},o(o){V(l),n=!1},d(o){o&&I(t),l&&l.d()}}}function js(e){let t,n,l,o=e[23].headers,r=[];for(let u=0;u<o.length;u+=1)r[u]=Bs(Gs(e,o,u));const s=u=>V(r[u],1,1,()=>{r[u]=null});return{c(){t=R("tr");for(let u=0;u<r.length;u+=1)r[u].c();n=P()},m(u,a){T(u,t,a);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(t,null);b(t,n),l=!0},p(u,a){if(a&32){o=u[23].headers;let f;for(f=0;f<o.length;f+=1){const c=Gs(u,o,f);r[f]?(r[f].p(c,a),z(r[f],1)):(r[f]=Bs(c),r[f].c(),z(r[f],1),r[f].m(t,n))}for(we(),f=o.length;f<r.length;f+=1)s(f);ye()}},i(u){if(!l){for(let a=0;a<o.length;a+=1)z(r[a]);l=!0}},o(u){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)V(r[a]);l=!1},d(u){u&&I(t),_e(r,u)}}}function xs(e,t){let n,l,o;var r=$l(t[20].column.columnDef.cell,t[20].getContext());function s(u){return{}}return r&&(l=Rt(r,s())),{key:e,first:null,c(){n=R("td"),l&&ne(l.$$.fragment),h(n,"class","svelte-16fb3tv"),this.first=n},m(u,a){T(u,n,a),l&&ee(l,n,null),o=!0},p(u,a){if(t=u,a&2&&r!==(r=$l(t[20].column.columnDef.cell,t[20].getContext()))){if(l){we();const f=l;V(f.$$.fragment,1,0,()=>{te(f,1)}),ye()}r?(l=Rt(r,s()),ne(l.$$.fragment),z(l.$$.fragment,1),ee(l,n,null)):l=null}},i(u){o||(l&&z(l.$$.fragment,u),o=!0)},o(u){l&&V(l.$$.fragment,u),o=!1},d(u){u&&I(n),l&&te(l)}}}function Us(e){let t,n=[],l=new Map,o,r,s=e[17].getVisibleCells();const u=a=>a[20].id;for(let a=0;a<s.length;a+=1){let f=qs(e,s,a),c=u(f);l.set(c,n[a]=xs(c,f))}return{c(){t=R("tr");for(let a=0;a<n.length;a+=1)n[a].c();o=P(),h(t,"class","svelte-16fb3tv")},m(a,f){T(a,t,f);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);b(t,o),r=!0},p(a,f){f&2&&(s=a[17].getVisibleCells(),we(),n=pt(n,f,u,1,a,s,l,t,Eo,xs,o,qs),ye())},i(a){if(!r){for(let f=0;f<s.length;f+=1)z(n[f]);r=!0}},o(a){for(let f=0;f<n.length;f+=1)V(n[f]);r=!1},d(a){a&&I(t);for(let f=0;f<n.length;f+=1)n[f].d()}}}function E_(e){let t,n,l,o,r,s,u,a,f,c,d,p="<",g,m,_,v,y,w,S,M,C,E,$=" ",A,k,F=" ",N,D,L=e[1].getPageCount()+"",O,B,j,ae=">",pe,X,W,Y,Q,le=e[5],he=[];for(let ie=0;ie<le.length;ie+=1)he[ie]=js(Hs(e,le,ie));const Vn=ie=>V(he[ie],1,1,()=>{he[ie]=null});let Et=e[1].getRowModel().rows,$e=[];for(let ie=0;ie<Et.length;ie+=1)$e[ie]=Us(Ls(e,Et,ie));const Iu=ie=>V($e[ie],1,1,()=>{$e[ie]=null});return{c(){t=R("div"),n=R("input"),l=P(),o=R("div"),r=R("table"),s=R("thead");for(let ie=0;ie<he.length;ie+=1)he[ie].c();u=P(),a=R("tbody");for(let ie=0;ie<$e.length;ie+=1)$e[ie].c();f=P(),c=R("div"),d=R("button"),g=q(p),_=P(),v=R("span"),v.textContent="Page",y=P(),w=R("input"),C=P(),E=R("span"),A=q($),k=q("of"),N=q(F),D=P(),O=q(L),B=P(),j=R("button"),pe=q(ae),h(n,"type","search"),h(n,"class","input"),h(n,"placeholder","Search..."),h(s,"class","svelte-16fb3tv"),h(a,"class","svelte-16fb3tv"),h(d,"class","button is-white svelte-16fb3tv"),d.disabled=m=!e[1].getCanPreviousPage(),Oe(d,"is-disabled",!e[1].getCanPreviousPage()),h(w,"type","number"),w.value=S=e[1].getState().pagination.pageIndex+1,h(w,"min",0),h(w,"max",M=e[1].getPageCount()-1),h(w,"class","mx-1 svelte-16fb3tv"),h(j,"class","button is-white svelte-16fb3tv"),j.disabled=X=!e[1].getCanNextPage(),Oe(j,"is-disabled",!e[1].getCanNextPage()),h(c,"class","is-flex is-align-items-center svelte-16fb3tv"),h(r,"class","table svelte-16fb3tv"),h(o,"class","table-container svelte-16fb3tv")},m(ie,be){T(ie,t,be),b(t,n),b(t,l),b(t,o),b(o,r),b(r,s);for(let se=0;se<he.length;se+=1)he[se]&&he[se].m(s,null);b(r,u),b(r,a);for(let se=0;se<$e.length;se+=1)$e[se]&&$e[se].m(a,null);b(r,f),b(r,c),b(c,d),b(d,g),b(c,_),b(c,v),b(c,y),b(c,w),b(c,C),b(c,E),b(E,A),b(E,k),b(E,N),b(E,D),b(E,O),b(c,B),b(c,j),b(j,pe),W=!0,Y||(Q=[x(n,"keyup",e[3]),x(n,"search",e[3]),x(d,"click",e[9]),x(w,"change",e[4]),x(j,"click",e[10])],Y=!0)},p(ie,[be]){if(be&32){le=ie[5];let se;for(se=0;se<le.length;se+=1){const sn=Hs(ie,le,se);he[se]?(he[se].p(sn,be),z(he[se],1)):(he[se]=js(sn),he[se].c(),z(he[se],1),he[se].m(s,null))}for(we(),se=le.length;se<he.length;se+=1)Vn(se);ye()}if(be&2){Et=ie[1].getRowModel().rows;let se;for(se=0;se<Et.length;se+=1){const sn=Ls(ie,Et,se);$e[se]?($e[se].p(sn,be),z($e[se],1)):($e[se]=Us(sn),$e[se].c(),z($e[se],1),$e[se].m(a,null))}for(we(),se=Et.length;se<$e.length;se+=1)Iu(se);ye()}(!W||be&2&&m!==(m=!ie[1].getCanPreviousPage()))&&(d.disabled=m),(!W||be&2)&&Oe(d,"is-disabled",!ie[1].getCanPreviousPage()),(!W||be&2&&S!==(S=ie[1].getState().pagination.pageIndex+1)&&w.value!==S)&&(w.value=S),(!W||be&2&&M!==(M=ie[1].getPageCount()-1))&&h(w,"max",M),(!W||be&2)&&L!==(L=ie[1].getPageCount()+"")&&K(O,L),(!W||be&2&&X!==(X=!ie[1].getCanNextPage()))&&(j.disabled=X),(!W||be&2)&&Oe(j,"is-disabled",!ie[1].getCanNextPage())},i(ie){if(!W){for(let be=0;be<le.length;be+=1)z(he[be]);for(let be=0;be<Et.length;be+=1)z($e[be]);W=!0}},o(ie){he=he.filter(Boolean);for(let be=0;be<he.length;be+=1)V(he[be]);$e=$e.filter(Boolean);for(let be=0;be<$e.length;be+=1)V($e[be]);W=!1},d(ie){ie&&I(t),_e(he,ie),_e($e,ie),Y=!1,ve(Q)}}}function F_(e){return e?e==="asc"?"🔼":"🔽":""}function D_(e,t,n){let l,o,r=U,s=()=>(r(),r=Rl(y,C=>n(1,o=C)),y);ue(e,Sl,C=>n(8,l=C)),e.$$.on_destroy.push(()=>r());const u=(C,E,$,A)=>{if(console.log("yessir"),Array.isArray($))return $.length===0?!0:$.includes(C.getValue(E));typeof $=="number"&&($=String($));const k=k_(C.getValue(E),$);return A({itemRank:k}),k.passed},a=i_(),f=[a.accessor("file",{header:"File",cell:C=>C.getValue(),footer:C=>C.column.id}),a.accessor("size",{header:"Size",cell:C=>ro(C.getValue()),footer:C=>C.column.id}),a.accessor("type",{header:"Type",cell:C=>C.getValue(),footer:C=>C.column.id})];let c="",d=Ie({data:l,columns:f,getCoreRowModel:Ms(),getSortedRowModel:Ds(),getFilteredRowModel:Es(),globalFilterFn:u,getFacetedRowModel:Fs(),getPaginationRowModel:Is(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0});function p(C){n(6,c=C),d.update(E=>({...E,state:{...E.state,globalFilter:C}}))}function g(C){d.update(E=>{var $;return{...E,state:{...E.state,pagination:{...($=E.state)==null?void 0:$.pagination,pageIndex:C}}}})}let m;function _(C){clearTimeout(m),m=setTimeout(()=>{const E=C.target;p(E.value)},100)}function v(C){const E=C.target;g(parseInt(E.value)-1)}let y=Ts(d);s();let w=o.getHeaderGroups();const S=()=>g(o.getState().pagination.pageIndex-1),M=()=>g(o.getState().pagination.pageIndex+1);return e.$$.update=()=>{e.$$.dirty&448&&(n(7,d={data:l,columns:f,getCoreRowModel:Ms(),getSortedRowModel:Ds(),getFilteredRowModel:Es(),globalFilterFn:u,getFacetedRowModel:Fs(),getPaginationRowModel:Is(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0}),s(n(0,y=Ts(Ie(d)))))},[y,o,g,_,v,w,c,d,l,S,M]}class I_ extends ce{constructor(t){super(),de(this,t,D_,E_,fe,{})}}function Ws(e){let t,n;return{c(){t=R("p"),n=q(e[3])},m(l,o){T(l,t,o),b(t,n)},p(l,o){o&8&&K(n,l[3])},d(l){l&&I(t)}}}function Xs(e){let t;return{c(){t=R("p"),t.textContent="Data Successfully indexed!"},m(n,l){T(n,t,l)},d(n){n&&I(t)}}}function Ys(e){let t,n;return t=new I_({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function N_(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m,_,v,y,w,S,M,C,E,$,A=e[2]&&!e[1]&&Ws(e),k=e[1]&&Xs();S=new $m({});let F=e[0]&&Ys();return{c(){t=R("div"),n=R("div"),l=R("div"),o=R("div"),r=R("h4"),r.textContent="Upload Data",s=P(),u=R("br"),a=P(),f=R("form"),c=R("input"),d=P(),A&&A.c(),p=P(),k&&k.c(),g=P(),m=R("p"),m.textContent="These are the files your model will use as context.",_=P(),v=R("p"),v.innerHTML="Currently <strong>pdf</strong>, txt, and md are supported.",y=P(),w=R("div"),ne(S.$$.fragment),M=P(),F&&F.c(),h(c,"type","file"),c.multiple=!0,h(o,"class","upload-box svelte-1lu6hos"),h(l,"class","upload-container svelte-1lu6hos"),h(n,"class","file-container svelte-1lu6hos"),h(w,"class","charts-container svelte-1lu6hos"),h(t,"class","data-grid svelte-1lu6hos")},m(N,D){T(N,t,D),b(t,n),b(n,l),b(l,o),b(o,r),b(o,s),b(o,u),b(o,a),b(o,f),b(f,c),b(o,d),A&&A.m(o,null),b(o,p),k&&k.m(o,null),b(o,g),b(o,m),b(o,_),b(o,v),b(t,y),b(t,w),ee(S,w,null),b(w,M),F&&F.m(w,null),C=!0,E||($=x(c,"change",e[4]),E=!0)},p(N,[D]){N[2]&&!N[1]?A?A.p(N,D):(A=Ws(N),A.c(),A.m(o,p)):A&&(A.d(1),A=null),N[1]?k||(k=Xs(),k.c(),k.m(o,g)):k&&(k.d(1),k=null),N[0]?F?D&1&&z(F,1):(F=Ys(),F.c(),z(F,1),F.m(w,null)):F&&(we(),V(F,1,1,()=>{F=null}),ye())},i(N){C||(z(S.$$.fragment,N),z(F),C=!0)},o(N){V(S.$$.fragment,N),V(F),C=!1},d(N){N&&I(t),A&&A.d(),k&&k.d(),te(S),F&&F.d(),E=!1,$()}}}function P_(e,t,n){let l,o,r;ue(e,ys,m=>n(6,o=m)),ue(e,Sl,m=>n(7,r=m));let s=[],u=!1,a=!1;async function f(m){n(0,s=m.target.files);const _=new FormData;for(let v=0;v<s.length;v++)_.append("files",s[v]);await fetch("/retrieval/file/upload",{method:"POST",body:_}),d(),c(),p()}async function c(){const v=(await(await fetch("/retrieval/file/get")).json()).files.map(y=>({file:y.name,size:y.size,type:y.type}));De(Sl,r=[...v],r)}async function d(){console.log("index!"),n(2,a=!0),await(await fetch("/retrieval/vector_db/index",{method:"POST"})).json(),n(1,u=!0),n(2,a=!1)}async function p(){console.log("getting embeddings...");const _=await(await fetch("/retrieval/vector_db/get")).json();console.log("embeddingData",_),De(ys,o=_,o)}ct(()=>{c()});let g=0;return setInterval(()=>{n(5,g=(g+1)%4)},200),e.$$.update=()=>{e.$$.dirty&32&&n(3,l="Indexing"+".".repeat(g))},[s,u,a,l,f,g]}class T_ extends ce{constructor(t){super(),de(this,t,P_,N_,fe,{})}}function O_(e){let t,n,l,o,r,s,u,a,f,c,d,p,g,m,_,v,y,w,S,M,C,E,$,A,k,F,N;return r=new Ja({}),a=new Za({}),d=new Wa({}),m=new Ya({props:{feedback:"Bad"}}),y=new Ka({}),M=new Qa({}),F=new Xa({}),{c(){t=R("div"),n=R("div"),l=R("div"),o=R("div"),ne(r.$$.fragment),s=P(),u=R("div"),ne(a.$$.fragment),f=P(),c=R("div"),ne(d.$$.fragment),p=P(),g=R("div"),ne(m.$$.fragment),_=P(),v=R("div"),ne(y.$$.fragment),w=P(),S=R("div"),ne(M.$$.fragment),C=P(),E=R("div"),$=R("div"),$.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,A=P(),k=R("div"),ne(F.$$.fragment),h(o,"class","card-1 svelte-14znspc"),h(u,"class","card-2"),h(l,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(g,"class","left-question svelte-14znspc"),h(v,"class","left-filter svelte-14znspc"),h(S,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h($,"class","right-chart svelte-14znspc"),h(k,"class","right-table svelte-14znspc"),h(E,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(D,L){T(D,t,L),b(t,n),b(n,l),b(l,o),ee(r,o,null),b(l,s),b(l,u),ee(a,u,null),b(n,f),b(n,c),ee(d,c,null),b(n,p),b(n,g),ee(m,g,null),b(n,_),b(n,v),ee(y,v,null),b(n,w),b(n,S),ee(M,S,null),b(t,C),b(t,E),b(E,$),b(E,A),b(E,k),ee(F,k,null),N=!0},p:U,i(D){N||(z(r.$$.fragment,D),z(a.$$.fragment,D),z(d.$$.fragment,D),z(m.$$.fragment,D),z(y.$$.fragment,D),z(M.$$.fragment,D),z(F.$$.fragment,D),N=!0)},o(D){V(r.$$.fragment,D),V(a.$$.fragment,D),V(d.$$.fragment,D),V(m.$$.fragment,D),V(y.$$.fragment,D),V(M.$$.fragment,D),V(F.$$.fragment,D),N=!1},d(D){D&&I(t),te(r),te(a),te(d),te(m),te(y),te(M),te(F)}}}function z_(e,t,n){let l;ue(e,An,r=>n(0,l=r)),ct(()=>{console.log("FEEDBACK on mount"),o()});async function o(){const a=(await(await fetch("/chat/rag_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[4]}));De(An,l=[...a],l)}return[]}class V_ extends ce{constructor(t){super(),de(this,t,z_,O_,fe,{})}}function L_(e){let t,n;return t=new eu({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function q_(e){let t,n;return t=new V_({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function H_(e){let t,n;return t=new eu({}),{c(){ne(t.$$.fragment)},m(l,o){ee(t,l,o),n=!0},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){te(t,l)}}}function G_(e){let t,n,l,o;const r=[H_,q_,L_],s=[];function u(a,f){return a[0]==="vote"?0:a[0]==="rag"?1:2}return t=u(e),n=s[t]=r[t](e),{c(){n.c(),l=Ce()},m(a,f){s[t].m(a,f),T(a,l,f),o=!0},p(a,[f]){let c=t;t=u(a),t!==c&&(we(),V(s[c],1,1,()=>{s[c]=null}),ye(),n=s[t],n||(n=s[t]=r[t](a),n.c()),z(n,1),n.m(l.parentNode,l))},i(a){o||(z(n),o=!0)},o(a){V(n),o=!1},d(a){s[t].d(a),a&&I(l)}}}function B_(e,t,n){let{feedback:l}=t;return e.$$set=o=>{"feedback"in o&&n(0,l=o.feedback)},[l]}class j_ extends ce{constructor(t){super(),de(this,t,B_,G_,fe,{feedback:0})}}function Qs(e,t,n){const l=e.slice();return l[7]=t[n],l}function Ks(e){let t,n=e[0],l=[];for(let o=0;o<n.length;o+=1)l[o]=Js(Qs(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=Ce()},m(o,r){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(o,r);T(o,t,r)},p(o,r){if(r&33){n=o[0];let s;for(s=0;s<n.length;s+=1){const u=Qs(o,n,s);l[s]?l[s].p(u,r):(l[s]=Js(u),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(o){_e(l,o),o&&I(t)}}}function Js(e){let t,n=e[7].svelte_component+"",l,o,r,s;function u(){return e[6](e[7])}return{c(){t=R("button"),l=q(n),h(t,"aria-label",o=`Load ${e[7].svelte_component} component`)},m(a,f){T(a,t,f),b(t,l),r||(s=x(t,"click",u),r=!0)},p(a,f){e=a,f&1&&n!==(n=e[7].svelte_component+"")&&K(l,n),f&1&&o!==(o=`Load ${e[7].svelte_component} component`)&&h(t,"aria-label",o)},d(a){a&&I(t),r=!1,s()}}}function Zs(e){let t,n,l;const o=[e[1].props];var r=e[4][e[1].svelte_component];function s(u){let a={};for(let f=0;f<o.length;f+=1)a=Cn(a,o[f]);return{props:a}}return r&&(t=Rt(r,s())),{c(){t&&ne(t.$$.fragment),n=Ce()},m(u,a){t&&ee(t,u,a),T(u,n,a),l=!0},p(u,a){const f=a&2?fa(o,[ca(u[1].props)]):{};if(a&2&&r!==(r=u[4][u[1].svelte_component])){if(t){we();const c=t;V(c.$$.fragment,1,0,()=>{te(c,1)}),ye()}r?(t=Rt(r,s()),ne(t.$$.fragment),z(t.$$.fragment,1),ee(t,n.parentNode,n)):t=null}else r&&t.$set(f)},i(u){l||(t&&z(t.$$.fragment,u),l=!0)},o(u){t&&V(t.$$.fragment,u),l=!1},d(u){u&&I(n),t&&te(t,u)}}}function x_(e){let t,n,l,o=e[0].length>1&&Ks(e),r=e[1]&&Zs(e);return{c(){o&&o.c(),t=P(),r&&r.c(),n=Ce()},m(s,u){o&&o.m(s,u),T(s,t,u),r&&r.m(s,u),T(s,n,u),l=!0},p(s,[u]){s[0].length>1?o?o.p(s,u):(o=Ks(s),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),s[1]?r?(r.p(s,u),u&2&&z(r,1)):(r=Zs(s),r.c(),z(r,1),r.m(n.parentNode,n)):r&&(we(),V(r,1,1,()=>{r=null}),ye())},i(s){l||(z(r),l=!0)},o(s){V(r),l=!1},d(s){o&&o.d(s),s&&I(t),r&&r.d(s),s&&I(n)}}}function U_(e,t,n){let l,o;const r=Ie([]);ue(e,r,c=>n(0,l=c));const s=Ie(null);ue(e,s,c=>n(1,o=c));const u={Chatbot:Qd,Dropdown:Zd,Feedback:j_,Compare:Cp,CompareDashboard:Gp,RetrievalQA:T_},a=c=>{s.set(c)};return fetch("/components").then(c=>{if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return c.json()}).then(c=>{r.set(c),s.set(c[0])}).catch(c=>{console.log("Fetch request failed",c)}),[l,o,r,s,u,a,c=>a(c)]}class W_ extends ce{constructor(t){super(),de(this,t,U_,x_,fe,{})}}new W_({target:document.getElementById("app")});
