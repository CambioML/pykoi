(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function H(){}const ts=e=>e;function Bn(e,t){for(const n in t)e[n]=t[n];return e}function ns(e){return e()}function jr(){return Object.create(null)}function _e(e){e.forEach(ns)}function Ye(e){return typeof e=="function"}function re(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ra(e){return Object.keys(e).length===0}function gr(e,...t){if(e==null)return H;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Aa(e){let t;return gr(e,n=>t=n)(),t}function ee(e,t,n){e.$$.on_destroy.push(gr(t,n))}function Ii(e){return e??""}function Oe(e,t,n){return e.set(n),t}function gn(e){return e&&Ye(e.destroy)?e.destroy:H}const rs=typeof window<"u";let is=rs?()=>window.performance.now():()=>Date.now(),hi=rs?e=>requestAnimationFrame(e):H;const Vt=new Set;function os(e){Vt.forEach(t=>{t.c(e)||(Vt.delete(t),t.f())}),Vt.size!==0&&hi(os)}function ls(e){let t;return Vt.size===0&&hi(os),{promise:new Promise(n=>{Vt.add(t={c:e,f:n})}),abort(){Vt.delete(t)}}}let hr=!1;function Ea(){hr=!0}function Ma(){hr=!1}function Fa(e,t,n,r){for(;e<t;){const i=e+(t-e>>1);n(i)<=r?e=i+1:t=i}return e}function Da(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const s=[];for(let u=0;u<t.length;u++){const c=t[u];c.claim_order!==void 0&&s.push(c)}t=s}const n=new Int32Array(t.length+1),r=new Int32Array(t.length);n[0]=-1;let i=0;for(let s=0;s<t.length;s++){const u=t[s].claim_order,c=(i>0&&t[n[i]].claim_order<=u?i+1:Fa(1,i,d=>t[n[d]].claim_order,u))-1;r[s]=n[c]+1;const f=c+1;n[f]=s,i=Math.max(f,i)}const o=[],l=[];let a=t.length-1;for(let s=n[i]+1;s!=0;s=r[s-1]){for(o.push(t[s-1]);a>=s;a--)l.push(t[a]);a--}for(;a>=0;a--)l.push(t[a]);o.reverse(),l.sort((s,u)=>s.claim_order-u.claim_order);for(let s=0,u=0;s<l.length;s++){for(;u<o.length&&l[s].claim_order>=o[u].claim_order;)u++;const c=u<o.length?o[u]:null;e.insertBefore(l[s],c)}}function v(e,t){e.appendChild(t)}function ss(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ia(e){const t=R("style");return Na(ss(e),t),t.sheet}function Na(e,t){return v(e.head||e,t),t.sheet}function Pa(e,t){if(hr){for(Da(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function xa(e,t,n){hr&&!n?Pa(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function x(e){e.parentNode&&e.parentNode.removeChild(e)}function ve(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function R(e){return document.createElement(e)}function U(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function z(e){return document.createTextNode(e)}function D(){return z(" ")}function Ae(){return z("")}function j(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ta(e){return Array.from(e.childNodes)}function Oa(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function Va(e,t,n,r,i=!1){Oa(e);const o=(()=>{for(let l=e.claim_info.last_index;l<e.length;l++){const a=e[l];if(t(a)){const s=n(a);return s===void 0?e.splice(l,1):e[l]=s,i||(e.claim_info.last_index=l),a}}for(let l=e.claim_info.last_index-1;l>=0;l--){const a=e[l];if(t(a)){const s=n(a);return s===void 0?e.splice(l,1):e[l]=s,i?s===void 0&&e.claim_info.last_index--:e.claim_info.last_index=l,a}}return r()})();return o.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,o}function za(e,t){return Va(e,n=>n.nodeType===3,n=>{const r=""+t;if(n.data.startsWith(r)){if(n.data.length!==r.length)return n.splitText(r.length)}else n.data=r},()=>z(t),!0)}function Q(e,t){t=""+t,e.data!==t&&(e.data=t)}function tt(e,t){e.value=t??""}function Re(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Un(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function as(e){const t=e.querySelector(":checked");return t&&t.__value}let $n;function Ha(){if($n===void 0){$n=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{$n=!0}}return $n}function Et(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=R("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=Ha();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=j(window,"message",l=>{l.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{o=j(r.contentWindow,"resize",t),t()}),v(e,r),()=>{(i||o&&r.contentWindow)&&o(),x(r)}}function en(e,t,n){e.classList[n?"add":"remove"](t)}function La(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}function mt(e,t){return new e(t)}const Wn=new Map;let Xn=0;function qa(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ga(e,t){const n={stylesheet:Ia(t),rules:{}};return Wn.set(e,n),n}function Ni(e,t,n,r,i,o,l,a=0){const s=16.666/r;let u=`{
`;for(let _=0;_<=1;_+=s){const b=t+(n-t)*o(_);u+=_*100+`%{${l(b,1-b)}}
`}const c=u+`100% {${l(n,1-n)}}
}`,f=`__svelte_${qa(c)}_${a}`,d=ss(e),{stylesheet:g,rules:p}=Wn.get(d)||Ga(d,e);p[f]||(p[f]=!0,g.insertRule(`@keyframes ${f} ${c}`,g.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${i}ms 1 both`,Xn+=1,f}function ja(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Xn-=i,Xn||Ba())}function Ba(){hi(()=>{Xn||(Wn.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&x(t)}),Wn.clear())})}let Gt;function kt(e){Gt=e}function Ua(){if(!Gt)throw new Error("Function called outside component initialization");return Gt}function ut(e){Ua().$$.on_mount.push(e)}const Pt=[],hn=[];let zt=[];const Pi=[],Wa=Promise.resolve();let Br=!1;function Xa(){Br||(Br=!0,Wa.then(us))}function Se(e){zt.push(e)}const wr=new Set;let Ft=0;function us(){if(Ft!==0)return;const e=Gt;do{try{for(;Ft<Pt.length;){const t=Pt[Ft];Ft++,kt(t),Ya(t.$$)}}catch(t){throw Pt.length=0,Ft=0,t}for(kt(null),Pt.length=0,Ft=0;hn.length;)hn.pop()();for(let t=0;t<zt.length;t+=1){const n=zt[t];wr.has(n)||(wr.add(n),n())}zt.length=0}while(Pt.length);for(;Pi.length;)Pi.pop()();Br=!1,wr.clear(),kt(e)}function Ya(e){if(e.fragment!==null){e.update(),_e(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Se)}}function Qa(e){const t=[],n=[];zt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),zt=t}let Qt;function Ka(){return Qt||(Qt=Promise.resolve(),Qt.then(()=>{Qt=null})),Qt}function yr(e,t,n){e.dispatchEvent(La(`${t?"intro":"outro"}${n}`))}const Vn=new Set;let ot;function ue(){ot={r:0,c:[],p:ot}}function ce(){ot.r||_e(ot.c),ot=ot.p}function N(e,t){e&&e.i&&(Vn.delete(e),e.i(t))}function V(e,t,n,r){if(e&&e.o){if(Vn.has(e))return;Vn.add(e),ot.c.push(()=>{Vn.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Ja={duration:0};function Ke(e,t,n,r){const i={direction:"both"};let o=t(e,n,i),l=r?0:1,a=null,s=null,u=null;function c(){u&&ja(e,u)}function f(g,p){const m=g.b-l;return p*=Math.abs(m),{a:l,b:g.b,d:m,duration:p,start:g.start,end:g.start+p,group:g.group}}function d(g){const{delay:p=0,duration:m=300,easing:_=ts,tick:b=H,css:w}=o||Ja,C={start:is()+p,b:g};g||(C.group=ot,ot.r+=1),a||s?s=C:(w&&(c(),u=Ni(e,l,g,m,p,_,w)),g&&b(0,1),a=f(C,m),Se(()=>yr(e,g,"start")),ls(A=>{if(s&&A>s.start&&(a=f(s,m),s=null,yr(e,a.b,"start"),w&&(c(),u=Ni(e,l,a.b,a.duration,0,_,o.css))),a){if(A>=a.end)b(l=a.b,1-l),yr(e,a.b,"end"),s||(a.b?c():--a.group.r||_e(a.group.c)),a=null;else if(A>=a.start){const $=A-a.start;l=a.a+a.d*_($/a.duration),b(l,1-l)}}return!!(a||s)}))}return{run(g){Ye(o)?Ka().then(()=>{o=o(i),d(g)}):d(g)},end(){c(),a=s=null}}}function pr(e,t){e.d(1),t.delete(e.key)}function cs(e,t){V(e,1,1,()=>{t.delete(e.key)})}function Xt(e,t,n,r,i,o,l,a,s,u,c,f){let d=e.length,g=o.length,p=d;const m={};for(;p--;)m[e[p].key]=p;const _=[],b=new Map,w=new Map,C=[];for(p=g;p--;){const S=f(i,o,p),k=n(S);let y=l.get(k);y?r&&C.push(()=>y.p(S,t)):(y=u(k,S),y.c()),b.set(k,_[p]=y),k in m&&w.set(k,Math.abs(p-m[k]))}const A=new Set,$=new Set;function E(S){N(S,1),S.m(a,c),l.set(S.key,S),c=S.first,g--}for(;d&&g;){const S=_[g-1],k=e[d-1],y=S.key,M=k.key;S===k?(c=S.first,d--,g--):b.has(M)?!l.has(y)||A.has(y)?E(S):$.has(M)?d--:w.get(y)>w.get(M)?($.add(y),E(S)):(A.add(M),d--):(s(k,l),d--)}for(;d--;){const S=e[d];b.has(S.key)||s(S,l)}for(;g;)E(_[g-1]);return _e(C),_}function fs(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const l=e[o],a=t[o];if(a){for(const s in l)s in a||(r[s]=1);for(const s in a)i[s]||(n[s]=a[s],i[s]=1);e[o]=a}else for(const s in l)i[s]=1}for(const l in r)l in n||(n[l]=void 0);return n}function ds(e){return typeof e=="object"&&e!==null?e:{}}const Za=/[&"]/g,eu=/[&<]/g;function tu(e,t=!1){const n=String(e),r=t?Za:eu;r.lastIndex=0;let i="",o=0;for(;r.test(n);){const l=r.lastIndex-1,a=n[l];i+=n.substring(o,l)+(a==="&"?"&amp;":a==='"'?"&quot;":"&lt;"),o=l+1}return i+n.substring(o)}function nu(e,t){if(!e||!e.$$render)throw t==="svelte:component"&&(t+=" this={...}"),new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${t}>.`);return e}let Sr;function gs(e){function t(n,r,i,o,l){const a=Gt,s={on_destroy:Sr,context:new Map(l||(a?a.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:jr()};kt({$$:s});const u=e(n,r,i,o);return kt(a),u}return{render:(n={},{$$slots:r={},context:i=new Map}={})=>{Sr=[];const o={title:"",head:"",css:new Set},l=t(o,n,{},r,i);return _e(Sr),{html:l,css:{code:Array.from(o.css).map(a=>a.code).join(`
`),map:null},head:o.title+o.head}},$$render:t}}function Z(e){e&&e.c()}function ru(e,t){e&&e.l(t)}function K(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||Se(()=>{const l=e.$$.on_mount.map(ns).filter(Ye);e.$$.on_destroy?e.$$.on_destroy.push(...l):_e(l),e.$$.on_mount=[]}),o.forEach(Se)}function J(e,t){const n=e.$$;n.fragment!==null&&(Qa(n.after_update),_e(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function iu(e,t){e.$$.dirty[0]===-1&&(Pt.push(e),Xa(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,n,r,i,o,l,a=[-1]){const s=Gt;kt(e);const u=e.$$={fragment:null,ctx:[],props:o,update:H,not_equal:i,bound:jr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:jr(),dirty:a,skip_bound:!1,root:t.target||s.$$.root};l&&l(u.root);let c=!1;if(u.ctx=n?n(e,t.props||{},(f,d,...g)=>{const p=g.length?g[0]:d;return u.ctx&&i(u.ctx[f],u.ctx[f]=p)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](p),c&&iu(e,f)),d}):[],u.update(),c=!0,_e(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){Ea();const f=Ta(t.target);u.fragment&&u.fragment.l(f),f.forEach(x)}else u.fragment&&u.fragment.c();t.intro&&N(e.$$.fragment),K(e,t.target,t.anchor,t.customElement),Ma(),us()}kt(s)}class ie{$destroy(){J(this,1),this.$destroy=H}$on(t,n){if(!Ye(n))return H;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Ra(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Dt=[];function Ur(e,t){return{subscribe:ke(e,t).subscribe}}function ke(e,t=H){let n;const r=new Set;function i(a){if(re(e,a)&&(e=a,n)){const s=!Dt.length;for(const u of r)u[1](),Dt.push(u,e);if(s){for(let u=0;u<Dt.length;u+=2)Dt[u][0](Dt[u+1]);Dt.length=0}}}function o(a){i(a(e))}function l(a,s=H){const u=[a,s];return r.add(u),r.size===1&&(n=t(i)||H),a(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}function ou(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return Ur(n,l=>{let a=!1;const s=[];let u=0,c=H;const f=()=>{if(u)return;c();const g=t(r?s[0]:s,l);o?l(g):c=Ye(g)?g:H},d=i.map((g,p)=>gr(g,m=>{s[p]=m,u&=~(1<<p),a&&f()},()=>{u|=1<<p}));return a=!0,f(),function(){_e(d),c(),a=!1}})}function pi(e){const t=e-1;return t*t*t+1}function xi(e){return Object.prototype.toString.call(e)==="[object Date]"}function Wr(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const r=t.map((i,o)=>Wr(e[o],i));return i=>r.map(o=>o(i))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(xi(e)&&xi(t)){e=e.getTime(),t=t.getTime();const o=t-e;return l=>new Date(e+l*o)}const r=Object.keys(t),i={};return r.forEach(o=>{i[o]=Wr(e[o],t[o])}),o=>{const l={};return r.forEach(a=>{l[a]=i[a](o)}),l}}if(n==="number"){const r=t-e;return i=>e+i*r}throw new Error(`Cannot interpolate ${n} values`)}function mi(e,t={}){const n=ke(e);let r,i=e;function o(l,a){if(e==null)return n.set(e=l),Promise.resolve();i=l;let s=r,u=!1,{delay:c=0,duration:f=400,easing:d=ts,interpolate:g=Wr}=Bn(Bn({},t),a);if(f===0)return s&&(s.abort(),s=null),n.set(e=i),Promise.resolve();const p=is()+c;let m;return r=ls(_=>{if(_<p)return!0;u||(m=g(e,l),typeof f=="function"&&(f=f(e,l)),u=!0),s&&(s.abort(),s=null);const b=_-p;return b>f?(n.set(e=l),!1):(n.set(e=m(d(b/f))),!0)}),r.promise}return{set:o,update:(l,a)=>o(l(i,e),a),subscribe:n.subscribe}}const xe=ke([]),Cr=ke([]),kr=ke([]),pn=ke([]),nt=ke("all"),Ti=ke({"n/a":1,up:1,down:1}),lu=["who","what","how","why","where","does","can","n/a"],Xr=mi(lu.map(e=>({question:e,count:0}))),Yr=ke(new Set);var Qr="http://www.w3.org/1999/xhtml";const Oi={svg:"http://www.w3.org/2000/svg",xhtml:Qr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Oi.hasOwnProperty(t)?{space:Oi[t],local:e}:e}function su(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Qr&&t.documentElement.namespaceURI===Qr?t.createElement(e):t.createElementNS(n,e)}}function au(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ps(e){var t=hs(e);return(t.local?au:su)(t)}function uu(){}function ms(e){return e==null?uu:function(){return this.querySelector(e)}}function cu(e){typeof e!="function"&&(e=ms(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,a=r[i]=new Array(l),s,u,c=0;c<l;++c)(s=o[c])&&(u=e.call(s,s.__data__,c,o))&&("__data__"in s&&(u.__data__=s.__data__),a[c]=u);return new Ve(r,this._parents)}function _s(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fu(){return[]}function du(e){return e==null?fu:function(){return this.querySelectorAll(e)}}function gu(e){return function(){return _s(e.apply(this,arguments))}}function hu(e){typeof e=="function"?e=gu(e):e=du(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var l=t[o],a=l.length,s,u=0;u<a;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),i.push(s));return new Ve(r,i)}function pu(e){return function(){return this.matches(e)}}function vs(e){return function(t){return t.matches(e)}}var mu=Array.prototype.find;function _u(e){return function(){return mu.call(this.children,e)}}function vu(){return this.firstElementChild}function bu(e){return this.select(e==null?vu:_u(typeof e=="function"?e:vs(e)))}var wu=Array.prototype.filter;function yu(){return Array.from(this.children)}function Su(e){return function(){return wu.call(this.children,e)}}function Cu(e){return this.selectAll(e==null?yu:Su(typeof e=="function"?e:vs(e)))}function ku(e){typeof e!="function"&&(e=pu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,a=r[i]=[],s,u=0;u<l;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&a.push(s);return new Ve(r,this._parents)}function bs(e){return new Array(e.length)}function $u(){return new Ve(this._enter||this._groups.map(bs),this._parents)}function Yn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Yn.prototype={constructor:Yn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ru(e){return function(){return e}}function Au(e,t,n,r,i,o){for(var l=0,a,s=t.length,u=o.length;l<u;++l)(a=t[l])?(a.__data__=o[l],r[l]=a):n[l]=new Yn(e,o[l]);for(;l<s;++l)(a=t[l])&&(i[l]=a)}function Eu(e,t,n,r,i,o,l){var a,s,u=new Map,c=t.length,f=o.length,d=new Array(c),g;for(a=0;a<c;++a)(s=t[a])&&(d[a]=g=l.call(s,s.__data__,a,t)+"",u.has(g)?i[a]=s:u.set(g,s));for(a=0;a<f;++a)g=l.call(e,o[a],a,o)+"",(s=u.get(g))?(r[a]=s,s.__data__=o[a],u.delete(g)):n[a]=new Yn(e,o[a]);for(a=0;a<c;++a)(s=t[a])&&u.get(d[a])===s&&(i[a]=s)}function Mu(e){return e.__data__}function Fu(e,t){if(!arguments.length)return Array.from(this,Mu);var n=t?Eu:Au,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ru(e));for(var o=i.length,l=new Array(o),a=new Array(o),s=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],d=f.length,g=Du(e.call(c,c&&c.__data__,u,r)),p=g.length,m=a[u]=new Array(p),_=l[u]=new Array(p),b=s[u]=new Array(d);n(c,f,m,_,b,g,t);for(var w=0,C=0,A,$;w<p;++w)if(A=m[w]){for(w>=C&&(C=w+1);!($=_[C])&&++C<p;);A._next=$||null}}return l=new Ve(l,r),l._enter=a,l._exit=s,l}function Du(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Iu(){return new Ve(this._exit||this._groups.map(bs),this._parents)}function Nu(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Pu(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,l=Math.min(i,o),a=new Array(i),s=0;s<l;++s)for(var u=n[s],c=r[s],f=u.length,d=a[s]=new Array(f),g,p=0;p<f;++p)(g=u[p]||c[p])&&(d[p]=g);for(;s<i;++s)a[s]=n[s];return new Ve(a,this._parents)}function xu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],l;--i>=0;)(l=r[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Tu(e){e||(e=Ou);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var l=n[o],a=l.length,s=i[o]=new Array(a),u,c=0;c<a;++c)(u=l[c])&&(s[c]=u);s.sort(t)}return new Ve(i,this._parents).order()}function Ou(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Vu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zu(){return Array.from(this)}function Hu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var l=r[i];if(l)return l}return null}function Lu(){let e=0;for(const t of this)++e;return e}function qu(){return!this.node()}function Gu(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,l=i.length,a;o<l;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function ju(e){return function(){this.removeAttribute(e)}}function Bu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uu(e,t){return function(){this.setAttribute(e,t)}}function Wu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Yu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qu(e,t){var n=hs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Bu:ju:typeof t=="function"?n.local?Yu:Xu:n.local?Wu:Uu)(n,t))}function ws(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ku(e){return function(){this.style.removeProperty(e)}}function Ju(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Zu(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ec(e,t,n){return arguments.length>1?this.each((t==null?Ku:typeof t=="function"?Zu:Ju)(e,t,n??"")):tc(this.node(),e)}function tc(e,t){return e.style.getPropertyValue(t)||ws(e).getComputedStyle(e,null).getPropertyValue(t)}function nc(e){return function(){delete this[e]}}function rc(e,t){return function(){this[e]=t}}function ic(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function oc(e,t){return arguments.length>1?this.each((t==null?nc:typeof t=="function"?ic:rc)(e,t)):this.node()[e]}function ys(e){return e.trim().split(/^|\s+/)}function _i(e){return e.classList||new Ss(e)}function Ss(e){this._node=e,this._names=ys(e.getAttribute("class")||"")}Ss.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Cs(e,t){for(var n=_i(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ks(e,t){for(var n=_i(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function lc(e){return function(){Cs(this,e)}}function sc(e){return function(){ks(this,e)}}function ac(e,t){return function(){(t.apply(this,arguments)?Cs:ks)(this,e)}}function uc(e,t){var n=ys(e+"");if(arguments.length<2){for(var r=_i(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ac:t?lc:sc)(n,t))}function cc(){this.textContent=""}function fc(e){return function(){this.textContent=e}}function dc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function gc(e){return arguments.length?this.each(e==null?cc:(typeof e=="function"?dc:fc)(e)):this.node().textContent}function hc(){this.innerHTML=""}function pc(e){return function(){this.innerHTML=e}}function mc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function _c(e){return arguments.length?this.each(e==null?hc:(typeof e=="function"?mc:pc)(e)):this.node().innerHTML}function vc(){this.nextSibling&&this.parentNode.appendChild(this)}function bc(){return this.each(vc)}function wc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yc(){return this.each(wc)}function Sc(e){var t=typeof e=="function"?e:ps(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Cc(){return null}function kc(e,t){var n=typeof e=="function"?e:ps(e),r=t==null?Cc:typeof t=="function"?t:ms(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function $c(){var e=this.parentNode;e&&e.removeChild(this)}function Rc(){return this.each($c)}function Ac(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ec(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mc(e){return this.select(e?Ec:Ac)}function Fc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Dc(e){return function(t){e.call(this,t,this.__data__)}}function Ic(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Nc(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Pc(e,t,n){return function(){var r=this.__on,i,o=Dc(t);if(r){for(var l=0,a=r.length;l<a;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function xc(e,t,n){var r=Ic(e+""),i,o=r.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var s=0,u=a.length,c;s<u;++s)for(i=0,c=a[s];i<o;++i)if((l=r[i]).type===c.type&&l.name===c.name)return c.value}return}for(a=t?Pc:Nc,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function $s(e,t,n){var r=ws(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Tc(e,t){return function(){return $s(this,e,t)}}function Oc(e,t){return function(){return $s(this,e,t.apply(this,arguments))}}function Vc(e,t){return this.each((typeof t=="function"?Oc:Tc)(e,t))}function*zc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,l;i<o;++i)(l=r[i])&&(yield l)}var Rs=[null];function Ve(e,t){this._groups=e,this._parents=t}function Hc(){return this}Ve.prototype={constructor:Ve,select:cu,selectAll:hu,selectChild:bu,selectChildren:Cu,filter:ku,data:Fu,enter:$u,exit:Iu,join:Nu,merge:Pu,selection:Hc,order:xu,sort:Tu,call:Vu,nodes:zu,node:Hu,size:Lu,empty:qu,each:Gu,attr:Qu,style:ec,property:oc,classed:uc,text:gc,html:_c,raise:bc,lower:yc,append:Sc,insert:kc,remove:Rc,clone:Mc,datum:Fc,on:xc,dispatch:Vc,[Symbol.iterator]:zc};function st(e){return typeof e=="string"?new Ve([[document.querySelector(e)]],[document.documentElement]):new Ve([[e]],Rs)}function $r(e){return typeof e=="string"?new Ve([document.querySelectorAll(e)],[document.documentElement]):new Ve([_s(e)],Rs)}function mn(e,{delay:t=0,duration:n=400,easing:r=pi,axis:i="y"}={}){const o=getComputedStyle(e),l=+o.opacity,a=i==="y"?"height":"width",s=parseFloat(o[a]),u=i==="y"?["top","bottom"]:["left","right"],c=u.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),f=parseFloat(o[`padding${c[0]}`]),d=parseFloat(o[`padding${c[1]}`]),g=parseFloat(o[`margin${c[0]}`]),p=parseFloat(o[`margin${c[1]}`]),m=parseFloat(o[`border${c[0]}Width`]),_=parseFloat(o[`border${c[1]}Width`]);return{delay:t,duration:n,easing:r,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*l};${a}: ${b*s}px;padding-${u[0]}: ${b*f}px;padding-${u[1]}: ${b*d}px;margin-${u[0]}: ${b*g}px;margin-${u[1]}: ${b*p}px;border-${u[0]}-width: ${b*m}px;border-${u[1]}-width: ${b*_}px;`}}function Rn(e,{delay:t=0,duration:n=400,easing:r=pi,start:i=0,opacity:o=0}={}){const l=getComputedStyle(e),a=+l.opacity,s=l.transform==="none"?"":l.transform,u=1-i,c=a*(1-o);return{delay:t,duration:n,easing:r,css:(f,d)=>`
			transform: ${s} scale(${1-u*d});
			opacity: ${a-c*d}
		`}}function Kr(e,t=2){if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(r))+" "+i[o]}function Lc(e){let t={who:0,what:0,how:0,why:0,where:0,does:0,can:0,"n/a":0};for(let r=0;r<e.length;r++){let i=e[r].question.split(" ")[0].toLowerCase();i in t?t[i]++:t["n/a"]++}return Object.keys(t).map(r=>({question:r,count:t[r]}))}function As(e){return e.map(t=>{const n=t.question.split(" ").length,r=t.answer.split(" ").length;return{index:t.index,question:+n,answer:+r,vote:t.vote}})}function qc(e,t){e.classList.add("tooltip"),e.setAttribute("tabindex",0);function n(){const i=document.createElement("span");i.textContent=t,i.setAttribute("id","tooltip"),e.appendChild(i),e.addEventListener("mouseleave",r),e.addEventListener("blur",r),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}function r(){e.removeChild(e.querySelector("#tooltip")),e.removeEventListener("mouseleave",r),e.removeEventListener("blur",r),e.addEventListener("mouseenter",n),e.addEventListener("focus",n)}return e.addEventListener("mouseenter",n),e.addEventListener("focus",n),{onDestroy(){e.classList.remove("tooltip"),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}}}function Vi(e,t,n){const r=e.slice();return r[16]=t[n],r[18]=n,r}function zi(e){let t,n,r,i,o,l;function a(...u){return e[9](e[18],...u)}function s(...u){return e[10](e[18],...u)}return{c(){t=R("div"),n=R("button"),n.textContent="👍",r=D(),i=R("button"),i.textContent="👎",h(n,"class","small-button thumbs-up svelte-19cad35"),h(i,"class","small-button thumbs-down svelte-19cad35"),h(t,"class","feedback-buttons svelte-19cad35")},m(u,c){T(u,t,c),v(t,n),v(t,r),v(t,i),o||(l=[j(n,"click",a),j(i,"click",s)],o=!0)},p(u,c){e=u},d(u){u&&x(t),o=!1,_e(l)}}}function Hi(e,t){let n,r,i,o,l,a,s,u,c,f=t[16].question+"",d,g,p,m,_,b,w,C=t[16].answer+"",A,$,E,S,k,y,M=t[0]&&zi(t);return{key:e,first:null,c(){n=R("div"),r=R("div"),i=R("div"),o=D(),l=R("div"),a=R("div"),s=R("h5"),s.textContent="Question:",u=D(),c=R("p"),d=z(f),g=D(),p=R("div"),m=R("div"),_=R("h5"),_.textContent="Response:",b=D(),w=R("p"),A=z(C),$=D(),M&&M.c(),E=D(),h(i,"class","avatar"),h(s,"class","bold svelte-19cad35"),h(a,"class","question svelte-19cad35"),h(_,"class","bold svelte-19cad35"),h(m,"class","answer svelte-19cad35"),h(p,"class","answers svelte-19cad35"),h(l,"class","message-content svelte-19cad35"),h(r,"class","chat-message-center svelte-19cad35"),h(n,"class","chat-message svelte-19cad35"),this.first=n},m(I,F){T(I,n,F),v(n,r),v(r,i),v(r,o),v(r,l),v(l,a),v(a,s),v(a,u),v(a,c),v(c,d),v(l,g),v(l,p),v(p,m),v(m,_),v(m,b),v(m,w),v(w,A),v(m,$),M&&M.m(m,null),v(n,E),k||(y=gn(S=jc.call(null,n,t[18]===t[4].length-1)),k=!0)},p(I,F){t=I,F&16&&f!==(f=t[16].question+"")&&Q(d,f),F&16&&C!==(C=t[16].answer+"")&&Q(A,C),t[0]?M?M.p(t,F):(M=zi(t),M.c(),M.m(m,null)):M&&(M.d(1),M=null),S&&Ye(S.update)&&F&16&&S.update.call(null,t[18]===t[4].length-1)},d(I){I&&x(n),M&&M.d(),k=!1,y()}}}function Gc(e){let t,n,r,i,o,l,a=[],s=new Map,u,c,f,d,g,p,m=(e[2]?e[3]:"Send")+"",_,b,w,C,A,$,E=e[4];const S=k=>k[18];for(let k=0;k<E.length;k+=1){let y=Vi(e,E,k),M=S(y);s.set(M,a[k]=Hi(M,y))}return{c(){t=R("div"),n=R("div"),n.innerHTML=`<h5 class="underline bold svelte-19cad35">Vote Feedback Instructions</h5> 
    <p class="svelte-19cad35">Ask a question to receive an answer from the chatbot. If the response is
      satisfactory, click on the <span class="inline-button green svelte-19cad35">👍</span>
      button. If the repsonse is not satisfactory, click on the
      <span class="inline-button red svelte-19cad35">👎</span> button.</p>`,r=D(),i=R("div"),o=R("section"),l=R("div");for(let k=0;k<a.length;k+=1)a[k].c();u=D(),c=R("div"),f=R("form"),d=R("input"),g=D(),p=R("button"),_=z(m),w=D(),C=R("p"),C.textContent="Note - may produce inaccurate information.",h(n,"class","instructions svelte-19cad35"),h(l,"class","chat-log svelte-19cad35"),h(o,"class","chatbox svelte-19cad35"),h(d,"class","chat-input-textarea svelte-19cad35"),h(d,"placeholder","Type Question Here"),h(p,"class",b="btnyousend "+(e[1]===""?"":"active")+" svelte-19cad35"),h(p,"type","submit"),h(f,"class","chat-input-form svelte-19cad35"),h(C,"class","message svelte-19cad35"),h(c,"class","chat-input-holder svelte-19cad35"),h(i,"class","ranked-chat svelte-19cad35"),h(t,"class","ranked-feedback-container svelte-19cad35")},m(k,y){T(k,t,y),v(t,n),v(t,r),v(t,i),v(i,o),v(o,l);for(let M=0;M<a.length;M+=1)a[M]&&a[M].m(l,null);v(i,u),v(i,c),v(c,f),v(f,d),tt(d,e[1]),v(f,g),v(f,p),v(p,_),v(c,w),v(c,C),A||($=[j(d,"input",e[11]),j(f,"submit",e[5])],A=!0)},p(k,[y]){y&81&&(E=k[4],a=Xt(a,y,S,1,k,E,s,l,pr,Hi,null,Vi)),y&2&&d.value!==k[1]&&tt(d,k[1]),y&12&&m!==(m=(k[2]?k[3]:"Send")+"")&&Q(_,m),y&2&&b!==(b="btnyousend "+(k[1]===""?"":"active")+" svelte-19cad35")&&h(p,"class",b)},i:H,o:H,d(k){k&&x(t);for(let y=0;y<a.length;y+=1)a[y].d();A=!1,_e($)}}}function jc(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function Bc(e){const t=await fetch("/chat/qa_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function Uc(e,t,n){let r,i;ee(e,xe,b=>n(4,i=b));let{feedback:o=!1}=t,{is_retrieval:l=!1}=t,a="",s="",u=!1;ut(()=>{c()});async function c(){const A=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map($=>({id:$[0],question:$[1],answer:$[2],vote_status:$[3]}));Oe(xe,i=[...A],i)}const f=async b=>{b.preventDefault(),a=s,n(1,s=""),n(2,u=!0);let w={id:i.length+1,question:a,answer:"Loading...",vote_status:"na"};Oe(xe,i=[...i,w],i);const C=l?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})}):await fetch(`/chat/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})});if(C.ok){const A=await C.json();console.log("response data",A),w.answer=A.answer,xe.update($=>($[$.length-1]=w,$))}else{const A=await C.text();alert(A)}n(2,u=!1)};let d=0;setInterval(()=>{n(8,d=(d+1)%4)},200);function g(b,w,C){const A=i[C];A.vote=w;const $={id:C+1,vote_status:w};Bc($),st(b.currentTarget.parentNode).selectAll("button").style("border","3px solid transparent").style("opacity",.65),st(b.currentTarget).style("border","3px solid var(--black)").style("opacity",1)}[...Array(10).keys()].map(b=>String.fromCharCode(65+b));const p=(b,w)=>g(w,"up",b),m=(b,w)=>g(w,"down",b);function _(){s=this.value,n(1,s)}return e.$$set=b=>{"feedback"in b&&n(0,o=b.feedback),"is_retrieval"in b&&n(7,l=b.is_retrieval)},e.$$.update=()=>{e.$$.dirty&256&&n(3,r=".".repeat(d).padEnd(3))},[o,s,u,r,i,f,g,l,d,p,m,_]}class vi extends ie{constructor(t){super(),se(this,t,Uc,Gc,re,{feedback:0,is_retrieval:7})}}function Li(e,t,n){const r=e.slice();return r[14]=t[n],r[16]=n,r}function qi(e,t){let n,r,i,o,l,a,s,u,c,f=t[14].question+"",d,g,p,m,_,b,w,C=t[14].up_ranking_answer+"",A,$,E,S,k,y,M=t[14].low_ranking_answer+"",I,F,P,B,ge;function oe(...ae){return t[7](t[14],t[16],...ae)}function Ee(...ae){return t[8](t[14],t[16],...ae)}function Me(...ae){return t[9](t[14],t[16],...ae)}function ye(...ae){return t[10](t[14],t[16],...ae)}return{key:e,first:null,c(){n=R("div"),r=R("div"),i=R("div"),o=D(),l=R("div"),a=R("div"),s=R("h5"),s.textContent="Question:",u=D(),c=R("p"),d=z(f),g=D(),p=R("div"),m=R("div"),_=R("h5"),_.textContent="Response 1:",b=D(),w=R("p"),A=z(C),$=D(),E=R("div"),S=R("h5"),S.textContent="Response 2:",k=D(),y=R("p"),I=z(M),F=D(),h(i,"class","avatar"),h(s,"class","bold svelte-au920n"),h(a,"class","question svelte-au920n"),h(_,"class","bold underline svelte-au920n"),h(m,"class","answer svelte-au920n"),h(S,"class","bold underline svelte-au920n"),h(E,"class","answer svelte-au920n"),h(p,"class","answers svelte-au920n"),h(l,"class","message-content svelte-au920n"),h(r,"class","chat-message-center svelte-au920n"),h(n,"class","chat-message svelte-au920n"),this.first=n},m(ae,ze){T(ae,n,ze),v(n,r),v(r,i),v(r,o),v(r,l),v(l,a),v(a,s),v(a,u),v(a,c),v(c,d),v(l,g),v(l,p),v(p,m),v(m,_),v(m,b),v(m,w),v(w,A),v(p,$),v(p,E),v(E,S),v(E,k),v(E,y),v(y,I),v(n,F),B||(ge=[j(m,"click",oe),j(m,"keydown",Ee),j(E,"click",Me),j(E,"keydown",ye),gn(P=Xc.call(null,n,t[16]===t[3].length-1))],B=!0)},p(ae,ze){t=ae,ze&8&&f!==(f=t[14].question+"")&&Q(d,f),ze&8&&C!==(C=t[14].up_ranking_answer+"")&&Q(A,C),ze&8&&M!==(M=t[14].low_ranking_answer+"")&&Q(I,M),P&&Ye(P.update)&&ze&8&&P.update.call(null,t[16]===t[3].length-1)},d(ae){ae&&x(n),B=!1,_e(ge)}}}function Wc(e){let t,n,r,i,o,l,a=[],s=new Map,u,c,f,d,g,p,m=(e[1]?e[2]:"Send")+"",_,b,w,C,A,$,E=e[3];const S=k=>k[16];for(let k=0;k<E.length;k+=1){let y=Li(e,E,k),M=S(y);s.set(M,a[k]=qi(M,y))}return{c(){t=R("div"),n=R("div"),n.innerHTML=`<h5 class="underline bold svelte-au920n">Ranked Feedback Instructions</h5> 
    <p class="svelte-au920n">Ask a question and click on the better of the two responses. The better
      response will be outlined in <span class="green svelte-au920n">green</span>, the worse
      response outlined in <span class="red svelte-au920n">red</span>. This data will be
      automatically fed to RLHF.</p> 
    <button class="svelte-au920n">Download Data</button>`,r=D(),i=R("div"),o=R("section"),l=R("div");for(let k=0;k<a.length;k+=1)a[k].c();u=D(),c=R("div"),f=R("form"),d=R("input"),g=D(),p=R("button"),_=z(m),w=D(),C=R("p"),C.textContent="Note - may produce inaccurate information.",h(n,"class","instructions svelte-au920n"),h(l,"class","chat-log svelte-au920n"),h(o,"class","chatbox svelte-au920n"),h(d,"class","chat-input-textarea svelte-au920n"),h(d,"placeholder","Type Message Here"),h(p,"class",b="btnyousend "+(e[0]===""?"":"active")+" svelte-au920n"),h(p,"type","submit"),h(f,"class","chat-input-form svelte-au920n"),h(C,"class","message svelte-au920n"),h(c,"class","chat-input-holder svelte-au920n"),h(i,"class","ranked-chat svelte-au920n"),h(t,"class","ranked-feedback-container svelte-au920n")},m(k,y){T(k,t,y),v(t,n),v(t,r),v(t,i),v(i,o),v(o,l);for(let M=0;M<a.length;M+=1)a[M]&&a[M].m(l,null);v(i,u),v(i,c),v(c,f),v(f,d),tt(d,e[0]),v(f,g),v(f,p),v(p,_),v(c,w),v(c,C),A||($=[j(d,"input",e[11]),j(f,"submit",e[4])],A=!0)},p(k,[y]){y&40&&(E=k[3],a=Xt(a,y,S,1,k,E,s,l,pr,qi,null,Li)),y&1&&d.value!==k[0]&&tt(d,k[0]),y&6&&m!==(m=(k[1]?k[2]:"Send")+"")&&Q(_,m),y&1&&b!==(b="btnyousend "+(k[0]===""?"":"active")+" svelte-au920n")&&h(p,"class",b)},i:H,o:H,d(k){k&&x(t);for(let y=0;y<a.length;y+=1)a[y].d();A=!1,_e($)}}}function Xc(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function Yc(e){const t=await fetch("/chat/ranking_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function Qc(e,t,n){let r,i;ee(e,Cr,_=>n(3,i=_));let o="",l="",a=!1;ut(()=>{});const s=async _=>{_.preventDefault(),o=l,n(0,l=""),n(1,a=!0);let b={question:o,up_ranking_answer:"Loading...",low_ranking_answer:"Loading..."};Oe(Cr,i=[...i,b],i);const w=await fetch(`/chat/multi_responses/${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:o})});if(w.ok){const C=await w.json();b.up_ranking_answer=C.answer[0],b.low_ranking_answer=C.answer[1],Cr.update(A=>(A[A.length-1]=b,A))}else{const C=await w.text();alert(C)}n(1,a=!1)};let u=0;setInterval(()=>{n(6,u=(u+1)%4)},200);function c(_,b,w,C){const A=i[w],$={1:"up_ranking_answer",2:"low_ranking_answer"},E={question:A.question,up_ranking_answer:A[$[C]],low_ranking_answer:A[$[C%2+1]]};Yc(E),st(_.currentTarget.parentNode).selectAll("div").style("outline","2px solid var(--red)").style("border","1px solid var(--red)"),st(_.currentTarget).style("outline","2px solid var(--green)").style("border","1px solid var(--green)")}const f=(_,b,w)=>c(w,_,b,1),d=(_,b,w)=>c(w,_,b,1),g=(_,b,w)=>c(w,_,b,2),p=(_,b,w)=>c(w,_,b,2);function m(){l=this.value,n(0,l)}return e.$$.update=()=>{e.$$.dirty&64&&n(2,r=".".repeat(u).padEnd(3))},[l,a,r,i,s,c,u,f,d,g,p,m]}class Kc extends ie{constructor(t){super(),se(this,t,Qc,Wc,re,{})}}function Gi(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function ji(e){let t,n,r,i,o=e[8].name+"",l,a,s,u,c;function f(...d){return e[6](e[8],...d)}return{c(){t=R("label"),n=R("input"),l=z(o),a=D(),h(n,"type","checkbox"),h(n,"id",r=e[8].id),n.checked=i=e[1].has(e[8].name),h(t,"for",s=e[8].id)},m(d,g){T(d,t,g),v(t,n),v(t,l),v(t,a),u||(c=j(n,"change",f),u=!0)},p(d,g){e=d,g&1&&r!==(r=e[8].id)&&h(n,"id",r),g&3&&i!==(i=e[1].has(e[8].name))&&(n.checked=i),g&1&&o!==(o=e[8].name+"")&&Q(l,o),g&1&&s!==(s=e[8].id)&&h(t,"for",s)},d(d){d&&x(t),u=!1,c()}}}function Jc(e){let t,n,r,i,o,l,a,s,u,c,f,d=e[0],g=[];for(let p=0;p<d.length;p+=1)g[p]=ji(Gi(e,d,p));return{c(){t=R("form"),n=R("div"),r=R("div"),i=R("select"),o=R("option"),o.textContent="Documents",l=D(),a=R("div"),s=D(),u=R("div");for(let p=0;p<g.length;p+=1)g[p].c();o.__value="Documents",o.value=o.__value,h(i,"class","svelte-8o2wf2"),h(a,"class","overSelect svelte-8o2wf2"),h(r,"class","selectBox svelte-8o2wf2"),h(u,"class","dropdown-content svelte-8o2wf2"),Re(u,"display",e[2]?"block":"none"),h(n,"class","multiselect svelte-8o2wf2")},m(p,m){T(p,t,m),v(t,n),v(n,r),v(r,i),v(i,o),v(r,l),v(r,a),v(n,s),v(n,u);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(u,null);e[7](u),c||(f=j(r,"click",e[4]),c=!0)},p(p,[m]){if(m&35){d=p[0];let _;for(_=0;_<d.length;_+=1){const b=Gi(p,d,_);g[_]?g[_].p(b,m):(g[_]=ji(b),g[_].c(),g[_].m(u,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=d.length}m&4&&Re(u,"display",p[2]?"block":"none")},i:H,o:H,d(p){p&&x(t),ve(g,p),e[7](null),c=!1,f()}}}function Zc(e,t,n){let r;ee(e,Yr,f=>n(1,r=f));let{documents:i=[]}=t,o=!1,l;function a(){n(2,o=!o)}function s(f,d){d.target.checked?r.add(f):r.delete(f),Yr.set(new Set(r))}const u=(f,d)=>s(f.name,d);function c(f){hn[f?"unshift":"push"](()=>{l=f,n(3,l)})}return e.$$set=f=>{"documents"in f&&n(0,i=f.documents)},e.$$.update=()=>{e.$$.dirty&2&&console.log(r)},[i,r,o,l,a,s,u,c]}let ef=class extends ie{constructor(t){super(),se(this,t,Zc,Jc,re,{documents:0})}};function tf(e){let t;return{c(){t=R("p"),t.textContent="⌄",h(t,"class","svelte-1pk2e1k")},m(n,r){T(n,t,r)},d(n){n&&x(t)}}}function nf(e){let t;return{c(){t=R("p"),t.textContent="⌃",h(t,"class","svelte-1pk2e1k")},m(n,r){T(n,t,r)},d(n){n&&x(t)}}}function Bi(e){let t,n,r,i,o;return{c(){t=R("div"),n=R("p"),r=z(e[1]),h(n,"class","bold svelte-1pk2e1k"),h(t,"class","source_content svelte-1pk2e1k")},m(l,a){T(l,t,a),v(t,n),v(n,r),o=!0},p(l,a){(!o||a&2)&&Q(r,l[1])},i(l){o||(Se(()=>{o&&(i||(i=Ke(t,mn,{},!0)),i.run(1))}),o=!0)},o(l){i||(i=Ke(t,mn,{},!1)),i.run(0),o=!1},d(l){l&&x(t),l&&i&&i.end()}}}function rf(e){let t,n,r,i=e[2]+1+"",o,l,a,s,u,c,f,d,g;function p(w,C){return w[3]?nf:tf}let m=p(e),_=m(e),b=e[3]&&Bi(e);return{c(){t=R("div"),n=R("div"),r=R("p"),o=z(i),l=z(": "),a=z(e[0]),s=D(),_.c(),c=D(),b&&b.c(),h(r,"class","bold svelte-1pk2e1k"),h(n,"class","source_tab svelte-1pk2e1k"),h(t,"class","source svelte-1pk2e1k")},m(w,C){T(w,t,C),v(t,n),v(n,r),v(r,o),v(r,l),v(r,a),v(n,s),_.m(n,null),v(t,c),b&&b.m(t,null),f=!0,d||(g=j(n,"click",e[4]),d=!0)},p(w,[C]){(!f||C&4)&&i!==(i=w[2]+1+"")&&Q(o,i),(!f||C&1)&&Q(a,w[0]),m!==(m=p(w))&&(_.d(1),_=m(w),_&&(_.c(),_.m(n,null))),w[3]?b?(b.p(w,C),C&8&&N(b,1)):(b=Bi(w),b.c(),N(b,1),b.m(t,null)):b&&(ue(),V(b,1,1,()=>{b=null}),ce())},i(w){f||(Se(()=>{f&&(u||(u=Ke(n,mn,{},!0)),u.run(1))}),N(b),f=!0)},o(w){u||(u=Ke(n,mn,{},!1)),u.run(0),V(b),f=!1},d(w){w&&x(t),_.d(),w&&u&&u.end(),b&&b.d(),d=!1,g()}}}function of(e,t,n){let{source:r=""}=t,{source_content:i=""}=t,{i:o=0}=t,l=o===0;const a=()=>n(3,l=!l);return e.$$set=s=>{"source"in s&&n(0,r=s.source),"source_content"in s&&n(1,i=s.source_content),"i"in s&&n(2,o=s.i)},[r,i,o,l,a]}class lf extends ie{constructor(t){super(),se(this,t,of,rf,re,{source:0,source_content:1,i:2})}}function Ui(e,t,n){const r=e.slice();return r[4]=t[n],r[6]=n,r}function Wi(e){let t,n,r,i;const o=[cf,uf,af,sf],l=[];function a(s,u){return s[0][0]==="N/A"?0:s[0][0]==="Loading..."?1:s[0][0]==="Not loaded"?2:3}return t=a(e),n=l[t]=o[t](e),{c(){n.c(),r=Ae()},m(s,u){l[t].m(s,u),T(s,r,u),i=!0},p(s,u){let c=t;t=a(s),t===c?l[t].p(s,u):(ue(),V(l[c],1,1,()=>{l[c]=null}),ce(),n=l[t],n?n.p(s,u):(n=l[t]=o[t](s),n.c()),N(n,1),n.m(r.parentNode,r))},i(s){i||(N(n),i=!0)},o(s){V(n),i=!1},d(s){l[t].d(s),s&&x(r)}}}function sf(e){let t,n,r,i=e[0].length+"",o,l,a,s,u,c,f,d;function g(b,w){return b[2]?df:ff}let p=g(e),m=p(e),_=e[2]&&Xi(e);return{c(){t=R("div"),n=R("h5"),r=z("📖 Response Sources ("),o=z(i),l=z(")"),a=D(),m.c(),s=D(),_&&_.c(),u=Ae(),h(n,"class","bold"),h(t,"class","sources-header svelte-1r759df")},m(b,w){T(b,t,w),v(t,n),v(n,r),v(n,o),v(n,l),v(t,a),m.m(t,null),T(b,s,w),_&&_.m(b,w),T(b,u,w),c=!0,f||(d=j(t,"click",e[3]),f=!0)},p(b,w){(!c||w&1)&&i!==(i=b[0].length+"")&&Q(o,i),p!==(p=g(b))&&(m.d(1),m=p(b),m&&(m.c(),m.m(t,null))),b[2]?_?(_.p(b,w),w&4&&N(_,1)):(_=Xi(b),_.c(),N(_,1),_.m(u.parentNode,u)):_&&(ue(),V(_,1,1,()=>{_=null}),ce())},i(b){c||(N(_),c=!0)},o(b){V(_),c=!1},d(b){b&&x(t),m.d(),b&&x(s),_&&_.d(b),b&&x(u),f=!1,d()}}}function af(e){let t;return{c(){t=R("h5"),t.textContent="⚠️ No sources loaded",h(t,"class","bold")},m(n,r){T(n,t,r)},p:H,i:H,o:H,d(n){n&&x(t)}}}function uf(e){let t;return{c(){t=R("h5"),t.textContent="📖 Loading...",h(t,"class","bold")},m(n,r){T(n,t,r)},p:H,i:H,o:H,d(n){n&&x(t)}}}function cf(e){let t;return{c(){t=R("h5"),t.textContent="⚠️ No Retrieval Sources selected",h(t,"class","bold")},m(n,r){T(n,t,r)},p:H,i:H,o:H,d(n){n&&x(t)}}}function ff(e){let t;return{c(){t=R("span"),t.textContent="⌄"},m(n,r){T(n,t,r)},d(n){n&&x(t)}}}function df(e){let t;return{c(){t=R("span"),t.textContent="⌃"},m(n,r){T(n,t,r)},d(n){n&&x(t)}}}function Xi(e){let t,n,r=e[0],i=[];for(let l=0;l<r.length;l+=1)i[l]=Yi(Ui(e,r,l));const o=l=>V(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();t=Ae()},m(l,a){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(l,a);T(l,t,a),n=!0},p(l,a){if(a&3){r=l[0];let s;for(s=0;s<r.length;s+=1){const u=Ui(l,r,s);i[s]?(i[s].p(u,a),N(i[s],1)):(i[s]=Yi(u),i[s].c(),N(i[s],1),i[s].m(t.parentNode,t))}for(ue(),s=r.length;s<i.length;s+=1)o(s);ce()}},i(l){if(!n){for(let a=0;a<r.length;a+=1)N(i[a]);n=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)V(i[a]);n=!1},d(l){ve(i,l),l&&x(t)}}}function Yi(e){let t,n;return t=new lf({props:{source:e[4],source_content:e[1][e[6]],i:e[6]}}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},p(r,i){const o={};i&1&&(o.source=r[4]),i&2&&(o.source_content=r[1][r[6]]),t.$set(o)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function gf(e){let t,n,r=e[0]!==void 0&&Wi(e);return{c(){t=R("div"),r&&r.c(),h(t,"class","sources svelte-1r759df")},m(i,o){T(i,t,o),r&&r.m(t,null),n=!0},p(i,[o]){i[0]!==void 0?r?(r.p(i,o),o&1&&N(r,1)):(r=Wi(i),r.c(),N(r,1),r.m(t,null)):r&&(ue(),V(r,1,1,()=>{r=null}),ce())},i(i){n||(N(r),n=!0)},o(i){V(r),n=!1},d(i){i&&x(t),r&&r.d()}}}function hf(e,t,n){let{sources:r=[]}=t,{source_content:i=[]}=t,o=!1;const l=()=>n(2,o=!o);return e.$$set=a=>{"sources"in a&&n(0,r=a.sources),"source_content"in a&&n(1,i=a.source_content)},[r,i,o,l]}class pf extends ie{constructor(t){super(),se(this,t,hf,gf,re,{sources:0,source_content:1})}}function Qi(e,t,n){const r=e.slice();return r[4]=t[n],r}function Ki(e,t,n){const r=e.slice();return r[4]=t[n],r}function Ji(e){let t,n,r,i=e[4].label+"",o,l,a,s,u;return{c(){t=R("li"),n=R("span"),r=R("h5"),o=z(i),l=D(),h(r,"class","bold"),h(n,"class","svelte-iwm583"),h(t,"class",a=Ii(e[0]===e[4].value?"active":"")+" svelte-iwm583")},m(c,f){T(c,t,f),v(t,n),v(n,r),v(r,o),v(t,l),s||(u=j(n,"click",function(){Ye(e[3](e[4].value))&&e[3](e[4].value).apply(this,arguments)}),s=!0)},p(c,f){e=c,f&2&&i!==(i=e[4].label+"")&&Q(o,i),f&3&&a!==(a=Ii(e[0]===e[4].value?"active":"")+" svelte-iwm583")&&h(t,"class",a)},d(c){c&&x(t),s=!1,u()}}}function Zi(e){let t,n,r,i;const o=[e[2]];var l=e[4].component;function a(s){let u={};for(let c=0;c<o.length;c+=1)u=Bn(u,o[c]);return{props:u}}return l&&(n=mt(l,a())),{c(){t=R("div"),n&&Z(n.$$.fragment),r=D(),h(t,"class","box svelte-iwm583")},m(s,u){T(s,t,u),n&&K(n,t,null),v(t,r),i=!0},p(s,u){const c=u&4?fs(o,[ds(s[2])]):{};if(u&2&&l!==(l=s[4].component)){if(n){ue();const f=n;V(f.$$.fragment,1,0,()=>{J(f,1)}),ce()}l?(n=mt(l,a()),Z(n.$$.fragment),N(n.$$.fragment,1),K(n,t,r)):n=null}else l&&n.$set(c)},i(s){i||(n&&N(n.$$.fragment,s),i=!0)},o(s){n&&V(n.$$.fragment,s),i=!1},d(s){s&&x(t),n&&J(n)}}}function eo(e){let t,n,r=e[0]==e[4].value&&Zi(e);return{c(){r&&r.c(),t=Ae()},m(i,o){r&&r.m(i,o),T(i,t,o),n=!0},p(i,o){i[0]==i[4].value?r?(r.p(i,o),o&3&&N(r,1)):(r=Zi(i),r.c(),N(r,1),r.m(t.parentNode,t)):r&&(ue(),V(r,1,1,()=>{r=null}),ce())},i(i){n||(N(r),n=!0)},o(i){V(r),n=!1},d(i){r&&r.d(i),i&&x(t)}}}function mf(e){let t,n,r,i,o=e[1],l=[];for(let c=0;c<o.length;c+=1)l[c]=Ji(Ki(e,o,c));let a=e[1],s=[];for(let c=0;c<a.length;c+=1)s[c]=eo(Qi(e,a,c));const u=c=>V(s[c],1,1,()=>{s[c]=null});return{c(){t=R("ul");for(let c=0;c<l.length;c+=1)l[c].c();n=D();for(let c=0;c<s.length;c+=1)s[c].c();r=Ae(),h(t,"class","svelte-iwm583")},m(c,f){T(c,t,f);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(t,null);T(c,n,f);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(c,f);T(c,r,f),i=!0},p(c,[f]){if(f&11){o=c[1];let d;for(d=0;d<o.length;d+=1){const g=Ki(c,o,d);l[d]?l[d].p(g,f):(l[d]=Ji(g),l[d].c(),l[d].m(t,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=o.length}if(f&7){a=c[1];let d;for(d=0;d<a.length;d+=1){const g=Qi(c,a,d);s[d]?(s[d].p(g,f),N(s[d],1)):(s[d]=eo(g),s[d].c(),N(s[d],1),s[d].m(r.parentNode,r))}for(ue(),d=a.length;d<s.length;d+=1)u(d);ce()}},i(c){if(!i){for(let f=0;f<a.length;f+=1)N(s[f]);i=!0}},o(c){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)V(s[f]);i=!1},d(c){c&&x(t),ve(l,c),c&&x(n),ve(s,c),c&&x(r)}}}function _f(e,t,n){let{items:r=[]}=t,{activeTabValue:i=1}=t,{tabProps:o={}}=t;const l=a=>()=>n(0,i=a);return e.$$set=a=>{"items"in a&&n(1,r=a.items),"activeTabValue"in a&&n(0,i=a.activeTabValue),"tabProps"in a&&n(2,o=a.tabProps)},[i,r,o,l]}class vf extends ie{constructor(t){super(),se(this,t,_f,mf,re,{items:1,activeTabValue:0,tabProps:2})}}function to(e){let t;return{c(){t=z("Press ENTER to autofill with the RAG answer.")},m(n,r){T(n,t,r)},d(n){n&&x(t)}}}function bf(e){let t,n,r,i,o,l,a,s,u,c,f,d,g,p=e[0].edited_answer===Qn&&to();return{c(){t=R("form"),n=R("textarea"),i=D(),o=R("div"),l=R("div"),p&&p.c(),a=D(),s=R("div"),u=R("button"),u.textContent="Update",c=D(),f=R("button"),f.textContent="Reset",h(n,"placeholder",r=e[0].answer),h(l,"class","note svelte-i9wciy"),h(o,"class","button-container svelte-i9wciy")},m(m,_){T(m,t,_),v(t,n),tt(n,e[0].edited_answer),e[6](n),v(t,i),v(t,o),v(o,l),p&&p.m(l,null),v(o,a),v(o,s),v(s,u),v(s,c),v(s,f),d||(g=[j(n,"input",e[5]),j(n,"keydown",e[4]),j(u,"click",e[2]),j(f,"click",e[3])],d=!0)},p(m,[_]){_&1&&r!==(r=m[0].answer)&&h(n,"placeholder",r),_&1&&tt(n,m[0].edited_answer),m[0].edited_answer===Qn?p||(p=to(),p.c(),p.m(l,null)):p&&(p.d(1),p=null)},i:H,o:H,d(m){m&&x(t),e[6](null),p&&p.d(),d=!1,_e(g)}}}const Qn="";function wf(e,t,n){let{message:r={}}=t,i;const o=async f=>{const d={id:r.id,new_answer:f},g=await fetch("/chat/rag_table/update_answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(g.ok)console.log("Answer updated successfully",g),n(0,r.edited_answer=f,r);else{const p=await g.text();alert(p)}},l=f=>{f.preventDefault(),o(r.edited_answer)},a=f=>{f.preventDefault(),o(Qn)},s=f=>{f.key=="Enter"&&r.edited_answer===Qn&&(f.preventDefault(),console.log("ENTER"),n(0,r.edited_answer=r.answer,r))};ut(function(){i.focus()});function u(){r.edited_answer=this.value,n(0,r)}function c(f){hn[f?"unshift":"push"](()=>{i=f,n(1,i)})}return e.$$set=f=>{"message"in f&&n(0,r=f.message)},[r,i,l,a,s,u,c]}class yf extends ie{constructor(t){super(),se(this,t,wf,bf,re,{message:0})}}function no(e){let t,n,r,i,o,l;return{c(){t=R("div"),n=R("button"),n.textContent="👍",r=D(),i=R("button"),i.textContent="👎",h(n,"class","small-button thumbs-up svelte-1u8cd0w"),h(i,"class","small-button thumbs-down svelte-1u8cd0w"),h(t,"class","feedback-buttons svelte-1u8cd0w")},m(a,s){T(a,t,s),v(t,n),v(t,r),v(t,i),o||(l=[j(n,"click",e[4]),j(i,"click",e[5])],o=!0)},p:H,d(a){a&&x(t),o=!1,_e(l)}}}function Sf(e){let t,n=e[0].answer+"",r,i,o,l=e[1]&&no(e);return{c(){t=R("div"),r=z(n),i=D(),l&&l.c(),o=Ae()},m(a,s){T(a,t,s),v(t,r),T(a,i,s),l&&l.m(a,s),T(a,o,s)},p(a,[s]){s&1&&n!==(n=a[0].answer+"")&&Q(r,n),a[1]?l?l.p(a,s):(l=no(a),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},i:H,o:H,d(a){a&&x(t),a&&x(i),l&&l.d(a),a&&x(o)}}}async function Cf(e){const t=await fetch("/chat/rag_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("response",t);else{const n=await t.text();alert(n)}}function kf(e,t,n){let r;ee(e,xe,c=>n(6,r=c));let{message:i={}}=t,{feedback:o=!1}=t,{index:l=0}=t;function a(c,f,d){const g=r[d];g.vote=f;const p={id:d+1,vote_status:f};Cf(p),st(c.currentTarget.parentNode).selectAll("button").style("border","3px solid transparent").style("opacity",.65),st(c.currentTarget).style("border","3px solid var(--black)").style("opacity",1)}const s=c=>a(c,"up",l),u=c=>a(c,"down",l);return e.$$set=c=>{"message"in c&&n(0,i=c.message),"feedback"in c&&n(1,o=c.feedback),"index"in c&&n(2,l=c.index)},[i,o,l,a,s,u]}class $f extends ie{constructor(t){super(),se(this,t,kf,Sf,re,{message:0,feedback:1,index:2})}}function ro(e,t,n){const r=e.slice();return r[16]=t[n],r[18]=n,r}function io(e,t){let n,r,i,o,l,a,s,u,c,f=t[16].question+"",d,g,p,m,_,b,w,C,A,$,E,S,k,y,M,I;return A=new vf({props:{items:t[7],tabProps:{message:t[16],feedback:t[0],index:t[18]}}}),E=new pf({props:{sources:t[16].source,source_content:t[16].source_content}}),{key:e,first:null,c(){n=R("div"),r=R("div"),i=R("div"),o=D(),l=R("div"),a=R("div"),s=R("h5"),s.textContent="Question:",u=D(),c=R("p"),d=z(f),g=D(),p=R("div"),m=R("p"),m.textContent="ℹ️ Retrieval Sources",b=D(),w=R("div"),C=R("div"),Z(A.$$.fragment),$=D(),Z(E.$$.fragment),S=D(),h(i,"class","avatar"),h(s,"class","bold"),h(m,"class","bold"),h(p,"class","rag-sources svelte-aj7hp0"),h(a,"class","question svelte-aj7hp0"),h(C,"class","answer svelte-aj7hp0"),h(w,"class","answers svelte-aj7hp0"),h(l,"class","message-content svelte-aj7hp0"),h(r,"class","chat-message-center svelte-aj7hp0"),h(n,"class","chat-message svelte-aj7hp0"),this.first=n},m(F,P){T(F,n,P),v(n,r),v(r,i),v(r,o),v(r,l),v(l,a),v(a,s),v(a,u),v(a,c),v(c,d),v(a,g),v(a,p),v(p,m),v(l,b),v(l,w),v(w,C),K(A,C,null),v(l,$),K(E,l,null),v(n,S),y=!0,M||(I=[gn(_=qc.call(null,m,oo(t[16]))),gn(k=Af.call(null,n,t[18]===t[4].length-1))],M=!0)},p(F,P){t=F,(!y||P&16)&&f!==(f=t[16].question+"")&&Q(d,f),_&&Ye(_.update)&&P&16&&_.update.call(null,oo(t[16]));const B={};P&17&&(B.tabProps={message:t[16],feedback:t[0],index:t[18]}),A.$set(B);const ge={};P&16&&(ge.sources=t[16].source),P&16&&(ge.source_content=t[16].source_content),E.$set(ge),k&&Ye(k.update)&&P&16&&k.update.call(null,t[18]===t[4].length-1)},i(F){y||(N(A.$$.fragment,F),N(E.$$.fragment,F),y=!0)},o(F){V(A.$$.fragment,F),V(E.$$.fragment,F),y=!1},d(F){F&&x(n),J(A),J(E),M=!1,_e(I)}}}function Rf(e){let t,n,r,i,o,l,a=[],s=new Map,u,c,f,d,g,p,m,_,b,w=(e[2]?e[3]:"Send")+"",C,A,$,E,S,k,y,M=e[4];const I=F=>F[18];for(let F=0;F<M.length;F+=1){let P=ro(e,M,F),B=I(P);s.set(B,a[F]=io(B,P))}return d=new ef({props:{documents:e[5]}}),{c(){t=R("div"),n=R("div"),n.innerHTML=`<h5 class="underline bold svelte-aj7hp0">Vote Feedback Instructions</h5> 
    <p class="svelte-aj7hp0">Ask a question to receive an answer from the chatbot. If the response is
      satisfactory, click on the <span class="inline-button green svelte-aj7hp0">👍</span>
      button. If the response is not satisfactory, click on the
      <span class="inline-button red svelte-aj7hp0">👎</span> button.</p>`,r=D(),i=R("div"),o=R("section"),l=R("div");for(let F=0;F<a.length;F+=1)a[F].c();u=D(),c=R("div"),f=R("div"),Z(d.$$.fragment),g=D(),p=R("form"),m=R("input"),_=D(),b=R("button"),C=z(w),$=D(),E=R("p"),E.textContent="Note - may produce inaccurate information.",h(n,"class","instructions svelte-aj7hp0"),h(l,"class","chat-log svelte-aj7hp0"),h(o,"class","chatbox svelte-aj7hp0"),h(m,"class","chat-input-textarea svelte-aj7hp0"),h(m,"placeholder","Type Question Here"),h(b,"class",A="btnyousend "+(e[1]===""?"":"active")+" svelte-aj7hp0"),h(b,"type","submit"),h(p,"class","chat-input-form svelte-aj7hp0"),h(f,"class","chat-and-question svelte-aj7hp0"),h(E,"class","message svelte-aj7hp0"),h(c,"class","chat-input-holder svelte-aj7hp0"),h(i,"class","ranked-chat svelte-aj7hp0"),h(t,"class","ranked-feedback-container svelte-aj7hp0")},m(F,P){T(F,t,P),v(t,n),v(t,r),v(t,i),v(i,o),v(o,l);for(let B=0;B<a.length;B+=1)a[B]&&a[B].m(l,null);v(i,u),v(i,c),v(c,f),K(d,f,null),v(f,g),v(f,p),v(p,m),tt(m,e[1]),v(p,_),v(p,b),v(b,C),v(c,$),v(c,E),S=!0,k||(y=[j(m,"input",e[11]),j(p,"submit",e[8])],k=!0)},p(F,[P]){P&145&&(M=F[4],ue(),a=Xt(a,P,I,1,F,M,s,l,cs,io,null,ro),ce());const B={};P&32&&(B.documents=F[5]),d.$set(B),P&2&&m.value!==F[1]&&tt(m,F[1]),(!S||P&12)&&w!==(w=(F[2]?F[3]:"Send")+"")&&Q(C,w),(!S||P&2&&A!==(A="btnyousend "+(F[1]===""?"":"active")+" svelte-aj7hp0"))&&h(b,"class",A)},i(F){if(!S){for(let P=0;P<M.length;P+=1)N(a[P]);N(d.$$.fragment,F),S=!0}},o(F){for(let P=0;P<a.length;P+=1)V(a[P]);V(d.$$.fragment,F),S=!1},d(F){F&&x(t);for(let P=0;P<a.length;P+=1)a[P].d();J(d),k=!1,_e(y)}}}function Af(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function oo(e){return e.rag_sources.length===0?"No Sources":e.rag_sources.join(", ")}function Ef(e,t,n){let r,i,o,l;ee(e,xe,C=>n(4,i=C)),ee(e,Yr,C=>n(13,o=C));let{feedback:a=!1}=t,{is_retrieval:s=!1}=t;const u=ke([]);ee(e,u,C=>n(5,l=C));let c="",f="",d=!1,g=[{label:"Answer",value:1,component:$f},{label:"Modified Answer",value:2,component:yf}];ut(()=>{m(),p()});async function p(){const A=await(await fetch("/retrieval/file/get")).json();console.log("data",A.files);const E=A.files.map((S,k)=>({id:String(k),name:S.name}));console.log("files",E),Oe(u,l=[...E],l)}async function m(){const $=(await(await fetch("/chat/rag_table/retrieve")).json()).rows;console.log("Got data from db",$);const E=$.map(S=>({id:S[0],question:S[1],answer:S[2],edited_answer:S[3],vote_status:S[4],rag_sources:S[5],source:S[6],source_content:S[7]}));Oe(xe,i=[...E],i)}const _=async C=>{C.preventDefault(),c=f,n(1,f=""),n(2,d=!0);const A=[...o];let $={id:i.length+1,question:c,answer:"Loading...",rag_sources:A,vote_status:"na",source:["Loading..."],source_content:["Loading..."]};Oe(xe,i=[...i,$],i);const E=s?await fetch("/retrieval/new_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c,file_names:A})}):await fetch(`/chat/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c})});if(E.ok){const S=await E.json();console.log("response data",S),$.answer=S.answer,$.source=S.source,$.source_content=S.source_content,xe.update(k=>(k[k.length-1]=$,k))}else{const S=await E.text();alert(S)}n(2,d=!1)};let b=0;setInterval(()=>{n(10,b=(b+1)%4)},200);function w(){f=this.value,n(1,f)}return e.$$set=C=>{"feedback"in C&&n(0,a=C.feedback),"is_retrieval"in C&&n(9,s=C.is_retrieval)},e.$$.update=()=>{e.$$.dirty&1024&&n(3,r=".".repeat(b).padEnd(3))},[a,f,d,r,i,l,u,g,_,s,b,w]}class Mf extends ie{constructor(t){super(),se(this,t,Ef,Rf,re,{feedback:0,is_retrieval:9})}}function lo(e){let t,n;return t=new vi({props:{is_retrieval:e[1]}}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.is_retrieval=r[1]),t.$set(o)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function so(e){let t,n;return t=new vi({props:{feedback:!0,is_retrieval:e[1]}}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.is_retrieval=r[1]),t.$set(o)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function ao(e){let t,n;return t=new Mf({props:{feedback:!0,is_retrieval:e[1]}}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.is_retrieval=r[1]),t.$set(o)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function uo(e){let t,n,r,i;const o=[Df,Ff],l=[];function a(s,u){return s[1]?0:1}return t=a(e),n=l[t]=o[t](e),{c(){n.c(),r=Ae()},m(s,u){l[t].m(s,u),T(s,r,u),i=!0},p(s,u){let c=t;t=a(s),t===c?l[t].p(s,u):(ue(),V(l[c],1,1,()=>{l[c]=null}),ce(),n=l[t],n?n.p(s,u):(n=l[t]=o[t](s),n.c()),N(n,1),n.m(r.parentNode,r))},i(s){i||(N(n),i=!0)},o(s){V(n),i=!1},d(s){l[t].d(s),s&&x(r)}}}function Ff(e){let t,n;return t=new Kc({}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},p:H,i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function Df(e){let t,n;return t=new vi({props:{feedback:!0,is_retrieval:e[1]}}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.is_retrieval=r[1]),t.$set(o)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function If(e){let t,n,r,i,o,l=!e[0]&&lo(e),a=e[0]==="vote"&&so(e),s=e[0]==="rag"&&ao(e),u=e[0]==="rank"&&uo(e);return{c(){l&&l.c(),t=D(),a&&a.c(),n=D(),s&&s.c(),r=D(),u&&u.c(),i=Ae()},m(c,f){l&&l.m(c,f),T(c,t,f),a&&a.m(c,f),T(c,n,f),s&&s.m(c,f),T(c,r,f),u&&u.m(c,f),T(c,i,f),o=!0},p(c,[f]){c[0]?l&&(ue(),V(l,1,1,()=>{l=null}),ce()):l?(l.p(c,f),f&1&&N(l,1)):(l=lo(c),l.c(),N(l,1),l.m(t.parentNode,t)),c[0]==="vote"?a?(a.p(c,f),f&1&&N(a,1)):(a=so(c),a.c(),N(a,1),a.m(n.parentNode,n)):a&&(ue(),V(a,1,1,()=>{a=null}),ce()),c[0]==="rag"?s?(s.p(c,f),f&1&&N(s,1)):(s=ao(c),s.c(),N(s,1),s.m(r.parentNode,r)):s&&(ue(),V(s,1,1,()=>{s=null}),ce()),c[0]==="rank"?u?(u.p(c,f),f&1&&N(u,1)):(u=uo(c),u.c(),N(u,1),u.m(i.parentNode,i)):u&&(ue(),V(u,1,1,()=>{u=null}),ce())},i(c){o||(N(l),N(a),N(s),N(u),o=!0)},o(c){V(l),V(a),V(s),V(u),o=!1},d(c){l&&l.d(c),c&&x(t),a&&a.d(c),c&&x(n),s&&s.d(c),c&&x(r),u&&u.d(c),c&&x(i)}}}function Nf(e,t,n){let{feedback:r}=t,{is_retrieval:i}=t;return e.$$set=o=>{"feedback"in o&&n(0,r=o.feedback),"is_retrieval"in o&&n(1,i=o.is_retrieval)},[r,i]}class Pf extends ie{constructor(t){super(),se(this,t,Nf,If,re,{feedback:0,is_retrieval:1})}}function co(e,t,n){const r=e.slice();return r[2]=t[n],r}function fo(e){let t,n=e[2]+"",r,i;return{c(){t=R("option"),r=z(n),t.__value=i=e[2],t.value=t.__value},m(o,l){T(o,t,l),v(t,r)},p(o,l){l&1&&n!==(n=o[2]+"")&&Q(r,n),l&1&&i!==(i=o[2])&&(t.__value=i,t.value=t.__value)},d(o){o&&x(t)}}}function xf(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=fo(co(e,n,i));return{c(){t=R("select");for(let i=0;i<r.length;i+=1)r[i].c()},m(i,o){T(i,t,o);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(t,null)},p(i,[o]){if(o&1){n=i[0];let l;for(l=0;l<n.length;l+=1){const a=co(i,n,l);r[l]?r[l].p(a,o):(r[l]=fo(a),r[l].c(),r[l].m(t,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:H,o:H,d(i){i&&x(t),ve(r,i)}}}function Tf(e,t,n){let{data_endpoint:r}=t,i=[];return ut(async()=>{const o=await fetch(`/data/${r}`);n(0,i=await o.json())}),e.$$set=o=>{"data_endpoint"in o&&n(1,r=o.data_endpoint)},[i,r]}class Of extends ie{constructor(t){super(),se(this,t,Tf,xf,re,{data_endpoint:1})}}function Ht(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vf(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Es(e){let t,n,r;e.length!==2?(t=Ht,n=(a,s)=>Ht(e(a),s),r=(a,s)=>e(a)-s):(t=e===Ht||e===Vf?e:zf,n=e,r=e);function i(a,s,u=0,c=a.length){if(u<c){if(t(s,s)!==0)return c;do{const f=u+c>>>1;n(a[f],s)<0?u=f+1:c=f}while(u<c)}return u}function o(a,s,u=0,c=a.length){if(u<c){if(t(s,s)!==0)return c;do{const f=u+c>>>1;n(a[f],s)<=0?u=f+1:c=f}while(u<c)}return u}function l(a,s,u=0,c=a.length){const f=i(a,s,u,c-1);return f>u&&r(a[f-1],s)>-r(a[f],s)?f-1:f}return{left:i,center:l,right:o}}function zf(){return 0}function Hf(e){return e===null?NaN:+e}function*Lf(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const qf=Es(Ht),Gf=qf.right;Es(Hf).center;const Ms=Gf;function jf(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function sn(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class go extends Map{constructor(t,n=Wf){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ho(this,t))}has(t){return super.has(ho(this,t))}set(t,n){return super.set(Bf(this,t),n)}delete(t){return super.delete(Uf(this,t))}}function ho({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Bf({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Uf({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Wf(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Xf(e){return e}function Yf(e=Ht){if(e===Ht)return Fs;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Fs(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var Qf=Array.prototype,Kf=Qf.slice;function Rr(e){return()=>e}const Jf=Math.sqrt(50),Zf=Math.sqrt(10),ed=Math.sqrt(2);function Kn(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=Jf?10:o>=Zf?5:o>=ed?2:1;let a,s,u;return i<0?(u=Math.pow(10,-i)/l,a=Math.round(e*u),s=Math.round(t*u),a/u<e&&++a,s/u>t&&--s,u=-u):(u=Math.pow(10,i)*l,a=Math.round(e/u),s=Math.round(t/u),a*u<e&&++a,s*u>t&&--s),s<a&&.5<=n&&n<2?Kn(e,t,n*2):[a,s,u]}function Ds(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?Kn(t,e,n):Kn(e,t,n);if(!(o>=i))return[];const a=o-i+1,s=new Array(a);if(r)if(l<0)for(let u=0;u<a;++u)s[u]=(o-u)/-l;else for(let u=0;u<a;++u)s[u]=(o-u)*l;else if(l<0)for(let u=0;u<a;++u)s[u]=(i+u)/-l;else for(let u=0;u<a;++u)s[u]=(i+u)*l;return s}function jt(e,t,n){return t=+t,e=+e,n=+n,Kn(e,t,n)[2]}function td(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?jt(t,e,n):jt(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function nd(e,t,n){let r;for(;;){const i=jt(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function rd(e){return Math.max(1,Math.ceil(Math.log(jf(e))/Math.LN2)+1)}function Is(){var e=Xf,t=sn,n=rd;function r(i){Array.isArray(i)||(i=Array.from(i));var o,l=i.length,a,s,u=new Array(l);for(o=0;o<l;++o)u[o]=e(i[o],o,i);var c=t(u),f=c[0],d=c[1],g=n(u,f,d);if(!Array.isArray(g)){const C=d,A=+g;if(t===sn&&([f,d]=nd(f,d,A)),g=Ds(f,d,A),g[0]<=f&&(s=jt(f,d,A)),g[g.length-1]>=d)if(C>=d&&t===sn){const $=jt(f,d,A);isFinite($)&&($>0?d=(Math.floor(d/$)+1)*$:$<0&&(d=(Math.ceil(d*-$)+1)/-$))}else g.pop()}for(var p=g.length,m=0,_=p;g[m]<=f;)++m;for(;g[_-1]>d;)--_;(m||_<p)&&(g=g.slice(m,_),p=_-m);var b=new Array(p+1),w;for(o=0;o<=p;++o)w=b[o]=[],w.x0=o>0?g[o-1]:f,w.x1=o<p?g[o]:d;if(isFinite(s)){if(s>0)for(o=0;o<l;++o)(a=u[o])!=null&&f<=a&&a<=d&&b[Math.min(p,Math.floor((a-f)/s))].push(i[o]);else if(s<0){for(o=0;o<l;++o)if((a=u[o])!=null&&f<=a&&a<=d){const C=Math.floor((f-a)*s);b[Math.min(p,C+(g[C]<=a))].push(i[o])}}}else for(o=0;o<l;++o)(a=u[o])!=null&&f<=a&&a<=d&&b[Ms(g,a,0,p)].push(i[o]);return b}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:Rr(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:Rr([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Rr(Array.isArray(i)?Kf.call(i):i),r):n},r}function Rt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function po(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Ns(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Fs:Yf(i);r>n;){if(r-n>600){const s=r-n+1,u=t-n+1,c=Math.log(s),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(s-f)/s)*(u-s/2<0?-1:1),g=Math.max(n,Math.floor(t-u*f/s+d)),p=Math.min(r,Math.floor(t+(s-u)*f/s+d));Ns(e,t,g,p,i)}const o=e[t];let l=n,a=r;for(Kt(e,n,t),i(e[r],o)>0&&Kt(e,n,r);l<a;){for(Kt(e,l,a),++l,--a;i(e[l],o)<0;)++l;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?Kt(e,n,a):(++a,Kt(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Kt(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function id(e,t,n){if(e=Float64Array.from(Lf(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return po(e);if(t>=1)return Rt(e);var r,i=(r-1)*t,o=Math.floor(i),l=Rt(Ns(e,o).subarray(0,o+1)),a=po(e.subarray(o+1));return l+(a-l)*(i-o)}}function od(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function ld(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Jn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Bt(e){return e=Jn(Math.abs(e)),e?e[1]:NaN}function sd(e,t){return function(n,r){for(var i=n.length,o=[],l=0,a=e[0],s=0;i>0&&a>0&&(s+a+1>r&&(a=Math.max(1,r-s)),o.push(n.substring(i-=a,i+a)),!((s+=a+1)>r));)a=e[l=(l+1)%e.length];return o.reverse().join(t)}}function ad(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ud=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zn(e){if(!(t=ud.exec(e)))throw new Error("invalid format: "+e);var t;return new bi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Zn.prototype=bi.prototype;function bi(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}bi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cd(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Ps;function fd(e,t){var n=Jn(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Ps=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Jn(e,Math.max(0,t+o-1))[0]}function mo(e,t){var n=Jn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _o={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ld,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>mo(e*100,t),r:mo,s:fd,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vo(e){return e}var bo=Array.prototype.map,wo=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function dd(e){var t=e.grouping===void 0||e.thousands===void 0?vo:sd(bo.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?vo:ad(bo.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Zn(f);var d=f.fill,g=f.align,p=f.sign,m=f.symbol,_=f.zero,b=f.width,w=f.comma,C=f.precision,A=f.trim,$=f.type;$==="n"?(w=!0,$="g"):_o[$]||(C===void 0&&(C=12),A=!0,$="g"),(_||d==="0"&&g==="=")&&(_=!0,d="0",g="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",S=m==="$"?r:/[%p]/.test($)?l:"",k=_o[$],y=/[defgprs%]/.test($);C=C===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function M(I){var F=E,P=S,B,ge,oe;if($==="c")P=k(I)+P,I="";else{I=+I;var Ee=I<0||1/I<0;if(I=isNaN(I)?s:k(Math.abs(I),C),A&&(I=cd(I)),Ee&&+I==0&&p!=="+"&&(Ee=!1),F=(Ee?p==="("?p:a:p==="-"||p==="("?"":p)+F,P=($==="s"?wo[8+Ps/3]:"")+P+(Ee&&p==="("?")":""),y){for(B=-1,ge=I.length;++B<ge;)if(oe=I.charCodeAt(B),48>oe||oe>57){P=(oe===46?i+I.slice(B+1):I.slice(B))+P,I=I.slice(0,B);break}}}w&&!_&&(I=t(I,1/0));var Me=F.length+I.length+P.length,ye=Me<b?new Array(b-Me+1).join(d):"";switch(w&&_&&(I=t(ye+I,ye.length?b-P.length:1/0),ye=""),g){case"<":I=F+I+P+ye;break;case"=":I=F+ye+I+P;break;case"^":I=ye.slice(0,Me=ye.length>>1)+F+I+P+ye.slice(Me);break;default:I=ye+F+I+P;break}return o(I)}return M.toString=function(){return f+""},M}function c(f,d){var g=u((f=Zn(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Bt(d)/3)))*3,m=Math.pow(10,-p),_=wo[8+p/3];return function(b){return g(m*b)+_}}return{format:u,formatPrefix:c}}var An,Mt,xs;gd({thousands:",",grouping:[3],currency:["$",""]});function gd(e){return An=dd(e),Mt=An.format,xs=An.formatPrefix,An}function hd(e){return Math.max(0,-Bt(Math.abs(e)))}function pd(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bt(t)/3)))*3-Bt(Math.abs(e)))}function md(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bt(t)-Bt(e))+1}function wi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const yo=Symbol("implicit");function mr(){var e=new go,t=[],n=[],r=yo;function i(o){let l=e.get(o);if(l===void 0){if(r!==yo)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new go;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return mr(t,n).unknown(r)},wi.apply(i,arguments),i}function yi(){var e=mr().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,l,a=!1,s=0,u=0,c=.5;delete e.unknown;function f(){var d=t().length,g=i<r,p=g?i:r,m=g?r:i;o=(m-p)/Math.max(1,d-s+u*2),a&&(o=Math.floor(o)),p+=(m-p-o*(d-s))*c,l=o*(1-s),a&&(p=Math.round(p),l=Math.round(l));var _=od(d).map(function(b){return p+o*b});return n(g?_.reverse():_)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(s=Math.min(1,u=+d),f()):s},e.paddingInner=function(d){return arguments.length?(s=Math.min(1,d),f()):s},e.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return yi(t(),[r,i]).round(a).paddingInner(s).paddingOuter(u).align(c)},wi.apply(f(),arguments)}function Si(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ts(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yn(){}var _n=.7,er=1/_n,Lt="\\s*([+-]?\\d+)\\s*",vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_d=/^#([0-9a-f]{3,8})$/,vd=new RegExp(`^rgb\\(${Lt},${Lt},${Lt}\\)$`),bd=new RegExp(`^rgb\\(${Ze},${Ze},${Ze}\\)$`),wd=new RegExp(`^rgba\\(${Lt},${Lt},${Lt},${vn}\\)$`),yd=new RegExp(`^rgba\\(${Ze},${Ze},${Ze},${vn}\\)$`),Sd=new RegExp(`^hsl\\(${vn},${Ze},${Ze}\\)$`),Cd=new RegExp(`^hsla\\(${vn},${Ze},${Ze},${vn}\\)$`),So={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Si(yn,bn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Co,formatHex:Co,formatHex8:kd,formatHsl:$d,formatRgb:ko,toString:ko});function Co(){return this.rgb().formatHex()}function kd(){return this.rgb().formatHex8()}function $d(){return Os(this).formatHsl()}function ko(){return this.rgb().formatRgb()}function bn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=_d.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$o(t):n===3?new Te(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?En(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?En(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=vd.exec(e))?new Te(t[1],t[2],t[3],1):(t=bd.exec(e))?new Te(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wd.exec(e))?En(t[1],t[2],t[3],t[4]):(t=yd.exec(e))?En(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Sd.exec(e))?Eo(t[1],t[2]/100,t[3]/100,1):(t=Cd.exec(e))?Eo(t[1],t[2]/100,t[3]/100,t[4]):So.hasOwnProperty(e)?$o(So[e]):e==="transparent"?new Te(NaN,NaN,NaN,0):null}function $o(e){return new Te(e>>16&255,e>>8&255,e&255,1)}function En(e,t,n,r){return r<=0&&(e=t=n=NaN),new Te(e,t,n,r)}function Rd(e){return e instanceof yn||(e=bn(e)),e?(e=e.rgb(),new Te(e.r,e.g,e.b,e.opacity)):new Te}function Jr(e,t,n,r){return arguments.length===1?Rd(e):new Te(e,t,n,r??1)}function Te(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Si(Te,Jr,Ts(yn,{brighter(e){return e=e==null?er:Math.pow(er,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_n:Math.pow(_n,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Te($t(this.r),$t(this.g),$t(this.b),tr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ro,formatHex:Ro,formatHex8:Ad,formatRgb:Ao,toString:Ao}));function Ro(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function Ad(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ao(){const e=tr(this.opacity);return`${e===1?"rgb(":"rgba("}${$t(this.r)}, ${$t(this.g)}, ${$t(this.b)}${e===1?")":`, ${e})`}`}function tr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $t(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ct(e){return e=$t(e),(e<16?"0":"")+e.toString(16)}function Eo(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ue(e,t,n,r)}function Os(e){if(e instanceof Ue)return new Ue(e.h,e.s,e.l,e.opacity);if(e instanceof yn||(e=bn(e)),!e)return new Ue;if(e instanceof Ue)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,a=o-i,s=(o+i)/2;return a?(t===o?l=(n-r)/a+(n<r)*6:n===o?l=(r-t)/a+2:l=(t-n)/a+4,a/=s<.5?o+i:2-o-i,l*=60):a=s>0&&s<1?0:l,new Ue(l,a,s,e.opacity)}function Ed(e,t,n,r){return arguments.length===1?Os(e):new Ue(e,t,n,r??1)}function Ue(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Si(Ue,Ed,Ts(yn,{brighter(e){return e=e==null?er:Math.pow(er,e),new Ue(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_n:Math.pow(_n,e),new Ue(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Te(Ar(e>=240?e-240:e+120,i,r),Ar(e,i,r),Ar(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ue(Mo(this.h),Mn(this.s),Mn(this.l),tr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tr(this.opacity);return`${e===1?"hsl(":"hsla("}${Mo(this.h)}, ${Mn(this.s)*100}%, ${Mn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Mo(e){return e=(e||0)%360,e<0?e+360:e}function Mn(e){return Math.max(0,Math.min(1,e||0))}function Ar(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ci=e=>()=>e;function Md(e,t){return function(n){return e+n*t}}function Fd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Dd(e){return(e=+e)==1?Vs:function(t,n){return n-t?Fd(t,n,e):Ci(isNaN(t)?n:t)}}function Vs(e,t){var n=t-e;return n?Md(e,n):Ci(isNaN(e)?t:e)}const Fo=function e(t){var n=Dd(t);function r(i,o){var l=n((i=Jr(i)).r,(o=Jr(o)).r),a=n(i.g,o.g),s=n(i.b,o.b),u=Vs(i.opacity,o.opacity);return function(c){return i.r=l(c),i.g=a(c),i.b=s(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function Id(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Nd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Pd(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=_r(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(a){for(l=0;l<r;++l)o[l]=i[l](a);return o}}function xd(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function nr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Td(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=_r(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Zr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Er=new RegExp(Zr.source,"g");function Od(e){return function(){return e}}function Vd(e){return function(t){return e(t)+""}}function zd(e,t){var n=Zr.lastIndex=Er.lastIndex=0,r,i,o,l=-1,a=[],s=[];for(e=e+"",t=t+"";(r=Zr.exec(e))&&(i=Er.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[l]?a[l]+=o:a[++l]=o),(r=r[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,s.push({i:l,x:nr(r,i)})),n=Er.lastIndex;return n<t.length&&(o=t.slice(n),a[l]?a[l]+=o:a[++l]=o),a.length<2?s[0]?Vd(s[0].x):Od(t):(t=s.length,function(u){for(var c=0,f;c<t;++c)a[(f=s[c]).i]=f.x(u);return a.join("")})}function _r(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ci(t):(n==="number"?nr:n==="string"?(r=bn(t))?(t=r,Fo):zd:t instanceof bn?Fo:t instanceof Date?xd:Nd(t)?Id:Array.isArray(t)?Pd:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Td:nr)(e,t)}function Hd(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ld(e){return function(){return e}}function qd(e){return+e}var Do=[0,1];function Tt(e){return e}function ei(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ld(isNaN(t)?NaN:.5)}function Gd(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function jd(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=ei(i,r),o=n(l,o)):(r=ei(r,i),o=n(o,l)),function(a){return o(r(a))}}function Bd(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=ei(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(a){var s=Ms(e,a,1,r)-1;return o[s](i[s](a))}}function Ud(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wd(){var e=Do,t=Do,n=_r,r,i,o,l=Tt,a,s,u;function c(){var d=Math.min(e.length,t.length);return l!==Tt&&(l=Gd(e[0],e[d-1])),a=d>2?Bd:jd,s=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(s||(s=a(e.map(r),t,n)))(r(l(d)))}return f.invert=function(d){return l(i((u||(u=a(t,e.map(r),nr)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,qd),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Hd,c()},f.clamp=function(d){return arguments.length?(l=d?!0:Tt,c()):l!==Tt},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,g){return r=d,i=g,c()}}function Xd(){return Wd()(Tt,Tt)}function Yd(e,t,n,r){var i=td(e,t,n),o;switch(r=Zn(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=pd(i,l))&&(r.precision=o),xs(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=md(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=hd(i))&&(r.precision=o-(r.type==="%")*2);break}}return Mt(r)}function Qd(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ds(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Yd(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],a=r[o],s,u,c=10;for(a<l&&(u=l,l=a,a=u,u=i,i=o,o=u);c-- >0;){if(u=jt(l,a,n),u===s)return r[i]=l,r[o]=a,t(r);if(u>0)l=Math.floor(l/u)*u,a=Math.ceil(a/u)*u;else if(u<0)l=Math.ceil(l*u)/u,a=Math.floor(a*u)/u;else break;s=u}return e},e}function We(){var e=Xd();return e.copy=function(){return Ud(e,We())},wi.apply(e,arguments),Qd(e)}function Fn(e){return function(){return e}}function Kd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ti(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,a=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function ni(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Jd(e,t){return e[t]}function Zd(e){const t=[];return t.key=e,t}function eg(){var e=Fn([]),t=ni,n=ti,r=Jd;function i(o){var l=Array.from(e.apply(this,arguments),Zd),a,s=l.length,u=-1,c;for(const f of o)for(a=0,++u;a<s;++a)(l[a][u]=[0,+r(f,l[a].key,u,o)]).data=f;for(a=0,c=Kd(t(l));a<s;++a)l[c[a]].index=a;return n(l,c),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Fn(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Fn(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?ni:typeof o=="function"?o:Fn(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??ti,i):n},i}function Io(e,t,n){const r=e.slice();return r[21]=t[n],r[23]=n,r}function No(e,t,n){const r=e.slice();r[24]=t[n];const i=r[4][r[21].key];return r[25]=i,r}function Po(e){let t,n,r,i,o,l,a,s,u,c,f,d,g,p,m=e[21].key+"",_,b,w=e[11](e[25]/e[2])+"",C,A,$,E,S,k;return{c(){t=U("rect"),u=U("line"),p=U("text"),_=z(m),b=U("tspan"),C=z(w),$=D(),h(t,"class",n="horizontal-bar-rect "+(e[5]===e[23]?"selected":"unselected")+" svelte-tg5p7i"),h(t,"y",r=e[8](e[24].data.xVal)),h(t,"x",i=e[7](e[24][0])),h(t,"stroke","var(--black)"),h(t,"width",o=e[7](e[24][1])-e[7](e[24][0])),h(t,"fill",l=e[10](e[21].key)),h(t,"opacity",a=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(t,"height",s=e[8].bandwidth()),h(u,"class","line svelte-tg5p7i"),h(u,"x1",c=e[7](e[24][0])),h(u,"x2",f=e[7](e[24][0])),h(u,"y1",d=e[8](e[24].data.xVal)-gt),h(u,"y2",g=e[8].bandwidth()+e[8](e[24].data.xVal)+gt),h(u,"stroke","black"),h(b,"x",A=(e[7](e[24][0])+e[7](e[24][1]))/2),h(b,"dy","16"),h(b,"text-anchor","middle"),h(p,"class","horizontal-bar-text svelte-tg5p7i"),h(p,"y",E=e[8].bandwidth()/2),h(p,"x",S=(e[7](e[24][0])+e[7](e[24][1]))/2),h(p,"opacity",k=e[5]==="all"||e[5]===e[23]?"1":"0.25"),h(p,"text-anchor","middle")},m(y,M){T(y,t,M),T(y,u,M),T(y,p,M),v(p,_),v(p,b),v(b,C),v(p,$)},p(y,M){M&32&&n!==(n="horizontal-bar-rect "+(y[5]===y[23]?"selected":"unselected")+" svelte-tg5p7i")&&h(t,"class",n),M&320&&r!==(r=y[8](y[24].data.xVal))&&h(t,"y",r),M&192&&i!==(i=y[7](y[24][0]))&&h(t,"x",i),M&192&&o!==(o=y[7](y[24][1])-y[7](y[24][0]))&&h(t,"width",o),M&64&&l!==(l=y[10](y[21].key))&&h(t,"fill",l),M&32&&a!==(a=y[5]==="all"||y[5]===y[23]?"1":"0.25")&&h(t,"opacity",a),M&256&&s!==(s=y[8].bandwidth())&&h(t,"height",s),M&192&&c!==(c=y[7](y[24][0]))&&h(u,"x1",c),M&192&&f!==(f=y[7](y[24][0]))&&h(u,"x2",f),M&320&&d!==(d=y[8](y[24].data.xVal)-gt)&&h(u,"y1",d),M&320&&g!==(g=y[8].bandwidth()+y[8](y[24].data.xVal)+gt)&&h(u,"y2",g),M&64&&m!==(m=y[21].key+"")&&Q(_,m),M&84&&w!==(w=y[11](y[25]/y[2])+"")&&Q(C,w),M&192&&A!==(A=(y[7](y[24][0])+y[7](y[24][1]))/2)&&h(b,"x",A),M&256&&E!==(E=y[8].bandwidth()/2)&&h(p,"y",E),M&192&&S!==(S=(y[7](y[24][0])+y[7](y[24][1]))/2)&&h(p,"x",S),M&32&&k!==(k=y[5]==="all"||y[5]===y[23]?"1":"0.25")&&h(p,"opacity",k)},d(y){y&&x(t),y&&x(u),y&&x(p)}}}function xo(e){let t,n,r,i,o,l,a,s,u=e[21],c=[];for(let g=0;g<u.length;g+=1)c[g]=Po(No(e,u,g));function f(){return e[17](e[23],e[21])}function d(){return e[18](e[23],e[21])}return{c(){t=U("g");for(let g=0;g<c.length;g+=1)c[g].c();n=U("line"),h(n,"class","line svelte-tg5p7i"),h(n,"x1",r=e[3]-e[9].right),h(n,"x2",i=e[3]-e[9].right),h(n,"y1",o=e[8]("A")-gt),h(n,"y2",l=e[8].bandwidth()+e[8]("A")+gt),h(n,"stroke","black"),h(t,"class","series svelte-tg5p7i"),h(t,"role","button"),h(t,"tabindex","0")},m(g,p){T(g,t,p);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(t,null);v(t,n),a||(s=[j(t,"click",f),j(t,"keypress",d)],a=!0)},p(g,p){if(e=g,p&3572){u=e[21];let m;for(m=0;m<u.length;m+=1){const _=No(e,u,m);c[m]?c[m].p(_,p):(c[m]=Po(_),c[m].c(),c[m].m(t,n))}for(;m<c.length;m+=1)c[m].d(1);c.length=u.length}p&8&&r!==(r=e[3]-e[9].right)&&h(n,"x1",r),p&8&&i!==(i=e[3]-e[9].right)&&h(n,"x2",i),p&256&&o!==(o=e[8]("A")-gt)&&h(n,"y1",o),p&256&&l!==(l=e[8].bandwidth()+e[8]("A")+gt)&&h(n,"y2",l)},d(g){g&&x(t),ve(c,g),a=!1,_e(s)}}}function tg(e){let t,n,r,i,o,l=e[6],a=[];for(let s=0;s<l.length;s+=1)a[s]=xo(Io(e,l,s));return{c(){t=R("div"),t.innerHTML="<p>Feedback Distribution</p>",n=D(),r=R("div"),i=U("svg");for(let s=0;s<a.length;s+=1)a[s].c();h(i,"width",e[1]),h(i,"height",e[0]),h(r,"id","stackedrect-holder"),h(r,"class","svelte-tg5p7i"),Se(()=>e[19].call(r))},m(s,u){T(s,t,u),T(s,n,u),T(s,r,u),v(r,i);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(i,null);o=Et(r,e[19].bind(r))},p(s,[u]){if(u&8188){l=s[6];let c;for(c=0;c<l.length;c+=1){const f=Io(s,l,c);a[c]?a[c].p(f,u):(a[c]=xo(f),a[c].c(),a[c].m(i,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=l.length}u&2&&h(i,"width",s[1]),u&1&&h(i,"height",s[0])},i:H,o:H,d(s){s&&x(t),s&&x(n),s&&x(r),ve(a,s),o()}}}const gt=5;function ng(e,t,n){let r,i,o,l,a,s,u,c,f,d,g;ee(e,nt,k=>n(15,f=k)),ee(e,Ti,k=>n(4,d=k)),ee(e,xe,k=>n(16,g=k));let p=300,m=300;const _={up:2,down:1,"n/a":0,all:"all"},b={top:10,bottom:10,left:25,right:5},w=mr().range(["var(--yellow)","var(--red)","var(--green)"]),C=Mt(".0%");function A(k,y){r===k?n(5,r="all"):n(5,r=k),Oe(nt,f=r==="all"?"all":y,f)}const $=(k,y)=>A(k,y.key),E=(k,y)=>A(k,y.key);function S(){m=this.offsetWidth,p=this.offsetHeight,n(1,m),n(0,p)}return e.$$.update=()=>{e.$$.dirty&32768&&n(5,r=_[f]),e.$$.dirty&2&&n(3,i=m-b.left-b.right),e.$$.dirty&1&&n(14,o=p-b.top-b.bottom),e.$$.dirty&65552&&g.forEach(k=>{Oe(Ti,d[k.vote_status]++,d)}),e.$$.dirty&16&&n(2,l=d.up+d.down+d["n/a"]),e.$$.dirty&16384&&n(8,a=yi().rangeRound([b.top,o-b.bottom]).padding(0).domain(["a"])),e.$$.dirty&12&&n(7,s=We().rangeRound([b.left,i-b.right]).domain([0,l])),e.$$.dirty&8208&&n(6,c=u([d]))},n(13,u=eg().keys(["n/a","down","up"]).order(ni).offset(ti)),[p,m,l,i,d,r,c,s,a,b,w,C,A,u,o,f,g,$,E,S]}class zs extends ie{constructor(t){super(),se(this,t,ng,tg,re,{})}}function rg(e){let t,n,r,i,o,l,a,s,u,c,f,d=e[3][e[2]]+"",g,p;return{c(){t=R("div"),n=R("div"),r=z("Q: "),i=z(e[0]),o=D(),l=R("div"),a=z("A: "),s=z(e[1]),u=D(),c=R("div"),f=z("Rating: "),g=z(d),h(n,"class","question svelte-szi0e"),h(l,"class","answer svelte-szi0e"),h(c,"class",p="feedback "+e[2]+" svelte-szi0e"),h(t,"class","qa-card svelte-szi0e")},m(m,_){T(m,t,_),v(t,n),v(n,r),v(n,i),v(t,o),v(t,l),v(l,a),v(l,s),v(t,u),v(t,c),v(c,f),v(c,g)},p(m,[_]){_&1&&Q(i,m[0]),_&2&&Q(s,m[1]),_&4&&d!==(d=m[3][m[2]]+"")&&Q(g,d),_&4&&p!==(p="feedback "+m[2]+" svelte-szi0e")&&h(c,"class",p)},i:H,o:H,d(m){m&&x(t)}}}function ig(e,t,n){let{question:r="What is gradient descent?"}=t,{answer:i="Gradient descent is an algorithm used to minimize a loss function by taking small steps in the direction of steepest descent."}=t,{feedback:o="Good: 👍"}=t;const l={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"};return e.$$set=a=>{"question"in a&&n(0,r=a.question),"answer"in a&&n(1,i=a.answer),"feedback"in a&&n(2,o=a.feedback)},[r,i,o,l]}class og extends ie{constructor(t){super(),se(this,t,ig,rg,re,{question:0,answer:1,feedback:2})}}function To(e,t,n){const r=e.slice();return r[5]=t[n].question,r[6]=t[n].answer,r[7]=t[n].vote_status,r}function Oo(e){let t,n,r,i,o;return n=new og({props:{question:e[5],answer:e[6],feedback:e[7]}}),{c(){t=R("div"),Z(n.$$.fragment),r=D()},m(l,a){T(l,t,a),K(n,t,null),v(t,r),o=!0},p(l,a){const s={};a&1&&(s.question=l[5]),a&1&&(s.answer=l[6]),a&1&&(s.feedback=l[7]),n.$set(s)},i(l){o||(N(n.$$.fragment,l),l&&Se(()=>{o&&(i||(i=Ke(t,e[1],{duration:300},!0)),i.run(1))}),o=!0)},o(l){V(n.$$.fragment,l),l&&(i||(i=Ke(t,e[1],{duration:300},!1)),i.run(0)),o=!1},d(l){l&&x(t),J(n),l&&i&&i.end()}}}function lg(e){let t,n,r=e[0],i=[];for(let l=0;l<r.length;l+=1)i[l]=Oo(To(e,r,l));const o=l=>V(i[l],1,1,()=>{i[l]=null});return{c(){t=R("div");for(let l=0;l<i.length;l+=1)i[l].c();h(t,"class","qa-container svelte-1xv9cfi")},m(l,a){T(l,t,a);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(t,null);n=!0},p(l,[a]){if(a&1){r=l[0];let s;for(s=0;s<r.length;s+=1){const u=To(l,r,s);i[s]?(i[s].p(u,a),N(i[s],1)):(i[s]=Oo(u),i[s].c(),N(i[s],1),i[s].m(t,null))}for(ue(),s=r.length;s<i.length;s+=1)o(s);ce()}},i(l){if(!n){for(let a=0;a<r.length;a+=1)N(i[a]);n=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)V(i[a]);n=!1},d(l){l&&x(t),ve(i,l)}}}function sg(e,t,n){let r,i,o,l;ee(e,Xr,s=>n(4,i=s)),ee(e,nt,s=>n(2,o=s)),ee(e,pn,s=>n(3,l=s));const a=(s,{delay:u=0,duration:c=1e3,easing:f=pi})=>mn(s,{delay:u,duration:c,easing:f});return e.$$.update=()=>{e.$$.dirty&12&&n(0,r=o==="all"?l:l.filter(s=>s.vote_status===o)),e.$$.dirty&1&&Oe(Xr,i=Lc(r),i)},[r,a,o,l]}class Hs extends ie{constructor(t){super(),se(this,t,sg,lg,re,{})}}function Vo(e,t,n){const r=e.slice();return r[13]=t[n],r}function zo(e,t,n){const r=e.slice();return r[16]=t[n],r}function Ho(e,t,n){const r=e.slice();return r[16]=t[n],r}function Lo(e){let t,n,r,i,o=e[16]+"",l,a;return{c(){t=U("g"),n=U("line"),i=U("text"),l=z(o),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",r=-e[2]+e[10].bottom+e[10].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(i,"class","axis-text svelte-1oikip4"),h(i,"y","15"),h(i,"text-anchor","middle"),h(t,"transform",a=`translate(${e[6](e[16])+e[6].bandwidth()/2} ${e[2]-e[10].bottom})`)},m(s,u){T(s,t,u),v(t,n),v(t,i),v(i,l)},p(s,u){u&4&&r!==(r=-s[2]+s[10].bottom+s[10].top)&&h(n,"y2",r),u&16&&o!==(o=s[16]+"")&&Q(l,o),u&84&&a!==(a=`translate(${s[6](s[16])+s[6].bandwidth()/2} ${s[2]-s[10].bottom})`)&&h(t,"transform",a)},d(s){s&&x(t)}}}function qo(e){let t,n,r,i;return{c(){t=U("g"),n=U("line"),h(n,"class","axis-tick svelte-1oikip4"),h(n,"x1",0),h(n,"x2",r=e[3]-e[10].right-e[10].left),h(n,"y1","0"),h(n,"y2","0"),h(n,"stroke","black"),h(t,"transform",i=`translate(${e[10].left} ${e[5](e[16])+0})`)},m(o,l){T(o,t,l),v(t,n)},p(o,l){l&8&&r!==(r=o[3]-o[10].right-o[10].left)&&h(n,"x2",r),l&32&&i!==(i=`translate(${o[10].left} ${o[5](o[16])+0})`)&&h(t,"transform",i)},d(o){o&&x(t)}}}function Go(e){let t,n,r,i,o,l,a,s,u=Math.round(e[11](e[13].count))+"",c,f,d;return{c(){t=U("g"),n=U("rect"),s=U("text"),c=z(u),h(n,"x",r=e[6](e[13].question)),h(n,"y",i=e[5](e[13].count)),h(n,"height",o=e[2]-e[5](e[13].count)-e[10].bottom),h(n,"fill",l=e[9][e[7]]),h(n,"fill-opacity","0.95"),h(n,"width",a=e[6].bandwidth()),h(n,"class","svelte-1oikip4"),h(s,"class","axis-text svelte-1oikip4"),h(s,"x",f=e[6](e[13].question)+e[6].bandwidth()/2),h(s,"y",d=e[5](e[13].count)-5),h(s,"text-anchor","middle"),h(t,"class","series")},m(g,p){T(g,t,p),v(t,n),v(t,s),v(s,c)},p(g,p){p&80&&r!==(r=g[6](g[13].question))&&h(n,"x",r),p&48&&i!==(i=g[5](g[13].count))&&h(n,"y",i),p&52&&o!==(o=g[2]-g[5](g[13].count)-g[10].bottom)&&h(n,"height",o),p&128&&l!==(l=g[9][g[7]])&&h(n,"fill",l),p&64&&a!==(a=g[6].bandwidth())&&h(n,"width",a),p&16&&u!==(u=Math.round(g[11](g[13].count))+"")&&Q(c,u),p&80&&f!==(f=g[6](g[13].question)+g[6].bandwidth()/2)&&h(s,"x",f),p&48&&d!==(d=g[5](g[13].count)-5)&&h(s,"y",d)},d(g){g&&x(t)}}}function ag(e){let t,n,r,i,o,l,a=e[8][e[7]]+"",s,u,c,f,d,g,p,m,_,b=e[4].map(jo),w=[];for(let S=0;S<b.length;S+=1)w[S]=Lo(Ho(e,b,S));let C=e[5].ticks(),A=[];for(let S=0;S<C.length;S+=1)A[S]=qo(zo(e,C,S));let $=e[4],E=[];for(let S=0;S<$.length;S+=1)E[S]=Go(Vo(e,$,S));return{c(){t=R("div"),n=U("svg");for(let S=0;S<w.length;S+=1)w[S].c();r=Ae();for(let S=0;S<A.length;S+=1)A[S].c();i=Ae();for(let S=0;S<E.length;S+=1)E[S].c();o=U("text"),l=z("Question Type: "),s=z(a),c=U("line"),p=U("line"),h(o,"class","chart-title svelte-1oikip4"),h(o,"y",e[10].top/2+1),h(o,"x",u=(e[3]+e[10].left)/2),h(o,"text-anchor","middle"),h(c,"class","axis-line svelte-1oikip4"),h(c,"x1",e[10].left),h(c,"x2",f=e[3]-e[10].right),h(c,"y1",d=e[2]-e[10].bottom),h(c,"y2",g=e[2]-e[10].bottom),h(p,"class","axis-line svelte-1oikip4"),h(p,"x1",e[10].left),h(p,"x2",e[10].left),h(p,"y1",e[10].top),h(p,"y2",m=e[2]-e[10].bottom),h(p,"opacity","0"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","stackedrect-holder"),h(t,"class","svelte-1oikip4"),Se(()=>e[12].call(t))},m(S,k){T(S,t,k),v(t,n);for(let y=0;y<w.length;y+=1)w[y]&&w[y].m(n,null);v(n,r);for(let y=0;y<A.length;y+=1)A[y]&&A[y].m(n,null);v(n,i);for(let y=0;y<E.length;y+=1)E[y]&&E[y].m(n,null);v(n,o),v(o,l),v(o,s),v(n,c),v(n,p),_=Et(t,e[12].bind(t))},p(S,[k]){if(k&1108){b=S[4].map(jo);let y;for(y=0;y<b.length;y+=1){const M=Ho(S,b,y);w[y]?w[y].p(M,k):(w[y]=Lo(M),w[y].c(),w[y].m(n,r))}for(;y<w.length;y+=1)w[y].d(1);w.length=b.length}if(k&1064){C=S[5].ticks();let y;for(y=0;y<C.length;y+=1){const M=zo(S,C,y);A[y]?A[y].p(M,k):(A[y]=qo(M),A[y].c(),A[y].m(n,i))}for(;y<A.length;y+=1)A[y].d(1);A.length=C.length}if(k&3828){$=S[4];let y;for(y=0;y<$.length;y+=1){const M=Vo(S,$,y);E[y]?E[y].p(M,k):(E[y]=Go(M),E[y].c(),E[y].m(n,o))}for(;y<E.length;y+=1)E[y].d(1);E.length=$.length}k&128&&a!==(a=S[8][S[7]]+"")&&Q(s,a),k&8&&u!==(u=(S[3]+S[10].left)/2)&&h(o,"x",u),k&8&&f!==(f=S[3]-S[10].right)&&h(c,"x2",f),k&4&&d!==(d=S[2]-S[10].bottom)&&h(c,"y1",d),k&4&&g!==(g=S[2]-S[10].bottom)&&h(c,"y2",g),k&4&&m!==(m=S[2]-S[10].bottom)&&h(p,"y2",m),k&2&&h(n,"width",S[1]),k&1&&h(n,"height",S[0])},i:H,o:H,d(S){S&&x(t),ve(w,S),ve(A,S),ve(E,S),_()}}}const jo=e=>e.question;function ug(e,t,n){let r,i,o,l,a,s;ee(e,Xr,_=>n(4,a=_)),ee(e,nt,_=>n(7,s=_));const u={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"},c={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let f=300,d=300,g={top:35,bottom:10,left:25,right:5};const p=Mt(".1f");function m(){d=this.offsetWidth,f=this.offsetHeight,n(1,d),n(0,f)}return e.$$.update=()=>{e.$$.dirty&2&&n(3,r=d-g.left-g.right),e.$$.dirty&1&&n(2,i=f-g.top-g.bottom),e.$$.dirty&24&&n(6,o=yi().rangeRound([g.left,r-g.right]).padding(.05).domain(a.map(_=>_.question))),e.$$.dirty&20&&n(5,l=We().rangeRound([i-g.bottom,g.top]).domain([0,Rt(a,_=>_.count)])),e.$$.dirty&16&&console.log(a)},[f,d,i,r,a,l,o,s,u,c,g,p,m]}class Ls extends ie{constructor(t){super(),se(this,t,ug,ag,re,{})}}function Bo(e,t,n){const r=e.slice();r[19]=t[n];const i=r[7](r[19].x1)-r[7](r[19].x0);return r[20]=i,r}function Uo(e,t,n){const r=e.slice();return r[23]=t[n],r}function Wo(e){let t,n,r,i,o=e[23]+"",l,a;return{c(){t=U("g"),n=U("line"),i=U("text"),l=z(o),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",r=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(i,"class","axis-text svelte-kz2qh6"),h(i,"y","15"),h(i,"text-anchor","middle"),h(t,"transform",a=`translate(${e[7](e[23])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(s,u){T(s,t,u),v(t,n),v(t,i),v(i,l)},p(s,u){u&4&&r!==(r=-s[2]+s[9].bottom+s[9].top)&&h(n,"y2",r),u&128&&o!==(o=s[23]+"")&&Q(l,o),u&132&&a!==(a=`translate(${s[7](s[23])+(s[7](1)-s[7](0))/2} ${s[2]-s[9].bottom})`)&&h(t,"transform",a)},d(s){s&&x(t)}}}function Xo(e){let t,n,r,i,o,l,a;return{c(){t=U("g"),n=U("rect"),h(n,"x",r=e[7](e[19].x0)+1),h(n,"width",i=e[20]),h(n,"y",o=e[6](e[19].length)),h(n,"height",l=e[6](0)-e[6](e[19].length)),h(n,"fill",a=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(s,u){T(s,t,u),v(t,n)},p(s,u){u&136&&r!==(r=s[7](s[19].x0)+1)&&h(n,"x",r),u&136&&i!==(i=s[20])&&h(n,"width",i),u&72&&o!==(o=s[6](s[19].length))&&h(n,"y",o),u&72&&l!==(l=s[6](0)-s[6](s[19].length))&&h(n,"height",l),u&32&&a!==(a=s[8][s[5]])&&h(n,"fill",a)},d(s){s&&x(t)}}}function cg(e){let t,n,r,i,o,l,a,s,u,c,f,d=e[7].ticks(),g=[];for(let _=0;_<d.length;_+=1)g[_]=Wo(Uo(e,d,_));let p=e[3],m=[];for(let _=0;_<p.length;_+=1)m[_]=Xo(Bo(e,p,_));return{c(){t=R("div"),n=U("svg");for(let _=0;_<g.length;_+=1)g[_].c();r=Ae();for(let _=0;_<m.length;_+=1)m[_].c();i=U("text"),o=z("Answer Length"),a=U("line"),h(i,"class","chart-title svelte-kz2qh6"),h(i,"y",e[9].top/2+5),h(i,"x",l=(e[4]+e[9].left)/2),h(i,"text-anchor","middle"),h(a,"class","axis-line svelte-kz2qh6"),h(a,"x1",e[9].left),h(a,"x2",s=e[4]-e[9].right),h(a,"y1",u=e[2]-e[9].bottom),h(a,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),Se(()=>e[14].call(t))},m(_,b){T(_,t,b),v(t,n);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(n,null);v(n,r);for(let w=0;w<m.length;w+=1)m[w]&&m[w].m(n,null);v(n,i),v(i,o),v(n,a),f=Et(t,e[14].bind(t))},p(_,[b]){if(b&644){d=_[7].ticks();let w;for(w=0;w<d.length;w+=1){const C=Uo(_,d,w);g[w]?g[w].p(C,b):(g[w]=Wo(C),g[w].c(),g[w].m(n,r))}for(;w<g.length;w+=1)g[w].d(1);g.length=d.length}if(b&488){p=_[3];let w;for(w=0;w<p.length;w+=1){const C=Bo(_,p,w);m[w]?m[w].p(C,b):(m[w]=Xo(C),m[w].c(),m[w].m(n,i))}for(;w<m.length;w+=1)m[w].d(1);m.length=p.length}b&16&&l!==(l=(_[4]+_[9].left)/2)&&h(i,"x",l),b&16&&s!==(s=_[4]-_[9].right)&&h(a,"x2",s),b&4&&u!==(u=_[2]-_[9].bottom)&&h(a,"y1",u),b&4&&c!==(c=_[2]-_[9].bottom)&&h(a,"y2",c),b&2&&h(n,"width",_[1]),b&1&&h(n,"height",_[0])},i:H,o:H,d(_){_&&x(t),ve(g,_),ve(m,_),f()}}}let Yo=100;function fg(e,t,n){let r,i,o,l,a,s,u,c,f,d;ee(e,nt,C=>n(5,f=C)),ee(e,xe,C=>n(13,d=C));const g={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let p=300,m=300,_={top:15,bottom:10,left:25,right:5};Mt(".1f");let b=Array.from({length:Yo},(C,A)=>A);function w(){m=this.offsetWidth,p=this.offsetHeight,n(1,m),n(0,p)}return e.$$.update=()=>{e.$$.dirty&8224&&n(12,r=f==="all"?d:d.filter(C=>C.vote_status===f)),e.$$.dirty&4096&&n(11,i=As(r)),e.$$.dirty&2&&n(4,o=m-_.left-_.right),e.$$.dirty&1&&n(2,l=p-_.top-_.bottom),e.$$.dirty&2048&&n(3,a=Is().thresholds(b).value(C=>C.answer)(i)),e.$$.dirty&16&&n(7,s=We().domain([3,Yo]).range([_.left,o-_.right])),e.$$.dirty&12&&n(6,u=We().domain([0,Rt(a,C=>C.length)]).range([l-_.bottom,_.top])),e.$$.dirty&2048&&n(10,c=Rt(i,C=>C.length)),e.$$.dirty&1056&&We().domain([0,c]).range(["white",g[f]]).interpolate(_r)},[p,m,l,a,o,f,u,s,g,_,c,i,r,d,w]}class qs extends ie{constructor(t){super(),se(this,t,fg,cg,re,{})}}function Qo(e,t,n){const r=e.slice();r[18]=t[n];const i=r[7](r[18].x1)-r[7](r[18].x0);return r[19]=i,r}function Ko(e,t,n){const r=e.slice();return r[22]=t[n],r}function Jo(e){let t,n,r,i,o=e[22]+"",l,a;return{c(){t=U("g"),n=U("line"),i=U("text"),l=z(o),h(n,"class","axis-tick svelte-kz2qh6"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",r=-e[2]+e[9].bottom+e[9].top),h(n,"stroke","var(--squidink)"),h(n,"stroke-dasharray","4"),h(i,"class","axis-text svelte-kz2qh6"),h(i,"y","15"),h(i,"text-anchor","middle"),h(t,"transform",a=`translate(${e[7](e[22])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),h(t,"class","svelte-kz2qh6")},m(s,u){T(s,t,u),v(t,n),v(t,i),v(i,l)},p(s,u){u&4&&r!==(r=-s[2]+s[9].bottom+s[9].top)&&h(n,"y2",r),u&128&&o!==(o=s[22]+"")&&Q(l,o),u&132&&a!==(a=`translate(${s[7](s[22])+(s[7](1)-s[7](0))/2} ${s[2]-s[9].bottom})`)&&h(t,"transform",a)},d(s){s&&x(t)}}}function Zo(e){let t,n,r,i,o,l,a;return{c(){t=U("g"),n=U("rect"),h(n,"x",r=e[7](e[18].x0)+1),h(n,"width",i=e[19]),h(n,"y",o=e[6](e[18].length)),h(n,"height",l=e[6](0)-e[6](e[18].length)),h(n,"fill",a=e[8][e[5]]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-bin svelte-kz2qh6")},m(s,u){T(s,t,u),v(t,n)},p(s,u){u&136&&r!==(r=s[7](s[18].x0)+1)&&h(n,"x",r),u&136&&i!==(i=s[19])&&h(n,"width",i),u&72&&o!==(o=s[6](s[18].length))&&h(n,"y",o),u&72&&l!==(l=s[6](0)-s[6](s[18].length))&&h(n,"height",l),u&32&&a!==(a=s[8][s[5]])&&h(n,"fill",a)},d(s){s&&x(t)}}}function dg(e){let t,n,r,i,o,l,a,s,u,c,f,d=e[7].ticks(),g=[];for(let _=0;_<d.length;_+=1)g[_]=Jo(Ko(e,d,_));let p=e[3],m=[];for(let _=0;_<p.length;_+=1)m[_]=Zo(Qo(e,p,_));return{c(){t=R("div"),n=U("svg");for(let _=0;_<g.length;_+=1)g[_].c();r=Ae();for(let _=0;_<m.length;_+=1)m[_].c();i=U("text"),o=z("Question Length"),a=U("line"),h(i,"class","chart-title svelte-kz2qh6"),h(i,"y",e[9].top/2+5),h(i,"x",l=(e[4]+e[9].left)/2),h(i,"text-anchor","middle"),h(a,"class","axis-line svelte-kz2qh6"),h(a,"x1",e[9].left),h(a,"x2",s=e[4]-e[9].right),h(a,"y1",u=e[2]-e[9].bottom),h(a,"y2",c=e[2]-e[9].bottom),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-kz2qh6"),h(t,"class","histogram-container svelte-kz2qh6"),Se(()=>e[13].call(t))},m(_,b){T(_,t,b),v(t,n);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(n,null);v(n,r);for(let w=0;w<m.length;w+=1)m[w]&&m[w].m(n,null);v(n,i),v(i,o),v(n,a),f=Et(t,e[13].bind(t))},p(_,[b]){if(b&644){d=_[7].ticks();let w;for(w=0;w<d.length;w+=1){const C=Ko(_,d,w);g[w]?g[w].p(C,b):(g[w]=Jo(C),g[w].c(),g[w].m(n,r))}for(;w<g.length;w+=1)g[w].d(1);g.length=d.length}if(b&488){p=_[3];let w;for(w=0;w<p.length;w+=1){const C=Qo(_,p,w);m[w]?m[w].p(C,b):(m[w]=Zo(C),m[w].c(),m[w].m(n,i))}for(;w<m.length;w+=1)m[w].d(1);m.length=p.length}b&16&&l!==(l=(_[4]+_[9].left)/2)&&h(i,"x",l),b&16&&s!==(s=_[4]-_[9].right)&&h(a,"x2",s),b&4&&u!==(u=_[2]-_[9].bottom)&&h(a,"y1",u),b&4&&c!==(c=_[2]-_[9].bottom)&&h(a,"y2",c),b&2&&h(n,"width",_[1]),b&1&&h(n,"height",_[0])},i:H,o:H,d(_){_&&x(t),ve(g,_),ve(m,_),f()}}}let el=100;function gg(e,t,n){let r,i,o,l,a,s,u,c,f;ee(e,nt,w=>n(5,c=w)),ee(e,xe,w=>n(12,f=w));const d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let g=300,p=300,m={top:15,bottom:10,left:25,right:5},_=Array.from({length:el},(w,C)=>C);mr().range(["var(--yellow)","var(--red)","var(--green)"]);function b(){p=this.offsetWidth,g=this.offsetHeight,n(1,p),n(0,g)}return e.$$.update=()=>{e.$$.dirty&4128&&n(11,r=c==="all"?f:f.filter(w=>w.vote_status===c)),e.$$.dirty&2048&&n(10,i=As(r)),e.$$.dirty&2&&n(4,o=p-m.left-m.right),e.$$.dirty&1&&n(2,l=g-m.top-m.bottom),e.$$.dirty&1024&&n(3,a=Is().thresholds(_).value(w=>w.question)(i)),e.$$.dirty&16&&n(7,s=We().domain([3,el]).range([m.left,o-m.right])),e.$$.dirty&12&&n(6,u=We().domain([0,Rt(a,w=>w.length)]).range([l-m.bottom,m.top])),e.$$.dirty&1024&&Rt(i,w=>w.length)},[g,p,l,a,o,c,u,s,d,m,i,r,f,b]}class Gs extends ie{constructor(t){super(),se(this,t,gg,dg,re,{})}}function hg(e){let t,n,r,i,o,l,a,s,u,c,f,d,g,p=Math.round(e[5](e[3]))+"",m,_,b,w,C,A,$,E;return{c(){t=R("div"),n=R("div"),r=R("p"),r.textContent="Questions",i=D(),o=R("select"),l=R("option"),l.textContent="All",a=R("option"),a.textContent="Good",s=R("option"),s.textContent="Bad",u=R("option"),u.textContent="N/A",c=D(),f=R("div"),d=U("svg"),g=U("text"),m=z(p),C=D(),A=R("p"),A.textContent="number of responses",h(r,"class","card-text svelte-1pknxov"),l.__value="all",l.value=l.__value,h(l,"class","svelte-1pknxov"),a.__value="up",a.value=a.__value,h(a,"class","svelte-1pknxov"),s.__value="down",s.value=s.__value,h(s,"class","svelte-1pknxov"),u.__value="n/a",u.value=u.__value,h(u,"class","svelte-1pknxov"),h(o,"id","feedback-dropdown"),h(o,"name","feedback-dropdown"),Re(o,"background",e[6][e[0]]),h(o,"class","svelte-1pknxov"),e[0]===void 0&&Se(()=>e[9].call(o)),h(n,"class","svelte-1pknxov"),h(g,"dominant-baseline","middle"),h(g,"x",_=e[2]/2),h(g,"y",b=e[1]/2),h(g,"text-anchor","middle"),h(g,"class","svelte-1pknxov"),h(d,"width",e[2]),h(d,"height",e[1]),h(d,"class","svelte-1pknxov"),h(f,"class","svelte-1pknxov"),Se(()=>e[10].call(f)),h(A,"class","small svelte-1pknxov"),h(t,"class","card-container svelte-1pknxov"),Re(t,"background",e[6][e[0]])},m(S,k){T(S,t,k),v(t,n),v(n,r),v(n,i),v(n,o),v(o,l),v(o,a),v(o,s),v(o,u),Un(o,e[0],!0),v(t,c),v(t,f),v(f,d),v(d,g),v(g,m),w=Et(f,e[10].bind(f)),v(t,C),v(t,A),$||(E=j(o,"change",e[9]),$=!0)},p(S,[k]){k&1&&Re(o,"background",S[6][S[0]]),k&1&&Un(o,S[0]),k&8&&p!==(p=Math.round(S[5](S[3]))+"")&&Q(m,p),k&4&&_!==(_=S[2]/2)&&h(g,"x",_),k&2&&b!==(b=S[1]/2)&&h(g,"y",b),k&4&&h(d,"width",S[2]),k&2&&h(d,"height",S[1]),k&1&&Re(t,"background",S[6][S[0]])},i:H,o:H,d(S){S&&x(t),w(),$=!1,E()}}}function pg(e,t){return t==="all"?e.length:e.filter(r=>r.vote_status===t).length}function mg(e,t,n){let r,i,o,l;ee(e,nt,p=>n(0,i=p)),ee(e,xe,p=>n(8,o=p));let a,s,u=mi(0);ee(e,u,p=>n(3,l=p));const c=Mt(".1f"),f={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function d(){i=as(this),nt.set(i)}function g(){s=this.clientWidth,a=this.clientHeight,n(2,s),n(1,a)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,r=pg(o,i)),e.$$.dirty&128&&console.log("fbc",r),e.$$.dirty&128&&u.set(r)},[i,a,s,l,u,c,f,r,o,d,g]}class js extends ie{constructor(t){super(),se(this,t,mg,hg,re,{})}}function _g(e){let t,n,r,i,o,l,a,s,u,c,f,d,g,p=e[5](e[3])+"",m,_,b,w,C,A,$,E;return{c(){t=R("div"),n=R("div"),r=R("p"),r.textContent="Questions",i=D(),o=R("select"),l=R("option"),l.textContent="All",a=R("option"),a.textContent="Good",s=R("option"),s.textContent="Bad",u=R("option"),u.textContent="N/A",c=D(),f=R("div"),d=U("svg"),g=U("text"),m=z(p),C=D(),A=R("p"),A.textContent="percentage of responses",h(r,"class","card-text svelte-mchgj2"),l.__value="all",l.value=l.__value,a.__value="up",a.value=a.__value,s.__value="down",s.value=s.__value,u.__value="n/a",u.value=u.__value,h(o,"id","feedback-dropdown"),h(o,"name","feedback-dropdown"),Re(o,"background",e[6][e[0]]),h(o,"class","svelte-mchgj2"),e[0]===void 0&&Se(()=>e[9].call(o)),h(g,"dominant-baseline","middle"),h(g,"x",_=e[2]/2),h(g,"y",b=e[1]/2),h(g,"text-anchor","middle"),h(g,"class","svelte-mchgj2"),h(d,"width",e[2]),h(d,"height",e[1]),h(d,"class","svelte-mchgj2"),Se(()=>e[10].call(f)),h(A,"class","small svelte-mchgj2"),h(t,"class","card-container svelte-mchgj2"),Re(t,"background",e[6][e[0]])},m(S,k){T(S,t,k),v(t,n),v(n,r),v(n,i),v(n,o),v(o,l),v(o,a),v(o,s),v(o,u),Un(o,e[0],!0),v(t,c),v(t,f),v(f,d),v(d,g),v(g,m),w=Et(f,e[10].bind(f)),v(t,C),v(t,A),$||(E=j(o,"change",e[9]),$=!0)},p(S,[k]){k&1&&Re(o,"background",S[6][S[0]]),k&1&&Un(o,S[0]),k&8&&p!==(p=S[5](S[3])+"")&&Q(m,p),k&4&&_!==(_=S[2]/2)&&h(g,"x",_),k&2&&b!==(b=S[1]/2)&&h(g,"y",b),k&4&&h(d,"width",S[2]),k&2&&h(d,"height",S[1]),k&1&&Re(t,"background",S[6][S[0]])},i:H,o:H,d(S){S&&x(t),w(),$=!1,E()}}}function vg(e,t){const n=e.length;return t==="all"?1:e.filter(i=>i.vote_status===t).length/n}function bg(e,t,n){let r,i,o,l;ee(e,nt,p=>n(0,i=p)),ee(e,xe,p=>n(8,o=p));let a,s,u=mi(0);ee(e,u,p=>n(3,l=p));const c=Mt(".1%"),f={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function d(){i=as(this),nt.set(i)}function g(){s=this.clientWidth,a=this.clientHeight,n(2,s),n(1,a)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,r=vg(o,i)),e.$$.dirty&128&&u.set(r)},[i,a,s,l,u,c,f,r,o,d,g]}class Bs extends ie{constructor(t){super(),se(this,t,bg,_g,re,{})}}function wg(e){let t,n,r,i,o,l,a,s,u,c,f,d,g,p,m,_,b,w,C,A,$,E,S,k,y,M,I;return o=new js({}),s=new Bs({}),f=new zs({}),p=new Ls({props:{feedback:"Bad"}}),b=new Gs({}),A=new qs({}),M=new Hs({}),{c(){t=R("div"),n=R("div"),r=R("div"),i=R("div"),Z(o.$$.fragment),l=D(),a=R("div"),Z(s.$$.fragment),u=D(),c=R("div"),Z(f.$$.fragment),d=D(),g=R("div"),Z(p.$$.fragment),m=D(),_=R("div"),Z(b.$$.fragment),w=D(),C=R("div"),Z(A.$$.fragment),$=D(),E=R("div"),S=R("div"),S.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,k=D(),y=R("div"),Z(M.$$.fragment),h(i,"class","card-1 svelte-14znspc"),h(a,"class","card-2"),h(r,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(g,"class","left-question svelte-14znspc"),h(_,"class","left-filter svelte-14znspc"),h(C,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h(S,"class","right-chart svelte-14znspc"),h(y,"class","right-table svelte-14znspc"),h(E,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(F,P){T(F,t,P),v(t,n),v(n,r),v(r,i),K(o,i,null),v(r,l),v(r,a),K(s,a,null),v(n,u),v(n,c),K(f,c,null),v(n,d),v(n,g),K(p,g,null),v(n,m),v(n,_),K(b,_,null),v(n,w),v(n,C),K(A,C,null),v(t,$),v(t,E),v(E,S),v(E,k),v(E,y),K(M,y,null),I=!0},p:H,i(F){I||(N(o.$$.fragment,F),N(s.$$.fragment,F),N(f.$$.fragment,F),N(p.$$.fragment,F),N(b.$$.fragment,F),N(A.$$.fragment,F),N(M.$$.fragment,F),I=!0)},o(F){V(o.$$.fragment,F),V(s.$$.fragment,F),V(f.$$.fragment,F),V(p.$$.fragment,F),V(b.$$.fragment,F),V(A.$$.fragment,F),V(M.$$.fragment,F),I=!1},d(F){F&&x(t),J(o),J(s),J(f),J(p),J(b),J(A),J(M)}}}function yg(e,t,n){let r;ee(e,pn,o=>n(0,r=o)),ut(()=>{i()});async function i(){const s=(await(await fetch("/chat/qa_table/retrieve")).json()).rows.map(u=>({id:u[0],question:u[1],answer:u[2],vote_status:u[3]}));Oe(pn,r=[...s],r)}return[]}class Us extends ie{constructor(t){super(),se(this,t,yg,wg,re,{})}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tl(Object(n),!0).forEach(function(r){Sg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zn=function(t){return typeof t}:zn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(e)}function Sg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(){return at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},at.apply(this,arguments)}function Cg(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function kg(e,t){if(e==null)return{};var n=Cg(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var $g="1.15.0";function lt(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var ct=lt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Sn=lt(/Edge/i),nl=lt(/firefox/i),an=lt(/safari/i)&&!lt(/chrome/i)&&!lt(/android/i),Ws=lt(/iP(ad|od|hone)/i),Xs=lt(/chrome/i)&&lt(/android/i),Ys={capture:!1,passive:!1};function ne(e,t,n){e.addEventListener(t,n,!ct&&Ys)}function te(e,t,n){e.removeEventListener(t,n,!ct&&Ys)}function rr(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Rg(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Qe(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&rr(e,t):rr(e,t))||r&&e===n)return e;if(e===n)break}while(e=Rg(e))}return null}var rl=/\s+/g;function He(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(rl," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(rl," ")}}function q(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function qt(e,t){var n="";if(typeof e=="string")n=e;else do{var r=q(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Qs(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function et(){var e=document.scrollingElement;return e||document.documentElement}function we(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var o,l,a,s,u,c,f;if(e!==window&&e.parentNode&&e!==et()?(o=e.getBoundingClientRect(),l=o.top,a=o.left,s=o.bottom,u=o.right,c=o.height,f=o.width):(l=0,a=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!ct))do if(i&&i.getBoundingClientRect&&(q(i,"transform")!=="none"||n&&q(i,"position")!=="static")){var d=i.getBoundingClientRect();l-=d.top+parseInt(q(i,"border-top-width")),a-=d.left+parseInt(q(i,"border-left-width")),s=l+o.height,u=a+o.width;break}while(i=i.parentNode);if(r&&e!==window){var g=qt(i||e),p=g&&g.a,m=g&&g.d;g&&(l/=m,a/=p,f/=p,c/=m,s=l+c,u=a+f)}return{top:l,left:a,bottom:s,right:u,width:f,height:c}}}function il(e,t,n){for(var r=ht(e,!0),i=we(e)[t];r;){var o=we(r)[n],l=void 0;if(n==="top"||n==="left"?l=i>=o:l=i<=o,!l)return r;if(r===et())break;r=ht(r,!1)}return!1}function Ut(e,t,n,r){for(var i=0,o=0,l=e.children;o<l.length;){if(l[o].style.display!=="none"&&l[o]!==L.ghost&&(r||l[o]!==L.dragged)&&Qe(l[o],n.draggable,e,!1)){if(i===t)return l[o];i++}o++}return null}function ki(e,t){for(var n=e.lastElementChild;n&&(n===L.ghost||q(n,"display")==="none"||t&&!rr(n,t));)n=n.previousElementSibling;return n||null}function Ge(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==L.clone&&(!t||rr(e,t))&&n++;return n}function ol(e){var t=0,n=0,r=et();if(e)do{var i=qt(e),o=i.a,l=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*l}while(e!==r&&(e=e.parentNode));return[t,n]}function Ag(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function ht(e,t){if(!e||!e.getBoundingClientRect)return et();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=q(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return et();if(r||t)return n;r=!0}}while(n=n.parentNode);return et()}function Eg(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Mr(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var un;function Ks(e,t){return function(){if(!un){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),un=setTimeout(function(){un=void 0},t)}}}function Mg(){clearTimeout(un),un=void 0}function Js(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Zs(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var qe="Sortable"+new Date().getTime();function Fg(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(q(i,"display")==="none"||i===L.ghost)){e.push({target:i,rect:we(i)});var o=rt({},e[e.length-1].rect);if(i.thisAnimationDuration){var l=qt(i,!0);l&&(o.top-=l.f,o.left-=l.e)}i.fromRect=o}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(Ag(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var o=!1,l=0;e.forEach(function(a){var s=0,u=a.target,c=u.fromRect,f=we(u),d=u.prevFromRect,g=u.prevToRect,p=a.rect,m=qt(u,!0);m&&(f.top-=m.f,f.left-=m.e),u.toRect=f,u.thisAnimationDuration&&Mr(d,f)&&!Mr(c,f)&&(p.top-f.top)/(p.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(s=Ig(p,d,g,i.options)),Mr(f,c)||(u.prevFromRect=c,u.prevToRect=f,s||(s=i.options.animation),i.animate(u,p,f,s)),s&&(o=!0,l=Math.max(l,s),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},s),u.thisAnimationDuration=s)}),clearTimeout(t),o?t=setTimeout(function(){typeof r=="function"&&r()},l):typeof r=="function"&&r(),e=[]},animate:function(r,i,o,l){if(l){q(r,"transition",""),q(r,"transform","");var a=qt(this.el),s=a&&a.a,u=a&&a.d,c=(i.left-o.left)/(s||1),f=(i.top-o.top)/(u||1);r.animatingX=!!c,r.animatingY=!!f,q(r,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=Dg(r),q(r,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),q(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){q(r,"transition",""),q(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},l)}}}}function Dg(e){return e.offsetWidth}function Ig(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var It=[],Fr={initializeByDefault:!0},Cn={mount:function(t){for(var n in Fr)Fr.hasOwnProperty(n)&&!(n in t)&&(t[n]=Fr[n]);It.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),It.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=t+"Global";It.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][o]&&n[l.pluginName][o](rt({sortable:n},r)),n.options[l.pluginName]&&n[l.pluginName][t]&&n[l.pluginName][t](rt({sortable:n},r)))})},initializePlugins:function(t,n,r,i){It.forEach(function(a){var s=a.pluginName;if(!(!t.options[s]&&!a.initializeByDefault)){var u=new a(t,n,t.options);u.sortable=t,u.options=t.options,t[s]=u,at(r,u.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var l=this.modifyOption(t,o,t.options[o]);typeof l<"u"&&(t.options[o]=l)}},getEventProperties:function(t,n){var r={};return It.forEach(function(i){typeof i.eventProperties=="function"&&at(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return It.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(i=o.optionListeners[n].call(t[o.pluginName],r))}),i}};function Ng(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,l=e.toEl,a=e.fromEl,s=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,d=e.originalEvent,g=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[qe],!!t){var m,_=t.options,b="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ct&&!Sn?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=l||n,m.from=a||n,m.item=i||n,m.clone=o,m.oldIndex=s,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=d,m.pullMode=g?g.lastPutMode:void 0;var w=rt(rt({},p),Cn.getEventProperties(r,t));for(var C in w)m[C]=w[C];n&&n.dispatchEvent(m),_[b]&&_[b].call(t,m)}}var Pg=["evt"],Ne=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=kg(r,Pg);Cn.pluginEvent.bind(L)(t,n,rt({dragEl:O,parentEl:me,ghostEl:X,rootEl:fe,nextEl:St,lastDownEl:Hn,cloneEl:de,cloneHidden:dt,dragStarted:tn,putSortable:Ce,activeSortable:L.active,originalEvent:i,oldIndex:Ot,oldDraggableIndex:cn,newIndex:Le,newDraggableIndex:ft,hideGhostForTarget:ra,unhideGhostForTarget:ia,cloneNowHidden:function(){dt=!0},cloneNowShown:function(){dt=!1},dispatchSortableEvent:function(a){Fe({sortable:n,name:a,originalEvent:i})}},o))};function Fe(e){Ng(rt({putSortable:Ce,cloneEl:de,targetEl:O,rootEl:fe,oldIndex:Ot,oldDraggableIndex:cn,newIndex:Le,newDraggableIndex:ft},e))}var O,me,X,fe,St,Hn,de,dt,Ot,Le,cn,ft,Dn,Ce,xt=!1,ir=!1,or=[],wt,Be,Dr,Ir,ll,sl,tn,Nt,fn,dn=!1,In=!1,Ln,$e,Nr=[],ri=!1,lr=[],vr=typeof document<"u",Nn=Ws,al=Sn||ct?"cssFloat":"float",xg=vr&&!Xs&&!Ws&&"draggable"in document.createElement("div"),ea=function(){if(vr){if(ct)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),ta=function(t,n){var r=q(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=Ut(t,0,n),l=Ut(t,1,n),a=o&&q(o),s=l&&q(l),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+we(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+we(l).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var f=a.float==="left"?"left":"right";return l&&(s.clear==="both"||s.clear===f)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[al]==="none"||l&&r[al]==="none"&&u+c>i)?"vertical":"horizontal"},Tg=function(t,n,r){var i=r?t.left:t.top,o=r?t.right:t.bottom,l=r?t.width:t.height,a=r?n.left:n.top,s=r?n.right:n.bottom,u=r?n.width:n.height;return i===a||o===s||i+l/2===a+u/2},Og=function(t,n){var r;return or.some(function(i){var o=i[qe].options.emptyInsertThreshold;if(!(!o||ki(i))){var l=we(i),a=t>=l.left-o&&t<=l.right+o,s=n>=l.top-o&&n<=l.bottom+o;if(a&&s)return r=i}}),r},na=function(t){function n(o,l){return function(a,s,u,c){var f=a.options.group.name&&s.options.group.name&&a.options.group.name===s.options.group.name;if(o==null&&(l||f))return!0;if(o==null||o===!1)return!1;if(l&&o==="clone")return o;if(typeof o=="function")return n(o(a,s,u,c),l)(a,s,u,c);var d=(l?a:s).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var r={},i=t.group;(!i||zn(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},ra=function(){!ea&&X&&q(X,"display","none")},ia=function(){!ea&&X&&q(X,"display","")};vr&&!Xs&&document.addEventListener("click",function(e){if(ir)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ir=!1,!1},!0);var yt=function(t){if(O){t=t.touches?t.touches[0]:t;var n=Og(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[qe]._onDragOver(r)}}},Vg=function(t){O&&O.parentNode[qe]._isOutsideThisEl(t.target)};function L(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=at({},t),e[qe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ta(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,a){l.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:L.supportPointer!==!1&&"PointerEvent"in window&&!an,emptyInsertThreshold:5};Cn.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);na(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:xg,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ne(e,"pointerdown",this._onTapStart):(ne(e,"mousedown",this._onTapStart),ne(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ne(e,"dragover",this),ne(e,"dragenter",this)),or.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),at(this,Fg())}L.prototype={constructor:L,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Nt=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,O):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,i=this.options,o=i.preventOnFilter,l=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,s=(a||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=i.filter;if(Ug(r),!O&&!(/mousedown|pointerdown/.test(l)&&t.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&an&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=Qe(s,i.draggable,r,!1),!(s&&s.animated)&&Hn!==s)){if(Ot=Ge(s),cn=Ge(s,i.draggable),typeof c=="function"){if(c.call(this,t,s,this)){Fe({sortable:n,rootEl:u,name:"filter",targetEl:s,toEl:r,fromEl:r}),Ne("filter",n,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=Qe(u,f.trim(),r,!1),f)return Fe({sortable:n,rootEl:f,name:"filter",targetEl:s,fromEl:r,toEl:r}),Ne("filter",n,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}i.handle&&!Qe(u,i.handle,r,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,n,r){var i=this,o=i.el,l=i.options,a=o.ownerDocument,s;if(r&&!O&&r.parentNode===o){var u=we(r);if(fe=o,O=r,me=O.parentNode,St=O.nextSibling,Hn=r,Dn=l.group,L.dragged=O,wt={target:O,clientX:(n||t).clientX,clientY:(n||t).clientY},ll=wt.clientX-u.left,sl=wt.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,O.style["will-change"]="all",s=function(){if(Ne("delayEnded",i,{evt:t}),L.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!nl&&i.nativeDraggable&&(O.draggable=!0),i._triggerDragStart(t,n),Fe({sortable:i,name:"choose",originalEvent:t}),He(O,l.chosenClass,!0)},l.ignore.split(",").forEach(function(c){Qs(O,c.trim(),Pr)}),ne(a,"dragover",yt),ne(a,"mousemove",yt),ne(a,"touchmove",yt),ne(a,"mouseup",i._onDrop),ne(a,"touchend",i._onDrop),ne(a,"touchcancel",i._onDrop),nl&&this.nativeDraggable&&(this.options.touchStartThreshold=4,O.draggable=!0),Ne("delayStart",this,{evt:t}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Sn||ct))){if(L.eventCanceled){this._onDrop();return}ne(a,"mouseup",i._disableDelayedDrag),ne(a,"touchend",i._disableDelayedDrag),ne(a,"touchcancel",i._disableDelayedDrag),ne(a,"mousemove",i._delayedDragTouchMoveHandler),ne(a,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&ne(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(s,l.delay)}else s()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){O&&Pr(O),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;te(t,"mouseup",this._disableDelayedDrag),te(t,"touchend",this._disableDelayedDrag),te(t,"touchcancel",this._disableDelayedDrag),te(t,"mousemove",this._delayedDragTouchMoveHandler),te(t,"touchmove",this._delayedDragTouchMoveHandler),te(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?ne(document,"pointermove",this._onTouchMove):n?ne(document,"touchmove",this._onTouchMove):ne(document,"mousemove",this._onTouchMove):(ne(O,"dragend",this),ne(fe,"dragstart",this._onDragStart));try{document.selection?qn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(xt=!1,fe&&O){Ne("dragStarted",this,{evt:n}),this.nativeDraggable&&ne(document,"dragover",Vg);var r=this.options;!t&&He(O,r.dragClass,!1),He(O,r.ghostClass,!0),L.active=this,t&&this._appendGhost(),Fe({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Be){this._lastX=Be.clientX,this._lastY=Be.clientY,ra();for(var t=document.elementFromPoint(Be.clientX,Be.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Be.clientX,Be.clientY),t!==n);)n=t;if(O.parentNode[qe]._isOutsideThisEl(t),n)do{if(n[qe]){var r=void 0;if(r=n[qe]._onDragOver({clientX:Be.clientX,clientY:Be.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);ia()}},_onTouchMove:function(t){if(wt){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,o=t.touches?t.touches[0]:t,l=X&&qt(X,!0),a=X&&l&&l.a,s=X&&l&&l.d,u=Nn&&$e&&ol($e),c=(o.clientX-wt.clientX+i.x)/(a||1)+(u?u[0]-Nr[0]:0)/(a||1),f=(o.clientY-wt.clientY+i.y)/(s||1)+(u?u[1]-Nr[1]:0)/(s||1);if(!L.active&&!xt){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(X){l?(l.e+=c-(Dr||0),l.f+=f-(Ir||0)):l={a:1,b:0,c:0,d:1,e:c,f};var d="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");q(X,"webkitTransform",d),q(X,"mozTransform",d),q(X,"msTransform",d),q(X,"transform",d),Dr=c,Ir=f,Be=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!X){var t=this.options.fallbackOnBody?document.body:fe,n=we(O,!0,Nn,!0,t),r=this.options;if(Nn){for($e=t;q($e,"position")==="static"&&q($e,"transform")==="none"&&$e!==document;)$e=$e.parentNode;$e!==document.body&&$e!==document.documentElement?($e===document&&($e=et()),n.top+=$e.scrollTop,n.left+=$e.scrollLeft):$e=et(),Nr=ol($e)}X=O.cloneNode(!0),He(X,r.ghostClass,!1),He(X,r.fallbackClass,!0),He(X,r.dragClass,!0),q(X,"transition",""),q(X,"transform",""),q(X,"box-sizing","border-box"),q(X,"margin",0),q(X,"top",n.top),q(X,"left",n.left),q(X,"width",n.width),q(X,"height",n.height),q(X,"opacity","0.8"),q(X,"position",Nn?"absolute":"fixed"),q(X,"zIndex","100000"),q(X,"pointerEvents","none"),L.ghost=X,t.appendChild(X),q(X,"transform-origin",ll/parseInt(X.style.width)*100+"% "+sl/parseInt(X.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,o=r.options;if(Ne("dragStart",this,{evt:t}),L.eventCanceled){this._onDrop();return}Ne("setupClone",this),L.eventCanceled||(de=Zs(O),de.removeAttribute("id"),de.draggable=!1,de.style["will-change"]="",this._hideClone(),He(de,this.options.chosenClass,!1),L.clone=de),r.cloneId=qn(function(){Ne("clone",r),!L.eventCanceled&&(r.options.removeCloneOnHide||fe.insertBefore(de,O),r._hideClone(),Fe({sortable:r,name:"clone"}))}),!n&&He(O,o.dragClass,!0),n?(ir=!0,r._loopId=setInterval(r._emulateDragOver,50)):(te(document,"mouseup",r._onDrop),te(document,"touchend",r._onDrop),te(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,O)),ne(document,"drop",r),q(O,"transform","translateZ(0)")),xt=!0,r._dragStartId=qn(r._dragStarted.bind(r,n,t)),ne(document,"selectstart",r),tn=!0,an&&q(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,o,l,a=this.options,s=a.group,u=L.active,c=Dn===s,f=a.sort,d=Ce||u,g,p=this,m=!1;if(ri)return;function _(Me,ye){Ne(Me,p,rt({evt:t,isOwner:c,axis:g?"vertical":"horizontal",revert:l,dragRect:i,targetRect:o,canSort:f,fromSortable:d,target:r,completed:w,onMove:function(ze,kn){return Pn(fe,n,O,i,ze,we(ze),t,kn)},changed:C},ye))}function b(){_("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function w(Me){return _("dragOverCompleted",{insertion:Me}),Me&&(c?u._hideClone():u._showClone(p),p!==d&&(He(O,Ce?Ce.options.ghostClass:u.options.ghostClass,!1),He(O,a.ghostClass,!0)),Ce!==p&&p!==L.active?Ce=p:p===L.active&&Ce&&(Ce=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){_("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===O&&!O.animated||r===n&&!r.animated)&&(Nt=null),!a.dragoverBubble&&!t.rootEl&&r!==document&&(O.parentNode[qe]._isOutsideThisEl(t.target),!Me&&yt(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),m=!0}function C(){Le=Ge(O),ft=Ge(O,a.draggable),Fe({sortable:p,name:"change",toEl:n,newIndex:Le,newDraggableIndex:ft,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Qe(r,a.draggable,n,!0),_("dragOver"),L.eventCanceled)return m;if(O.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return w(!1);if(ir=!1,u&&!a.disabled&&(c?f||(l=me!==fe):Ce===this||(this.lastPutMode=Dn.checkPull(this,u,O,t))&&s.checkPut(this,u,O,t))){if(g=this._getDirection(t,r)==="vertical",i=we(O),_("dragOverValid"),L.eventCanceled)return m;if(l)return me=fe,b(),this._hideClone(),_("revert"),L.eventCanceled||(St?fe.insertBefore(O,St):fe.appendChild(O)),w(!0);var A=ki(n,a.draggable);if(!A||qg(t,g,this)&&!A.animated){if(A===O)return w(!1);if(A&&n===t.target&&(r=A),r&&(o=we(r)),Pn(fe,n,O,i,r,o,t,!!r)!==!1)return b(),A&&A.nextSibling?n.insertBefore(O,A.nextSibling):n.appendChild(O),me=n,C(),w(!0)}else if(A&&Lg(t,g,this)){var $=Ut(n,0,a,!0);if($===O)return w(!1);if(r=$,o=we(r),Pn(fe,n,O,i,r,o,t,!1)!==!1)return b(),n.insertBefore(O,$),me=n,C(),w(!0)}else if(r.parentNode===n){o=we(r);var E=0,S,k=O.parentNode!==n,y=!Tg(O.animated&&O.toRect||i,r.animated&&r.toRect||o,g),M=g?"top":"left",I=il(r,"top","top")||il(O,"top","top"),F=I?I.scrollTop:void 0;Nt!==r&&(S=o[M],dn=!1,In=!y&&a.invertSwap||k),E=Gg(t,r,o,g,y?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,In,Nt===r);var P;if(E!==0){var B=Ge(O);do B-=E,P=me.children[B];while(P&&(q(P,"display")==="none"||P===X))}if(E===0||P===r)return w(!1);Nt=r,fn=E;var ge=r.nextElementSibling,oe=!1;oe=E===1;var Ee=Pn(fe,n,O,i,r,o,t,oe);if(Ee!==!1)return(Ee===1||Ee===-1)&&(oe=Ee===1),ri=!0,setTimeout(Hg,30),b(),oe&&!ge?n.appendChild(O):r.parentNode.insertBefore(O,oe?ge:r),I&&Js(I,0,F-I.scrollTop),me=O.parentNode,S!==void 0&&!In&&(Ln=Math.abs(S-we(r)[M])),C(),w(!0)}if(n.contains(O))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){te(document,"mousemove",this._onTouchMove),te(document,"touchmove",this._onTouchMove),te(document,"pointermove",this._onTouchMove),te(document,"dragover",yt),te(document,"mousemove",yt),te(document,"touchmove",yt)},_offUpEvents:function(){var t=this.el.ownerDocument;te(t,"mouseup",this._onDrop),te(t,"touchend",this._onDrop),te(t,"pointerup",this._onDrop),te(t,"touchcancel",this._onDrop),te(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(Le=Ge(O),ft=Ge(O,r.draggable),Ne("drop",this,{evt:t}),me=O&&O.parentNode,Le=Ge(O),ft=Ge(O,r.draggable),L.eventCanceled){this._nulling();return}xt=!1,In=!1,dn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ii(this.cloneId),ii(this._dragStartId),this.nativeDraggable&&(te(document,"drop",this),te(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),an&&q(document.body,"user-select",""),q(O,"transform",""),t&&(tn&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),X&&X.parentNode&&X.parentNode.removeChild(X),(fe===me||Ce&&Ce.lastPutMode!=="clone")&&de&&de.parentNode&&de.parentNode.removeChild(de),O&&(this.nativeDraggable&&te(O,"dragend",this),Pr(O),O.style["will-change"]="",tn&&!xt&&He(O,Ce?Ce.options.ghostClass:this.options.ghostClass,!1),He(O,this.options.chosenClass,!1),Fe({sortable:this,name:"unchoose",toEl:me,newIndex:null,newDraggableIndex:null,originalEvent:t}),fe!==me?(Le>=0&&(Fe({rootEl:me,name:"add",toEl:me,fromEl:fe,originalEvent:t}),Fe({sortable:this,name:"remove",toEl:me,originalEvent:t}),Fe({rootEl:me,name:"sort",toEl:me,fromEl:fe,originalEvent:t}),Fe({sortable:this,name:"sort",toEl:me,originalEvent:t})),Ce&&Ce.save()):Le!==Ot&&Le>=0&&(Fe({sortable:this,name:"update",toEl:me,originalEvent:t}),Fe({sortable:this,name:"sort",toEl:me,originalEvent:t})),L.active&&((Le==null||Le===-1)&&(Le=Ot,ft=cn),Fe({sortable:this,name:"end",toEl:me,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ne("nulling",this),fe=O=me=X=St=de=Hn=dt=wt=Be=tn=Le=ft=Ot=cn=Nt=fn=Ce=Dn=L.dragged=L.ghost=L.clone=L.active=null,lr.forEach(function(t){t.checked=!0}),lr.length=Dr=Ir=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":O&&(this._onDragOver(t),zg(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,o=r.length,l=this.options;i<o;i++)n=r[i],Qe(n,l.draggable,this.el,!1)&&t.push(n.getAttribute(l.dataIdAttr)||Bg(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(o,l){var a=i.children[l];Qe(a,this.options.draggable,i,!1)&&(r[o]=a)},this),n&&this.captureAnimationState(),t.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Qe(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=Cn.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&na(r)},destroy:function(){Ne("destroy",this);var t=this.el;t[qe]=null,te(t,"mousedown",this._onTapStart),te(t,"touchstart",this._onTapStart),te(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(te(t,"dragover",this),te(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),or.splice(or.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!dt){if(Ne("hideClone",this),L.eventCanceled)return;q(de,"display","none"),this.options.removeCloneOnHide&&de.parentNode&&de.parentNode.removeChild(de),dt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(dt){if(Ne("showClone",this),L.eventCanceled)return;O.parentNode==fe&&!this.options.group.revertClone?fe.insertBefore(de,O):St?fe.insertBefore(de,St):fe.appendChild(de),this.options.group.revertClone&&this.animate(O,de),q(de,"display",""),dt=!1}}};function zg(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Pn(e,t,n,r,i,o,l,a){var s,u=e[qe],c=u.options.onMove,f;return window.CustomEvent&&!ct&&!Sn?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=t,s.from=e,s.dragged=n,s.draggedRect=r,s.related=i||t,s.relatedRect=o||we(t),s.willInsertAfter=a,s.originalEvent=l,e.dispatchEvent(s),c&&(f=c.call(u,s,l)),f}function Pr(e){e.draggable=!1}function Hg(){ri=!1}function Lg(e,t,n){var r=we(Ut(n.el,0,n.options,!0)),i=10;return t?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function qg(e,t,n){var r=we(ki(n.el,n.options.draggable)),i=10;return t?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function Gg(e,t,n,r,i,o,l,a){var s=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,f=r?n.bottom:n.right,d=!1;if(!l){if(a&&Ln<u*i){if(!dn&&(fn===1?s>c+u*o/2:s<f-u*o/2)&&(dn=!0),dn)d=!0;else if(fn===1?s<c+Ln:s>f-Ln)return-fn}else if(s>c+u*(1-i)/2&&s<f-u*(1-i)/2)return jg(t)}return d=d||l,d&&(s<c+u*o/2||s>f-u*o/2)?s>c+u/2?1:-1:0}function jg(e){return Ge(O)<Ge(e)?1:-1}function Bg(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Ug(e){lr.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&lr.push(r)}}function qn(e){return setTimeout(e,0)}function ii(e){return clearTimeout(e)}vr&&ne(document,"touchmove",function(e){(L.active||xt)&&e.cancelable&&e.preventDefault()});L.utils={on:ne,off:te,css:q,find:Qs,is:function(t,n){return!!Qe(t,n,t,!1)},extend:Eg,throttle:Ks,closest:Qe,toggleClass:He,clone:Zs,index:Ge,nextTick:qn,cancelNextTick:ii,detectDirection:ta,getChild:Ut};L.get=function(e){return e[qe]};L.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(L.utils=rt(rt({},L.utils),r.utils)),Cn.mount(r)})};L.create=function(e,t){return new L(e,t)};L.version=$g;var be=[],nn,oi,li=!1,xr,Tr,sr,rn;function Wg(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?ne(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ne(document,"pointermove",this._handleFallbackAutoScroll):r.touches?ne(document,"touchmove",this._handleFallbackAutoScroll):ne(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?te(document,"dragover",this._handleAutoScroll):(te(document,"pointermove",this._handleFallbackAutoScroll),te(document,"touchmove",this._handleFallbackAutoScroll),te(document,"mousemove",this._handleFallbackAutoScroll)),ul(),Gn(),Mg()},nulling:function(){sr=oi=nn=li=rn=xr=Tr=null,be.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,o=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(o,l);if(sr=n,r||this.options.forceAutoScrollFallback||Sn||ct||an){Or(n,this.options,a,r);var s=ht(a,!0);li&&(!rn||o!==xr||l!==Tr)&&(rn&&ul(),rn=setInterval(function(){var u=ht(document.elementFromPoint(o,l),!0);u!==s&&(s=u,Gn()),Or(n,i.options,u,r)},10),xr=o,Tr=l)}else{if(!this.options.bubbleScroll||ht(a,!0)===et()){Gn();return}Or(n,this.options,ht(a,!1),!1)}}},at(e,{pluginName:"scroll",initializeByDefault:!0})}function Gn(){be.forEach(function(e){clearInterval(e.pid)}),be=[]}function ul(){clearInterval(rn)}var Or=Ks(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,a=t.scrollSpeed,s=et(),u=!1,c;oi!==n&&(oi=n,Gn(),nn=t.scroll,c=t.scrollFn,nn===!0&&(nn=ht(n,!0)));var f=0,d=nn;do{var g=d,p=we(g),m=p.top,_=p.bottom,b=p.left,w=p.right,C=p.width,A=p.height,$=void 0,E=void 0,S=g.scrollWidth,k=g.scrollHeight,y=q(g),M=g.scrollLeft,I=g.scrollTop;g===s?($=C<S&&(y.overflowX==="auto"||y.overflowX==="scroll"||y.overflowX==="visible"),E=A<k&&(y.overflowY==="auto"||y.overflowY==="scroll"||y.overflowY==="visible")):($=C<S&&(y.overflowX==="auto"||y.overflowX==="scroll"),E=A<k&&(y.overflowY==="auto"||y.overflowY==="scroll"));var F=$&&(Math.abs(w-i)<=l&&M+C<S)-(Math.abs(b-i)<=l&&!!M),P=E&&(Math.abs(_-o)<=l&&I+A<k)-(Math.abs(m-o)<=l&&!!I);if(!be[f])for(var B=0;B<=f;B++)be[B]||(be[B]={});(be[f].vx!=F||be[f].vy!=P||be[f].el!==g)&&(be[f].el=g,be[f].vx=F,be[f].vy=P,clearInterval(be[f].pid),(F!=0||P!=0)&&(u=!0,be[f].pid=setInterval((function(){r&&this.layer===0&&L.active._onTouchMove(sr);var ge=be[this.layer].vy?be[this.layer].vy*a:0,oe=be[this.layer].vx?be[this.layer].vx*a:0;typeof c=="function"&&c.call(L.dragged.parentNode[qe],oe,ge,e,sr,be[this.layer].el)!=="continue"||Js(be[this.layer].el,oe,ge)}).bind({layer:f}),24))),f++}while(t.bubbleScroll&&d!==s&&(d=ht(d,!1)));li=u}},30),oa=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,o=t.activeSortable,l=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(n){var u=r||o;a();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);s(),u&&!u.el.contains(f)&&(l("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function $i(){}$i.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Ut(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:oa};at($i,{pluginName:"revertOnSpill"});function Ri(){}Ri.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:oa};at(Ri,{pluginName:"removeOnSpill"});L.mount(new Wg);L.mount(Ri,$i);function cl(e,t,n){const r=e.slice();return r[19]=t[n],r[21]=n,r}function fl(e,t,n){const r=e.slice();return r[22]=t[n],r[24]=n,r}function dl(e,t,n){const r=e.slice();return r[25]=t[n],r[24]=n,r}function gl(e){let t,n=e[24]+1+"",r;return{c(){t=R("option"),r=z(n),t.__value=e[24]+1,t.value=t.__value,h(t,"class","svelte-1nj8mt0")},m(i,o){T(i,t,o),v(t,r)},p:H,d(i){i&&x(t)}}}function hl(e,t){let n,r,i=t[1][t[24]]+"",o,l,a,s,u=t[19][t[1][t[24]]]+"",c,f,d,g,p,m,_,b,w,C=Array(t[0]).fill(),A=[];for(let S=0;S<C.length;S+=1)A[S]=gl(dl(t,C,S));function $(...S){return t[13](t[19],t[24],...S)}function E(...S){return t[14](t[19],...S)}return{key:e,first:null,c(){n=R("div"),r=R("h5"),o=z(i),l=z(":"),a=D(),s=R("p"),c=z(u),f=D(),d=R("div"),g=z(`Rank:
                        `),p=R("select");for(let S=0;S<A.length;S+=1)A[S].c();m=D(),h(r,"class","bold underline svelte-1nj8mt0"),h(s,"class","svelte-1nj8mt0"),h(p,"class","answer-rank"),h(n,"class","answer svelte-1nj8mt0"),h(n,"id",_=`answer-${t[24]}-${t[19].qid}`),this.first=n},m(S,k){T(S,n,k),v(n,r),v(r,o),v(r,l),v(n,a),v(n,s),v(s,c),v(n,f),v(n,d),v(d,g),v(d,p);for(let y=0;y<A.length;y+=1)A[y]&&A[y].m(p,null);v(n,m),b||(w=[j(p,"change",$),j(n,"dragend",E)],b=!0)},p(S,k){if(t=S,k&3&&i!==(i=t[1][t[24]]+"")&&Q(o,i),k&131&&u!==(u=t[19][t[1][t[24]]]+"")&&Q(c,u),k&1){C=Array(t[0]).fill();let y;for(y=0;y<C.length;y+=1){const M=dl(t,C,y);A[y]?A[y].p(M,k):(A[y]=gl(M),A[y].c(),A[y].m(p,null))}for(;y<A.length;y+=1)A[y].d(1);A.length=C.length}k&129&&_!==(_=`answer-${t[24]}-${t[19].qid}`)&&h(n,"id",_)},d(S){S&&x(n),ve(A,S),b=!1,_e(w)}}}function pl(e,t){let n,r,i,o,l,a,s=t[19].qid+"",u,c,f,d=t[19].question+"",g,p,m,_=[],b=new Map,w,C,A,$,E=Array(t[0]).fill();const S=k=>k[24];for(let k=0;k<E.length;k+=1){let y=fl(t,E,k),M=S(y);b.set(M,_[k]=hl(M,y))}return{key:e,first:null,c(){n=R("div"),r=R("div"),i=R("div"),o=R("div"),l=R("h5"),a=z("Question: "),u=z(s),c=D(),f=R("p"),g=z(d),p=D(),m=R("div");for(let k=0;k<_.length;k+=1)_[k].c();w=D(),h(l,"class","bold svelte-1nj8mt0"),h(f,"class","svelte-1nj8mt0"),h(o,"class","question svelte-1nj8mt0"),h(m,"class","answers"),Re(m,"display","grid"),Re(m,"grid-template-columns",t[6]),Re(m,"gap",".25%"),Re(m,"width","100%"),Re(m,"margin","auto"),h(i,"class","message-content svelte-1nj8mt0"),h(r,"class","chat-message-center svelte-1nj8mt0"),h(n,"class","chat-message svelte-1nj8mt0"),this.first=n},m(k,y){T(k,n,y),v(n,r),v(r,i),v(i,o),v(o,l),v(l,a),v(l,u),v(o,c),v(o,f),v(f,g),v(i,p),v(i,m);for(let M=0;M<_.length;M+=1)_[M]&&_[M].m(m,null);t[15](m),v(n,w),A||($=gn(C=Yg.call(null,n,t[21]===t[7].length-1)),A=!0)},p(k,y){t=k,y&128&&s!==(s=t[19].qid+"")&&Q(u,s),y&128&&d!==(d=t[19].question+"")&&Q(g,d),y&1667&&(E=Array(t[0]).fill(),_=Xt(_,y,S,1,t,E,b,m,pr,hl,null,fl)),y&64&&Re(m,"grid-template-columns",t[6]),C&&Ye(C.update)&&y&128&&C.update.call(null,t[21]===t[7].length-1)},d(k){k&&x(n);for(let y=0;y<_.length;y+=1)_[y].d();t[15](null),A=!1,$()}}}function Xg(e){let t,n,r,i,o,l,a=[],s=new Map,u,c,f,d,g,p,m=(e[4]?e[5]:"Send")+"",_,b,w,C,A=e[7];const $=E=>E[21];for(let E=0;E<A.length;E+=1){let S=cl(e,A,E),k=$(S);s.set(k,a[E]=pl(k,S))}return{c(){t=R("div"),n=R("div"),n.innerHTML=`<h5 class="underline bold svelte-1nj8mt0">Q &amp; A Comparison Instructions</h5> 
    <br/> 
    <p class="svelte-1nj8mt0">Ask a question and rank the answers across the models. Drag each answer to
      rank it, in ascending order, from left-to-right. Optionally, select the
      rank for each via the corresponding dropdown.</p> 
    <br/> 
    <button class="svelte-1nj8mt0">Download Data</button>`,r=D(),i=R("div"),o=R("section"),l=R("div");for(let E=0;E<a.length;E+=1)a[E].c();u=D(),c=R("div"),f=R("form"),d=R("input"),g=D(),p=R("button"),_=z(m),h(n,"class","instructions svelte-1nj8mt0"),h(l,"class","chat-log svelte-1nj8mt0"),h(o,"class","chatbox svelte-1nj8mt0"),h(d,"class","chat-input-textarea svelte-1nj8mt0"),h(d,"placeholder","Type Message Here"),h(p,"class",b="btnyousend "+(e[3]===""?"":"active")+" svelte-1nj8mt0"),h(p,"type","submit"),h(f,"class","chat-input-form svelte-1nj8mt0"),h(c,"class","chat-input-holder svelte-1nj8mt0"),h(i,"class","ranked-chat svelte-1nj8mt0"),h(t,"class","ranked-feedback-container svelte-1nj8mt0")},m(E,S){T(E,t,S),v(t,n),v(t,r),v(t,i),v(i,o),v(o,l);for(let k=0;k<a.length;k+=1)a[k]&&a[k].m(l,null);v(i,u),v(i,c),v(c,f),v(f,d),tt(d,e[3]),v(f,g),v(f,p),v(p,_),w||(C=[j(d,"input",e[16]),j(f,"submit",e[8])],w=!0)},p(E,[S]){S&1735&&(A=E[7],a=Xt(a,S,$,1,E,A,s,l,pr,pl,null,cl)),S&8&&d.value!==E[3]&&tt(d,E[3]),S&48&&m!==(m=(E[4]?E[5]:"Send")+"")&&Q(_,m),S&8&&b!==(b="btnyousend "+(E[3]===""?"":"active")+" svelte-1nj8mt0")&&h(p,"class",b)},i:H,o:H,d(E){E&&x(t);for(let S=0;S<a.length;S+=1)a[S].d();w=!1,_e(C)}}}function Yg(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function ml(e){console.log("run update",e);const n=await fetch("/chat/comparator/db/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})});if(n.ok)console.log("ok",n);else{const r=await n.text();alert(r)}}function Qg(e,t,n){let r,i,o;ee(e,kr,$=>n(7,o=$));let{numModels:l=1}=t,{models:a=[0]}=t,s="",u="",c=!1;ut(async()=>{if(await new Promise($=>setTimeout($,200)),g){const $=new L(g,{animation:150,onUpdate(E){$.toArray()}});$.toArray()}});const f=async $=>{$.preventDefault(),s=u,n(3,u=""),n(4,c=!0);let E={question:s};for(let k of a)E[k]="Loading...";Oe(kr,o=[...o,E],o);const S=await fetch(`/chat/comparator/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:s})});if(S.ok){const k=await S.json();n(1,a=Object.keys(k.answer)),n(0,l=a.length);for(let y of a)E[y]=k.answer[y];E.qid=k.qid,kr.update(y=>(y[y.length-1]=E,y))}else{const k=await S.text();alert(k)}n(4,c=!1)};let d=0;setInterval(()=>{n(11,d=(d+1)%4)},200);let g,p;function m($,E){const S=E,y=st($.currentTarget.parentNode).selectAll("div.answer").nodes().map(P=>P.id);y.forEach((P,B)=>{st(`#${P}`).select(".answer-rank").property("value",B+1)});let M=[];for(let[P,B]of y.entries()){const ge=parseInt(B.split("-")[1]),oe=a[ge],Ee={rank:P,model:oe};M.push(Ee)}let I=o.filter(P=>P.qid===S),F=[];for(let P of M){const B={model:P.model,qid:parseInt(S),rank:parseInt(P.rank)+1,answer:I[0][P.model]};F.push(B)}ml(F)}function _($,E,S){const k=E,y=parseInt($.target.value),M=a[S],I={qid:k,rank:parseInt(y),model:M};let F=[],B=o.filter(oe=>oe.qid===I.qid)[0][I.model];const ge={model:I.model,qid:parseInt(I.qid),rank:parseInt(I.rank),answer:B};F.push(ge),ml(F)}const b=($,E,S)=>_(S,$.qid,E),w=($,E)=>m(E,$.qid);function C($){hn[$?"unshift":"push"](()=>{g=$,n(2,g)})}function A(){u=this.value,n(3,u)}return e.$$set=$=>{"numModels"in $&&n(0,l=$.numModels),"models"in $&&n(1,a=$.models)},e.$$.update=()=>{e.$$.dirty&1&&n(6,r="1fr ".repeat(l).trim()),e.$$.dirty&2048&&n(5,i=".".repeat(d).padEnd(3)),e.$$.dirty&4100&&g&&(n(12,p=new L(g,{animation:150,dataIdAttr:"id",onUpdate($){p.toArray()}})),p.toArray())},[l,a,g,u,c,i,r,o,f,m,_,d,p,b,w,C,A]}class Kg extends ie{constructor(t){super(),se(this,t,Qg,Xg,re,{numModels:0,models:1})}}function Jg(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return la(this.cover(t,n),t,n,e)}function la(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,l={data:r},a=e._x0,s=e._y0,u=e._x1,c=e._y1,f,d,g,p,m,_,b,w;if(!o)return e._root=l,e;for(;o.length;)if((m=t>=(f=(a+u)/2))?a=f:u=f,(_=n>=(d=(s+c)/2))?s=d:c=d,i=o,!(o=o[b=_<<1|m]))return i[b]=l,e;if(g=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===g&&n===p)return l.next=o,i?i[b]=l:e._root=l,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+u)/2))?a=f:u=f,(_=n>=(d=(s+c)/2))?s=d:c=d;while((b=_<<1|m)===(w=(p>=d)<<1|g>=f));return i[w]=o,i[b]=l,e}function Zg(e){var t,n,r=e.length,i,o,l=new Array(r),a=new Array(r),s=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(l[n]=i,a[n]=o,i<s&&(s=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(s>c||u>f)return this;for(this.cover(s,u).cover(c,f),n=0;n<r;++n)la(this,l[n],a[n],e[n]);return this}function eh(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var l=i-n||1,a=this._root,s,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,s=new Array(4),s[u]=a,a=s,l*=2,u){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function th(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function nh(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function De(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function rh(e,t,n){var r,i=this._x0,o=this._y0,l,a,s,u,c=this._x1,f=this._y1,d=[],g=this._root,p,m;for(g&&d.push(new De(g,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(g=p.node)||(l=p.x0)>c||(a=p.y0)>f||(s=p.x1)<i||(u=p.y1)<o))if(g.length){var _=(l+s)/2,b=(a+u)/2;d.push(new De(g[3],_,b,s,u),new De(g[2],l,b,_,u),new De(g[1],_,a,s,b),new De(g[0],l,a,_,b)),(m=(t>=b)<<1|e>=_)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var w=e-+this._x.call(null,g.data),C=t-+this._y.call(null,g.data),A=w*w+C*C;if(A<n){var $=Math.sqrt(n=A);i=e-$,o=t-$,c=e+$,f=t+$,r=g.data}}return r}function ih(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,l=this._x0,a=this._y0,s=this._x1,u=this._y1,c,f,d,g,p,m,_,b;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(l+s)/2))?l=d:s=d,(m=f>=(g=(a+u)/2))?a=g:u=g,t=n,!(n=n[_=m<<1|p]))return this;if(!n.length)break;(t[_+1&3]||t[_+2&3]||t[_+3&3])&&(r=t,b=_)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[_]=o:delete t[_],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=o,this)}function oh(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function lh(){return this._root}function sh(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ah(e){var t=[],n,r=this._root,i,o,l,a,s;for(r&&t.push(new De(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,l=n.y0,a=n.x1,s=n.y1)&&r.length){var u=(o+a)/2,c=(l+s)/2;(i=r[3])&&t.push(new De(i,u,c,a,s)),(i=r[2])&&t.push(new De(i,o,c,u,s)),(i=r[1])&&t.push(new De(i,u,l,a,c)),(i=r[0])&&t.push(new De(i,o,l,u,c))}return this}function uh(e){var t=[],n=[],r;for(this._root&&t.push(new De(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,l=r.x0,a=r.y0,s=r.x1,u=r.y1,c=(l+s)/2,f=(a+u)/2;(o=i[0])&&t.push(new De(o,l,a,c,f)),(o=i[1])&&t.push(new De(o,c,a,s,f)),(o=i[2])&&t.push(new De(o,l,f,c,u)),(o=i[3])&&t.push(new De(o,c,f,s,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function ch(e){return e[0]}function fh(e){return arguments.length?(this._x=e,this):this._x}function dh(e){return e[1]}function gh(e){return arguments.length?(this._y=e,this):this._y}function sa(e,t,n){var r=new Ai(t??ch,n??dh,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Ai(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function _l(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ie=sa.prototype=Ai.prototype;Ie.copy=function(){var e=new Ai(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=_l(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=_l(r));return e};Ie.add=Jg;Ie.addAll=Zg;Ie.cover=eh;Ie.data=th;Ie.extent=nh;Ie.find=rh;Ie.remove=ih;Ie.removeAll=oh;Ie.root=lh;Ie.size=sh;Ie.visit=ah;Ie.visitAfter=uh;Ie.x=fh;Ie.y=gh;function Je(e){return function(){return e}}function vl(e){return(e()-.5)*1e-6}function hh(e){return e.x+e.vx}function ph(e){return e.y+e.vy}function mh(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Je(e==null?1:+e));function l(){for(var u,c=t.length,f,d,g,p,m,_,b=0;b<o;++b)for(f=sa(t,hh,ph).visitAfter(a),u=0;u<c;++u)d=t[u],m=n[d.index],_=m*m,g=d.x+d.vx,p=d.y+d.vy,f.visit(w);function w(C,A,$,E,S){var k=C.data,y=C.r,M=m+y;if(k){if(k.index>d.index){var I=g-k.x-k.vx,F=p-k.y-k.vy,P=I*I+F*F;P<M*M&&(I===0&&(I=vl(r),P+=I*I),F===0&&(F=vl(r),P+=F*F),P=(M-(P=Math.sqrt(P)))/P*i,d.vx+=(I*=P)*(M=(y*=y)/(_+y)),d.vy+=(F*=P)*M,k.vx-=I*(M=1-M),k.vy-=F*M)}return}return A>g+M||E<g-M||$>p+M||S<p-M}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function s(){if(t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return l.initialize=function(u,c){t=u,r=c,s()},l.iterations=function(u){return arguments.length?(o=+u,l):o},l.strength=function(u){return arguments.length?(i=+u,l):i},l.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Je(+u),s(),l):e},l}var _h={value:()=>{}};function aa(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new jn(n)}function jn(e){this._=e}function vh(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}jn.prototype=aa.prototype={constructor:jn,on:function(e,t){var n=this._,r=vh(e+"",n),i,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((i=(e=r[o]).type)&&(i=bh(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=r[o]).type)n[i]=bl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=bl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new jn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function bh(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function bl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=_h,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Wt=0,on=0,Jt=0,ua=1e3,ar,ln,ur=0,At=0,br=0,wn=typeof performance=="object"&&performance.now?performance:Date,ca=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fa(){return At||(ca(wh),At=wn.now()+br)}function wh(){At=0}function si(){this._call=this._time=this._next=null}si.prototype=da.prototype={constructor:si,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?fa():+n)+(t==null?0:+t),!this._next&&ln!==this&&(ln?ln._next=this:ar=this,ln=this),this._call=e,this._time=n,ai()},stop:function(){this._call&&(this._call=null,this._time=1/0,ai())}};function da(e,t,n){var r=new si;return r.restart(e,t,n),r}function yh(){fa(),++Wt;for(var e=ar,t;e;)(t=At-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wt}function wl(){At=(ur=wn.now())+br,Wt=on=0;try{yh()}finally{Wt=0,Ch(),At=0}}function Sh(){var e=wn.now(),t=e-ur;t>ua&&(br-=t,ur=e)}function Ch(){for(var e,t=ar,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ar=n);ln=e,ai(r)}function ai(e){if(!Wt){on&&(on=clearTimeout(on));var t=e-At;t>24?(e<1/0&&(on=setTimeout(wl,e-wn.now()-br)),Jt&&(Jt=clearInterval(Jt))):(Jt||(ur=wn.now(),Jt=setInterval(Sh,ua)),Wt=1,ca(wl))}}const kh=1664525,$h=1013904223,yl=4294967296;function Rh(){let e=1;return()=>(e=(kh*e+$h)%yl)/yl}var Ah=10,Eh=Math.PI*(3-Math.sqrt(5));function Mh(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,l=.6,a=new Map,s=da(f),u=aa("tick","end"),c=Rh();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(s.stop(),u.call("end",t))}function d(m){var _,b=e.length,w;m===void 0&&(m=1);for(var C=0;C<m;++C)for(n+=(o-n)*i,a.forEach(function(A){A(n)}),_=0;_<b;++_)w=e[_],w.fx==null?w.x+=w.vx*=l:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=l:(w.y=w.fy,w.vy=0);return t}function g(){for(var m=0,_=e.length,b;m<_;++m){if(b=e[m],b.index=m,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var w=Ah*Math.sqrt(.5+m),C=m*Eh;b.x=w*Math.cos(C),b.y=w*Math.sin(C)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return g(),t={tick:d,restart:function(){return s.restart(f),t},stop:function(){return s.stop(),t},nodes:function(m){return arguments.length?(e=m,g(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(l=1-m,t):1-l},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,_){return arguments.length>1?(_==null?a.delete(m):a.set(m,p(_)),t):a.get(m)},find:function(m,_,b){var w=0,C=e.length,A,$,E,S,k;for(b==null?b=1/0:b*=b,w=0;w<C;++w)S=e[w],A=m-S.x,$=_-S.y,E=A*A+$*$,E<b&&(k=S,b=E);return k},on:function(m,_){return arguments.length>1?(u.on(m,_),t):u.on(m)}}}function Fh(e){var t=Je(.1),n,r,i;typeof e!="function"&&(e=Je(e==null?0:+e));function o(a){for(var s=0,u=n.length,c;s<u;++s)c=n[s],c.vx+=(i[s]-c.x)*r[s]*a}function l(){if(n){var a,s=n.length;for(r=new Array(s),i=new Array(s),a=0;a<s;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,l()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Je(+a),l(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Je(+a),l(),o):e},o}function Dh(e){var t=Je(.1),n,r,i;typeof e!="function"&&(e=Je(e==null?0:+e));function o(a){for(var s=0,u=n.length,c;s<u;++s)c=n[s],c.vy+=(i[s]-c.y)*r[s]*a}function l(){if(n){var a,s=n.length;for(r=new Array(s),i=new Array(s),a=0;a<s;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,l()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Je(+a),l(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Je(+a),l(),o):e},o}const cr=ke([]),Sl=ke({labelNames:["txt2.txt","pdf2.txt"],labels:[0,3],projection:[[.1443715864989249,.00463214192040876,.11292804485781914],[-.05626482326843836,-.013694651798983428,.01709368313171561]]});function Cl(e,t,n){const r=e.slice();return r[20]=t[n],r[22]=n,r}function kl(e){let t,n,r,i,o,l=e[20].file+"",a,s,u=Kr(e[20].size)+"",c,f,d,g,p,m,_,b;return{c(){t=U("g"),n=U("circle"),o=U("text"),a=z(l),s=U("tspan"),c=z(u),h(n,"r",r=e[3](e[20].size)),h(n,"fill","var(--primary"),h(n,"stroke","var(--white)"),h(n,"stroke-width","1"),h(n,"fill-opacity",.95),h(n,"class","svelte-h2ab3o"),h(s,"x","0"),h(s,"y","15"),h(o,"class","bubble-file-text svelte-h2ab3o"),h(o,"text-anchor","middle"),h(o,"opacity",f=e[20].size>e[4]?1:0),h(t,"class",g="file-circle-g "+(e[20].size>e[4]?"large":"")+" svelte-h2ab3o"),h(t,"style",p=e[5](e[20].x,e[20].y)),h(t,"role","img")},m(w,C){T(w,t,C),v(t,n),v(t,o),v(o,a),v(o,s),v(s,c),m=!0,_||(b=[j(t,"mouseover",e[6]),j(t,"mouseout",e[7]),j(t,"focus",e[6]),j(t,"blur",e[7])],_=!0)},p(w,C){(!m||C&12&&r!==(r=w[3](w[20].size)))&&h(n,"r",r),(!m||C&4)&&l!==(l=w[20].file+"")&&Q(a,l),(!m||C&4)&&u!==(u=Kr(w[20].size)+"")&&Q(c,u),(!m||C&20&&f!==(f=w[20].size>w[4]?1:0))&&h(o,"opacity",f),(!m||C&20&&g!==(g="file-circle-g "+(w[20].size>w[4]?"large":"")+" svelte-h2ab3o"))&&h(t,"class",g),(!m||C&4&&p!==(p=w[5](w[20].x,w[20].y)))&&h(t,"style",p)},i(w){m||(w&&Se(()=>{m&&(i||(i=Ke(n,Rn,{duration:1e3},!0)),i.run(1))}),w&&Se(()=>{m&&(d||(d=Ke(o,Rn,{duration:1e3},!0)),d.run(1))}),m=!0)},o(w){w&&(i||(i=Ke(n,Rn,{duration:1e3},!1)),i.run(0)),w&&(d||(d=Ke(o,Rn,{duration:1e3},!1)),d.run(0)),m=!1},d(w){w&&x(t),w&&i&&i.end(),w&&d&&d.end(),_=!1,_e(b)}}}function Ih(e){let t,n,r,i,o=e[2],l=[];for(let s=0;s<o.length;s+=1)l[s]=kl(Cl(e,o,s));const a=s=>V(l[s],1,1,()=>{l[s]=null});return{c(){t=R("div"),n=U("svg");for(let s=0;s<l.length;s+=1)l[s].c();h(n,"width",e[0]),h(n,"height",e[1]),h(n,"class","svelte-h2ab3o"),h(t,"id","network-chart"),Se(()=>e[15].call(t))},m(s,u){T(s,t,u),v(t,n);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(n,null);r=Et(t,e[15].bind(t)),i=!0},p(s,[u]){if(u&252){o=s[2];let c;for(c=0;c<o.length;c+=1){const f=Cl(s,o,c);l[c]?(l[c].p(f,u),N(l[c],1)):(l[c]=kl(f),l[c].c(),N(l[c],1),l[c].m(n,null))}for(ue(),c=o.length;c<l.length;c+=1)a(c);ce()}(!i||u&1)&&h(n,"width",s[0]),(!i||u&2)&&h(n,"height",s[1])},i(s){if(!i){for(let u=0;u<o.length;u+=1)N(l[u]);i=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)V(l[u]);i=!1},d(s){s&&x(t),ve(l,s),r()}}}function Nh(e,t,n){let r,i,o,l,a,s,u,c;ee(e,cr,$=>n(14,c=$));let f=600,d=350,g=!0,p=!1;const m=($,E)=>`transform: translate(${$}px, ${E}px)`,_=[-4,4],b=[-1,1];function w(){n(8,g=!0),n(9,p=!0);const $=st(this);$r(".file-circle-g").select("text").style("opacity",0),$.raise(),$.select("circle").attr("fill","var(--red)"),$.select("text").style("opacity",1)}const C=()=>{const $=$r(".file-circle-g");$.select("circle").attr("fill","var(--yellow)"),$.select("text").style("opacity",0),n(9,p=!1),setTimeout(()=>{n(8,g=!1)},1e3)};function A(){f=this.offsetWidth,d=this.offsetHeight,n(0,f),n(1,d)}return e.$$.update=()=>{e.$$.dirty&16387&&n(2,r=c.map($=>({...$,x:f/2,y:d/2,tickCount:0}))),e.$$.dirty&16384&&console.log(c.map($=>$.size).sort(($,E)=>$-E)),e.$$.dirty&1&&n(13,i=Fh().x(f/2)),e.$$.dirty&2&&n(12,o=Dh().y(d/2)),e.$$.dirty&16384&&n(3,s=We().domain(sn(c,$=>$.size)).range([12,60])),e.$$.dirty&8&&n(10,l=mh().radius($=>s($.size)+1).iterations(3)),e.$$.dirty&16384&&n(4,a=id(c.map($=>$.size).sort(($,E)=>$-E),.85)),e.$$.dirty&1&&We().domain(_).range([5,f]),e.$$.dirty&2&&We().domain(b).range([d,5]),e.$$.dirty&4&&n(11,u=Mh().nodes(r).on("tick",()=>{n(2,r=[...r])})),e.$$.dirty&15360&&(u.force("x",i),u.force("y",o),u.force("collide",l),u.alpha(.02),u.restart()),e.$$.dirty&19468&&(s.domain(sn(c,$=>$.size)),r.forEach($=>$.radius=s($.size)),u.nodes(r),l.radius($=>$.radius+.5)),e.$$.dirty&768&&g===!1&&(p||$r(".large").select("text").style("opacity",1))},[f,d,r,s,a,m,w,C,g,p,l,u,o,i,c,A]}class Ph extends ie{constructor(t){super(),se(this,t,Nh,Ih,re,{})}}/**
 * table-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pt(e,t){return typeof e=="function"?e(t):e}function je(e,t){return n=>{t.setState(r=>({...r,[e]:pt(n,r[e])}))}}function fr(e){return e instanceof Function}function xh(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Th(e,t){const n=[],r=i=>{i.forEach(o=>{n.push(o);const l=t(o);l!=null&&l.length&&r(l)})};return r(e),n}function G(e,t,n){let r=[],i;return()=>{let o;n.key&&n.debug&&(o=Date.now());const l=e();if(!(l.length!==r.length||l.some((u,c)=>r[c]!==u)))return i;r=l;let s;if(n.key&&n.debug&&(s=Date.now()),i=t(...l),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-o)*100)/100,c=Math.round((Date.now()-s)*100)/100,f=c/16,d=(g,p)=>{for(g=String(g);g.length<p;)g=" "+g;return g};console.info(`%c⏱ ${d(c,5)} /${d(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function Oh(e,t,n,r){var i,o;const a={...e._getDefaultColumnDef(),...t},s=a.accessorKey;let u=(i=(o=a.id)!=null?o:s?s.replace(".","_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:s&&(s.includes(".")?c=d=>{let g=d;for(const m of s.split(".")){var p;g=(p=g)==null?void 0:p[m]}return g}:c=d=>d[a.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:c,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:G(()=>[!0],()=>{var d;return[f,...(d=f.columns)==null?void 0:d.flatMap(g=>g.getFlatColumns())]},{key:"column.getFlatColumns",debug:()=>{var d;return(d=e.options.debugAll)!=null?d:e.options.debugColumns}}),getLeafColumns:G(()=>[e._getOrderColumnsFn()],d=>{var g;if((g=f.columns)!=null&&g.length){let p=f.columns.flatMap(m=>m.getLeafColumns());return d(p)}return[f]},{key:"column.getLeafColumns",debug:()=>{var d;return(d=e.options.debugAll)!=null?d:e.options.debugColumns}})};return f=e._features.reduce((d,g)=>Object.assign(d,g.createColumn==null?void 0:g.createColumn(f,e)),f),f}function $l(e,t,n){var r;let o={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],a=s=>{s.subHeaders&&s.subHeaders.length&&s.subHeaders.map(a),l.push(s)};return a(o),l},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach(l=>{Object.assign(o,l.createHeader==null?void 0:l.createHeader(o,e))}),o}const Vh={createTable:e=>({getHeaderGroups:G(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var o,l;const a=(o=r==null?void 0:r.map(f=>n.find(d=>d.id===f)).filter(Boolean))!=null?o:[],s=(l=i==null?void 0:i.map(f=>n.find(d=>d.id===f)).filter(Boolean))!=null?l:[],u=n.filter(f=>!(r!=null&&r.includes(f.id))&&!(i!=null&&i.includes(f.id)));return xn(t,[...a,...u,...s],e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterHeaderGroups:G(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>(n=n.filter(o=>!(r!=null&&r.includes(o.id))&&!(i!=null&&i.includes(o.id))),xn(t,n,e,"center")),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftHeaderGroups:G(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;const o=(i=r==null?void 0:r.map(l=>n.find(a=>a.id===l)).filter(Boolean))!=null?i:[];return xn(t,o,e,"left")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightHeaderGroups:G(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;const o=(i=r==null?void 0:r.map(l=>n.find(a=>a.id===l)).filter(Boolean))!=null?i:[];return xn(t,o,e,"right")},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFooterGroups:G(()=>[e.getHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFooterGroups:G(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFooterGroups:G(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFooterGroups:G(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getFlatHeaders:G(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftFlatHeaders:G(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterFlatHeaders:G(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightFlatHeaders:G(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getCenterLeafHeaders:G(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeftLeafHeaders:G(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getRightLeafHeaders:G(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}}),getLeafHeaders:G(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var i,o,l,a,s,u;return[...(i=(o=t[0])==null?void 0:o.headers)!=null?i:[],...(l=(a=n[0])==null?void 0:a.headers)!=null?l:[],...(s=(u=r[0])==null?void 0:u.headers)!=null?s:[]].map(c=>c.getLeafHeaders()).flat()},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugHeaders}})})};function xn(e,t,n,r){var i,o;let l=0;const a=function(d,g){g===void 0&&(g=1),l=Math.max(l,g),d.filter(p=>p.getIsVisible()).forEach(p=>{var m;(m=p.columns)!=null&&m.length&&a(p.columns,g+1)},0)};a(e);let s=[];const u=(d,g)=>{const p={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},m=[];d.forEach(_=>{const b=[...m].reverse()[0],w=_.column.depth===p.depth;let C,A=!1;if(w&&_.column.parent?C=_.column.parent:(C=_.column,A=!0),b&&(b==null?void 0:b.column)===C)b.subHeaders.push(_);else{const $=$l(n,C,{id:[r,g,C.id,_==null?void 0:_.id].filter(Boolean).join("_"),isPlaceholder:A,placeholderId:A?`${m.filter(E=>E.column===C).length}`:void 0,depth:g,index:m.length});$.subHeaders.push(_),m.push($)}p.headers.push(_),_.headerGroup=p}),s.push(p),g>0&&u(m,g-1)},c=t.map((d,g)=>$l(n,d,{depth:l,index:g}));u(c,l-1),s.reverse();const f=d=>d.filter(p=>p.column.getIsVisible()).map(p=>{let m=0,_=0,b=[0];p.subHeaders&&p.subHeaders.length?(b=[],f(p.subHeaders).forEach(C=>{let{colSpan:A,rowSpan:$}=C;m+=A,b.push($)})):m=1;const w=Math.min(...b);return _=_+w,p.colSpan=m,p.rowSpan=_,{colSpan:m,rowSpan:_}});return f((i=(o=s[0])==null?void 0:o.headers)!=null?i:[]),s}const Tn={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Vr=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),zh={getDefaultColumnDef:()=>Tn,getInitialState:e=>({columnSizing:{},columnSizingInfo:Vr(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",onColumnSizingChange:je("columnSizing",e),onColumnSizingInfoChange:je("columnSizingInfo",e)}),createColumn:(e,t)=>({getSize:()=>{var n,r,i;const o=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Tn.minSize,(r=o??e.columnDef.size)!=null?r:Tn.size),(i=e.columnDef.maxSize)!=null?i:Tn.maxSize)},getStart:n=>{const r=n?n==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns(),i=r.findIndex(o=>o.id===e.id);if(i>0){const o=r[i-1];return o.getStart(n)+o.getSize()}return 0},resetSize:()=>{t.setColumnSizing(n=>{let{[e.id]:r,...i}=n;return i})},getCanResize:()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},getIsResizing:()=>t.getState().columnSizingInfo.isResizingColumn===e.id}),createHeader:(e,t)=>({getSize:()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var o;n+=(o=i.column.getSize())!=null?o:0}};return r(e),n},getStart:()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},getResizeHandler:()=>{const n=t.getColumn(e.column.id),r=n==null?void 0:n.getCanResize();return i=>{if(!n||!r||(i.persist==null||i.persist(),zr(i)&&i.touches&&i.touches.length>1))return;const o=e.getSize(),l=e?e.getLeafHeaders().map(m=>[m.column.id,m.column.getSize()]):[[n.id,n.getSize()]],a=zr(i)?Math.round(i.touches[0].clientX):i.clientX,s={},u=(m,_)=>{typeof _=="number"&&(t.setColumnSizingInfo(b=>{var w,C;const A=_-((w=b==null?void 0:b.startOffset)!=null?w:0),$=Math.max(A/((C=b==null?void 0:b.startSize)!=null?C:0),-.999999);return b.columnSizingStart.forEach(E=>{let[S,k]=E;s[S]=Math.round(Math.max(k+k*$,0)*100)/100}),{...b,deltaOffset:A,deltaPercentage:$}}),(t.options.columnResizeMode==="onChange"||m==="end")&&t.setColumnSizing(b=>({...b,...s})))},c=m=>u("move",m),f=m=>{u("end",m),t.setColumnSizingInfo(_=>({..._,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},d={moveHandler:m=>c(m.clientX),upHandler:m=>{document.removeEventListener("mousemove",d.moveHandler),document.removeEventListener("mouseup",d.upHandler),f(m.clientX)}},g={moveHandler:m=>(m.cancelable&&(m.preventDefault(),m.stopPropagation()),c(m.touches[0].clientX),!1),upHandler:m=>{var _;document.removeEventListener("touchmove",g.moveHandler),document.removeEventListener("touchend",g.upHandler),m.cancelable&&(m.preventDefault(),m.stopPropagation()),f((_=m.touches[0])==null?void 0:_.clientX)}},p=Hh()?{passive:!1}:!1;zr(i)?(document.addEventListener("touchmove",g.moveHandler,p),document.addEventListener("touchend",g.upHandler,p)):(document.addEventListener("mousemove",d.moveHandler,p),document.addEventListener("mouseup",d.upHandler,p)),t.setColumnSizingInfo(m=>({...m,startOffset:a,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:n.id}))}}}),createTable:e=>({setColumnSizing:t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),setColumnSizingInfo:t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),resetColumnSizing:t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},resetHeaderSizeInfo:t=>{var n;e.setColumnSizingInfo(t?Vr():(n=e.initialState.columnSizingInfo)!=null?n:Vr())},getTotalSize:()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},getLeftTotalSize:()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},getCenterTotalSize:()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},getRightTotalSize:()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0}})};let On=null;function Hh(){if(typeof On=="boolean")return On;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return On=e,On}function zr(e){return e.type==="touchstart"}const Lh={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:je("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;return{_autoResetExpanded:()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},setExpanded:r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),toggleAllRowsExpanded:r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},resetExpanded:r=>{var i,o;e.setExpanded(r?{}:(i=(o=e.initialState)==null?void 0:o.expanded)!=null?i:{})},getCanSomeRowsExpand:()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),getToggleAllRowsExpandedHandler:()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},getIsSomeRowsExpanded:()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},getIsAllRowsExpanded:()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},getExpandedDepth:()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(o=>{const l=o.split(".");r=Math.max(r,l.length)}),r},getPreExpandedRowModel:()=>e.getSortedRowModel(),getExpandedRowModel:()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())}},createRow:(e,t)=>({toggleExpanded:n=>{t.setExpanded(r=>{var i;const o=r===!0?!0:!!(r!=null&&r[e.id]);let l={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(a=>{l[a]=!0}):l=r,n=(i=n)!=null?i:!o,!o&&n)return{...l,[e.id]:!0};if(o&&!n){const{[e.id]:a,...s}=l;return s}return r})},getIsExpanded:()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r!=null&&r[e.id])},getCanExpand:()=>{var n,r,i;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((i=e.subRows)!=null&&i.length)},getToggleExpandedHandler:()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}})},ga=(e,t,n)=>{var r,i,o;const l=n.toLowerCase();return!!(!((r=e.getValue(t))==null||(i=r.toString())==null||(o=i.toLowerCase())==null)&&o.includes(l))};ga.autoRemove=e=>Xe(e);const ha=(e,t,n)=>{var r,i;return!!(!((r=e.getValue(t))==null||(i=r.toString())==null)&&i.includes(n))};ha.autoRemove=e=>Xe(e);const pa=(e,t,n)=>{var r,i;return((r=e.getValue(t))==null||(i=r.toString())==null?void 0:i.toLowerCase())===(n==null?void 0:n.toLowerCase())};pa.autoRemove=e=>Xe(e);const ma=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};ma.autoRemove=e=>Xe(e)||!(e!=null&&e.length);const _a=(e,t,n)=>!n.some(r=>{var i;return!((i=e.getValue(t))!=null&&i.includes(r))});_a.autoRemove=e=>Xe(e)||!(e!=null&&e.length);const va=(e,t,n)=>n.some(r=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(r)});va.autoRemove=e=>Xe(e)||!(e!=null&&e.length);const ba=(e,t,n)=>e.getValue(t)===n;ba.autoRemove=e=>Xe(e);const wa=(e,t,n)=>e.getValue(t)==n;wa.autoRemove=e=>Xe(e);const Ei=(e,t,n)=>{let[r,i]=n;const o=e.getValue(t);return o>=r&&o<=i};Ei.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,i=typeof n!="number"?parseFloat(n):n,o=t===null||Number.isNaN(r)?-1/0:r,l=n===null||Number.isNaN(i)?1/0:i;if(o>l){const a=o;o=l,l=a}return[o,l]};Ei.autoRemove=e=>Xe(e)||Xe(e[0])&&Xe(e[1]);const it={includesString:ga,includesStringSensitive:ha,equalsString:pa,arrIncludes:ma,arrIncludesAll:_a,arrIncludesSome:va,equals:ba,weakEquals:wa,inNumberRange:Ei};function Xe(e){return e==null||e===""}const qh={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],globalFilter:void 0,...e}),getDefaultOptions:e=>({onColumnFiltersChange:je("columnFilters",e),onGlobalFilterChange:je("globalFilter",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100,globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n,r;const i=(n=e.getCoreRowModel().flatRows[0])==null||(r=n._getAllCellsByColumnId()[t.id])==null?void 0:r.getValue();return typeof i=="string"||typeof i=="number"}}),createColumn:(e,t)=>({getAutoFilterFn:()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);return typeof r=="string"?it.includesString:typeof r=="number"?it.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?it.equals:Array.isArray(r)?it.arrIncludes:it.weakEquals},getFilterFn:()=>{var n,r;return fr(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:it[e.columnDef.filterFn]},getCanFilter:()=>{var n,r,i;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},getCanGlobalFilter:()=>{var n,r,i,o;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((o=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?o:!0)&&!!e.accessorFn},getIsFiltered:()=>e.getFilterIndex()>-1,getFilterValue:()=>{var n,r;return(n=t.getState().columnFilters)==null||(r=n.find(i=>i.id===e.id))==null?void 0:r.value},getFilterIndex:()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},setFilterValue:n=>{t.setColumnFilters(r=>{const i=e.getFilterFn(),o=r==null?void 0:r.find(c=>c.id===e.id),l=pt(n,o?o.value:void 0);if(Rl(i,l,e)){var a;return(a=r==null?void 0:r.filter(c=>c.id!==e.id))!=null?a:[]}const s={id:e.id,value:l};if(o){var u;return(u=r==null?void 0:r.map(c=>c.id===e.id?s:c))!=null?u:[]}return r!=null&&r.length?[...r,s]:[s]})},_getFacetedRowModel:t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),getFacetedRowModel:()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),_getFacetedUniqueValues:t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),getFacetedUniqueValues:()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,_getFacetedMinMaxValues:t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),getFacetedMinMaxValues:()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}),createRow:(e,t)=>({columnFilters:{},columnFiltersMeta:{}}),createTable:e=>({getGlobalAutoFilterFn:()=>it.includesString,getGlobalFilterFn:()=>{var t,n;const{globalFilterFn:r}=e.options;return fr(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:it[r]},setColumnFilters:t=>{const n=e.getAllLeafColumns(),r=i=>{var o;return(o=pt(t,i))==null?void 0:o.filter(l=>{const a=n.find(s=>s.id===l.id);if(a){const s=a.getFilterFn();if(Rl(s,l.value,a))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},setGlobalFilter:t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},resetGlobalFilter:t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)},resetColumnFilters:t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},getPreFilteredRowModel:()=>e.getCoreRowModel(),getFilteredRowModel:()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel()),_getGlobalFacetedRowModel:e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),getGlobalFacetedRowModel:()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),_getGlobalFacetedUniqueValues:e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),getGlobalFacetedUniqueValues:()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,_getGlobalFacetedMinMaxValues:e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),getGlobalFacetedMinMaxValues:()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}})};function Rl(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Gh=(e,t,n)=>n.reduce((r,i)=>{const o=i.getValue(e);return r+(typeof o=="number"?o:0)},0),jh=(e,t,n)=>{let r;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}),r},Bh=(e,t,n)=>{let r;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}),r},Uh=(e,t,n)=>{let r,i;return n.forEach(o=>{const l=o.getValue(e);l!=null&&(r===void 0?l>=l&&(r=i=l):(r>l&&(r=l),i<l&&(i=l)))}),[r,i]},Wh=(e,t)=>{let n=0,r=0;if(t.forEach(i=>{let o=i.getValue(e);o!=null&&(o=+o)>=o&&(++n,r+=o)}),n)return r/n},Xh=(e,t)=>{if(!t.length)return;const n=t.map(o=>o.getValue(e));if(!xh(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((o,l)=>o-l);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},Yh=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),Qh=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Kh=(e,t)=>t.length,Hr={sum:Gh,min:jh,max:Bh,extent:Uh,mean:Wh,median:Xh,unique:Yh,uniqueCount:Qh,count:Kh},Jh={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:je("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>({toggleGrouping:()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},getCanGroup:()=>{var n,r,i,o;return(n=(r=(i=(o=e.columnDef.enableGrouping)!=null?o:!0)!=null?i:t.options.enableGrouping)!=null?r:!0)!=null?n:!!e.accessorFn},getIsGrouped:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},getGroupedIndex:()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},getToggleGroupingHandler:()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},getAutoAggregationFn:()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);if(typeof r=="number")return Hr.sum;if(Object.prototype.toString.call(r)==="[object Date]")return Hr.extent},getAggregationFn:()=>{var n,r;if(!e)throw new Error;return fr(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:Hr[e.columnDef.aggregationFn]}}),createTable:e=>({setGrouping:t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),resetGrouping:t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},getPreGroupedRowModel:()=>e.getFilteredRowModel(),getGroupedRowModel:()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())}),createRow:(e,t)=>({getIsGrouped:()=>!!e.groupingColumnId,getGroupingValue:n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},_groupingValuesCache:{}}),createCell:(e,t,n,r)=>({getIsGrouped:()=>t.getIsGrouped()&&t.id===n.groupingColumnId,getIsPlaceholder:()=>!e.getIsGrouped()&&t.getIsGrouped(),getIsAggregated:()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}})};function Zh(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(o=>!t.includes(o.id));return n==="remove"?r:[...t.map(o=>e.find(l=>l.id===o)).filter(Boolean),...r]}const ep={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:je("columnOrder",e)}),createTable:e=>({setColumnOrder:t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),resetColumnOrder:t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},_getOrderColumnsFn:G(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>i=>{let o=[];if(!(t!=null&&t.length))o=i;else{const l=[...t],a=[...i];for(;a.length&&l.length;){const s=l.shift(),u=a.findIndex(c=>c.id===s);u>-1&&o.push(a.splice(u,1)[0])}o=[...o,...a]}return Zh(o,n,r)},{key:!1})})},ui=0,ci=10,Lr=()=>({pageIndex:ui,pageSize:ci}),tp={getInitialState:e=>({...e,pagination:{...Lr(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:je("pagination",e)}),createTable:e=>{let t=!1,n=!1;return{_autoResetPageIndex:()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},setPagination:r=>{const i=o=>pt(r,o);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},resetPagination:r=>{var i;e.setPagination(r?Lr():(i=e.initialState.pagination)!=null?i:Lr())},setPageIndex:r=>{e.setPagination(i=>{let o=pt(r,i.pageIndex);const l=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,l)),{...i,pageIndex:o}})},resetPageIndex:r=>{var i,o,l;e.setPageIndex(r?ui:(i=(o=e.initialState)==null||(l=o.pagination)==null?void 0:l.pageIndex)!=null?i:ui)},resetPageSize:r=>{var i,o,l;e.setPageSize(r?ci:(i=(o=e.initialState)==null||(l=o.pagination)==null?void 0:l.pageSize)!=null?i:ci)},setPageSize:r=>{e.setPagination(i=>{const o=Math.max(1,pt(r,i.pageSize)),l=i.pageSize*i.pageIndex,a=Math.floor(l/o);return{...i,pageIndex:a,pageSize:o}})},setPageCount:r=>e.setPagination(i=>{var o;let l=pt(r,(o=e.options.pageCount)!=null?o:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...i,pageCount:l}}),getPageOptions:G(()=>[e.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((o,l)=>l)),i},{key:!1,debug:()=>{var r;return(r=e.options.debugAll)!=null?r:e.options.debugTable}}),getCanPreviousPage:()=>e.getState().pagination.pageIndex>0,getCanNextPage:()=>{const{pageIndex:r}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:r<i-1},previousPage:()=>e.setPageIndex(r=>r-1),nextPage:()=>e.setPageIndex(r=>r+1),getPrePaginationRowModel:()=>e.getExpandedRowModel(),getPaginationRowModel:()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),getPageCount:()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getPrePaginationRowModel().rows.length/e.getState().pagination.pageSize)}}}},qr=()=>({left:[],right:[]}),np={getInitialState:e=>({columnPinning:qr(),...e}),getDefaultOptions:e=>({onColumnPinningChange:je("columnPinning",e)}),createColumn:(e,t)=>({pin:n=>{const r=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var o,l;if(n==="right"){var a,s;return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((s=i==null?void 0:i.right)!=null?s:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(n==="left"){var u,c;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((o=i==null?void 0:i.left)!=null?o:[]).filter(f=>!(r!=null&&r.includes(f))),right:((l=i==null?void 0:i.right)!=null?l:[]).filter(f=>!(r!=null&&r.includes(f)))}})},getCanPin:()=>e.getLeafColumns().some(r=>{var i,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((o=t.options.enablePinning)!=null?o:!0)}),getIsPinned:()=>{const n=e.getLeafColumns().map(a=>a.id),{left:r,right:i}=t.getState().columnPinning,o=n.some(a=>r==null?void 0:r.includes(a)),l=n.some(a=>i==null?void 0:i.includes(a));return o?"left":l?"right":!1},getPinnedIndex:()=>{var n,r,i;const o=e.getIsPinned();return o?(n=(r=t.getState().columnPinning)==null||(i=r[o])==null?void 0:i.indexOf(e.id))!=null?n:-1:0}}),createRow:(e,t)=>({getCenterVisibleCells:G(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,i)=>{const o=[...r??[],...i??[]];return n.filter(l=>!o.includes(l.column.id))},{key:"row.getCenterVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getLeftVisibleCells:G(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,,],(n,r)=>(r??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),{key:"row.getLeftVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getRightVisibleCells:G(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),{key:"row.getRightVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>({setColumnPinning:t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),resetColumnPinning:t=>{var n,r;return e.setColumnPinning(t?qr():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:qr())},getIsSomeColumnsPinned:t=>{var n;const r=e.getState().columnPinning;if(!t){var i,o;return!!((i=r.left)!=null&&i.length||(o=r.right)!=null&&o.length)}return!!((n=r[t])!=null&&n.length)},getLeftLeafColumns:G(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getRightLeafColumns:G(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}}),getCenterLeafColumns:G(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const i=[...n??[],...r??[]];return t.filter(o=>!i.includes(o.id))},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugColumns}})})},rp={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:je("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>({setRowSelection:t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),resetRowSelection:t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},toggleAllRowsSelected:t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(o=>{o.getCanSelect()&&(r[o.id]=!0)}):i.forEach(o=>{delete r[o.id]}),r})},toggleAllPageRowsSelected:t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(o=>{fi(i,o.id,r,e)}),i}),getPreSelectedRowModel:()=>e.getCoreRowModel(),getSelectedRowModel:G(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Gr(e,n):{rows:[],flatRows:[],rowsById:{}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getFilteredSelectedRowModel:G(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Gr(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getFilteredSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getGroupedSelectedRowModel:G(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Gr(e,n):{rows:[],flatRows:[],rowsById:{}},{key:"getGroupedSelectedRowModel",debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable}}),getIsAllRowsSelected:()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},getIsAllPageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(i=>!n[i.id])&&(r=!1),r},getIsSomeRowsSelected:()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},getIsSomePageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},getToggleAllRowsSelectedHandler:()=>t=>{e.toggleAllRowsSelected(t.target.checked)},getToggleAllPageRowsSelectedHandler:()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}}),createRow:(e,t)=>({toggleSelected:n=>{const r=e.getIsSelected();t.setRowSelection(i=>{if(n=typeof n<"u"?n:!r,r===n)return i;const o={...i};return fi(o,e.id,n,t),o})},getIsSelected:()=>{const{rowSelection:n}=t.getState();return Mi(e,n)},getIsSomeSelected:()=>{const{rowSelection:n}=t.getState();return Al(e,n)==="some"},getIsAllSubRowsSelected:()=>{const{rowSelection:n}=t.getState();return Al(e,n)==="all"},getCanSelect:()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},getCanSelectSubRows:()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},getCanMultiSelect:()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},getToggleSelectedHandler:()=>{const n=e.getCanSelect();return r=>{var i;n&&e.toggleSelected((i=r.target)==null?void 0:i.checked)}}})},fi=(e,t,n,r)=>{var i;const o=r.getRow(t);n?(o.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),o.getCanSelect()&&(e[t]=!0)):delete e[t],(i=o.subRows)!=null&&i.length&&o.getCanSelectSubRows()&&o.subRows.forEach(l=>fi(e,l.id,n,r))};function Gr(e,t){const n=e.getState().rowSelection,r=[],i={},o=function(l,a){return l.map(s=>{var u;const c=Mi(s,n);if(c&&(r.push(s),i[s.id]=s),(u=s.subRows)!=null&&u.length&&(s={...s,subRows:o(s.subRows)}),c)return s}).filter(Boolean)};return{rows:o(t.rows),flatRows:r,rowsById:i}}function Mi(e,t){var n;return(n=t[e.id])!=null?n:!1}function Al(e,t,n){if(e.subRows&&e.subRows.length){let r=!0,i=!1;return e.subRows.forEach(o=>{i&&!r||(Mi(o,t)?i=!0:r=!1)}),r?"all":i?"some":!1}return!1}const di=/([0-9]+)/gm,ip=(e,t,n)=>ya(_t(e.getValue(n)).toLowerCase(),_t(t.getValue(n)).toLowerCase()),op=(e,t,n)=>ya(_t(e.getValue(n)),_t(t.getValue(n))),lp=(e,t,n)=>Fi(_t(e.getValue(n)).toLowerCase(),_t(t.getValue(n)).toLowerCase()),sp=(e,t,n)=>Fi(_t(e.getValue(n)),_t(t.getValue(n))),ap=(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},up=(e,t,n)=>Fi(e.getValue(n),t.getValue(n));function Fi(e,t){return e===t?0:e>t?1:-1}function _t(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function ya(e,t){const n=e.split(di).filter(Boolean),r=t.split(di).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),o=r.shift(),l=parseInt(i,10),a=parseInt(o,10),s=[l,a].sort();if(isNaN(s[0])){if(i>o)return 1;if(o>i)return-1;continue}if(isNaN(s[1]))return isNaN(l)?-1:1;if(l>a)return 1;if(a>l)return-1}return n.length-r.length}const Zt={alphanumeric:ip,alphanumericCaseSensitive:op,text:lp,textCaseSensitive:sp,datetime:ap,basic:up},cp={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:je("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>({getAutoSortingFn:()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const o=i==null?void 0:i.getValue(e.id);if(Object.prototype.toString.call(o)==="[object Date]")return Zt.datetime;if(typeof o=="string"&&(r=!0,o.split(di).length>1))return Zt.alphanumeric}return r?Zt.text:Zt.basic},getAutoSortDir:()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},getSortingFn:()=>{var n,r;if(!e)throw new Error;return fr(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:Zt[e.columnDef.sortingFn]},toggleSorting:(n,r)=>{const i=e.getNextSortingOrder(),o=typeof n<"u"&&n!==null;t.setSorting(l=>{const a=l==null?void 0:l.find(g=>g.id===e.id),s=l==null?void 0:l.findIndex(g=>g.id===e.id);let u=[],c,f=o?n:i==="desc";if(l!=null&&l.length&&e.getCanMultiSort()&&r?a?c="toggle":c="add":l!=null&&l.length&&s!==l.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(o||i||(c="remove")),c==="add"){var d;u=[...l,{id:e.id,desc:f}],u.splice(0,u.length-((d=t.options.maxMultiSortColCount)!=null?d:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=l.map(g=>g.id===e.id?{...g,desc:f}:g):c==="remove"?u=l.filter(g=>g.id!==e.id):u=[{id:e.id,desc:f}];return u})},getFirstSortDir:()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},getNextSortingOrder:n=>{var r,i;const o=e.getFirstSortDir(),l=e.getIsSorted();return l?l!==o&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(i=t.options.enableMultiRemove)!=null)||i)?!1:l==="desc"?"asc":"desc":o},getCanSort:()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},getCanMultiSort:()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},getIsSorted:()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(i=>i.id===e.id);return r?r.desc?"desc":"asc":!1},getSortIndex:()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},clearSorting:()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},getToggleSortingHandler:()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}}),createTable:e=>({setSorting:t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),resetSorting:t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},getPreSortedRowModel:()=>e.getGroupedRowModel(),getSortedRowModel:()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())})},fp={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:je("columnVisibility",e)}),createColumn:(e,t)=>({toggleVisibility:n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},getIsVisible:()=>{var n,r;return(n=(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},getCanHide:()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},getToggleVisibilityHandler:()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}}),createRow:(e,t)=>({_getAllVisibleCells:G(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),{key:"row._getAllVisibleCells",debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}}),getVisibleCells:G(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugRows}})}),createTable:e=>{const t=(n,r)=>G(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),{key:n,debug:()=>{var i;return(i=e.options.debugAll)!=null?i:e.options.debugColumns}});return{getVisibleFlatColumns:t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),getVisibleLeafColumns:t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),getLeftVisibleLeafColumns:t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),getRightVisibleLeafColumns:t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),getCenterVisibleLeafColumns:t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),setColumnVisibility:n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),resetColumnVisibility:n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},toggleAllColumnsVisible:n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,o)=>({...i,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},getIsAllColumnsVisible:()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),getIsSomeColumnsVisible:()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),getToggleAllColumnsVisibilityHandler:()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}}},El=[Vh,fp,ep,np,qh,cp,Jh,Lh,tp,rp,zh];function dp(e){var t;(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");let n={_features:El};const r=n._features.reduce((c,f)=>Object.assign(c,f.getDefaultOptions==null?void 0:f.getDefaultOptions(n)),{}),i=c=>n.options.mergeOptions?n.options.mergeOptions(r,c):{...r,...c};let l={...{},...(t=e.initialState)!=null?t:{}};n._features.forEach(c=>{var f;l=(f=c.getInitialState==null?void 0:c.getInitialState(l))!=null?f:l});const a=[];let s=!1;const u={_features:El,options:{...r,...e},initialState:l,_queue:c=>{a.push(c),s||(s=!0,Promise.resolve().then(()=>{for(;a.length;)a.shift()();s=!1}).catch(f=>setTimeout(()=>{throw f})))},reset:()=>{n.setState(n.initialState)},setOptions:c=>{const f=pt(c,n.options);n.options=i(f)},getState:()=>n.options.state,setState:c=>{n.options.onStateChange==null||n.options.onStateChange(c)},_getRowId:(c,f,d)=>{var g;return(g=n.options.getRowId==null?void 0:n.options.getRowId(c,f,d))!=null?g:`${d?[d.id,f].join("."):f}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:c=>{const f=n.getRowModel().rowsById[c];if(!f)throw new Error;return f},_getDefaultColumnDef:G(()=>[n.options.defaultColumn],c=>{var f;return c=(f=c)!=null?f:{},{header:d=>{const g=d.header.column.columnDef;return g.accessorKey?g.accessorKey:g.accessorFn?g.id:null},cell:d=>{var g,p;return(g=(p=d.renderValue())==null||p.toString==null?void 0:p.toString())!=null?g:null},...n._features.reduce((d,g)=>Object.assign(d,g.getDefaultColumnDef==null?void 0:g.getDefaultColumnDef()),{}),...c}},{debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns},key:!1}),_getColumnDefs:()=>n.options.columns,getAllColumns:G(()=>[n._getColumnDefs()],c=>{const f=function(d,g,p){return p===void 0&&(p=0),d.map(m=>{const _=Oh(n,m,p,g),b=m;return _.columns=b.columns?f(b.columns,_,p+1):[],_})};return f(c)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllFlatColumns:G(()=>[n.getAllColumns()],c=>c.flatMap(f=>f.getFlatColumns()),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),_getAllFlatColumnsById:G(()=>[n.getAllFlatColumns()],c=>c.reduce((f,d)=>(f[d.id]=d,f),{}),{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getAllLeafColumns:G(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(c,f)=>{let d=c.flatMap(g=>g.getLeafColumns());return f(d)},{key:!1,debug:()=>{var c;return(c=n.options.debugAll)!=null?c:n.options.debugColumns}}),getColumn:c=>n._getAllFlatColumnsById()[c]};return Object.assign(n,u),n._features.forEach(c=>Object.assign(n,c.createTable==null?void 0:c.createTable(n))),n}function gp(e,t,n,r){const i=()=>{var l;return(l=o.getValue())!=null?l:e.options.renderFallbackValue},o={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:i,getContext:G(()=>[e,n,t,o],(l,a,s,u)=>({table:l,column:a,row:s,cell:u,getValue:u.getValue,renderValue:u.renderValue}),{key:!1,debug:()=>e.options.debugAll})};return e._features.forEach(l=>{Object.assign(o,l.createCell==null?void 0:l.createCell(o,n,t,e))},{}),o}const Di=(e,t,n,r,i,o,l)=>{let a={id:t,index:r,original:n,depth:i,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:s=>{if(a._valuesCache.hasOwnProperty(s))return a._valuesCache[s];const u=e.getColumn(s);if(u!=null&&u.accessorFn)return a._valuesCache[s]=u.accessorFn(a.original,r),a._valuesCache[s]},getUniqueValues:s=>{if(a._uniqueValuesCache.hasOwnProperty(s))return a._uniqueValuesCache[s];const u=e.getColumn(s);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[s]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[s]):(a._uniqueValuesCache[s]=[a.getValue(s)],a._uniqueValuesCache[s])},renderValue:s=>{var u;return(u=a.getValue(s))!=null?u:e.options.renderFallbackValue},subRows:o??[],getLeafRows:()=>Th(a.subRows,s=>s.subRows),getParentRow:()=>a.parentId?e.getRow(a.parentId):void 0,getParentRows:()=>{let s=[],u=a;for(;;){const c=u.getParentRow();if(!c)break;s.push(c),u=c}return s.reverse()},getAllCells:G(()=>[e.getAllLeafColumns()],s=>s.map(u=>gp(e,a,u,u.id)),{key:!1,debug:()=>{var s;return(s=e.options.debugAll)!=null?s:e.options.debugRows}}),_getAllCellsByColumnId:G(()=>[a.getAllCells()],s=>s.reduce((u,c)=>(u[c.column.id]=c,u),{}),{key:"row.getAllCellsByColumnId",debug:()=>{var s;return(s=e.options.debugAll)!=null?s:e.options.debugRows}})};for(let s=0;s<e._features.length;s++){const u=e._features[s];Object.assign(a,u==null||u.createRow==null?void 0:u.createRow(a,e))}return a};function hp(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function Ml(){return e=>G(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,o,l){o===void 0&&(o=0);const a=[];for(let u=0;u<i.length;u++){const c=Di(e,e._getRowId(i[u],u,l),i[u],u,o,void 0,l==null?void 0:l.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,a.push(c),e.options.getSubRows){var s;c.originalSubRows=e.options.getSubRows(i[u],u),(s=c.originalSubRows)!=null&&s.length&&(c.subRows=r(c.originalSubRows,o+1,c))}}return a};return n.rows=r(t),n},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function Sa(e,t,n){return n.options.filterFromLeafRows?pp(e,t,n):mp(e,t,n)}function pp(e,t,n){var r;const i=[],o={},l=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(s,u){u===void 0&&(u=0);const c=[];for(let d=0;d<s.length;d++){var f;let g=s[d];const p=Di(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(p.columnFilters=g.columnFilters,(f=g.subRows)!=null&&f.length&&u<l){if(p.subRows=a(g.subRows,u+1),g=p,t(g)&&!p.subRows.length){c.push(g),o[g.id]=g,o[d]=g;continue}if(t(g)||p.subRows.length){c.push(g),o[g.id]=g,o[d]=g;continue}}else g=p,t(g)&&(c.push(g),o[g.id]=g,o[d]=g)}return c};return{rows:a(e),flatRows:i,rowsById:o}}function mp(e,t,n){var r;const i=[],o={},l=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(s,u){u===void 0&&(u=0);const c=[];for(let d=0;d<s.length;d++){let g=s[d];if(t(g)){var f;if((f=g.subRows)!=null&&f.length&&u<l){const m=Di(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);m.subRows=a(g.subRows,u+1),g=m}c.push(g),i.push(g),o[g.id]=g}}return c};return{rows:a(e),flatRows:i,rowsById:o}}function Fl(){return e=>G(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let d=0;d<t.flatRows.length;d++)t.flatRows[d].columnFilters={},t.flatRows[d].columnFiltersMeta={};return t}const i=[],o=[];(n??[]).forEach(d=>{var g;const p=e.getColumn(d.id);if(!p)return;const m=p.getFilterFn();m&&i.push({id:d.id,filterFn:m,resolvedValue:(g=m.resolveFilterValue==null?void 0:m.resolveFilterValue(d.value))!=null?g:d.value})});const l=n.map(d=>d.id),a=e.getGlobalFilterFn(),s=e.getAllLeafColumns().filter(d=>d.getCanGlobalFilter());r&&a&&s.length&&(l.push("__global__"),s.forEach(d=>{var g;o.push({id:d.id,filterFn:a,resolvedValue:(g=a.resolveFilterValue==null?void 0:a.resolveFilterValue(r))!=null?g:r})}));let u,c;for(let d=0;d<t.flatRows.length;d++){const g=t.flatRows[d];if(g.columnFilters={},i.length)for(let p=0;p<i.length;p++){u=i[p];const m=u.id;g.columnFilters[m]=u.filterFn(g,m,u.resolvedValue,_=>{g.columnFiltersMeta[m]=_})}if(o.length){for(let p=0;p<o.length;p++){c=o[p];const m=c.id;if(c.filterFn(g,m,c.resolvedValue,_=>{g.columnFiltersMeta[m]=_})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const f=d=>{for(let g=0;g<l.length;g++)if(d.columnFilters[l[g]]===!1)return!1;return!0};return Sa(t.rows,f,e)},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function Dl(){return(e,t)=>G(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,r,i)=>{if(!n.rows.length||!(r!=null&&r.length)&&!i)return n;const o=[...r.map(a=>a.id).filter(a=>a!==t),i?"__global__":void 0].filter(Boolean),l=a=>{for(let s=0;s<o.length;s++)if(a.columnFilters[o[s]]===!1)return!1;return!0};return Sa(n.rows,l,e)},{key:!1,debug:()=>{var n;return(n=e.options.debugAll)!=null?n:e.options.debugTable},onChange:()=>{}})}function Il(){return e=>G(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,i=[],o=r.filter(s=>{var u;return(u=e.getColumn(s.id))==null?void 0:u.getCanSort()}),l={};o.forEach(s=>{const u=e.getColumn(s.id);u&&(l[s.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const a=s=>{const u=[...s];return u.sort((c,f)=>{for(let g=0;g<o.length;g+=1){var d;const p=o[g],m=l[p.id],_=(d=p==null?void 0:p.desc)!=null?d:!1;let b=0;if(m.sortUndefined){const w=c.getValue(p.id),C=f.getValue(p.id),A=w===void 0,$=C===void 0;(A||$)&&(b=A&&$?0:A?m.sortUndefined:-m.sortUndefined)}if(b===0&&(b=m.sortingFn(c,f,p.id)),b!==0)return _&&(b*=-1),m.invertSorting&&(b*=-1),b}return c.index-f.index}),u.forEach(c=>{var f;i.push(c),(f=c.subRows)!=null&&f.length&&(c.subRows=a(c.subRows))}),u};return{rows:a(n.rows),flatRows:i,rowsById:n.rowsById}},{key:!1,debug:()=>{var t;return(t=e.options.debugAll)!=null?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}})}function _p(e){const t=[],n=r=>{var i;t.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function Nl(e){return t=>G(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:o}=n;let{rows:l,flatRows:a,rowsById:s}=r;const u=i*o,c=u+i;l=l.slice(u,c);let f;t.options.paginateExpandedRows?f={rows:l,flatRows:a,rowsById:s}:f=_p({rows:l,flatRows:a,rowsById:s}),f.flatRows=[];const d=g=>{f.flatRows.push(g),g.subRows.length&&g.subRows.forEach(d)};return f.rows.forEach(d),f},{key:!1,debug:()=>{var n;return(n=t.options.debugAll)!=null?n:t.options.debugTable}})}/**
 * svelte-table
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vp(e){let t;return{c(){t=z(e[0])},l(n){t=za(n,e[0])},m(n,r){xa(n,t,r)},p(n,[r]){r&1&&Q(t,n[0])},i:H,o:H,d(n){n&&x(t)}}}function bp(e,t,n){let{content:r}=t;return e.$$set=i=>{"content"in i&&n(0,r=i.content)},[r]}class wp extends ie{constructor(t){super(),se(this,t,bp,vp,re,{content:0})}}const yp=gs((e,t,n,r)=>`${tu(t.content)}`);var Sp=typeof document>"u"?yp:wp;function Cp(e,t,n){let r,i;return r=new t({props:n,$$inline:!0}),{c(){Z(r.$$.fragment)},l(o){ru(r.$$.fragment,o)},m(o,l){K(r,o,l),i=!0},p:H,i(o){i||(N(r.$$.fragment,o),i=!0)},o(o){V(r.$$.fragment,o),i=!1},d(o){J(r,o)}}}function kp(e,t){return class extends ie{constructor(r){super(),se(this,r,null,i=>Cp(i,e,t),re,{},void 0)}}}function $p(e,t){return gs((r,i,o,l)=>`${nu(e,"TableComponent").$$render(r,t,{},{})}`)}const gi=typeof window>"u"?$p:kp;function Rp(e){return typeof e=="object"&&typeof e.$$render=="function"&&typeof e.render=="function"}function Ap(e){var t,n;let r="__SVELTE_HMR"in window;return e.prototype instanceof ie||r&&((t=e.name)==null?void 0:t.startsWith("Proxy<"))&&((n=e.name)==null?void 0:n.endsWith(">"))}function Pl(e){return typeof document>"u"?Rp(e):Ap(e)}function xl(e){return gi(Sp,{content:e})}function dr(e,t){if(!e)return null;if(Pl(e))return gi(e,t);if(typeof e=="function"){const n=e(t);return n==null?null:Pl(n)?gi(n,t):xl(n)}return xl(e)}function Tl(e){let t;"subscribe"in e?t=e:t=Ur(e);let n={state:{},onStateChange:()=>{},renderFallbackValue:null,...Aa(t)},r=dp(n),i=ke(r.initialState),o=ou([i,t],a=>a);return Ur(r,function(s){const u=o.subscribe(c=>{let[f,d]=c;r.setOptions(g=>({...g,...d,state:{...f,...d.state},onStateChange:p=>{p instanceof Function?i.update(p):i.set(p),n.onStateChange==null||n.onStateChange(p)}})),s(r)});return function(){u()}})}/**
 * match-sorter-utils
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ca={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},Ep=Object.keys(Ca).join("|"),Mp=new RegExp(Ep,"g");function Fp(e){return e.replace(Mp,t=>Ca[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const Pe={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function Dp(e,t,n){var r;if(n=n||{},n.threshold=(r=n.threshold)!=null?r:Pe.MATCHES,!n.accessors){const l=Ol(e,t,n);return{rankedValue:e,rank:l,accessorIndex:-1,accessorThreshold:n.threshold,passed:l>=n.threshold}}const i=xp(e,n.accessors),o={rankedValue:e,rank:Pe.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let l=0;l<i.length;l++){const a=i[l];let s=Ol(a.itemValue,t,n);const{minRanking:u,maxRanking:c,threshold:f=n.threshold}=a.attributes;s<u&&s>=Pe.MATCHES?s=u:s>c&&(s=c),s=Math.min(s,c),s>=f&&s>o.rank&&(o.rank=s,o.passed=!0,o.accessorIndex=l,o.accessorThreshold=f,o.rankedValue=a.itemValue)}return o}function Ol(e,t,n){return e=Vl(e,n),t=Vl(t,n),t.length>e.length?Pe.NO_MATCH:e===t?Pe.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?Pe.EQUAL:e.startsWith(t)?Pe.STARTS_WITH:e.includes(` ${t}`)?Pe.WORD_STARTS_WITH:e.includes(t)?Pe.CONTAINS:t.length===1?Pe.NO_MATCH:Ip(e).includes(t)?Pe.ACRONYM:Np(e,t))}function Ip(e){let t="";return e.split(" ").forEach(r=>{r.split("-").forEach(o=>{t+=o.substr(0,1)})}),t}function Np(e,t){let n=0,r=0;function i(s,u,c){for(let f=c,d=u.length;f<d;f++)if(u[f]===s)return n+=1,f+1;return-1}function o(s){const u=1/s,c=n/t.length;return Pe.MATCHES+c*u}const l=i(t[0],e,0);if(l<0)return Pe.NO_MATCH;r=l;for(let s=1,u=t.length;s<u;s++){const c=t[s];if(r=i(c,e,r),!(r>-1))return Pe.NO_MATCH}const a=r-l;return o(a)}function Vl(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=Fp(e)),e}function Pp(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const r=n(e);return r==null?[]:Array.isArray(r)?r:[String(r)]}function xp(e,t){const n=[];for(let r=0,i=t.length;r<i;r++){const o=t[r],l=Tp(o),a=Pp(e,o);for(let s=0,u=a.length;s<u;s++)n.push({itemValue:a[s],attributes:l})}return n}const zl={maxRanking:1/0,minRanking:-1/0};function Tp(e){return typeof e=="function"?zl:{...zl,...e}}function Hl(e,t,n){const r=e.slice();return r[17]=t[n],r}function Ll(e,t,n){const r=e.slice();return r[20]=t[n],r}function ql(e,t,n){const r=e.slice();return r[23]=t[n],r}function Gl(e,t,n){const r=e.slice();return r[26]=t[n],r}function Op(e){let t,n,r,i,o=zp(e[26].column.getIsSorted())+"",l,a,s,u;var c=dr(e[26].column.columnDef.header,e[26].getContext());function f(d){return{}}return c&&(n=mt(c,f())),{c(){t=R("button"),n&&Z(n.$$.fragment),r=D(),i=R("span"),l=z(o),t.disabled=!e[26].column.getCanSort(),en(t,"is-disabled",!e[26].column.getCanSort())},m(d,g){T(d,t,g),n&&K(n,t,null),v(t,r),v(t,i),v(i,l),a=!0,s||(u=j(t,"click",e[26].column.getToggleSortingHandler()),s=!0)},p(d,g){if(e=d,c!==(c=dr(e[26].column.columnDef.header,e[26].getContext()))){if(n){ue();const p=n;V(p.$$.fragment,1,0,()=>{J(p,1)}),ce()}c?(n=mt(c,f()),Z(n.$$.fragment),N(n.$$.fragment,1),K(n,t,r)):n=null}},i(d){a||(n&&N(n.$$.fragment,d),a=!0)},o(d){n&&V(n.$$.fragment,d),a=!1},d(d){d&&x(t),n&&J(n),s=!1,u()}}}function jl(e){let t,n,r=!e[26].isPlaceholder&&Op(e);return{c(){t=R("th"),r&&r.c(),h(t,"colspan",e[26].colSpan),h(t,"class","svelte-16fb3tv")},m(i,o){T(i,t,o),r&&r.m(t,null),n=!0},p(i,o){i[26].isPlaceholder||r.p(i,o)},i(i){n||(N(r),n=!0)},o(i){V(r),n=!1},d(i){i&&x(t),r&&r.d()}}}function Bl(e){let t,n,r,i=e[23].headers,o=[];for(let a=0;a<i.length;a+=1)o[a]=jl(Gl(e,i,a));const l=a=>V(o[a],1,1,()=>{o[a]=null});return{c(){t=R("tr");for(let a=0;a<o.length;a+=1)o[a].c();n=D()},m(a,s){T(a,t,s);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null);v(t,n),r=!0},p(a,s){if(s&32){i=a[23].headers;let u;for(u=0;u<i.length;u+=1){const c=Gl(a,i,u);o[u]?(o[u].p(c,s),N(o[u],1)):(o[u]=jl(c),o[u].c(),N(o[u],1),o[u].m(t,n))}for(ue(),u=i.length;u<o.length;u+=1)l(u);ce()}},i(a){if(!r){for(let s=0;s<i.length;s+=1)N(o[s]);r=!0}},o(a){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)V(o[s]);r=!1},d(a){a&&x(t),ve(o,a)}}}function Ul(e,t){let n,r,i;var o=dr(t[20].column.columnDef.cell,t[20].getContext());function l(a){return{}}return o&&(r=mt(o,l())),{key:e,first:null,c(){n=R("td"),r&&Z(r.$$.fragment),h(n,"class","svelte-16fb3tv"),this.first=n},m(a,s){T(a,n,s),r&&K(r,n,null),i=!0},p(a,s){if(t=a,s&2&&o!==(o=dr(t[20].column.columnDef.cell,t[20].getContext()))){if(r){ue();const u=r;V(u.$$.fragment,1,0,()=>{J(u,1)}),ce()}o?(r=mt(o,l()),Z(r.$$.fragment),N(r.$$.fragment,1),K(r,n,null)):r=null}},i(a){i||(r&&N(r.$$.fragment,a),i=!0)},o(a){r&&V(r.$$.fragment,a),i=!1},d(a){a&&x(n),r&&J(r)}}}function Wl(e){let t,n=[],r=new Map,i,o,l=e[17].getVisibleCells();const a=s=>s[20].id;for(let s=0;s<l.length;s+=1){let u=Ll(e,l,s),c=a(u);r.set(c,n[s]=Ul(c,u))}return{c(){t=R("tr");for(let s=0;s<n.length;s+=1)n[s].c();i=D(),h(t,"class","svelte-16fb3tv")},m(s,u){T(s,t,u);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);v(t,i),o=!0},p(s,u){u&2&&(l=s[17].getVisibleCells(),ue(),n=Xt(n,u,a,1,s,l,r,t,cs,Ul,i,Ll),ce())},i(s){if(!o){for(let u=0;u<l.length;u+=1)N(n[u]);o=!0}},o(s){for(let u=0;u<n.length;u+=1)V(n[u]);o=!1},d(s){s&&x(t);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Vp(e){let t,n,r,i,o,l,a,s,u,c,f,d="<",g,p,m,_,b,w,C,A,$,E,S=" ",k,y,M=" ",I,F,P=e[1].getPageCount()+"",B,ge,oe,Ee=">",Me,ye,ae,ze,kn,vt=e[5],he=[];for(let W=0;W<vt.length;W+=1)he[W]=Bl(ql(e,vt,W));const ka=W=>V(he[W],1,1,()=>{he[W]=null});let bt=e[1].getRowModel().rows,pe=[];for(let W=0;W<bt.length;W+=1)pe[W]=Wl(Hl(e,bt,W));const $a=W=>V(pe[W],1,1,()=>{pe[W]=null});return{c(){t=R("div"),n=R("input"),r=D(),i=R("div"),o=R("table"),l=R("thead");for(let W=0;W<he.length;W+=1)he[W].c();a=D(),s=R("tbody");for(let W=0;W<pe.length;W+=1)pe[W].c();u=D(),c=R("div"),f=R("button"),g=z(d),m=D(),_=R("span"),_.textContent="Page",b=D(),w=R("input"),$=D(),E=R("span"),k=z(S),y=z("of"),I=z(M),F=D(),B=z(P),ge=D(),oe=R("button"),Me=z(Ee),h(n,"type","search"),h(n,"class","input"),h(n,"placeholder","Search..."),h(l,"class","svelte-16fb3tv"),h(s,"class","svelte-16fb3tv"),h(f,"class","button is-white svelte-16fb3tv"),f.disabled=p=!e[1].getCanPreviousPage(),en(f,"is-disabled",!e[1].getCanPreviousPage()),h(w,"type","number"),w.value=C=e[1].getState().pagination.pageIndex+1,h(w,"min",0),h(w,"max",A=e[1].getPageCount()-1),h(w,"class","mx-1 svelte-16fb3tv"),h(oe,"class","button is-white svelte-16fb3tv"),oe.disabled=ye=!e[1].getCanNextPage(),en(oe,"is-disabled",!e[1].getCanNextPage()),h(c,"class","is-flex is-align-items-center svelte-16fb3tv"),h(o,"class","table svelte-16fb3tv"),h(i,"class","table-container svelte-16fb3tv")},m(W,le){T(W,t,le),v(t,n),v(t,r),v(t,i),v(i,o),v(o,l);for(let Y=0;Y<he.length;Y+=1)he[Y]&&he[Y].m(l,null);v(o,a),v(o,s);for(let Y=0;Y<pe.length;Y+=1)pe[Y]&&pe[Y].m(s,null);v(o,u),v(o,c),v(c,f),v(f,g),v(c,m),v(c,_),v(c,b),v(c,w),v(c,$),v(c,E),v(E,k),v(E,y),v(E,I),v(E,F),v(E,B),v(c,ge),v(c,oe),v(oe,Me),ae=!0,ze||(kn=[j(n,"keyup",e[3]),j(n,"search",e[3]),j(f,"click",e[9]),j(w,"change",e[4]),j(oe,"click",e[10])],ze=!0)},p(W,[le]){if(le&32){vt=W[5];let Y;for(Y=0;Y<vt.length;Y+=1){const Yt=ql(W,vt,Y);he[Y]?(he[Y].p(Yt,le),N(he[Y],1)):(he[Y]=Bl(Yt),he[Y].c(),N(he[Y],1),he[Y].m(l,null))}for(ue(),Y=vt.length;Y<he.length;Y+=1)ka(Y);ce()}if(le&2){bt=W[1].getRowModel().rows;let Y;for(Y=0;Y<bt.length;Y+=1){const Yt=Hl(W,bt,Y);pe[Y]?(pe[Y].p(Yt,le),N(pe[Y],1)):(pe[Y]=Wl(Yt),pe[Y].c(),N(pe[Y],1),pe[Y].m(s,null))}for(ue(),Y=bt.length;Y<pe.length;Y+=1)$a(Y);ce()}(!ae||le&2&&p!==(p=!W[1].getCanPreviousPage()))&&(f.disabled=p),(!ae||le&2)&&en(f,"is-disabled",!W[1].getCanPreviousPage()),(!ae||le&2&&C!==(C=W[1].getState().pagination.pageIndex+1)&&w.value!==C)&&(w.value=C),(!ae||le&2&&A!==(A=W[1].getPageCount()-1))&&h(w,"max",A),(!ae||le&2)&&P!==(P=W[1].getPageCount()+"")&&Q(B,P),(!ae||le&2&&ye!==(ye=!W[1].getCanNextPage()))&&(oe.disabled=ye),(!ae||le&2)&&en(oe,"is-disabled",!W[1].getCanNextPage())},i(W){if(!ae){for(let le=0;le<vt.length;le+=1)N(he[le]);for(let le=0;le<bt.length;le+=1)N(pe[le]);ae=!0}},o(W){he=he.filter(Boolean);for(let le=0;le<he.length;le+=1)V(he[le]);pe=pe.filter(Boolean);for(let le=0;le<pe.length;le+=1)V(pe[le]);ae=!1},d(W){W&&x(t),ve(he,W),ve(pe,W),ze=!1,_e(kn)}}}function zp(e){return e?e==="asc"?"🔼":"🔽":""}function Hp(e,t,n){let r,i,o=H,l=()=>(o(),o=gr(b,$=>n(1,i=$)),b);ee(e,cr,$=>n(8,r=$)),e.$$.on_destroy.push(()=>o());const a=($,E,S,k)=>{if(console.log("yessir"),Array.isArray(S))return S.length===0?!0:S.includes($.getValue(E));typeof S=="number"&&(S=String(S));const y=Dp($.getValue(E),S);return k({itemRank:y}),y.passed},s=hp(),u=[s.accessor("file",{header:"File",cell:$=>$.getValue(),footer:$=>$.column.id}),s.accessor("size",{header:"Size",cell:$=>Kr($.getValue()),footer:$=>$.column.id}),s.accessor("type",{header:"Type",cell:$=>$.getValue(),footer:$=>$.column.id})];let c="",f=ke({data:r,columns:u,getCoreRowModel:Ml(),getSortedRowModel:Il(),getFilteredRowModel:Fl(),globalFilterFn:a,getFacetedRowModel:Dl(),getPaginationRowModel:Nl(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0});function d($){n(6,c=$),f.update(E=>({...E,state:{...E.state,globalFilter:$}}))}function g($){f.update(E=>{var S;return{...E,state:{...E.state,pagination:{...(S=E.state)==null?void 0:S.pagination,pageIndex:$}}}})}let p;function m($){clearTimeout(p),p=setTimeout(()=>{const E=$.target;d(E.value)},100)}function _($){const E=$.target;g(parseInt(E.value)-1)}let b=Tl(f);l();let w=i.getHeaderGroups();const C=()=>g(i.getState().pagination.pageIndex-1),A=()=>g(i.getState().pagination.pageIndex+1);return e.$$.update=()=>{e.$$.dirty&448&&(n(7,f={data:r,columns:u,getCoreRowModel:Ml(),getSortedRowModel:Il(),getFilteredRowModel:Fl(),globalFilterFn:a,getFacetedRowModel:Dl(),getPaginationRowModel:Nl(),state:{globalFilter:c,pagination:{pageSize:7,pageIndex:0}},enableGlobalFilter:!0}),l(n(0,b=Tl(ke(f)))))},[b,i,g,m,_,w,c,f,r,C,A]}class Lp extends ie{constructor(t){super(),se(this,t,Hp,Vp,re,{})}}function Xl(e){let t,n;return{c(){t=R("p"),n=z(e[3])},m(r,i){T(r,t,i),v(t,n)},p(r,i){i&8&&Q(n,r[3])},d(r){r&&x(t)}}}function Yl(e){let t;return{c(){t=R("p"),t.textContent="Data Successfully indexed!"},m(n,r){T(n,t,r)},d(n){n&&x(t)}}}function Ql(e){let t,n;return t=new Lp({}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function qp(e){let t,n,r,i,o,l,a,s,u,c,f,d,g,p,m,_,b,w,C,A,$,E,S,k=e[2]&&!e[1]&&Xl(e),y=e[1]&&Yl();C=new Ph({});let M=e[0]&&Ql();return{c(){t=R("div"),n=R("div"),r=R("div"),i=R("div"),o=R("h4"),o.textContent="Upload Data",l=D(),a=R("br"),s=D(),u=R("form"),c=R("input"),f=D(),k&&k.c(),d=D(),y&&y.c(),g=D(),p=R("p"),p.textContent="These are the files your model will use as context.",m=D(),_=R("p"),_.innerHTML="Currently <strong>pdf</strong>, txt, and md are supported.",b=D(),w=R("div"),Z(C.$$.fragment),A=D(),M&&M.c(),h(c,"type","file"),c.multiple=!0,h(i,"class","upload-box svelte-1lu6hos"),h(r,"class","upload-container svelte-1lu6hos"),h(n,"class","file-container svelte-1lu6hos"),h(w,"class","charts-container svelte-1lu6hos"),h(t,"class","data-grid svelte-1lu6hos")},m(I,F){T(I,t,F),v(t,n),v(n,r),v(r,i),v(i,o),v(i,l),v(i,a),v(i,s),v(i,u),v(u,c),v(i,f),k&&k.m(i,null),v(i,d),y&&y.m(i,null),v(i,g),v(i,p),v(i,m),v(i,_),v(t,b),v(t,w),K(C,w,null),v(w,A),M&&M.m(w,null),$=!0,E||(S=j(c,"change",e[4]),E=!0)},p(I,[F]){I[2]&&!I[1]?k?k.p(I,F):(k=Xl(I),k.c(),k.m(i,d)):k&&(k.d(1),k=null),I[1]?y||(y=Yl(),y.c(),y.m(i,g)):y&&(y.d(1),y=null),I[0]?M?F&1&&N(M,1):(M=Ql(),M.c(),N(M,1),M.m(w,null)):M&&(ue(),V(M,1,1,()=>{M=null}),ce())},i(I){$||(N(C.$$.fragment,I),N(M),$=!0)},o(I){V(C.$$.fragment,I),V(M),$=!1},d(I){I&&x(t),k&&k.d(),y&&y.d(),J(C),M&&M.d(),E=!1,S()}}}function Gp(e,t,n){let r,i,o;ee(e,Sl,p=>n(6,i=p)),ee(e,cr,p=>n(7,o=p));let l=[],a=!1,s=!1;async function u(p){n(0,l=p.target.files);const m=new FormData;for(let _=0;_<l.length;_++)m.append("files",l[_]);await fetch("/retrieval/file/upload",{method:"POST",body:m}),f(),c(),d()}async function c(){const _=(await(await fetch("/retrieval/file/get")).json()).files.map(b=>({file:b.name,size:b.size,type:b.type}));Oe(cr,o=[..._],o)}async function f(){console.log("index!"),n(2,s=!0),await(await fetch("/retrieval/vector_db/index",{method:"POST"})).json(),n(1,a=!0),n(2,s=!1)}async function d(){console.log("getting embeddings...");const m=await(await fetch("/retrieval/vector_db/get")).json();console.log("embeddingData",m),Oe(Sl,i=m,i)}ut(()=>{c()});let g=0;return setInterval(()=>{n(5,g=(g+1)%4)},200),e.$$.update=()=>{e.$$.dirty&32&&n(3,r="Indexing"+".".repeat(g))},[l,a,s,r,u,g]}class jp extends ie{constructor(t){super(),se(this,t,Gp,qp,re,{})}}function Bp(e){let t,n,r,i,o,l,a,s,u,c,f,d,g,p,m,_,b,w,C,A,$,E,S,k,y,M,I;return o=new js({}),s=new Bs({}),f=new zs({}),p=new Ls({props:{feedback:"Bad"}}),b=new Gs({}),A=new qs({}),M=new Hs({}),{c(){t=R("div"),n=R("div"),r=R("div"),i=R("div"),Z(o.$$.fragment),l=D(),a=R("div"),Z(s.$$.fragment),u=D(),c=R("div"),Z(f.$$.fragment),d=D(),g=R("div"),Z(p.$$.fragment),m=D(),_=R("div"),Z(b.$$.fragment),w=D(),C=R("div"),Z(A.$$.fragment),$=D(),E=R("div"),S=R("div"),S.innerHTML=`<div class="right-chart-1 svelte-14znspc"></div> 
      <div class="right-chart-2 svelte-14znspc"></div>`,k=D(),y=R("div"),Z(M.$$.fragment),h(i,"class","card-1 svelte-14znspc"),h(a,"class","card-2"),h(r,"class","left-text svelte-14znspc"),h(c,"class","left-confidence svelte-14znspc"),h(g,"class","left-question svelte-14znspc"),h(_,"class","left-filter svelte-14znspc"),h(C,"class","left-filter2"),h(n,"class","feedback-left svelte-14znspc"),h(S,"class","right-chart svelte-14znspc"),h(y,"class","right-table svelte-14znspc"),h(E,"class","feedback-right svelte-14znspc"),h(t,"class","feedback-container svelte-14znspc")},m(F,P){T(F,t,P),v(t,n),v(n,r),v(r,i),K(o,i,null),v(r,l),v(r,a),K(s,a,null),v(n,u),v(n,c),K(f,c,null),v(n,d),v(n,g),K(p,g,null),v(n,m),v(n,_),K(b,_,null),v(n,w),v(n,C),K(A,C,null),v(t,$),v(t,E),v(E,S),v(E,k),v(E,y),K(M,y,null),I=!0},p:H,i(F){I||(N(o.$$.fragment,F),N(s.$$.fragment,F),N(f.$$.fragment,F),N(p.$$.fragment,F),N(b.$$.fragment,F),N(A.$$.fragment,F),N(M.$$.fragment,F),I=!0)},o(F){V(o.$$.fragment,F),V(s.$$.fragment,F),V(f.$$.fragment,F),V(p.$$.fragment,F),V(b.$$.fragment,F),V(A.$$.fragment,F),V(M.$$.fragment,F),I=!1},d(F){F&&x(t),J(o),J(s),J(f),J(p),J(b),J(A),J(M)}}}function Up(e,t,n){let r;ee(e,pn,o=>n(0,r=o)),ut(()=>{console.log("FEEDBACK on mount"),i()});async function i(){const s=(await(await fetch("/chat/rag_table/retrieve")).json()).rows.map(u=>({id:u[0],question:u[1],answer:u[2],vote_status:u[4]}));Oe(pn,r=[...s],r)}return[]}class Wp extends ie{constructor(t){super(),se(this,t,Up,Bp,re,{})}}function Xp(e){let t,n;return t=new Us({}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function Yp(e){let t,n;return t=new Wp({}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function Qp(e){let t,n;return t=new Us({}),{c(){Z(t.$$.fragment)},m(r,i){K(t,r,i),n=!0},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){J(t,r)}}}function Kp(e){let t,n,r,i;const o=[Qp,Yp,Xp],l=[];function a(s,u){return s[0]==="vote"?0:s[0]==="rag"?1:2}return t=a(e),n=l[t]=o[t](e),{c(){n.c(),r=Ae()},m(s,u){l[t].m(s,u),T(s,r,u),i=!0},p(s,[u]){let c=t;t=a(s),t!==c&&(ue(),V(l[c],1,1,()=>{l[c]=null}),ce(),n=l[t],n||(n=l[t]=o[t](s),n.c()),N(n,1),n.m(r.parentNode,r))},i(s){i||(N(n),i=!0)},o(s){V(n),i=!1},d(s){l[t].d(s),s&&x(r)}}}function Jp(e,t,n){let{feedback:r}=t;return e.$$set=i=>{"feedback"in i&&n(0,r=i.feedback)},[r]}class Zp extends ie{constructor(t){super(),se(this,t,Jp,Kp,re,{feedback:0})}}function Kl(e,t,n){const r=e.slice();return r[7]=t[n],r}function Jl(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=Zl(Kl(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Ae()},m(i,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(i,o);T(i,t,o)},p(i,o){if(o&33){n=i[0];let l;for(l=0;l<n.length;l+=1){const a=Kl(i,n,l);r[l]?r[l].p(a,o):(r[l]=Zl(a),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){ve(r,i),i&&x(t)}}}function Zl(e){let t,n=e[7].svelte_component+"",r,i,o,l;function a(){return e[6](e[7])}return{c(){t=R("button"),r=z(n),h(t,"aria-label",i=`Load ${e[7].svelte_component} component`)},m(s,u){T(s,t,u),v(t,r),o||(l=j(t,"click",a),o=!0)},p(s,u){e=s,u&1&&n!==(n=e[7].svelte_component+"")&&Q(r,n),u&1&&i!==(i=`Load ${e[7].svelte_component} component`)&&h(t,"aria-label",i)},d(s){s&&x(t),o=!1,l()}}}function es(e){let t,n,r;const i=[e[1].props];var o=e[4][e[1].svelte_component];function l(a){let s={};for(let u=0;u<i.length;u+=1)s=Bn(s,i[u]);return{props:s}}return o&&(t=mt(o,l())),{c(){t&&Z(t.$$.fragment),n=Ae()},m(a,s){t&&K(t,a,s),T(a,n,s),r=!0},p(a,s){const u=s&2?fs(i,[ds(a[1].props)]):{};if(s&2&&o!==(o=a[4][a[1].svelte_component])){if(t){ue();const c=t;V(c.$$.fragment,1,0,()=>{J(c,1)}),ce()}o?(t=mt(o,l()),Z(t.$$.fragment),N(t.$$.fragment,1),K(t,n.parentNode,n)):t=null}else o&&t.$set(u)},i(a){r||(t&&N(t.$$.fragment,a),r=!0)},o(a){t&&V(t.$$.fragment,a),r=!1},d(a){a&&x(n),t&&J(t,a)}}}function em(e){let t,n,r,i=e[0].length>1&&Jl(e),o=e[1]&&es(e);return{c(){i&&i.c(),t=D(),o&&o.c(),n=Ae()},m(l,a){i&&i.m(l,a),T(l,t,a),o&&o.m(l,a),T(l,n,a),r=!0},p(l,[a]){l[0].length>1?i?i.p(l,a):(i=Jl(l),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),l[1]?o?(o.p(l,a),a&2&&N(o,1)):(o=es(l),o.c(),N(o,1),o.m(n.parentNode,n)):o&&(ue(),V(o,1,1,()=>{o=null}),ce())},i(l){r||(N(o),r=!0)},o(l){V(o),r=!1},d(l){i&&i.d(l),l&&x(t),o&&o.d(l),l&&x(n)}}}function tm(e,t,n){let r,i;const o=ke([]);ee(e,o,c=>n(0,r=c));const l=ke(null);ee(e,l,c=>n(1,i=c));const a={Chatbot:Pf,Dropdown:Of,Feedback:Zp,Compare:Kg,RetrievalQA:jp},s=c=>{l.set(c)};return fetch("/components").then(c=>{if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return c.json()}).then(c=>{o.set(c),l.set(c[0])}).catch(c=>{console.log("Fetch request failed",c)}),[r,i,o,l,a,s,c=>s(c)]}class nm extends ie{constructor(t){super(),se(this,t,tm,em,re,{})}}new nm({target:document.getElementById("app")});
